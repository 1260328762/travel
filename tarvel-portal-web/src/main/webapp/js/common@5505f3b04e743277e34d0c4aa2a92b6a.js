jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,o){jQuery.event.special[t]={delegateType:o,bindType:o,handle:function(t){var e,n=t.currentTarget,i=t.relatedTarget,r=t.handleObj;return i&&(i===n||jQuery.contains(n,i))||(t.type=r.origType,e=r.handler.apply(r.callObj||this,arguments),t.type=o),e}}}),function(jQuery){var quickIs=function(t,e){var n=t.attributes||{};return(!e[1]||t.nodeName.toLowerCase()===e[1])&&(!e[2]||(n.id||{}).value===e[2])&&(!e[3]||e[3].test((n["class"]||{}).value))},M;jQuery.event.dispatch=jQuery.event.handle=function(t){t=jQuery.event.fix(t||window.event);var e,n,i,r,o,s,a,l,c,u,h=(jQuery._data(this,"events")||{})[t.type]||[],p=h.delegateCount,d=[].slice.call(arguments,0),m=!t.exclusive&&!t.namespace,f=jQuery.event.special[t.type]||{},g=[];if((d[0]=t).delegateTarget=this,!f.preDispatch||!1!==f.preDispatch.call(this,t)){if(p&&(!t.button||"click"!==t.type))for((r=jQuery(this)).context=this.ownerDocument||this,i=t.target;i!=this;i=i.parentNode||this)if(!0!==i.disabled){for(s={},l=[],r[0]=i,e=0;e<p;e++)s[u=(c=h[e]).selector]===undefined&&(s[u]=c.quick?quickIs(i,c.quick):r.is(u)),s[u]&&l.push(c);l.length&&g.push({elem:i,matches:l})}for(h.length>p&&g.push({elem:this,matches:h.slice(p)}),e=0;e<g.length&&!t.isPropagationStopped();e++)for(a=g[e],t.currentTarget=a.elem,n=0;n<a.matches.length&&!t.isImmediatePropagationStopped();n++)c=a.matches[n],(m||!t.namespace&&!c.namespace||t.namespace_re&&t.namespace_re.test(c.namespace))&&(t.data=c.data,t.handleObj=c,o=((jQuery.event.special[c.origType]||{}).handle||c.handler).apply(c.callObj||a.elem,d),c.callOnce&&$.event.remove(this,t.type,c.handler),o!==undefined&&!1===(t.result=o)&&(t.preventDefault(),t.stopPropagation()));return f.postDispatch&&f.postDispatch.call(this,t),t.result}},$.style.unselectableStyle_=$.browser.mozilla?"MozUserSelect":$.browser.webkit?"WebkitUserSelect":null,$.style.setUnselectable=function(t,e,n){var i=n?null:t.getElementsByTagName("*"),r=$.style.unselectableStyle_;if(r){var o=e?"none":"";if(t.style[r]=o,i)for(var s=0;a=i[s];s++)a.style[r]=o}else if($.browser.msie||$.browser.opera){o=e?"on":"";if(t.setAttribute("unselectable",o),i){var a;for(s=0;a=i[s];s++)a.setAttribute("unselectable",o)}}},$.support.transition=(M=(document.body||document.documentElement).style,M.transition!==undefined||M.WebkitTransition!==undefined||M.MozTransition!==undefined||M.MsTransition!==undefined||M.OTransition!==undefined),$.now=function(){return+new Date},$.isNumber=$.isNumeric,$.isObject=function(t){var e=typeof t;return"object"==e&&null!=t||"function"==e},$.isString=function(t){return"string"==$.type(t)},$.event.Event=$.Event,$.event.listen=$.listen=function(t,e,n,i){var r=$.event.getListener(n,i);$.event.add(t,e,r)},$.event.getListener=function(t,e){return{handler:t,callObj:e,callOnce:!1,data:{}}},$.event.listenOnce=$.listenOnce=function(t,e,n,i){var r=$.event.getListener(n,i);r.callOnce=!0,$.event.add(t,e,r)},$.fn.listen=function(t,e,n,i){var r=$.event.getListener(e,n);return this.bind(t,i,r),this},$.event.unlisten=$.unlisten=function(t,e,n,i){$.event.remove(t,e,n)},$.fn.unlisten=function(t,e,n){return this.unbind(t,e),this},$.inherits=function(t,e){function n(){}n.prototype=e.prototype,t.superClass_=e.prototype,t.prototype=new n,t.prototype.constructor=t},$.provide=function(t){for(var e,n=t.split("."),i=window;n.length&&(e=n.shift());)i=i[e]?i[e]:i[e]={}},$.addSingletonGetter=function(t){t.getInstance=function(){return t.instance_||(t.instance_=new t)},t.instance_=null},$.htmlEscape=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;")},$.fn.role=function(t){return this.find('[mp-role="'+t+'"]')},$.role=function(t){return $('[mp-role="'+t+'"]')},$.string={},$.string.htmlEscape=$.htmlEscape,$.string.getUrlData=function(t,e){t=decodeURIComponent(t);var n=new RegExp(e+"\\=([^\\&]*)"),i=t.match(n);return i&&i[1]||""},$.string.searchStringToObject=function(t){for(var e,n={},i=t.split("&"),r=0,o=i.length;r<o;r++)(e=i[r].split("="))[1]&&(n[decodeURIComponent(e[0])]=decodeURIComponent(e[1]));return n},$.string.repeat=function(t,e){return new Array(e+1).join(t)},$.string.padNumber=function(t,e,n){var i="undefined"!=$.type(n)?t.toFixed(n):String(t),r=i.indexOf(".");return-1==r&&(r=i.length),$.string.repeat("0",Math.max(0,e-r))+i},$.string.unescapePureXmlEntities=function(t){return t.replace(/&([^;]+);/g,function(t,e){switch(e){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:if("#"==e.charAt(0)){var n=Number("0"+e.substr(1));if(!isNaN(n))return String.fromCharCode(n)}return t}})},$.provide("$.array"),$.array.indexOf=function(t,e){return $.inArray(e,t)},$.array.splice=function(t,e){return t.splice(e,1)},$.array.remove=function(t,e){var n,i=$.inArray(e,t);return(n=0<=i)&&t.splice(i,1),n},$.array.clear=function(t){if(!$.isArray(t))for(var e=t.length-1;0<=e;e--)delete t[e];t.length=0},$.array.clone=function(t){if($.isArray(t))return t.concat([]);for(var e=[],n=0,i=t.length;n<i;n++)e[n]=t[n];return e},$.array.equals=function(t,e){if(!t||!e||t.length!=e.length)return!1;for(var n=t.length;n--;)if(t[n]!=e[n])return!1;return!0},$.array.diff=function(t,e){for(var n,i=[],r=0;n=t[r];)$.inArray(n,e)||i.push(n),r++;for(r=0;n=e[r];)$.inArray(n,t)||i.push(n),r++;return i},$.array.differentiate=function(t,e){for(var n,i,r=$.array.clone(t),o=0;n=e[o];)-1<(i=$.array.indexOf(n))?r.splice(i,1):r.push(n),o++;return r},$.array.insertAt=function(t,e,n){t.splice(n,0,e)},$.array.concat=function(t){return Array.prototype.concat.apply(Array.prototype,arguments)},$.provide("$.object"),$.object.remove=function(t,e){var n;return(n=e in t)&&delete t[e],n},$.object.add=function(t,e,n){if(e in t)throw'The object already contains the key "'+e+'"';$.object.set(t,e,n)},$.object.get=function(t,e,n){return e in t?t[e]:n},$.object.set=function(t,e,n){t[e]=n},$.object.transpose=function(t){var e={};for(var n in t)e[t[n]]=n;return e},$.object.clone=function(t){var e={};for(var n in t)e[n]=t[n];return e},$.getCssName=function(t,e){return t+"-"+e},$.fn.role=function(t){return this.find('[mp-role="'+t+'"]')},$.role=function(t){return $('[mp-role="'+t+'"]')},$.fn.getRoleName=function(t){return this.attr("mp-role")},$.getLocal=function(t){try{if(window.localStorage&&window.localStorage[t])return window.localStorage[t]}catch(e){}},$.setLocal=function(t,e){try{window.localStorage&&(window.localStorage[t]=e)}catch(n){}},$.clearLocal=function(t){try{window.localStorage&&window.localStorage[t]&&window.localStorage.removeItem(t)}catch(e){}},jQuery.cookie=function(t,e,n){if(void 0===e){var i=null;if(document.cookie&&""!=document.cookie)for(var r=document.cookie.split(";"),o=0;o<r.length;o++){var s=jQuery.trim(r[o]);if(s.substring(0,t.length+1)==t+"="){i=decodeURIComponent(s.substring(t.length+1));break}}return i}n=n||{},null===e&&(e="",n.expires=-1);var a,l="";n.expires&&("number"==typeof n.expires||n.expires.toUTCString)&&("number"==typeof n.expires?(a=new Date).setTime(a.getTime()+24*n.expires*60*60*1e3):a=n.expires,l="; expires="+a.toUTCString());var c=n.path?"; path="+n.path:"",u=n.domain?"; domain="+n.domain:"",h=n.secure?"; secure":"";document.cookie=[t,"=",encodeURIComponent(e),l,c,u,h].join("")},"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return t<10?"0"+t:t}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(t){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(t){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,i,r,o,s,a=gap,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(l)){for(o=l.length,n=0;n<o;n+=1)s[n]=str(n,l)||"null";return r=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,r}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;n<o;n+=1)"string"==typeof rep[n]&&(r=str(i=rep[n],l))&&s.push(quote(i)+(gap?": ":":")+r);else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(r=str(i,l))&&s.push(quote(i)+(gap?": ":":")+r);return r=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,r}}"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var i;if(indent=gap="","number"==typeof n)for(i=0;i<n;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if((rep=e)&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(t,e){var n,i,r=t[e];if(r&&"object"==typeof r)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&((i=walk(r,n))!==undefined?r[n]=i:delete r[n]);return reviver.call(t,e,r)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),window.console||(window.console={},window.console.log=function(){})}(jQuery),function(r){var s=["map.baidu.com","api.map.baidu.com","ditu.google.cn","api.map.baidu.com","res.wx.qq.com","tagnt.qunar.com","search.piao.qunar.com","piao.qunar.com","touch.piao.qunar.com","q.qunarzz.com","qunarzz.com","s.qunarzz.com","ss.qunarzz.com","source.qunar.com","source.qunarzz.com","simg1.qunarzz.com","simg2.qunarzz.com","simg3.qunarzz.com","simg4.qunarzz.com","imgs.qunarzz.com","userimg.qunar.com","clk.qunar.com","bc.qunar.com","user.qunar.com","touch.qunar.com","m.qunar.com","img1.qunarzz.com"];function o(t,e,n){var i=new ticket.Click;t&&t.length&&i.dispatch((e||"")+"_domain_notwhitelist",{ty:"fe",url:n||window.location.href,value:t.join(",")})}function a(t){var e=[];if(t){var n=t.match(/"http:\/\/[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+/g);if(n)for(var i,r={},o=0,s=n.length;o<s;o++)(i=n[o].replace(/"http:\/\//,""))&&!r[i]&&(e.push(i),r[i]=!0)}return e}function l(t){for(var e=[],n=0,i=t.length;n<i;n++)-1==r.inArray(t[n],s)&&-1==r.inArray(t[n],e)&&e.push(t[n]);return e}function c(t){if(-1<t.indexOf("http:"))for(var e,n=0,i=s.length;n<i;n++)r=s[n],o=void 0,o=null,r&&(r=r.replace(/\./g,"\\."),o=new RegExp("(http:|https:)(//"+r+")","gi")),(e=o)&&(t=t.replace(e,"$2"));var r,o;return t}var t=r.ajax;r.ajax=function(i){return i.url=function(t){if(t)return o(l(a('"'+t)),"request"),t=c(t)}(i.url),r.each(["beforeSend","success","error","complete"],function(t,e){var n=i[e];n&&(i[e]=function(){try{return"success"!=e&&"error"!=e||(arguments[0]=function(t){if(t){var e=JSON.stringify(t);return o(l(a(e)),"response"),e=c(e),e=JSON.parse(e)}}(arguments[0])),n.apply(this,arguments)}catch(t){console.error(t)}})}),t.apply(this,arguments)}}(jQuery),$.Disposable=function(){},$.Disposable.prototype.disposed_=!1,$.Disposable.prototype.isDisposed=function(){return this.disposed_},$.Disposable.prototype.getDisposed=$.Disposable.prototype.isDisposed,$.Disposable.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},$.Disposable.prototype.disposeInternal=function(){},$.provide("$.event.EventTarget"),$.event.EventTarget=function(){$.Disposable.call(this)},$.inherits($.event.EventTarget,$.Disposable),$.event.EventTarget.prototype.listen=function(t,e,n){return $.event.listen(this,t,e,n),this},$.event.EventTarget.prototype.listenOnce=function(t,e,n){return $.event.listenOnce(this,t,fn_,n),this},$.event.EventTarget.prototype.unlisten=function(t,e){return $.event.remove(this,t,e),this},$.event.EventTarget.prototype.trigger=function(t,e){return $.event.trigger(t,e,this)},$.event.EventTarget.prototype.dispatch=function(t,e){return $.event.trigger(t,e,this)},$.event.EventTarget.prototype.dispatchEvent=function(t,e){return $.event.trigger(t,e,this)},$.event.EventTarget.prototype.parentNode,$.event.EventTarget.prototype.setParentEventTarget=function(t){this.parentNode=t},$.event.EventTarget.prototype.disposeInternal=function(){$.event.EventTarget.superClass_.disposeInternal.call(this),$.event.remove(this),this.parentNode=null},$.event.KeyCodes={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,PHANTOM:255},$.browser.mozilla&&($.event.KeyCodes.SEMICOLON=59,$.event.KeyCodes.EQUALS=61,$.event.KeyCodes.DASH=109),$.event.MouseButton=$.browser.msie?{LEFT:1,MIDDLE:4,RIGHT:2}:{LEFT:0,MIDDLE:1,RIGHT:2},window.ticket||(window.ticket={}),ticket.ORDERFORM_REFUND="/order/lastRefund.json",ticket.ORDERSUCCESS_SENDMES__URL="/order/sendSms.json",ticket.DETAIL_PAGE_URL="detail.htm",ticket.DETAIL_PAGE_VOTE_POST_URL="/sight/voteadd.json",ticket.DETAIL_PAGE_VOTE_GET_URL="/sight/votequery.json",ticket.DETAIL_PAGE_TICKET_INFO_GET_URL="/ticket/useinfo.json",ticket.DETAIL_PAGE_RECOMMEND="http://search.piao.qunar.com/recommend/detail/recommendSight.jsonp",ticket.DETAIL_PAGE_HOTELOTHER="http://tagnt.qunar.com/partner/detail/recommend.action",ticket.ACTIVITY_WENQUAN="/ticket/getRedPacketSights.json",ticket.ACTIVITY_WENQUAN_QIANG="/ticket/sendRedPacket.json",ticket.DETAIL_PAGE_IMG="/ticket/detail/getSightImage.json",ticket.AROUND_SIGHT="/aroundSight.json",ticket.LIST_SUBSIGHT_URL="http://search.piao.qunar.com/list/child/getChildSightById.jsonp",ticket.SEARCH_URL="list.json",ticket.SUGGESTION_URL="http://search.piao.qunar.com/sight/suggestWithId.jsonp",ticket.RESULT_RECOMMEND_URL="result/recommend.json",ticket.GET_SUBJECT_URL="subject.jsp",ticket.RECOMMEND_URL="/ticket/detail/recommend.json",ticket.RESULT_RECOMMEND_URL="/ticket/result/recommend.json",ticket.DETAIL_RECOMMEND_URL="/ticket/detail/recommend.json",ticket.LIST_RECOMMEND_URL="/ticket/list/recommend.json",ticket.DETAIL_NEWS_URL="/sight/news.json",ticket.DETAIL_VIEWS_URL="http://search.piao.qunar.com/recommend/history.jsonp",ticket.DETAIL_WEATHER_URL="/ticket/detail/getSightComfortList.json",ticket.ANALYSIS_URL="/trace.json",ticket.LIGHTDETAIL_BDYNAMIC_URL="/ticket/detailLight/getSalesData.json",ticket.LIGHTDETAIL_RECSIGHTS_URL="http://search.piao.qunar.com/recommend/detail/recommendSight.jsonp",ticket.QSIGHT_CORRECT_URL="//piao.qunar.com/channel/feedback/form.htm",ticket.COUNTRY_CODE_SUGGEST="/order/mobileCodeSuggest.json",ticket.COUNTRY_CODE_CHECK="/order/checkMobileCode.json",ticket.rewrite={},ticket.rewrite.rewriteDetail=function(t){return"detail_"+t+".html"},ticket.url={},ticket.url.getPageId=function(t){var e=t.match(/detail\_(\d*)\.html|id=([^\&\#]*)/);return e&&(e[1]||e[2])||0},ticket.url.getDetailPageId=function(){return ticket.url.getPageId(window.location.href)},ticket.url.getFrom=function(){var t=window.location.href.match(/from\=([^\&\#\?]*)/);return t&&t[1]||""},ticket.url.getParamFromUrl=function(t){var e=window.location.href;return ticket.url.getParam(e,t)},ticket.url.getParam=function(t,e){var n=new RegExp(e+"=([^&#?]*)"),i=t.match(n);return i&&i[1]||""},ticket.getUniId=function(){var t=$.cookie("QN57");return t||(t=(new Date).getTime().toString()+Math.random().toString(),$.cookie("QN57",t,{expires:365,path:"/",domain:".qunar.com"})),t},ticket.alert=function(t,e){if(!this.dialog_){var n=window.document;try{n=window.top.document}catch(i){}this.dialog_=new $.ui.Dialog(n),this.dialog_.render(n.body),this.dialog_.addButton($.ui.Dialog.ButtonKey.CANCEL,"确定")}this.dialog_.setCaption(t||"提示"),this.dialog_.setContent('<div class="dialog_err_msg"><i class="icon i_notes"></i><em class="msg">'+e+"</em></div>"),this.dialog_.show()},ticket.getResponseData=function(t){return t&&t.data&&t.data[0]?t.data[0]:null},$.provide("$.timer.TimeTrigger"),$.timer.TimeTrigger=function(t,e,n,i){this.setFunction(t,e),this.interval_=n,this.endless_=!!i,this.timerFn_=$.proxy(this.tick_,this)},$.timer.TimeTrigger.prototype.fn_=null,$.timer.TimeTrigger.prototype.callObj_=null,$.timer.TimeTrigger.prototype.timer_=null,$.timer.TimeTrigger.prototype.tick_=function(){this.fn_.call(this.callObj_),this.endless_||this.stop()},$.timer.TimeTrigger.prototype.setFunction=function(t,e){this.fn_=t,this.callObj_=e},$.timer.TimeTrigger.prototype.isActive=function(){return!!this.timer_},$.timer.TimeTrigger.prototype.start=function(t){this.timer_||(this.timer_=this.endless_?window.setInterval(this.timerFn_,this.interval_):window.setTimeout(this.timerFn_,this.interval_))},$.timer.TimeTrigger.prototype.stop=function(){this.timer_&&(window.clearTimeout(this.timer_),this.timer_=null)},ticket.Search=function(t){this.settings=t||{},this._defaultSuggestShow=!1,this._$searchClose=$("#search_close")},ticket.Search.prototype={suggest:null,params:{key:""},init:function(t){t.suggestList[0]&&(this.$suggestList=t.suggestList,this.$searchButton=t.searchButton,this.$searchInput=t.inputElement,this.$searchForm=t.searchForm,this.$searchCity=t.searchCity,this.$cityContainer=t.cityContainer,this.isFixed=t.isFixed,this.oversea=t.oversea,this.initTop=this.$searchForm.parent().offset().top,this.suggestVal="",this.$from=this.$searchForm.find("[name='from']"),this.settings&&this.settings.region&&(this.params.region=this.settings.region),this.initFromParam(),this.bindListener(),this.oversea?this.initPlaceholder():this.getGuideWords(),this.$searchInput.val()&&this._$searchClose.show(),this._initDefaultSuggest())},getGuideWords:function(){this.guideUrl="/api/word/suggest.json",this.region=ticket.url.getParamFromUrl("region")||"",$.ajax({url:this.guideUrl,data:{fromPage:1,type:3},dataType:"json",type:"get",cache:!1,success:this.handleGetGuideWordsSuccess,context:this})},handleGetGuideWordsSuccess:function(t){t.ret&&!$.isEmptyObject(t.data)&&t.data.displayHint&&(this.getGuideWordsStatus=!0,this.defalutSearchKeyword=t.data.keyword,this.$searchInput.attr("placeholder",t.data.displayHint)),this.initPlaceholder()},initPlaceholder:function(){if(this.placeholder=this.$searchInput.attr("placeholder"),this.placeholder){this.$searchInput.attr("placeholder",""),this.$searchInput.parent().css({position:"relative"});var t=this.$searchInput.position();this.$label=$("<label>").attr("for",this.$searchInput.attr("id")).css({position:"absolute",top:t.top,left:t.left+parseInt(this.$searchInput.css("paddingLeft"),10),display:""===this.$searchInput.val()?"":"none",fontSize:this.$searchInput.css("fontSize"),color:"#888",lineHeight:this.$searchInput.outerHeight()+"px"}).html(this.placeholder).appendTo(this.$searchInput.parent())}},initFromParam:function(){var t=window.location.pathname;this.from="mp_search","/"==t||-1<t.indexOf("index")?this.from="mps_search_suggest":-1<t.indexOf("ticket/list")?this.from="mpl_search_suggest":-1<t.indexOf("ticket/detail")?this.from="mpd_search_suggest":-1<t.indexOf("ticket/category")?this.from="mpc_search_suggest":-1<t.indexOf("ticket/topic/weekend")&&(this.from="mp_wk_search_suggest"),this.$from.val(this.from)},bindListener:function(){this.$searchButton.listen("click",this.handleSearchClick,this),this.$searchInput.listen("keydown",this.handleInputKeyDown,this),this.$searchInput.listen("keyup",this.handleInputKeyup,this),this.$searchInput.listen("focus",this.handleInputFocus,this),this.$searchInput.listen("blur",this.handleInputBlur,this),$.event.listen(this.getSuggest(),"search",this.handleSuggestClick,this),this._$searchClose.bind("click",$.proxy(this._handleCloseClick,this)),1==this.isFixed&&$(window).listen("scroll",this.handleFixedSearch,this)},handleSearchClick:function(t){t.preventDefault();var e=$.trim(this.$searchInput.val());if(e==this.$searchInput.attr("placeholder")&&(this.$searchInput.val(""),this.getGuideWordsStatus&&(this.$searchInput.val(this.defalutSearchKeyword),this.$label.hide())),this.suggestVal&&this.suggestVal.indexOf(!0)){var n=this.suggestVal.split(",")[3],i=this.suggestVal.split(",")[2],r=this.suggestVal.split(",")[0];if(("景区"==n||"景点"==n||"门店"==n)&&void 0!==i&&e==r)return t.preventDefault(),this.saveSearchWord(r),void(window.location.href="/ticket/detail_"+i+".html#from="+this.from)}this.saveSearchWord(this.$searchInput.val()),this.$searchForm.submit()},saveSearchWord:function(t){var e=$.cookie("QN63");t&&(e?(e=e.split("|"),$.array.remove(e,t),e.unshift(t),15<e.length&&(e=e.slice(0,15)),e=e.join("|")):e=t,$.cookie("QN63",e,{expires:30,path:"/"}),this.refreshWordHistory(e))},refreshWordHistory:function(t){},handleInputKeyDown:function(t){var e=null,n=this.getSuggest();if(38===t.keyCode){if(t.preventDefault(),null==n.info)return e=$.trim(this.$searchInput.val()),this.sendRequest(e),!0;e=n.hilightPrevious(),this.suggestVal=e,this.setFormValues(e)}else if(40===t.keyCode){if(t.preventDefault(),null==n.info)return e=$.trim(this.$searchInput.val()),this.sendRequest(e),!0;e=n.hilightNext(),this.suggestVal=e,this.setFormValues(e)}else 27==t.keyCode?(this.handleInputBlur(t),this.suggestVal=""):13===t.keyCode&&this.handleSearchClick(t)},handleInputKeyup:function(t){var e=$.trim(t.target.value),n=this.getSuggest();if(""==e)return this._$searchClose.hide(),this.changeParams(""),n&&n.hide(),this.getGuideWordsStatus&&this.$label&&this.$label.show(),this._showDefaultSuggest(!0),!0;this.getGuideWordsStatus&&this.$label&&this.$label.hide(),this._showDefaultSuggest(!1),13===t.keyCode?this.handleSearchClick(t):27!=t.keyCode&&(this._$searchClose.show(),(this.hasChange(e)||null==n.info)&&(this.setCity(""),this.changeParams(e),this.sendRequest(e)))},handleFixedSearch:function(t){var e=this.initTop,n=$.role("searchArea"),i=$(window).scrollTop();$.browser.msie&&$.browser.version<7?e<i?n.css({position:"absolute",top:$(window).scrollTop()+"px",zIndex:"100"}):n.css({position:"static"}):e<i?n.css({position:"fixed",top:"0",zIndex:"100"}):n.css({position:"static"})},_handleCloseClick:function(t){this._$searchClose.hide(),this.$searchInput.val("").focus()},handleSuggestClick:function(t){this.setFormValues(t.value);var e=t.value.split(",")[0],n=t.value.split(",")[3],i=t.value.split(",")[2];"景区"!=n&&"景点"!=n&&"门店"!=n||void 0===i?this.handleSearchClick(t):(this.saveSearchWord(e),window.location.href="/ticket/detail_"+i+".html#from="+this.from)},setCity:function(t){this.$searchCity.val(t)},setFormValues:function(t){var e=t.split(",");this.$searchInput.val(e[0]),this.changeParams(e[0]),this.setCity(e[1]||"")},handleInputFocus:function(t){this.$searchInput.parent().addClass("focus"),!this.getGuideWordsStatus&&this.$label&&this.$label.hide(),this.$searchInput.val()?this.sendRequest():this._showDefaultSuggest(!0)},handleInputBlur:function(t){this.$searchInput.parent().removeClass("focus"),this.getSuggest().hide(),this.$label&&""===this.$searchInput.val()&&this.$label.show()},sendRequest:function(t){$.ajax({url:this.settings.url,data:$.extend({},this.params,{key:t}),dataType:"jsonp",jsonp:"callback",type:"get"}).done($.proxy(this.handleSuggestCallback,this))},handleSuggestCallback:function(t){if(t&&t.data&&t.data.k&&t.data.s){var e=$.trim(this.$searchInput.val());e==t.data.k&&t.data.s.length&&this.getSuggest().refresh(t.data.s,e,t.data.v)}},hasChange:function(t){return this.params.key!==t},changeParams:function(t){this.params.key=t},getSuggest:function(){return this.suggest||(this.suggest=new ticket.Suggest,this.suggest.init(this.$suggestList,this.$searchInput)),this.suggest},_showDefaultSuggest:function(t){if(!this.oversea)if(t){if(this._defaultSuggestShow)return;this._$defaultSuggest.show(),this._defaultSuggestShow=!0}else{if(!this._defaultSuggestShow)return;this._$defaultSuggest.hide(),this._defaultSuggestShow=!1}},handleHotCitysGetSuccess:function(t){var e=(t=t.data||{regions:[],sights:[]}).regions,n=Math.min(e.length,10),i=t.sights,r=Math.min(i.length,15),o=['<div class="search_recommend" style="display: none;" id="defaultSuggest">','<p class="recommend_atten">可直接选择或输入 景点、主题、城市</p>'];o.push('<div class="recommend_list"><em>热门城市</em><p>');for(var s=0;s<n;s++){var a=e[s];o.push('<a href="'+encodeURI("/ticket/list.htm?keyword="+a.name+"&from="+this.from+"_c")+'" target="_blank" title="'+a.name+'">'+a.name+"</a>")}o.push("</p></div>"),o.push('<div class="recommend_list line_top"><em>热门景点</em><p>');for(s=0;s<r;s++){a=i[s];o.push('<a href="'+encodeURI("/ticket/detail_"+a.id+".html?from="+this.from+"_s")+'" target="_blank" title="'+a.name+'">'+a.name+"</a>")}o.push("</p></div>"),o.push("</div>"),this._$defaultSuggest=$(o.join("")),this._$defaultSuggest.bind("mousedown",function(){return!1}),$(document).listen("mousedown",function(t){"keyword"!=t.target.name&&this._showDefaultSuggest(!1)},this),this.$searchForm.append(this._$defaultSuggest)},_initDefaultSuggest:function(){$.ajax({data:{},dataType:"json",type:"post",url:"/search_suggest.json",success:this.handleHotCitysGetSuccess,context:this})}},ticket.Suggest=function(){},ticket.Suggest.prototype={key:null,init:function(t,e){this.$suggest=t,this.$searchInput=e,this.$suggest.listen("mousedown",this.handleMouseDown,this)},refresh:function(t,e,n){if(this.length=t.length,this.index=-1,this.currentItem=null,this.info=t,0<this.length){for(var i="<ul>",r=0;r<this.length;r++){var o=t[r].split(",");i="REGION"==o[3]?i+'<li data-test="'+(n||"")+'">搜索<span style="color:red;">'+o[0]+"</span>的全部景点</li>":"SUBJECT"==o[3]?i+'<li data-test="'+(n||"")+'">搜索'+(o[1]?'<span style="color:red;">'+o[1]+"</span>的":"")+'<span style="color:red;">'+o[0]+"</span></li>":i+'<li data-test="'+(n||"")+'">'+this.specialDeal(e,o[0])+'<span style="color:#999;">['+o[1]+"]</span></li>"}this.$suggest.html(i+"</ul>")}this.key=e,this.$suggest.show(),this.suggestList=this.$suggest.find("li"),this.initListener(),$.browser.msie&&$.browser.version<"9.0"&&this.$suggest.find("*").attr("unselectable","on")},specialDeal:function(t,e){for(var n=e.split(""),i=e.length,r="",o=0;o<i;o++)t.indexOf(n[o])<0?r+=n[o]:r=r+'<span class="keys">'+n[o]+"</span>";return r},hide:function(){this.$suggest.hide(),this.info=null},setIndex:function(t){this.index=t<0||t>this.length-1?-1:t},hilightPrevious:function(){var t=this.index;return-1<t?(this.setHilight(!1,t),this.setIndex(--t)):this.setIndex(this.length-1),-1<(t=this.index)&&this.setHilight(!0,t),this.getValue(t)},hilightNext:function(){var t=this.index;return-1<t&&this.setHilight(!1,t),this.setIndex(++t),-1<(t=this.index)&&this.setHilight(!0,t),this.getValue(t)},getValue:function(t){return-1<t?this.info[t]:this.key},setHilight:function(t,e){t?this.suggestList.eq(e).addClass("hover"):this.suggestList.eq(e).removeClass("hover")},hoverTo:function(t){this.setHilight(!1,this.index),this.setIndex(t),this.setHilight(!0,t)},initListener:function(){this.suggestList.listen("mouseover",this.handleHover,this),this.suggestList.listen("click",this.handlerClick,this)},handlerClick:function(t){$.event.trigger(new $.Event("search",{value:this.info[this.index]}),null,this);var e=$(t.currentTarget).attr("data-test");this.click_||(this.click_=new ticket.Click),e&&this.click_.dispatch("clk",{ty:"clk",abtest:e})},handleHover:function(t){var e=this.suggestList.index(t.currentTarget);this.hoverTo(e)},handleMouseDown:function(t){t.preventDefault()},setCurrentItem:function(t){this.currentItem=$(this.suggestList[t])}},ticket.util||(ticket.util={}),ticket.util.placeholder=function(){"placeholder"in document.createElement("input")||$("input:text[placeholder]").each(function(){var t=$.attr(this,"placeholder");""==this.value&&(this.value=t),$(this).focus(function(){this.value==t&&(this.value="")}).blur(function(){""==this.value&&(this.value=t)})})},function(h,t){var u,c=h.fn.domManip,p="_tmplitem",n=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,d={},m={},s={key:0,data:{}},f=0,g=0,o=[];function _(t,e,n,i){var r={data:i||0===i||!1===i?i:e?e.data:{},_wrap:e?e._wrap:null,tmpl:null,parent:e||null,nodes:[],calls:w,nest:C,wrap:E,html:k,update:S};return t&&h.extend(r,t,{nodes:[],parent:e}),n&&(r.tmpl=n,r._ctnt=r._ctnt||r.tmpl(h,r),r.key=++f,(o.length?m:d)[f]=r),r}function a(e,t,n){var r,i=n?h.map(n,function(t){return"string"==typeof t?e.key?t.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+p+'="'+e.key+'" $2'):t:a(t,e,t._ctnt)}):e;return t?i:((i=i.join("")).replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(t,e,n,i){y(r=h(n).get()),e&&(r=l(e).concat(r)),i&&(r=r.concat(l(i)))}),r||l(i))}function l(t){var e=document.createElement("div");return e.innerHTML=t,h.makeArray(e.childNodes)}function i(t){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+h.trim(t).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(t,e,n,i,r,o,s){var a,l,c,u=h.tmpl.tag[n];if(!u)throw"Unknown template tag: "+n;return a=u._default||[],o&&!/\w$/.test(r)&&(r+=o,o=""),r?(r=v(r),s=s?","+v(s)+")":o?")":"",l=o?-1<r.indexOf(".")?r+v(o):"("+r+").call($item"+s:r,c=o?l:"(typeof("+r+")==='function'?("+r+").call($item):("+r+"))"):c=l=a.$1||"null",i=v(i),"');"+u[e?"close":"open"].split("$notnull_1").join(r?"typeof("+r+")!=='undefined' && ("+r+")!=null":"true").split("$1a").join(c).split("$1").join(l).split("$2").join(i||a.$2||"")+"__.push('"})+"');}return __;")}function $(t,e){t._wrap=a(t,!0,h.isArray(e)?e:[n.test(e)?e:h(e).html()]).join("")}function v(t){return t?t.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function y(t){var e,n,i,r,o,a="_"+g,l={};for(i=0,r=t.length;i<r;i++)if(1===(e=t[i]).nodeType){for(o=(n=e.getElementsByTagName("*")).length-1;0<=o;o--)s(n[o]);s(e)}function s(t){var e,n,i,r,o=t;if(r=t.getAttribute(p)){for(;o.parentNode&&1===(o=o.parentNode).nodeType&&!(e=o.getAttribute(p)););e!==r&&(o=o.parentNode?11===o.nodeType?0:o.getAttribute(p)||0:0,(i=d[r])||((i=_(i=m[r],d[o]||m[o])).key=++f,d[f]=i),g&&s(r)),t.removeAttribute(p)}else g&&(i=h.data(t,"tmplItem"))&&(s(i.key),d[i.key]=i,o=(o=h.data(t.parentNode,"tmplItem"))?o.key:0);if(i){for(n=i;n&&n.key!=o;)n.nodes.push(t),n=n.parent;delete i._ctnt,delete i._wrap,h.data(t,"tmplItem",i)}function s(t){i=l[t+=a]=l[t]||_(i,d[i.parent.key+a]||i.parent)}}}function w(t,e,n,i){if(!t)return o.pop();o.push({_:t,tmpl:e,item:this,data:n,options:i})}function C(t,e,n){return h.tmpl(h.template(t),e,n,this)}function E(t,e){var n=t.options||{};return n.wrapped=e,h.tmpl(h.template(t.tmpl),t.data,n,t.item)}function k(t,i){var e=this._wrap;return h.map(h(h.isArray(e)?e.join(""):e).filter(t||"*"),function(t){return i?t.innerText||t.textContent:t.outerHTML||(e=t,(n=document.createElement("div")).appendChild(e.cloneNode(!0)),n.innerHTML);var e,n})}function S(){var t=this.nodes;h.tmpl(null,null,null,this).insertBefore(t[0]),h(t).remove()}h.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(l,c){h.fn[l]=function(t){var e,n,i,r,o=[],s=h(t),a=1===this.length&&this[0].parentNode;if(u=d||{},a&&11===a.nodeType&&1===a.childNodes.length&&1===s.length)s[c](this[0]),o=this;else{for(n=0,i=s.length;n<i;n++)e=(0<(g=n)?this.clone(!0):this).get(),h(s[n])[c](e),o=o.concat(e);g=0,o=this.pushStack(o,l,s.selector)}return r=u,u=null,h.tmpl.complete(r),o}}),h.fn.extend({tmpl:function(t,e,n){return h.tmpl(this[0],t,e,n)},tmplItem:function(){return h.tmplItem(this[0])},template:function(t){return h.template(t,this[0])},domManip:function(t,e,n,i){if(t[0]&&h.isArray(t[0])){for(var r,o=h.makeArray(arguments),s=t[0],a=s.length,l=0;l<a&&!(r=h.data(s[l++],"tmplItem")););r&&g&&(o[2]=function(t){h.tmpl.afterManip(this,t,n)}),c.apply(this,o)}else c.apply(this,arguments);return g=0,u||h.tmpl.complete(d),this}}),h.extend({tmpl:function(e,t,n,i){var r,o=!i;if(o)i=s,e=h.template[e]||h.template(null,e),m={};else if(!e)return e=i.tmpl,(d[i.key]=i).nodes=[],i.wrapped&&$(i,i.wrapped),h(a(i,null,i.tmpl(h,i)));return e?("function"==typeof t&&(t=t.call(i||{})),n&&n.wrapped&&$(n,n.wrapped),r=h.isArray(t)?h.map(t,function(t){return t?_(n,i,e,t):null}):[_(n,i,e,t)],o?h(a(i,null,r)):r):[]},tmplItem:function(t){var e;for(t instanceof h&&(t=t[0]);t&&1===t.nodeType&&!(e=h.data(t,"tmplItem"))&&(t=t.parentNode););return e||s},template:function(t,e){return e?("string"==typeof e?e=i(e):e instanceof h&&(e=e[0]||{}),e.nodeType&&(e=h.data(e,"tmpl")||h.data(e,"tmpl",i(e.innerHTML))),"string"==typeof t?h.template[t]=e:e):t?"string"!=typeof t?h.template(null,t):h.template[t]||h.template(null,n.test(t)?t:h(t)):null},encode:function(t){return(""+t).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}}),h.extend(h.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(t){d={}},afterManip:function(t,e,n){var i=11===e.nodeType?h.makeArray(e.childNodes):1===e.nodeType?[e]:[];n.call(t,e),y(i),g++}})}(jQuery),$.provide("$.ui.Component"),$.ui.Component=function(t){this.document_=t||window.document},$.inherits($.ui.Component,$.event.EventTarget),$.ui.Component.prototype.id_=null,$.ui.Component.prototype.element_=null,$.ui.Component.prototype.inDocument_=!1,$.ui.Component.prototype.children_=null,$.ui.Component.prototype.childIndex_=null,$.ui.Component.prototype.allowTextSelection_=!1,$.ui.Component.prototype.state_=0,$.ui.Component.prototype.document_=null,$.ui.Component.prototype.content_=null,$.ui.Component.prototype.visible_=!0,$.ui.Component.EventType={BEFORE_SHOW:"beforeshow",SHOW:"show",HIDE:"hide",DISABLE:"disable",ENABLE:"enable",HIGHLIGHT:"highlight",UNHIGHLIGHT:"unhighlight",ACTIVATE:"activate",DEACTIVATE:"deactivate",SELECT:"select",UNSELECT:"unselect",CHECK:"check",UNCHECK:"uncheck",FOCUS:"focus",BLUR:"blur",OPEN:"open",CLOSE:"close",ENTER:"enter",LEAVE:"leave",ACTION:"action",CHANGE:"change"},$.ui.Component.prototype.createElement=function(t){return $(t,this.document_)},$.ui.Component.prototype.createDom=function(){this.element_=this.createElement("<div>")},$.ui.Component.prototype.setElementInternal=function(t){this.element_=t},$.ui.Component.prototype.getContent=function(t){return this.content_},$.ui.Component.prototype.setContent=function(t){this.content_=t,this.setContentInternal(t)},$.ui.Component.prototype.setContentInternal=function(t){var e=this.getContentElement();e&&e.html(t)},$.ui.Component.State={ALL:255,DISABLED:1,HOVER:2,ACTIVE:4,SELECTED:8,CHECKED:16,FOCUSED:32,OPENED:64},$.ui.Component.prototype.hasState=function(t){return!!(this.state_&t)},$.ui.Component.prototype.setState=function(t,e){this.state_=e?this.state_|t:this.state_&~t},$.ui.Component.prototype.getId=function(){return this.id_||(this.id_=":"+$.guid++)},$.ui.Component.prototype.setId=function(t){this.parent_&&this.parent_.childIndex_&&($.object.remove(this.parent_.childIndex_,this.id_),$.object.add(this.parent_.childIndex_,t,this)),this.id_=t},$.ui.Component.prototype.getElement=function(){return this.element_},$.ui.Component.prototype.getContentElement=function(){return this.element_},$.ui.Component.prototype.enterDocument=function(){this.inDocument_=!0,this.forEachChild(function(t,e){!e.isInDocument()&&e.getElement()&&e.enterDocument()})},$.ui.Component.prototype.exitDocument=function(){this.inDocument_=!1,this.forEachChild(function(t,e){e.isInDocument()&&e.exitDocument()})},$.ui.Component.prototype.isInDocument=function(){return this.inDocument_},$.ui.Component.prototype.isAllowTextSelection=function(){return this.allowTextSelection_},$.ui.Component.prototype.setAllowTextSelection=function(t){this.allowTextSelection_=t;var e=this.getElement();e&&e.setUnselectable(t)},$.ui.Component.prototype.render=function(t){this.render_(t)},$.ui.Component.prototype.renderBefore=function(t){this.render_(t.parentNode||t.parent(),t)},$.ui.Component.prototype.render_=function(t,e){if(this.inDocument_)throw Error("ALREADY_RENDERED");this.element_||this.createDom(),this.element_.jquery?e?this.element_.insertBefore(e):t?this.element_.appendTo(t):this.element_.appendTo("body"):t?t.insertBefore(this.element_,e||null):document.body.appendChild(this.element_),this.parent_&&!this.parent_.isInDocument()||this.enterDocument()},$.ui.Component.prototype.createDom=function(){this.element_=$("<div>")},$.ui.Component.prototype.setParent=function(t){this.parent_=t,$.ui.Component.superClass_.setParentEventTarget.call(this,t)},$.ui.Component.prototype.getParent=function(){return this.parent_},$.ui.Component.prototype.addChild=function(t,e){this.addChildAt(t,this.getChildCount(),e)},$.ui.Component.prototype.getChildCount=function(){return this.children_?this.children_.length:0},$.ui.Component.prototype.indexOfChild=function(t){return this.children_&&t?$.array.indexOf(this.children_,t):-1},$.ui.Component.prototype.addChildAt=function(t,e,n){if(t.inDocument_&&(n||!this.inDocument_))throw Error("ALREADY_RENDERED");if(e<0||e>this.getChildCount())throw Error("CHILD_INDEX_OUT_OF_BOUNDS");(this.childIndex_&&this.children_||(this.childIndex_={},this.children_=[]),t.getParent()==this?($.object.set(this.childIndex_,t.getId(),t),$.array.remove(this.children_,t)):$.object.add(this.childIndex_,t.getId(),t),t.setParent(this),$.array.insertAt(this.children_,t,e),t.inDocument_&&this.inDocument_)?this.getContentElement().insertBefore(t.getElement(),this.getChildAt(e).getElement()||null):n?(this.element_||this.createDom(),this.renderChildAt(t,e)):this.inDocument_&&!t.inDocument_&&t.getElement()&&t.enterDocument()},$.ui.Component.prototype.renderChildAt=function(t,e){var n=this.getChildAt(e+1);t.render_(this.getContentElement(),n?n.getElement():null)},$.ui.Component.prototype.removeChild=function(t){if(t){$.object.remove(this.childIndex_,t.getId()),$.array.remove(this.children_,t),t.exitDocument(),t.setParent(null);var e=t.getElement();e&&(e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e))}},$.ui.Component.prototype.getChildAt=function(t){return this.children_&&this.children_[t]||null},$.ui.Component.prototype.getChild=function(t){return this.childIndex_&&t&&this.childIndex_[t]||null},$.ui.Component.prototype.removeChildAt=function(t){return this.removeChild(this.getChildAt(t))},$.ui.Component.prototype.hasChildren=function(){return!!this.children_&&0!=this.children_.length},$.ui.Component.prototype.removeChildren=function(t){for(;this.hasChildren();)this.removeChildAt(0)},$.ui.Component.prototype.forEachChild=function(t,e){var n=e||this;if(this.children_)for(var i=0,r=this.children_.length;i<r;i++)t.call(n,i,this.children_[i])},$.ui.Component.prototype.setVisible=function(t){this.visible_=t},$.ui.Component.prototype.isVisible=function(){return this.visible_},$.ui.Component.prototype.disposeInternal=function(){$.ui.Component.superClass_.disposeInternal.call(this),this.inDocument_&&this.exitDocument(),this.forEachChild(function(t,e){e.dispose()}),this.element_&&(this.element_.remove&&this.element_.remove()||this.element_.parentNode&&this.element_.parentNode.removeChild(this.element_)),this.children_=null,this.childIndex_=null,this.element_=null,this.parent_=null},function(){var a=function(){this.param={}};a.prototype.cookie=function(t,e,n){if(1<arguments.length&&"[object Object]"!==String(e)){if(n=n||{},null!==e&&e!==undefined||(n.expires=-1),"number"==typeof n.expires){var i=n.expires,r=n.expires=new Date;r.setDate(r.getDate()+i)}return e=String(e),document.cookie=[encodeURIComponent(t),"=",n.raw?e:encodeURIComponent(e),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"; path=/",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}var o,s=(n=e||{}).raw?function(t){return t}:decodeURIComponent;return(o=new RegExp("(?:^|; )"+encodeURIComponent(t)+"=([^;]*)").exec(document.cookie))?s(o[1]):null},a.prototype.add=function(t,e){null!=e&&(this.param[t]=e)},a.prototype.getHashString=function(t){var e=window.location.hash.toString(),n=new RegExp(t+"=([^&?]*)","ig");return e.match(n)?decodeURIComponent(e.match(n)[0].substr(t.length+1)):""},a.prototype.getQueryString=function(t){var e=window.location.search.toString(),n=new RegExp("\\b"+t+"=([^&?]*)","ig");return e.match(n)?decodeURIComponent(e.match(n)[0].substr(t.length+1)):""},a.prototype.send=function(){var t=this.get_location();(new Image).src=location.protocol+"//bc.qunar.com/"+t+"?"+this._collect_params();var e=new Image,n=$.cookie("QunarGlobal"),i=$.cookie("_q");e.src=ticket.ANALYSIS_URL+"?ty=bc&"+this._collect_params()+(n?"&qg="+n:"")+(i?"&nm="+i:"")},a.prototype._collect_params=function(){var t=[],e=this.param;for(var n in e)t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")},a.prototype.getDomain=function(t){return(t||"").replace(/^.+\.(.+?\..+)$/,"$1")},a.prototype.get_location=function(){return window._ba_utm_l?window._ba_utm_l:"e"},window.QNRGA?window.QNR_GA=a:window.QNRGA=a;var l=new a,c=!1;a.init=function(){if(!c){c=!0;var t=l.getDomain(document.domain),e=l.getHashString("in_track")||l.getQueryString("in_track"),n=l.getQueryString("bd_source")||l.getHashString("ex_track")||l.getQueryString("ex_track");e&&l.cookie("QN5",e,{path:"/",domain:t}),n&&l.cookie("QN6",n,{path:"/",domain:t});var i=window._ba_utm_init;if(i&&"function"==typeof i)try{i.apply(l,[a])}catch(s){}if(l.add("utmwv","0.1"),l.add("t",Math.random()),l.add("utmsr",screen.availWidth+"*"+screen.availHeight),l.add("utmr",document.referrer||"-1"),l.add("utmp",window.location.href.toString()),l.add("utmhn",window.location.host.toString()),l.add("s",window._ba_utm_s||null),window._ba_utm_ex){var r=window._ba_utm_ex;for(var o in r)l.add(o,r[o])}l.add("et",l.cookie("QN6")),l.add("it",l.cookie("QN5")),window._ba_utm_s&&(l.send(),l.sended=!0)}},ticket.Analysis=a,ticket.Analysis.getInstance=function(){return l}}(),ticket.Click=function(){},ticket.Click.prototype.attachEvents=function(){$("#searchForm").listen("click",this.handleSearchBtnClick,this),$("#hot-keywords").listen("click",this.handleHotKeywordsClick,this),$("body").on("click","[data-click]",$.proxy(this.handleDefaultClick,this)),$(document).listen("click",this.handleDocumentClick,this),this.timeStart=(new Date).getTime(),this.scrollStack=[],$(window).listen("scroll",this.handleWinScroll,this),$(window).listen("beforeunload",this.handleBeforeunload,this)},ticket.Click.prototype.addScrollParam=function(){var t=(new Date).getTime(),e=$(window),n=e.scrollTop(),i=e.scrollLeft(),r={w:e.width(),h:e.height(),tp:n,lt:i,tm:t,dur:t-this.timeStart,ty:"uaa"};this.dispatch("sc",r)},ticket.Click.prototype.handleWinScroll=function(t){this.scrollTimer_&&clearTimeout(this.scrollTimer_),this.scrollTimer_=setTimeout($.proxy(this.logScroll,this),500)},ticket.Click.prototype.handleBeforeunload=function(t){var e=(new Date).getTime(),n={d:this.scrollStack.join("_"),tm:e,dur:e-this.timeStart,ty:"uaa"};this.dispatch("uld",n)},ticket.Click.prototype.logScroll=function(t){this.scrollTimer_=null;var e=$(window).scrollTop(),n=(new Date).getTime();this.scrollStack.push(parseInt((n-this.timeStart)/100)),this.scrollStack.push(e),this.addScrollParam()},ticket.Click.prototype.handleDocumentClick=function(t){var e=$(t.target),n=t.clientX,i=t.clientY,r=$(window),o=r.scrollTop(),s=r.scrollLeft(),a={x:n,y:i+o,w:r.width(),h:r.height(),tp:o,lt:s,tm:(new Date).getTime()};e.attr("id")?a.id=e.attr("id"):e.parents("[id]")&&(a.parid=e.parents("[id]:first").attr("id")),e.is("a")&&(a.tit=e.text()),e.attr("class")&&(a.cls=e.attr("class")),a.ty="clk",a.url_current=encodeURIComponent(window.location.href),this.dispatch("hm",a)},ticket.Click.prototype.handleDefaultClick=function(t){this.dispatch($(t.currentTarget).data("click"),{ty:"clk",url_current:encodeURIComponent(window.location.href)})},ticket.Click.prototype.handleHotKeywordsClick=function(t){var e=$(t.target);"A"==t.target.nodeName&&this.dispatch("mps_search_keyword",{ty:"clk",value:encodeURIComponent(e.attr("title")||e.html()),url:e.attr("href")})},ticket.Click.prototype.handleClick=function(t){},ticket.Click.prototype.handleSearchBtnClick=function(t){var e=t.target;"searchBtn"==e.id?this.dispatch("mps_search",{ty:"clk",value:$("#searchValue").val()}):e.href&&-1<e.href.indexOf("from=mps_search_c")?this.dispatch("mps_search_c",{ty:"clk",value:e.innerHTML}):e.href&&-1<e.href.indexOf("from=mps_search_s")&&this.dispatch("mps_search_s",{ty:"clk",value:e.innerHTML})},ticket.Click.prototype.dispatch=function(t,e){if(window._ba_utm_s&&t){var n=new Image,i=e?$.extend({},e):{};i.s=window._ba_utm_s,i.a=t,i.t=Math.random();var r=$.cookie("QN57");r&&(i.uniid=r),e.ty&&"clk"==e.ty&&(i.url_current=encodeURIComponent(window.location.href));var o=$.cookie("QN58");o&&((o=o.split("|"))[2]=parseInt(o[2],10),o[2]&&(i.ts=o[0],i.idx=o[2]));var s=$.cookie("QunarGlobal");s&&(i.qg=s);var a=$.param(i);n.src=ticket.ANALYSIS_URL+"?"+a,(new Image).src=location.protocol+"//bc.qunar.com/clk?"+a}},$.provide("ticket.common.AutoInit"),ticket.common.AutoInit=function(){},ticket.common.AutoInit.prototype.init=function(){this.initPlaceHolder(),this.initGA()},ticket.common.AutoInit.prototype.initPlaceHolder=function(){},ticket.common.AutoInit.prototype.initGA=function(){window._ba_utm_ex||(window._ba_utm_ex={});var t=ticket.url.getFrom();t&&(window._ba_utm_ex.from=t);var e=(new Date).getTime(),n=$.cookie("QN58");n||(n=e+"|"+e+"|0",$.cookie("QN58",n,{expires:365,path:"/",domain:".qunar.com"}),window._ba_utm_ex.isnew=1);var i=ticket.getUniId();n=n.split("|"),window._ba_utm_ex.uniid=i,e>parseInt(n[1],10)+18e5?(n[2]=1,n[0]=e):n[2]=parseInt(n[2],10)+1,n[1]=e,window._ba_utm_ex.idx=n[2],window._ba_utm_ex.ts=n[0],window._ba_utm_ex.te=n[1],$.cookie("QN58",n.join("|"),{expires:365,path:"/",domain:".qunar.com"}),ticket.Analysis.init()},$(function(){(new ticket.common.AutoInit).init(),$(".qn_footer .links a:contains(酒店加盟)").after('<span>|</span><a href="//piao.qunar.com/help/join.htm?from=qunarfooter" target="_blank" rel="nofollow">门票加盟</a>')}),function(n,t){n.fn.lazyLoadIMG=function(t){return this.each(function(){(function(t){var e=n.extend({selector:"img",effect:"fadeIn",data_attribute:"original"},t||{});n(this).find(e.selector).each(function(){var t=n(this);n("<img/>").bind("load",function(){e.effect(t.attr("src",t.data(e.data_attribute)))}).attr("src",t.data(e.data_attribute))})}).call(this,t)}),this}}(jQuery),$.event.DragHandler=function(t){$.event.EventTarget.call(this),t&&this.attach(t)},$.inherits($.event.DragHandler,$.event.EventTarget),$.event.DragHandler.prototype.hysteresisDistanceSquared_=0,$.event.DragHandler.prototype.dragging_=!1,$.event.DragHandler.prototype.startX=0,$.event.DragHandler.prototype.startY=0,$.event.DragHandler.EventType={START:"start",BEFOREDRAG:"beforedrag",DRAG:"drag",END:"end"},$.event.DragHandler.HAS_SET_CAPTURE_=$.browser.msie,$.event.DragHandler.prototype.element_=null,$.event.DragHandler.prototype.attach=function(t){this.element_&&this.detach(),this.element_=t,$.listen(this.element_,"mousedown",this.handleMouseDown_,this)},$.event.DragHandler.prototype.detach=function(){$.unlisten(this.element_,"mousedown",this.handleMouseDown_),this.element_=null},$.event.DragHandler.prototype.handleMouseDown_=function(t){t.button==$.event.MouseButton.LEFT&&this.startDrag(t)},$.event.DragHandler.prototype.setupHandlers_=function(){if($.listen(document,"mousemove",this.onDrag_,this),$.listen(document,"mouseup",this.endDrag,this),$.event.DragHandler.HAS_SET_CAPTURE_){var t=document.documentElement;t.setCapture(!0),$.listen(t,"losecapture",this.endDrag,this)}else $.listen(window,"blur",this.endDrag,this)},$.event.DragHandler.prototype.isDragging=function(t){return this.dragging_},$.event.DragHandler.prototype.initDrag_=function(t){this.dragging_=!0,this.dispatch(new $.event.DragEvent($.event.DragHandler.EventType.START,t))},$.event.DragHandler.prototype.startDrag=function(t){this.setupHandlers_(),this.startX=t.clientX,this.startY=t.clientY,0==this.hysteresisDistanceSquared_&&this.initDrag_(t)},$.event.DragHandler.prototype.onDrag_=function(t){if(!this.dragging_){var e=this.startX-t.clientX,n=this.startY-t.clientY;e*e+n*n>this.hysteresisDistanceSquared_&&this.initDrag_(t)}this.dragging_&&this.dispatch(new $.event.DragEvent($.event.DragHandler.EventType.DRAG,t))},$.event.DragHandler.prototype.endDrag=function(t){$.event.DragHandler.HAS_SET_CAPTURE_?(document.releaseCapture(),$(document.documentElement).unlisten("losecapture")):$.unlisten(window,"blur",this.endSelect,this),$.unlisten(document,"mousemove",this.handleDocMouseMove_,this),$.unlisten(document,"mouseup",this.handleDocMouseUp_,this),this.dragging_&&(this.dragging_=!1,this.dispatch(new $.event.DragEvent($.event.DragHandler.EventType.END,t)))},$.event.DragEvent=function(t,e){return e.type=t,e};