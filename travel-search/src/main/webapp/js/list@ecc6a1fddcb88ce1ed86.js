webpackJsonp([44],{0:function(e,t,n){e.exports=n(923)},46:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;var r=function(e,t){function n(){}n.prototype=t.prototype;e.prototype=new n};window.XMap=function(e){this._map={};var t=0;if(e){var n=this._map;for(var r in e){var i=e[r];n[r]=i==null?NONE:i;t++}}this._size=t};(function(){var e={};XMap.prototype.get=function(t){var n=this._map[t];return n===e?null:n};XMap.prototype.put=function(t,n){var r=this._map[t];if(typeof r==="undefined")this._size++;if(n==null)n=e;this._map[t]=n;return r};XMap.prototype.keys=function(){var e=[];var t=this._map;for(var n in t)e.push(n);return e};XMap.prototype.contains=function(e){return this._map[e]!=null};XMap.prototype.remove=function(t){var n=this._map[t];if(n!=null)this._size--;if(n===e)n=null;delete this._map[t];return n};XMap.prototype.size=function(){return this._size};XMap.prototype.clear=function(){this._map={};this._size=0};XMap.prototype.toArray=function(){var t=this._map;var n=[];for(var r in t){v=t[r];if(v===e)v=null;n.push([r,v])}return n};XMap.prototype.toString=function(){var e=[];var t=this._map;for(var n in t){e.push(n+": "+t[n])}return e.join("\n")}})();window.Parameter=function(){XMap.call(this)};Parameter.parseURL=function(e,t){if(!t)t="?";if(e==null)return null;var n=e.indexOf(t);if(n!=-1)e=e.substring(n+1);e=e.replace(/\+/g,"%20");var r=new Parameter;if($.trim(e)=="")return r;var i=e.split("&");for(var s=0;s<i.length;s++){var o=i[s].split("=");try{r.addParameter(decodeURIComponent(o[0]),o[1]==null?"":decodeURIComponent(o[1]))}catch(u){}}return r};r(Parameter,XMap);Parameter.prototype.addParameter=function(e,t){var n=this.get(e);if(n==null)this.put(e,n=[]);n.push(t)};Parameter.prototype.setParameter=function(e,t){this.put(e,[t])};Parameter.prototype.getParameter=function(e){var t=this.get(e);return t==null?null:t[0]};Parameter.prototype.getParameterValues=function(e){var t=this.get(e);return t==null?[]:t};Parameter.prototype.getParameterNames=function(){return this.keys()};Parameter.prototype.toURL=function(){var e=[];var t=this.toArray();for(var n=0;n<t.length;n++){var r=t[n][1];for(var i=0;i<r.length;i++){e.push(encodeURIComponent(t[n][0])+"="+encodeURIComponent(r[i]))}}return e.join("&")};e.exports=Parameter},52:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;n(53);n(55);e.exports=common.filter.FilterForm},53:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;n(54)},54:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;(function(e){function f(e){e=e||{};var n=function(){return l(this,n,e,arguments)};var s={$constructor:n};r(a,function(t){u[t](n,e[t],t)});t(e,function(e,t){if(!u.hasOwnProperty(e))s[e]=t});i.call(n.prototype,s);return n}function l(e,t,n,i){var o=e;if(n.singleton)if(t.singleton)return t.singleton;else t.singleton=o;var u=t.mixins;r(u,function(e){var t=e.name,n=e.mixin,r=function(){return n.apply(this,i)},u;r.prototype=n.prototype;u=new r;if(t)s("mixins",o)[t]=u;else o.implement(u,true)});return o.initialize&&o.initialize.apply(o,i)||o}var t=function(e,t,n){for(var r in e)t.call(n,r,e[r])};var r=Array.prototype.forEach?function(e,t,n){return e.forEach(t,n)}:function(e,t,n){for(var r=0,i=e&&e.length||0;r<i;r++)t.call(n,e[r],r)};var i=function(e,n){var r=this;t(e,function(e,t){var i=r[e];if(i&&n===true)return;r[e]=t;if(typeof t==="function"){t.$name=e;t.$owner=this;if(i)t.$prev=i}})};var s=function(t,n){var i=n||e,s=t&&t.split(".")||[];r(s,function(e){if(e){i=i[e]||(i[e]={})}});return i};var o=function(e){};o.mixin=function(e,t){this.mixins.push({name:t,mixin:e});return this};o.implement=function(e,t){i.call(this.prototype,e,t);return this};o.prototype.implement=function(e,t){i.call(this,e,t);return this};o.prototype.parent=function(){var e=this.parent.caller,t=e.$prev;if(!t)throw new Error("can not call parent");else{return t.apply(this,arguments)}};var u={statics:function(e,n){t(n,function(t,n){e[t]=n})},extend:function(e,n){n=n||o;var r=e.prototype,i=n.prototype;t(n,function(t,n){if(!(t in e))e[t]=n});t(i,function(e,t){r[e]=t});var s=e.mixins=[];if(n.mixins)s.push.apply(s,n.mixins);e.superclass=r.superclass=n},mixins:function(e,t){if(t)r(t,function(t){if(typeof t==="function")e.mixin(t);else if(t.mixin)e.mixin(t.mixin,t.name)})}};var a=["statics","extend","mixins"];f.utils={objectEach:t,arrayEach:r,ns:s};f.define=function(e,t){if(e){var n=e.lastIndexOf(".");return s(n===-1?null:e.substr(0,n))[e.substr(n+1)]=new f(t)}else throw new Error("empty class name!")};e.QClass=f;if(typeof n==="function"&&n.amd)n("xclass",[],function(){return f})})(window)},55:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;QClass.define("common.filter.FilterForm",{initialize:function(e){this.lastClick=null;this.controls={};this.controlList=[];this.opts=e;this.container=this.opts.container;this.init()},init:function(){if(this.opts.controls){var e=this.opts.controls;for(var t in e){var n=e[t];n.form=this;n.name=t;this.controls[t]=new n.constructorName(n);this.controlList.push(this.controls[t]);this._bindControlListener(this.controls[t],n.listener||[])}}this.clearAllEl=this.opts.clearAllEl;this._bindEvent()},_bindEvent:function(){var e=this;this.clearAllEl.click(function(){e.clearAll();$(this).hide()})},_bindControlListener:function(e,t){var n=$(e),r=this;n.bind("change",function(t,n,i){r.change(n,i);if(i==="click"||i==="popupClicked"||i==="clear"){r.onChange(i,e.name)}}).bind("render",function(){r.noticeRender(e.name)});if(t){e.bindEvent(t)}},noticeRender:function(){$(this).triggerHandler("rendered",name)},onRender:function(e){$(this).triggerHandler("render",[this.getValues(),e])},onChange:function(e,t){$(this).triggerHandler("change",[this.getValues(),e,t||e])},clearAll:function(){for(var e in this.controls){try{this.controls[e].clear("clearAll")}catch(t){}}this.lastClick=null;this.onChange("clearAll");$(this).triggerHandler("clearAll")},updateClearAllState:function(e){if(e===true){$(this.clearAllEl).show()}else{$(this.clearAllEl).hide()}},getControl:function(e){return this.controls[e]},getControls:function(){return this.controls},getControlList:function(){return this.controlList},getValues:function(){var e={};for(var t in this.controls){e[t]=this.controls[t].getValue().value}return e},getValue:function(e){var t=this.controls[e];if(t){return t.getValue()}else{return null}},register:function(e){this.opts[e.name]=e;var t=!!this.controls[e.name];this.controls[e.name]=new e.constructorName(e);!t&&this.controlList.push(this.controls[e.name]);this._bindControlListener(this.controls[e.name],e.listener||[])},render:function(e,t){for(var n in e){if(this.controls[n]){this.controls[n].render(e[n])}}},change:function(e,t){this.lastClick=e},hide:function(){if(arguments.length===0){this.container.hide()}var e=arguments[0];for(var t=0,n=e.length;t<n;t++){var r=this.controls[e[t]];r.visible=false;r.hide()}},show:function(){if(arguments.length===0){this.container.show()}var e=arguments[0];for(var t=0,n=e.length;t<n;t++){var r=this.controls[e[t]];if(r.data.length>0){r.visible=true;r.show()}}},isFiltered:function(){var e=false;var t=this.getValues();for(var n in t){if(t[n].length>0){if(n!=="bigSorter"&&n!=="smallSorter"||t[n][0].value!=="default"){e=true;break}}}return e},has:function(e){return!!this.controls[e]}})},57:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;n(53);n(58);n(59);n(63);n(64);e.exports={UniqueFilter:common.filter.UniqueFilter,MultilayerFilter:common.filter.MultilayerFilter}},58:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;QClass.define("common.filter.IFilterPanel",{setData:function(e){},onChange:function(){},onRender:function(){},onClick:function(){},clear:function(){},hide:function(){},show:function(){},render:function(){},update:function(){},getItemByValue:function(){}})},59:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;n(60);var i=["<div></div>"];var s=1;var o=['<input id="{{id}}" hidefocus="on" {{&fieldsHTML}} data-key="{{key}}" title="{{title}}" {{#disabled}}disabled="disabled"{{/disabled}} {{#checked}}checked = "checked"{{/checked}}',' class="js_item" type="{{type}}" name="{{name}}" value="{{value}}" />','<label hidefocus="on" class="js_item" for="{{id}}">{{label}}</label>'];var u={contentTpl:['<div class="js_contentEl"></div>'],clearTpl:['<div class="js_clearEl">不限</div>'],moreTpl:['<div class="js_moreEl">更多</div>'],popupLayerTpl:['<div class="js_popupLayerEl"">{{&contentHTML}}</div>'],itemTpl:o,containerTpl:["<div>","{{&clearHTML}}","{{&contentHTML}}","{{&moreHTML}}","{{&popupHTML}}","</div>"],popupLayerGroupTpl:['<div class="js_popupGroup">{{group.title}}{{#children}}{{>popupLayerItemTpl}}{{/children}}</div>'],popupLayerItemTpl:o,clearCss:"selected",moreCss:"less"};var a=0;QClass.define("common.filter.FilterRender",{hasRendered:false,initialize:function(e){this.controller=e.controller;this.opts=$.extend({},u,e);this.type=e.canCancel?"checkbox":e.type;this.name=e.name;this.controlIndex=++s;this.hasFields=e.hasFields;this.container=e.container||$("<div/>");this.elements=["containerEl","clearEl","contentEl","moreEl","popupLayerEl","closePopupButtonEl"];this._initTemplate()},_initElements:function(){this.container.empty();var e=this.elements;var t={};for(var n=0,r=e.length;n<r;n++){var i=e[n];i=i.substr(0,i.length-2);if(this[i+"Tpl"]){t[i+"HTML"]=this[i+"Template"].render(this.opts)}}var s=this["containerTemplate"].render($.extend({},t,this.opts));this.container.append(s);for(var n=0;n<r;n++){this[e[n]]=this.container.find(".js_"+e[n])}},getElement:function(e){return this[e]},_initTemplate:function(){var e=this.opts;for(var t in e){if(t.indexOf("Tpl")!=-1){try{if(e[t].length>0){var n=t.replace("Tpl","Template");this[n]=new Q.Template(e[t]);this[t]=e[t]}}catch(r){}}}},render:function(e){if(!this.hasRendered){this._initElements();this._bindEvents();this.hasRendered=true}var t=new RegExp(".(jpg|png|gif|jpeg)$","i");var n=[],r=[];var i=e.length;var s=$(".promonite");if(this.opts.maxNumber&&i>this.opts.maxNumber){i=this.opts.maxNumber;this.moreEl.show()}else{this.moreEl.hide();if(this.popupLayerEl&&this.popupLayerEl.length&&!this.popupLayerEl.is(":hidden")){this.adjustwidthhide()}}for(var o=0;o<i;o++){n.push(this._renderOne(e[o]));if(this.name=="brand"&&e[o].has_promotion&&t.test(e[o].promotion_icon_url)){var u='<i class="icon_zhekou img'+(o+1)+'"  id="img'+e[o].id+'" style="background:url('+e[o].promotion_icon_url+') no-repeat"></i>';r.push(u)}}if(this.name=="brand"&&s){s.html(r.join(""))}this.contentEl.html(n.join(""));this.items=this.contentEl.find("input.js_item")},_getDataFields:function(e){var t=[];for(var n in e){if(n.indexOf("data-")===0){t.push(" "+n+'="'+e[n]+'" ')}}return t.join("")},_renderOne:function(e){var t="";try{e.id="filter_"+this.controlIndex+"_"+e.key;e.type=this.type;e.name=this.name+this.controlIndex;e.label=e.label||e.title;if(this.hasFields){var n=this._getDataFields(e);e.fieldsHTML=n}t=this.itemTemplate.render(e)}catch(r){}return t},hide:function(){this.container.hide()},show:function(){this.container.show()},_getMoreData:function(e){var t=this.opts.groups;var n=[];var r={};if(t&&t.length>0){for(var i=0,s=t.length;i<s;i++){var o=t[i].key;var u={group:t[i],children:[],count:0};r[o]=u;n.push(r[o])}}r["no_group"]={group:{key:"no_group",title:""},children:[],count:0};n.push(r["no_group"]);for(var i=0,s=e.length;i<s;i++){var a=e[i].group||"no_group";var f=r[a];e[i].id="filter_"+this.controlIndex+"_"+e[i].key+"_popup";e[i].type=this.type;e[i].name=this.name+this.controlIndex;e[i].label=e[i].label||e[i].title;e[i].index=f.count;if(f){f.children.push(e[i]);f.hasChildren=true}else{r["no_group"].list.push(e[i]);r["no_group"].hasChildren=true}f.count++}for(var i=0,s=n.length;i<s;i++){var l=n[i];for(var c=0,h=l.length;c<h;c++){l[c].count=l.count}}return n},showMore:function(e){this.hideMore();var t=e.slice(0);var n=this._getMoreData(e);var r=[];for(var i=0,s=n.length;i<s;i++){if(!n[i].children||n[i].children.length===0)continue;n[i].first=i===0;r.push(this.popupLayerGroupTemplate.render(n[i],{popupLayerItemTpl:this.popupLayerItemTpl.join("")}))}var o=this.popupLayerTemplate.render({contentHTML:r.join(""),list:n,hasList:n.length});this.popupLayerEl.html($(o).html());this.popupLayerEl.show();this.moreEl.addClass(this.opts.moreCss);this._bindCloseHidePopup()},_bindCloseHidePopup:function(){var e=this;var t=this.popupLayerEl;$(document).bind("click.filterCloseHidePopup",function(n){var r=n||window.event;var i=r.target||r.srcElement;if(!$.contains(t[0],i)){e.controller.more()}})},updateNoLimitState:function(e){if(e===true){this.clearEl.removeClass(this.opts.clearCss)}else{this.clearEl.addClass(this.opts.clearCss)}},updateMaxNum:function(e){this.opts.maxNumber=e},_unbindCloseHidePopup:function(){$(document).unbind("click.filterCloseHidePopup")},hideMore:function(){$(".js_popupLayerEl").hide();$(".js_moreEl").removeClass(this.opts.moreCss);this._unbindCloseHidePopup()},adjustwidthhide:function(){this.popupLayerEl.hide();this.moreEl.removeClass(this.opts.moreCss);this._unbindCloseHidePopup()},_bindEvents:function(){var e=this;var t=this.opts.selectedClass||"";this.container.delegate(this.opts.itemType||"input.js_item","change.filterRender",function(){function a(){e.lastClick=r;var t=n.prop("checked");var s=[e,r,t];if(i.indexOf("_popup")!=-1){s.push("popupClicked")}else{s.push("click")}s.push(n.val());e.controller.change.apply(e.controller,s)}var n=$(this);var r=n.data("key");var i=n.attr("id");var s=n.prop("checked");var o=n.closest("form");if(o.length===0){o=$(document.body)}if(e.type==="checkbox"){if(e.opts.canCancel){var u=o.find("input[type='checkbox'][name='"+n.attr("name")+"']");u.each(function(e,t){$(t).prop("checked",false)});n.prop("checked",s);t&&o.find(".js_item_container").removeClass(t)}t&&n.closest(".js_item_container").toggleClass(t,s)}else{if(t){o.find(".js_item_container").removeClass(t);n.closest(".js_item_container").toggleClass(t,s)}}a()});this.container.delegate(this.opts.itemType||"input.js_item","click.filterRender",function(){e.controller.onClick(e,$(this).data("key"),$(this).prop("checked"))});if(this.clearEl){this.clearEl.bind("click",function(t){t.stopPropagation();e.controller.clear()})}if(this.moreEl){this.moreEl.bind("click",function(t){e.controller.more();t.stopPropagation()})}this.container.delegate(".js_closePopupButtonEl","click",function(t){e.controller.more();t.stopPropagation()})}})},60:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;n(61);n(62)},61:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;(function(e){var t={};QClass.define("Q.Template",{initialize:function(e){e=!!e&&e.constructor==Array?e.join(""):e;if(t[e])return t[e];this.template=e;this.compiled=null;t[e]=this},compile:function(){return this},render:function(e,t){if(!this.compiled)this.compiled=Hogan.compile(this.template);return this.compiled.render(e,t)}})})(window)},62:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;(function(){var e=Q.Template;var t=QClass.define("Q.util.Renderable",{tpl:"",symbols:[],initialize:function(e){var n=this;this.id=t.id()},toHTML:function(){if(t.stack)t.stack.push(this);this.onBeforeRender();if(!this.tplData){this.tplData={}}this.tplData["me"]=this;this.tplData["id"]=this.id;return(new e(this.tpl)).render(this.tplData,this)},onBeforeRender:function(){},render:function(e,n){if(!e)return;var r=t.stack=[];if(n){var i=document.createElement("div");i.innerHTML=this.toHTML();while(i.firstChild)e.parentNode.insertBefore(i.firstChild,e);e.parentNode.removeChild(e);i=null}else{e.innerHTML=this.toHTML()}t.stack=null;r.reverse();QClass.utils.arrayEach(r,function(e){e.el=document.getElementById(e.id);QClass.utils.arrayEach(e.symbols,function(t){e[t]=document.getElementById(e.id+"-"+t)});e.onRender.call(e)});QClass.utils.arrayEach(r,function(e){e.onAfterRender()})},onRender:function(){},onAfterRender:function(){},statics:{idPrefix:"q-ra-",stack:null,idSequence:1,id:function(){return t.idPrefix+t.idSequence++}}})})()},63:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;var r=1;QClass.define("common.filter.UniqueFilter",{extend:common.filter.IFilterPanel,initialize:function(e){e.controller=this;this.data=[];this.originalData={};this.valueMap={};this.opts=e;this.weight=0;this.hasRender=false;this.name=e.name;this.type=e.type||"radio";this.hasSort=e.hasSort;this.container=e.container;this.visible="undefined"===typeof e.visible?true:e.visible;this.view=new common.filter.FilterRender(e);var t=this;this._bindEvent()},_bindEvent:function(){if(this.opts.events){this.bindEvent(this.opts.events)}},getElement:function(e){if(!e)return;return this.view.getElement(e)},bindEvent:function(e){if(e){var t=this;for(var n in e){(function(n){$(t).bind(n,function(){e[n].apply(t,arguments)})})(n)}}},_getKey:function(){return"uf_"+ ++r},setDefaultValue:function(e){if(e){this._defaultValue=e}},setData:function(e){var t=this;this.valueMap={};for(var n=0,r=e.length;n<r;n++){var i;if(!e[n].key){i=t._getKey(e[n]);e[n].key=i}else{i=e[n].key}e[n].order=n;if(typeof e[n].weight==="undefined"){e[n].weight=0}t.valueMap[e[n].value]=e[n]}this.originalData=this.data.slice(0);this.data=e;this.sortData();this._defaultValue=null;return e},getData:function(){return this.data},setMaxNum:function(e){this.opts.maxNumber=e},getMaxNum:function(){return this.opts.maxNumber},change:function(e,t,n,r,i){this.lastValue=this.getValue();if(this.type==="radio"){this.clearStatus()}var s=this.valueMap[i];if(!s)return;s.checked=n;if(n){s.weight=++this.weight}else{s.weight=0}if(r==="popupClicked"){this.onPopupClicked()}this.onChange(r);this.updateNoLimitState()},updateNoLimitState:function(){var e=this.getValue();if(e.value.length>0){this.view.updateNoLimitState(true)}else{this.view.updateNoLimitState(false)}},updateMaxNum:function(e){this.setMaxNum(e);this.view.updateMaxNum(e)},sortData:function(){if(!this.hasSort)return;this.data=this.data.sort(function(e,t){return t.weight-e.weight||e.order-t.order})},onPopupClicked:function(e){this.sortData();this.view.render(this.data);this.onRender()},onChange:function(e){$(this).triggerHandler("change",[this.getValue(),e])},onRender:function(){$(this).triggerHandler("render")},getLastValue:function(){return this.lastValue},hideMore:function(){this.view.hideMore()},getValue:function(){if(this._defaultValue){return{key:this.name,value:$.isArray(this._defaultValue)?this._defaultValue:[this._defaultValue]}}var e=[],t=this.data;for(var n=0,r=t.length;n<r;n++){if(t[n].checked){e.push(t[n])}}return{key:this.name,value:e}},setValue:function(e,t){var n=[],r=this.data;for(var i=0,s=r.length;i<s;i++){if(r[i].value===e){r[i].checked=t}}},clearStatus:function(){var e=this;var t=e.data;for(var n=0,r=t.length;n<r;n++){t[n].checked=false;t[n].weight=0}},clear:function(e){var t=this;this.clearStatus();if(this.hasSort){this.sortData()}this.render(this.data,true);if(e!==false){this.onChange(e||"clear")}this.updateNoLimitState()},hide:function(){this.view.hide()},show:function(){this.view.show()},_hasMore:false,more:function(){if(this.view.popupLayerEl.is(":hidden")){var e=this._hasMore?this.data.sort(function(e,t){return e.order-t.order}):this.data;this.view.showMore(this.data);this.onRender();$(this).triggerHandler("showMore");this._hasMore=true}else{this.view.hideMore();$(this).triggerHandler("hideMore")}},render:function(e,t){this.setData(e);if(this.data&&this.data.length===0){this.view.hide();return}this.view.render(this.data);if(this.visible||t){this.show()}else{this.hide()}this.data.length>0&&(this.hasRender=true);this.onRender();this.updateNoLimitState()},getItemByValue:function(e){var t=this.data;for(var n=0,r=t.length;n<r;n++){if(t[n].value===e){return t[n]}}},getItemByTitle:function(e){var t=this.data;for(var n=0,r=t.length;n<r;n++){if(t[n].title===e){return t[n]}}},setSelectedByTitle:function(e,t){var n=this.data;var r;for(var i=0,s=n.length;i<s;i++){if(n[i].title===e){r=n[i];if(!r.checked){if(this.type==="radio"||t){this.clearStatus()}r.checked=true;this.render(this.data)}break}}},setSelected:function(e,t){var n=this.data;if(this.type==="radio"){this.clearStatus()}var r=this.valueMap[e];if(r&&!r.checked){if(this.type==="radio"||t){this.clearStatus()}r.checked=true;this.render(this.data,true)}},refresh:function(){this.render(this.data)},reset:function(){var e=this.data;var t=e[0].value;if(this.type==="radio"){this.clearStatus()}var n=this.valueMap[t];if(n){n.checked=true}},hideEl:function(e){var t=this.view[e+"El"];t&&t.hide()},showEl:function(e){var t=this.view[e+"El"];t&&t.show()}})},64:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;var r=1;QClass.define("common.filter.MultilayerFilter",{extend:common.filter.IFilterPanel,initialize:function(e){e.controller=this;this.dataMap={};this.originalData={};this.views=[];this.viewsMap={};this.data=[];this.name=e.name;this.opts=e;this.type=e.type;this._value=[];this.defaultExpend=[];this.container=e.container;this.visible="undefined"===typeof e.visible?true:e.visible;this._initControls(e);this.level=e.controls.length;this.data=new Array(this.level)},_initControls:function(){var e=this.opts,t=e.controls,n=this;for(var r=0,i=t.length;r<i;r++){var s=t[r];s.name=e.name+r;s.controller=this;s.level=r;if(r+1===i){s.type=t[r].type||"radio"}else{s.type="radio"}this.defaultExpend[r]=s.expend||false;this.views.push(new common.filter.FilterRender(s));if(!s.container){this.container.append(this.views[r].container)}this.viewsMap[s.name]=this.views[r]}},onClick:function(e,t,n){if(e.opts.level===0){var r=this.dataMap[0][t];r.checked=n;if(!r)return;$(this).triggerHandler("topTagClick",[this,t,r])}},_getKey:function(){return"mf_"+ ++r},getDataByLevel:function(e){return this.data[e]},setData:function(e){this.originalData=e;this._setData(e,0);this._defaultValue=null},_setData:function(e,t){var n=this;var r=[];var i={};var s=false;for(var o=0,u=e.length;o<u;o++){var a=e[o];var f=n._getKey();a.key=f;if(a.checked){n._setData(a.children||[],t+1);s=true}r.push(a);i[f]=a}if(!s&&t+1<this.level){var l=[];if(e[0]&&e[0].children){l=e[0].children}n._setData(l||[],t+1)}this.data[t]=r;this.dataMap[t]=i},change:function(e,t,n,r){this.lastValue=this.getValue();var i=e.opts.level;if(i+1===this.level){var s=this.dataMap[i];if(e.type==="radio"||e.opts.canCancel){this._value.length=0;this.clearStatus(i);this.lastClick&&(this.lastClick.checked=false)}s[t].checked=n;this.lastClick=s[t];var o=this.getTopDataByTagName(s[t].tagName);if(n&&o){o.childrenSelected=true;this._value.push(s[t])}this.onChange(r);this.clearLastStatus()}else{this.renderByLevel(i,t,n);this.onRender(r)}},clearLastStatus:function(){var e=this.data[0];for(var t=0,n=e.length;t<n;t++){e[t].childrenSelected=false;if(e[t].checked){continue}this.deepClear(e[t].children)}},renderByLevel:function(e,t,n){var r=this.dataMap[e];this.clearStatus(e);r[t].checked=n;if(n){var i=r[t].children||[];this._setData(i,e+1);this._renderHTML(e+1)}else{for(var s=e+1;s<this.level;s++){this.views[s].hide()}}},onChange:function(e){$(this).triggerHandler("change",[this.getValue(),e])},onRender:function(e){$(this).triggerHandler("render",e)},getValue:function(){if(this._defaultValue){return{key:this.name,value:[this._defaultValue]}}var e=[];if(this._value){e=e.concat(this._value)}return{key:this.name,value:e}},clearStatus:function(e){if("undefined"===typeof e){this.clearAll();return}var t=this.data[e];this.shallowClear(t)},getLastValue:function(){return this.lastValue},shallowClear:function(e){for(var t=0,n=e.length;t<n;t++){e[t].checked=false}},deepClear:function(e){for(var t=0,n=e.length;t<n;t++){e[t].checked=false;if(e[t].children&&e[t].children.length>0){this.deepClear(e[t].children)}}},clearAll:function(){var e=this.data[0];for(var t=0,n=e.length;t<n;t++){e[t].checked=false;if(e[t].children&&e[t].children.length>0){this.deepClear(e[t].children)}}for(var t=0;t<this.level;t++){this.opts.controls[t].expend=this.defaultExpend[t]}},clear:function(e){this._value.length=0;this.clearAll();this.render(this.originalData);this.onChange(e||"clear")},hide:function(){this.container.hide()},show:function(){this.container.show()},render:function(e,t){this.setData(e);this._renderHTML();this.onRender();if(this.visible||t){this.show()}else{this.hide()}},_renderHTML:function(e){e=e||0;var t=false;for(var n=e||0;n<this.level;n++){var r=this.getDataByLevel(n);if(r){if(n!==0&&n+1!==this.level&&r.length>0){r[0].checked=true}if((n+1===this.level||r.length>1||n===0&&r.length>0)&&(this.opts.controls[n].expend===true||this.opts.expendFirstTime||t)){this.views[n].render(r);this.views[n].show();if(t){this.opts.controls[n].expend=true}}else{this.views[n].hide();this.opts.controls[n].expend=true}if(n===0){for(var i=0,s=r.length;i<s;i++){if(r[i].checked)t=true}}}}this.opts.expendFirstTime=false},_bindEvent:function(){if(this.opts.events){this.bindEvent(this.opts.events)}},bindEvent:function(e){if(e){var t=this;for(var n in e){(function(n){$(t).bind(n,function(){e[n].apply(t,arguments)})})(n)}}},setDefaultValue:function(e){this._defaultValue=e;for(var t=0;t<this.level;t++){this.opts.controls[t].expend=true}},setSelected:function(e,t){function u(r){for(var s=0,o=r.length;s<o;s++){if(r[s].tagName&&r[s].tagName===t){if(r[s].children&&r[s].children.length>0){u(r[s].children);if(n){i.push(r[s])}break}else{if(r[s].value===e){n=r[s];i.push(n);break}}}}}if(!e||!t)return;var n;var r=this.data[0];if(!r)return;var i=[];u(r);if(i.length===0)return;this.deepClear(r);for(var s=0,o=i.length;s<o;s++){i[s].checked=true}this._value.push(n);this.render(r);this.onChange("click")},getTopDataByTagName:function(e){var t=this.data[0];var n;for(var r=0,i=t.length;r<i;r++){if(t[r].tagName===e){n=t[r];break}}return n}})},71:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;n(72)},72:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;(function(){function r(e){if(e.pageX!=null)return{pageX:e.pageX,pageY:e.pageY};if(e.clientX!=null){var t=document.documentElement,n=document.body;return{pageX:e.clientX+(t&&t.scrollLeft||n&&n.scrollLeft||0)-(t&&t.clientLeft||n&&n.clientLeft||0),pageY:e.clientY+(t&&t.scrollTop||n&&n.scrollTop||0)-(t&&t.clientTop||n&&n.clientTop||0)}}return{pageX:0,pageY:0}}function i(e,t){t=t.charAt(0).toUpperCase()+t.substr(1);return Math.max(e["scroll"+t],e["offset"+t])}function s(e){var t,n,r,i,s=false;var o=e._opt["axis"];var u=e._opt["container"];$jsex.event.bind(u,"touchstart",function(o){if(o.touches.length>1)return;var u=o.touches[0];t=e.getAOffset();n=u.pageX;r=u.pageY;i=false;s=true});$jsex.event.bind(u,"touchmove",function(i){if(!s){return}var u=i.touches[0];if(o==="x")e.ma(t+n-u.pageX);else e.ma(t+r-u.pageY);var a=e.percent();if(a!=1&&a!=0){i.preventDefault&&i.preventDefault()||(i.returnValue=false)}});$jsex.event.bind(u,"touchend",function(e){s=false});$jsex.event.bind(u,"click",function(e){if(i){i=false;e.preventDefault&&e.preventDefault()||(e.returnValue=false)}})}function o(e){try{e.preventDefault&&e.preventDefault()||(e.returnValue=false)}catch(t){}return false}function u(e){$jsex.event.bind(e._opt["container"],n,c(e,"_mousewheel",e))}function a(e,t){var n=e._opt,r=e._fix;var i=t;var s=n["container"]=document.createElement("div");var u=n["content"]=document.createElement("div");var a=n["scrollzone"]=document.createElement("div");var f=n["scrollclip"]=document.createElement("div");while(i.firstChild)u.appendChild(i.firstChild);u.appendChild(document.createElement("div")).style.clear="both";i.appendChild(s);s.appendChild(a);s.appendChild(f);f.appendChild(u);s.style.height=s.style.width="100%";a.className="scroll-zone"+(n.zoneClass?" "+n.zoneClass:"");f.className="scroll-clip"+(n.clipClass?" "+n.clipClass:"");u.className="scroll-content"+(n.contentClass?" "+n.contentClass:"");a.innerHTML=['<a class="top" hidefocus="on" href="#">top</a>','<p class="ctn"><span class="cur" unselectable="on"></span></p>','<a class="down" hidefocus="on" href="#">down</a>'].join("");var l=n["scrollzone"].getElementsByTagName("a");$jsex.event.bind(n["bar_lt"]=l[0],"click",o);$jsex.event.bind(n["bar_gt"]=l[1],"click",o);l[0].style[r["marginTop"]]=n["margins"][0]+"px";l[1].style[r["marginBottom"]]=n["margins"][1]+"px";var c=n["scrollzone"].getElementsByTagName("span");n["bar"]=c[0];n["bar_container"]=n["scrollzone"].getElementsByTagName("p")[0];$jsex.addClassName(s,"scroll-container")}function f(e){e=$jsex.merge({axis:"y",margins:[0,0]},e);this._opt=e;this._fix=e["axis"]=="x"?{offsetHeight:"offsetWidth",scrollTop:"scrollLeft",height:"width",top:"left",axis:"x",offsetTop:"offsetLeft",marginTop:"marginLeft",marginBottom:"marginRight"}:{offsetHeight:"offsetHeight",scrollTop:"scrollTop",height:"height",top:"top",axis:"y",offsetTop:"offsetTop",marginTop:"marginTop",marginBottom:"marginBottom"};this.initialize()}function l(e,t,n){this.cb=t||$jsex.VOIDFUNC;this.repeat=n||100;this.el=e;var r=this;$jsex.event.bind(e,"click",c(this,"_click",this));$jsex.event.bind(e,"mousedown",c(this,"_mousedown",this));$jsex.event.bind(e,"mouseup",c(this,"_mouseup",this));$jsex.event.bind(e,"mouseover",c(this,"_mouseover",this));$jsex.event.bind(e,"mouseout",c(this,"_mouseout",this))}function c(e,t,n){return function(){if(e[t]){return e[t].apply(n||this,arguments)}}}var e="1.2.0";var t=navigator.userAgent;var n=/Firefox/i.test(t)?"DOMMouseScroll":"mousewheel";f.prototype.version=e;f.prototype.initialize=function(){var e=this._opt;if(!e["container"].getAttribute("data-scroller")){a(this,e["container"]);$jsex.event.bind(e["bar"],"mousedown",c(this,"_mousedown",this));$jsex.event.bind(document,"mouseup",c(this,"_mouseup",this));$jsex.event.bind(document,"mousemove",c(this,"_mousemove",this));new l(e["bar_gt"],c(this,"_mfclick",this),50);new l(e["bar_lt"],c(this,"_mbclick",this),50);new l(e["bar_container"],c(this,"_barclick",this),100);u(this);s(this);e["container"].setAttribute("data-scroller",1)}if(!e["isOverFlow"]){e["container"].style.overflow=e["scrollclip"].style.overflow="hidden"}e["status"]={barlt:e["bar_lt"][this._fix["offsetHeight"]]+e["margins"][0],bargt:e["bar_gt"][this._fix["offsetHeight"]]+e["margins"][1],top:0};this.refresh()};f.prototype._show=function(){$jsex.removeClassName(this._opt["scrollzone"],"hide");$jsex.addClassName(this._opt["container"],this._opt["showClass"]||"scroll-container-show");$(this).trigger("scrollBarShow")};f.prototype._hide=function(){$jsex.addClassName(this._opt["scrollzone"],"hide");$jsex.removeClassName(this._opt["container"],this._opt["showClass"]||"scroll-container-show");$(this).trigger("scrollBarHide");if(this._opt["flexWidth"]){this._opt["scrollclip"].style.width=this._opt["container"].style.width}};f.prototype.hasScrollBar=function(){return $jsex.hasClassName(this._opt["container"],this._opt["showClass"]||"scroll-container-show")};f.prototype.refresh=function(){this._show();var e=this._opt,t=e["status"],n=this._fix;var r={height:e["container"].offsetHeight-(e["axis"]==="x"?e["scrollzone"]["offsetHeight"]+(e["distance"]||2):0),width:e["container"].offsetWidth-(e["axis"]!=="x"?e["scrollzone"]["offsetWidth"]+(e["distance"]||2):0)};if(r.height<0){r.height=0}if(r.width<0){r.width=0}$jsex.hash.each(r,function(n,r){e["scrollclip"].style[n]=r+"px";t["clip"+n.substr(0,1).toUpperCase()+n.substr(1)]=r});$jsex.merge(e["status"],{totalHeight:(e["autoScrollBarSize"]===false?e["scrollzone"][n["offsetHeight"]]:e["container"][n["offsetHeight"]])-e["status"]["barlt"]-e["status"]["bargt"]});e["status"]["totalHeight"]=e["status"]["totalHeight"]>=0?e["status"]["totalHeight"]:0;e["bar_container"].style[n["height"]]=e["status"]["totalHeight"]+"px";var s=i(e["content"],n["height"]);var o=s&&e["scrollclip"][n["offsetHeight"]]/s;$jsex.merge(e["status"],{contentHeight:s,height:Math.round((o>=1?1:o)*e["bar_container"][n["offsetHeight"]]),full:o>=1,empty:o<=0});e["bar"].style[n["height"]]=t["height"]+"px";this.a2b()};f.prototype.a2b=function(){var e=this._opt["status"];if(!e["full"]&&!e["empty"]||this._opt["scroll"]==="always"){var t=e["full"]?0:this.getAOffset()/(e["contentHeight"]-e["clipHeight"])*(e["totalHeight"]-e["height"]);this._setbar(t);this._show()}else{this._hide()}};f.prototype.b2a=function(){var e=this._opt["status"];var t=this.percent()*(e["contentHeight"]-e["clipHeight"]);this.ma(t)};f.prototype.scrollIntoView=function(e){var t=this._opt,n=t["status"],r=this._fix;var i=this.percent()*(n["contentHeight"]-n["clipHeight"]);var s=e&&e[r["offsetHeight"]];var o=e&&e[r["offsetTop"]];var u=n["clipHeight"];if(i>o){this.ma(o);this.a2b()}else if(i+u<o+s){this.ma(o+s-u);this.a2b()}};f.prototype.scrollTo=function(e){this.ma(e)};f.prototype.percent=function(){var e=this._opt["status"];var t=e["full"]?0:this.getBOffset()/(e["totalHeight"]-e["height"]);return t<0?0:t>1?1:t};f.prototype._setbar=function(e){var t=this._opt["status"];e=Math.round(e);t["top"]=e;this._opt["bar"].style[this._fix["top"]]=e+"px"};f.prototype.m=function(e){if(e<=0)e=0;else if(e+this._opt["status"]["height"]>this._opt["status"]["totalHeight"])e=this._opt["status"]["totalHeight"]-this._opt["status"]["height"];this._setbar(e);this.b2a()};f.prototype.ma=function(e){var t=this._opt["scrollclip"],n=this._opt["content"];var r=i(n,this._fix["height"]);if(e<=0)e=0;else if(e+t[this._fix["offsetHeight"]]>r)e=r-t[this._fix["offsetHeight"]];t[this._fix["scrollTop"]]=Math.floor(e);this.a2b();$(this).trigger("scrollerChange")};f.prototype.getAOffset=function(){return this._opt["scrollclip"][this._fix["scrollTop"]]};f.prototype.getBOffset=function(){var e=this._opt["status"];return e["top"]};f.prototype._mousemove=function(e){if(this._f){$(this).trigger("scrollerBarMove");var t=r(e);this.m(t.pageY-this._p["_"+this._fix["axis"]]+this._p["_s"+this._fix["axis"]])}};f.prototype._mousedown=function(e){if(this._opt["unselect"]){this.bindUnSelect()}this._f=true;var t=r(e);this._p={_y:t.pageY,_x:t.pageX,_sx:this._opt["bar"].offsetLeft,_sy:this._opt["bar"].offsetTop}};f.prototype._mouseup=function(e){this.bindSelect();this._f=false};f.prototype._mousewheel=function(e){var t=e.detail?e.detail*-120:e.wheelDelta;if(typeof t!=="number"||t==0)return;if(t<0)this._mfclick();else if(t>0)this._mbclick();$(this).trigger("scrollerBarMove");$jsex.stopEvent(e)};f.prototype._mfclick=function(){this.m(this.getBOffset()+(this._opt["step"]||20))};f.prototype._mbclick=function(){this.m(this.getBOffset()-(this._opt["step"]||20))};f.prototype._barclick=function(e){var t=e["xy"];var n=$jsex.offset(this._opt["bar_container"]);var r=this.getBOffset();var i=this._opt["status"]["height"];if(t.pageY-n.top<r){this.m(r-i);$(this).trigger("scrollerBarClick")}else if(t.pageY-n.top>r+i){this.m(r+i);$(this).trigger("scrollerBarClick")}else{return false}};f.prototype.bindUnSelect=function(){if(typeof document.body.onselectstart!="undefined"){$(document.body).on("selectstart.unselect",function(e){return false})}else{$(document.body).on("mousedown.unselect",function(e){return false});$(document.body).on("mouseup.unselect",function(e){return true})}};f.prototype.bindSelect=function(){$(document.body).off(".unselect")};l.prototype._click=function(e){this._start(r(e),"click")};l.prototype._mouseover=function(){this._over=true};l.prototype._mouseout=function(){this._over=false;this._down=false;this._end()};l.prototype._start=function(e,t){var n=this;if(n._handler)clearInterval(n._handler);var r=function(e){if(e===true){if(n.cb.call(n.el,n)===false)n._end()}else if(!n._over||!n._down||n.cb.call(n.el,n)===false)n._end()};n.xy=e;n._handler=setInterval(r,n.repeat);if(t==="click")r(true)};l.prototype._end=function(){if(this._handler)clearInterval(this._handler);this._handler=null};l.prototype._mousedown=function(e){this._down=true;this._start(r(e),"mousedown")};l.prototype._mouseup=function(){this._down=false};$jsex.ScrollBar=f})()},76:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;var r="cpf_";var i=0;QClass.define("common.widgets.CustomPriceFilter",{initialize:function(e){this.container=e.container;e.html&&this.container.html(e.html);this.initElements();this.namespace=r+i++},setValue:function(e,t){this._lastValidValue=[e,t];this.fromInput.val(e);this.toInput.val(t)},initElements:function(){var e=this;this.fromInput=this.container.find(".js_cpf_from");this.toInput=this.container.find(".js_cpf_to");this.submitButton=this.container.find(".js_cpf_submit").hide();var t;this.container.find(".js_cpf_from,.js_cpf_to,.js_cpf_submit").bind("focus",function(){clearTimeout(t);e.submitButton.show();e._bindKeyDown()}).bind("blur",function(){clearTimeout(t);t=setTimeout(function(){e.submitButton.hide();e._bindKeyDown()},500)});this.submitButton.bind("click",function(){e.search();t=setTimeout(function(){e.submitButton.hide();e.submitButton.focusout();e._unbindKeyDown()},500)})},_bindKeyDown:function(){var e=this;$(window).bind("keydown.cpf."+this.namespace,function(t){if((t.keyCode||t.which)===13){e.search()}})},_unbindKeyDown:function(){$(window).unbind("keydown.cpf."+this.namespace)},getValue:function(){return this._lastValidValue},search:function(){var e=this;var t=Number.MAX_VALUE,n=/^\d{0,5}$/;var r=this.fromInput[0],i=this.toInput[0],s=true;var o,u;var a=$.trim(r.value),f=$.trim(i.value);if(!n.test(a)){r.value="";s=false}else{o=!a?0:a*1}if(!n.test(f)){i.value="";s=false}else{u=!f?t:f*1}if(!s){return}if(!a&&!f){return}if(o>u){var l=u;u=o;o=l;r.value=o;i.value=u===t?"":u}else{r.value=a?o:"";i.value=u===t?"":u}this._lastValidValue=[o,u];this.from=o;this.to=u;$(this).triggerHandler("submit");return true}})},78:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;n(79)},79:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;window.Pager=function(e,t,n,r,i,s){var o=this.el=typeof e==="string"?document.getElementById(e):e;if(o.getAttribute("data-pager"))return;o.setAttribute("data-pager","1");this.first=true;this.total=n||1;this.event=r;this.linkfunc=i;this.opts=s||{};this.currentPage=1;this.render(t||1)};Pager.prototype._get_page_href=function(e){var t=this.linkfunc;var n;if(e&&e>0&&e<=this.total&&(n=t(e)))return' href="'+n+'"';else return""};Pager.prototype.show=function(){if(this.el.style.display=="none")this.el.style.display="block"};Pager.prototype.hide=function(){if(this.el.style.display!="none")this.el.style.display="none"};Pager.prototype.render=function(e){var t=this.total,n=e,r=this.event;this.currentPage=e;if(n>0&&n<=t){var i=[],s=['<div class="ui-page',this.opts["cls"]?" "+this.opts["cls"]:"",'"><ul class="items">'];s.push('<li class="item prev ',n===1?"non_disable":'"><a',this._get_page_href(n-1),' hidefocus="on" class="num  icon-tag','" data-page="',n===1?-1:n-1,'"><span class="icon icon-btn-prev-2"></span><span>上一页</span></a></li>');if(!this.opts["noPageNumber"]){var o=true;for(var u=n<6?(o=false)||1:n+1<t?n-2:t-4;u<n;u++)i.push('<li class="item"><a class="num"',this._get_page_href(u),' hidefocus="on" data-page="',u,'">',u,"</a></li>");if(o)i.unshift('<li class="item"><a class="num"'+this._get_page_href(1)+' hidefocus="on" data-page="1">1</a></li><li class="item dot">...</li>');i.push('<li class="item active"> <span class="num">',n,"</span> </li>");o=true;for(var u=n+1;u<(t-n<5?(o=false)||t+1:n+(n<3?6-n:3));u++)i.push('<li class="item"><a class="num"',this._get_page_href(u),' hidefocus="on" data-page="',u,'">',u,"</a></li>");if(o){if(t-u>1){i.push('<li class="item dot">...</li>')}i.push('<li class="item"><a class="num"',this._get_page_href(t),' hidefocus="on" data-page="',t,'">',t,"</a></li>")}s.push(i.join(""))}s.push('<li class="item next ',n===t?" non_disable":"",'"><a',this._get_page_href(n+1),' hidefocus="on" class="num icon-tag','" data-page="',n===t?-1:n+1,'"><span>下一页</span><span class="icon icon-btn-next-2"></span></a></li>');s.push("</ul></div>");this.el.innerHTML=s.join("")}else{this.el.innerHTML=""}if(this.first){if(this.event)this.bindEvent();this.first=false}if(this.opts.onRender)this.opts.onRender.call(this,e)};Pager.prototype.bindEvent=function(){var e=this;this.eventHandler=function(t){try{t=t||event;var n=t.target||t.srcElement;while(n&&n.getAttribute("data-page")==null)n=n.parentNode;if(n&&n.getAttribute("data-page")!=null){var r=n.getAttribute("data-page")*1;if(r>0){if(e.event.call(e,r,t)!==false){e.render.call(e,r)}}}}catch(i){}};var t=this.el;if(t.attachEvent)t.attachEvent("onclick",this.eventHandler);else if(t.addEventListener)t.addEventListener("click",this.eventHandler,false)}},82:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;n(83)},83:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;(function(e,t){function f(e){return;e=e||{};e=$.extend({},u,e);if(!e.code)return;var t=document.createElement("img");t.onload=function(){t.onload=null;t=null};t.src=a.getMonitorUrl()+"?"+$.param(e)}function p(e){e=e||event;if(e&&e.keyCode===120&&e.altKey&&e.ctrlKey){d()}}function d(){s=!s;if(s)w();else E();if(s)v()}function v(){b().innerHTML=i.join("<br>")}function b(){if(n)return n;n=document.createElement("div");n.className="x-class-logger";r=document.createElement("div");r.className="x-class-logger-bg";for(var e in g){n.style[e]=g[e];r.style[e]=g[e]}for(var e in y){r.style[e]=y[e]}document.body.appendChild(r);document.body.appendChild(n);return n}function w(){b().style.display=r.style.display="block"}function E(){b().style.display=r.style.display="none"}if(t.addEventListener)t.addEventListener("keydown",p,false);else if(t.attachEvent)t.attachEvent("onkeydown",p);var n,r,i=[],s=false,o={};var u={logbrowser:0,code:""};var a={CLIENT_TIME:(new Date).getTime(),MONITOR_URL:"http://m.ued.qunar.com/monitor/log",setMonitorUrl:function(e){this.MONITOR_URL=e},getMonitorUrl:function(){return this.MONITOR_URL},time:function(e){o[e]=(new Date).getTime();return this},timeEnd:function(e){return this.log(e,":",(new Date).getTime()-o[e]||0,"ms")},count:function(e){f(e)},monitorTimeEnd:function(e,t,n){t.time=(new Date).getTime()-o[e]||0;if(n&&typeof n=="function"){n.call(this,t)}f(t);t=$.extend({},{needConsole:true},t)||{};if(t.needConsole)return this.log(e,":",t.time,"ms")}};for(var l=["info","error","debug","log","warn"],c=0,h;h=l[c];c++){(function(e){a[e]=function(){i.push("<b>["+e.toUpperCase()+"]</b>&nbsp;"+Array.prototype.slice.call(arguments).join(" ").replace(/&/g,"&amp;").replace(/</g,"&lt;"));if(s)v();return this}})(h)}var m=!window.XMLHttpRequest,g=a.style={display:"none",position:!m?"fixed":"absolute",top:"0px",right:"0px",height:m?"250px":"50%",width:"50%",padding:"5px",color:"#fff",margin:"5px",fontWeight:500,zIndex:1e5,overflow:"auto"};var y={backgroundColor:"#000",border:"1px solid #000",opacity:.7,filter:"alpha(opacity=70)",boxShadow:"0 0 5px 2px #000"};e.Logger=a;a.info("[UA]",navigator.userAgent)})(window,document)},95:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;n(96)},96:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;if(typeof System=="undefined"){System={}}if(typeof System.booking=="undefined"){System.booking={}}System.booking.statManager=function(e,t){var n="0",r="0",i="000";if(e){if(e.bookinglocation)n=e.bookinglocation}r=e.map||(location.href.indexOf("fromMap=true")!=-1?"1":"0");if(e){if(e.ip)i=function(e){var t="00"+e;return t.substring(t.length-3)}(e.ip)}if(t){return t.replace(/&+stat=\d*/,"")+"&stat="+n+r+i+System.tracking.TrackingCode("&")}else{return n+r+i}};if(typeof System.tracking=="undefined"){System.tracking={}}System.tracking={getTrackingParams:function(){var e=Parameter.parseURL(window.location.search);var t=XMap.prototype.toArray();var n=[];for(var r=0;r<t.length;r++){if(t[r][0].toLowerCase().indexOf("t_")==0){n.push(t[r])}}if(n.length==0){return null}return n},TrackingCode:function(e){var t=System.tracking.getTrackingParams();if(t==null)return"";var n=[];n.push(e);for(var r=0;r<t.length;r++){n.push(t[0]+"="+encodeURI(t[1]))}return n.join("&")}}},103:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;(function(e){var t="//qhs.qunar.com/collect";if(!e.QHPTrace){e.QHPTrace={}}var n=function(e,t,n){var r=[""+e],i=(""+e).length;if(typeof n=="undefined"){n="0"}while(i<t){r.unshift(n);i+=n.length}return r.join("")};var r=e.SERVER_TIME||(new Date).getTime();if(typeof r=="object"&&r.getTime){r=r.getTime()}if(document.cookie.indexOf("QN70=")<0){var i=""+n(Math.floor(Math.random()*1e10).toString(16),9)+r.toString(16);document.cookie="QN70="+i+";domain=.qunar.com;path=/;"}var s=Math.floor(r/100)%864e3;var o=function(e){var t=[],n;if((n=e.indexOf("#"))>=0&&n<e.length-1){t.push(e.substring(e.indexOf("#")+1));e=e.substring(0,e.indexOf("#"))}if((n=e.indexOf("?"))>=0&&n<e.length-1){t.push(e.substring(e.indexOf("?")+1))}t=t.join("&");var r={},i=t.split("&");if(i&&i.length>0){for(var s=0;s<i.length;s++){var o=i[s];if(o){o=o.split("=");if(o.length>1&&o[1]!==""){if(typeof r[o[0]]!="undefined"){if(Object.prototype.toString.call(r[o[0]])==="[object Array]"){r[o[0]].push(o[1])}else{r[o[0]]=[r[o[0]],o[1]]}}else{r[o[0]]=o[1]}}}}}return r};var u=!!document.getElementsByClassName;var a=function(e,t){t=t||document;if(!e){return[]}if(u){return t.getElementsByClassName(e)}else{var n=[];var r=function(e,t){var i=t.firstChild;while(i){if(i.nodeType==1){if(i.className.indexOf(e)>=0){n.push(i)}r(e,i)}i=i.nextSibling}};r(e,t);return n}};var f=function(e){return};var l=function(r,i,u,c,h){var p,d=location.href,v,m;var g=o(d);g["http_referer"]=document.referrer;var y=p=g["QHFP"];m=g["QHP"];var b=r||"ZS";var w=i||"I0";if(!p){p=b+w+(e.SERVER_GROUP||"_")+n(s.toString(16),5,"0").toUpperCase()+n(Math.floor(255*Math.random()).toString(16),2,"0").toUpperCase()}var E=this;this.from=p;this.urlfrom=y;this.channel=r;this.generateNewVal=function(t,r,i){t=t||"ZS";r=r||"I0";s++;return t+r+(i||e.SERVER_GROUP||"_")+n(s.toString(16),5,"0").toUpperCase()+n(Math.floor(255*Math.random()).toString(16),2,"0").toUpperCase()};if(typeof m=="string"&&m.length>=4){r=m.substr(0,2);i=m.substr(2,2)}this.initialPageFrom=this.pageFrom=this.generateNewVal(r,i);this.navigate=function(e,n,r){var i=this.generateNewVal(e,n);var s=this;f(t+"?"+"&QHFP="+s.initialPageFrom+"&QHP="+i+S(r));E.pageFrom=i};this.generate=function(){return"&QHFP="+this.pageFrom};this.getQHFP=function(){return this.pageFrom};var S=function(e){if(e&&typeof e==="string"){var t=e.split("&");var n,r={};for(var i=0,s=t.length;i<s;i++){n=t[i].split("=");r[n[0]]=n[1]}for(var o in r){g[o]=r[o]}}var u="";for(var a in g){if(a==="QHFP"||a==="QHP"){continue}u+="&"+a+"="+encodeURIComponent(g[a])}return u};e.QHPTrace["QHFP"]=y?y:"";e.QHPTrace["QHP"]=this.pageFrom?this.pageFrom:"";if(!h){f(t+"?"+"&QHFP="+(y?y:"")+"&QHP="+this.pageFrom+S(u)+(c?"&"+c:""))}var x=a("q_header_hotel");var T=null;if(x&&x.length>0){x=x[0];x=a("q_header_sub_nav",x);if(x&&x.length>0){T=x[0].getElementsByTagName("a")}}if(T&&T.length){var N=T.length;for(var C=0;C<N;C++){var k=T[C];var L=k.getAttribute("href");if(L.indexOf("#")<=0){L+="#"+this.generate()}k.setAttribute("href",L)}}l.instance=this};l.parseURL=o;if(e.QHTrace){e._QHTrace=e.QHTrace}e.QHTrace=l})(window)},118:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;n(119)},119:function(module,exports){var define=typeof define==="function"&&!define.amd?define:false;(function(){if(window.TrimPath==null)var TrimPath=window.TrimPath=new Object;if(TrimPath.evalEx==null)TrimPath.evalEx=function(src){return eval(src)};var UNDEFINED;if(Array.prototype.pop==null)Array.prototype.pop=function(){if(this.length===0){return UNDEFINED}return this[--this.length]};if(Array.prototype.push==null)Array.prototype.push=function(){for(var e=0;e<arguments.length;++e){this[this.length]=arguments[e]}return this.length};TrimPath.parseTemplate=function(e,t,n){if(n==null)n=TrimPath.parseTemplate_etc;var r=parse(e,t,n);var i=TrimPath.evalEx(r,t,1);if(i!=null)return new n.Template(t,e,r,i,n);return null};try{String.prototype.process=function(e,t){var n=TrimPath.parseTemplate(this,null);if(n!=null)return n.process(e,t);return this}}catch(e){}TrimPath.parseTemplate_etc={};TrimPath.parseTemplate_etc.statementTag="forelse|for|if|elseif|else|var|macro";TrimPath.parseTemplate_etc.statementDef={"if":{delta:1,prefix:"if (",suffix:") {",paramMin:1},"else":{delta:0,prefix:"} else {"},elseif:{delta:0,prefix:"} else if (",suffix:") {",paramDefault:"true"},"/if":{delta:-1,prefix:"}"},"for":{delta:1,paramMin:3,prefixFunc:function(e,t,n,r){if(e[2]!="in")throw new r.ParseError(n,t.line,"bad for loop statement: "+e.join(" "));var i=e[1];var s="__LIST__"+i;return["var ",s," = ",e[3],";","var __LENGTH_STACK__;","if (typeof(__LENGTH_STACK__) == 'undefined' || !__LENGTH_STACK__.length) __LENGTH_STACK__ = new Array();","__LENGTH_STACK__[__LENGTH_STACK__.length] = 0;","if ((",s,") != null) { ","var ",i,"_ct = 0;","for (var ",i,"_index in ",s,") { ",i,"_ct++;","if (typeof(",s,"[",i,"_index]) == 'function') {continue;}","__LENGTH_STACK__[__LENGTH_STACK__.length - 1]++;","var __KEY__ = ",i,"_index;","var ",i," = ",s,"[",i,"_index];"].join("")}},forelse:{delta:0,prefix:"} } if (__LENGTH_STACK__[__LENGTH_STACK__.length - 1] == 0) { if (",suffix:") {",paramDefault:"true"},"/for":{delta:-1,prefix:"} }; delete __LENGTH_STACK__[__LENGTH_STACK__.length - 1];"},"var":{delta:0,prefix:"var ",suffix:";"},macro:{delta:1,prefixFunc:function(e,t,n,r){var i=e[1].split("(")[0];return["var ",i," = function",e.slice(1).join(" ").substring(i.length),"{ var _OUT_arr = []; var _OUT = { write: function(m) { if (m) _OUT_arr.push(m); } }; "].join("")}},"/macro":{delta:-1,prefix:" return _OUT_arr.join(''); };"}};TrimPath.parseTemplate_etc.modifierDef={eat:function(e){return""},escape:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},capitalize:function(e){return String(e).toUpperCase()},"default":function(e,t){return e!=null?e:t}};TrimPath.parseTemplate_etc.modifierDef.h=TrimPath.parseTemplate_etc.modifierDef.escape;TrimPath.parseTemplate_etc.Template=function(e,t,n,r,i){this.process=function(e,t){if(e==null)e={};if(e._MODIFIERS==null)e._MODIFIERS={};if(e.defined==null)e.defined=function(t){return e[t]!=undefined};for(var n in i.modifierDef){if(e._MODIFIERS[n]==null)e._MODIFIERS[n]=i.modifierDef[n]}if(t==null)t={};var s=[];var o={write:function(e){s.push(e)}};try{r(o,e,t)}catch(u){if(t.throwExceptions==true)throw u;var a=new String(s.join("")+"[ERROR: "+u.toString()+(u.message?"; "+u.message:"")+"]");a["exception"]=u;return a}return s.join("")};this.name=e;this.source=t;this.sourceFunc=n;this.toString=function(){return"TrimPath.Template ["+e+"]"}};TrimPath.parseTemplate_etc.ParseError=function(e,t,n){this.name=e;this.line=t;this.message=n};TrimPath.parseTemplate_etc.ParseError.prototype.toString=function(){return"TrimPath template ParseError in "+this.name+": line "+this.line+", "+this.message};var parse=function(e,t,n){e=cleanWhiteSpace(e);var r=["var TrimPath_Template_TEMP = function(_OUT, _CONTEXT, _FLAGS) { with (_CONTEXT) {"];var i={stack:[],line:1};var s=-1;while(s+1<e.length){var o=s;o=e.indexOf("{",o+1);while(o>=0){var u=e.indexOf("}",o+1);var a=e.substring(o,u);var f=a.match(/^\{(cdata|minify|eval)/);if(f){var l=f[1];var c=o+l.length+1;var h=e.indexOf("}",c);if(h>=0){var p;if(h-c<=0){p="{/"+l+"}"}else{p=e.substring(c+1,h)}var d=e.indexOf(p,h+1);if(d>=0){emitSectionText(e.substring(s+1,o),r);var v=e.substring(h+1,d);if(l=="cdata"){emitText(v,r)}else if(l=="minify"){emitText(scrubWhiteSpace(v),r)}else if(l=="eval"){if(v!=null&&v.length>0)r.push("_OUT.write( (function() { "+v+" })() );")}o=s=d+p.length-1}}}else if(e.charAt(o-1)!="$"&&e.charAt(o-1)!="\\"){var m=e.charAt(o+1)=="/"?2:1;if(e.substring(o+m,o+10+m).search(TrimPath.parseTemplate_etc.statementTag)==0)break}o=e.indexOf("{",o+1)}if(o<0)break;var u=e.indexOf("}",o+1);if(u<0)break;emitSectionText(e.substring(s+1,o),r);emitStatement(e.substring(o,u+1),i,r,t,n);s=u}emitSectionText(e.substring(s+1),r);if(i.stack.length!=0)throw new n.ParseError(t,i.line,"unclosed, unmatched statement(s): "+i.stack.join(","));r.push("}}; TrimPath_Template_TEMP");return r.join("")};var emitStatement=function(e,t,n,r,i){var s=e.slice(1,-1).split(" ");var o=i.statementDef[s[0]];if(o==null){emitSectionText(e,n);return}if(o.delta<0){if(t.stack.length<=0)throw new i.ParseError(r,t.line,"close tag does not match any previous statement: "+e);t.stack.pop()}if(o.delta>0)t.stack.push(e);if(o.paramMin!=null&&o.paramMin>=s.length)throw new i.ParseError(r,t.line,"statement needs more parameters: "+e);if(o.prefixFunc!=null)n.push(o.prefixFunc(s,t,r,i));else n.push(o.prefix);if(o.suffix!=null){if(s.length<=1){if(o.paramDefault!=null)n.push(o.paramDefault)}else{for(var u=1;u<s.length;u++){if(u>1)n.push(" ");n.push(s[u])}}n.push(o.suffix)}};var emitSectionText=function(e,t){if(e.length<=0)return;var n=0;var r=e.length-1;while(n<e.length&&e.charAt(n)=="\n")n++;while(r>=0&&(e.charAt(r)==" "||e.charAt(r)=="	"))r--;if(r<n)r=n;if(n>0){t.push('if (_FLAGS.keepWhitespace == true) _OUT.write("');var i=e.substring(0,n).replace("\n","\\n");if(i.charAt(i.length-1)=="\n")i=i.substring(0,i.length-1);t.push(i);t.push('");')}var s=e.substring(n,r+1).split("\n");for(var o=0;o<s.length;o++){emitSectionTextLine(s[o],t);if(o<s.length-1)t.push('_OUT.write("\\n");\n')}if(r+1<e.length){t.push('if (_FLAGS.keepWhitespace == true) _OUT.write("');var i=e.substring(r+1).replace("\n","\\n");if(i.charAt(i.length-1)=="\n")i=i.substring(0,i.length-1);t.push(i);t.push('");')}};var emitSectionTextLine=function(e,t){var n="}";var r=-1;while(r+n.length<e.length){var i="${",s="}";var o=e.indexOf(i,r+n.length);if(o<0)break;if(e.charAt(o+2)=="%"){i="${%";s="%}"}var u=e.indexOf(s,o+i.length);if(u<0)break;emitText(e.substring(r+n.length,o),t);var a=e.substring(o+i.length,u).replace(/\|\|/g,"#@@#").split("|");for(var f in a){if(a[f].replace)a[f]=a[f].replace(/#@@#/g,"||")}t.push("_OUT.write(");emitExpression(a,a.length-1,t);t.push(");");r=u;n=s}emitText(e.substring(r+n.length),t)};var emitText=function(e,t){if(e==null||e.length<=0)return;e=e.replace(/\\/g,"\\\\");e=e.replace(/\n/g,"\\n");e=e.replace(/"/g,'\\"');t.push('_OUT.write("');t.push(e);t.push('");')};var emitExpression=function(e,t,n){var r=e[t];if(t<=0){n.push(r);return}var i=r.split(":");n.push('_MODIFIERS["');n.push(i[0]);n.push('"](');emitExpression(e,t-1,n);if(i.length>1){n.push(",");n.push(i[1])}n.push(")")};var cleanWhiteSpace=function(e){e=e.replace(/\t/g,"    ");e=e.replace(/\r\n/g,"\n");e=e.replace(/\r/g,"\n");e=e.replace(/^(\s*\S*(\s+\S+)*)\s*$/,"$1");return e};var scrubWhiteSpace=function(e){e=e.replace(/^\s+/g,"");e=e.replace(/\s+$/g,"");e=e.replace(/\s+/g," ");e=e.replace(/^(\s*\S*(\s+\S+)*)\s*$/,"$1");return e};TrimPath.parseDOMTemplate=function(e,t,n){if(t==null)t=document;var r=t.getElementById(e);var i=r.value;if(i==null)i=r.innerHTML;i=i.replace(/&lt;/g,"<").replace(/&gt;/g,">");return TrimPath.parseTemplate(i,e,n)};TrimPath.processDOMTemplate=function(e,t,n,r,i){return TrimPath.parseDOMTemplate(e,r,i).process(t,n)}})()},122:function(e,t,n){function o(){var e,t=[];return e=function(n,r){t.push(n);return e[n]=r}}var r=typeof r==="function"&&!r.amd?r:false;var i=n(123);for(var s in i)e.exports[s]=i[s];var u=function(e){var t=Object.prototype.toString.call(e);if(t==="[object String]"){var n=e.split(",");return[n[0]*1,n[1]*1]}else if(t==="[object Array]"){return e}return[]};var a=function(e){var t=u(e);if(t.length===2){t[0]=Math.floor(t[0]*1e6)/1e6;t[1]=Math.floor(t[1]*1e6)/1e6;return t}else{return[]}};var f=o();var l={baidu:function(e){var n=e.items,r=e.isGCJ02,i=e.callback,s=e.context,o=e.timeout,l=!!e.noRequest,c=e.useGoogle;var h=[],p=[],d=[],v=[],s=s||window,m=function(){i(h)};for(var g=0,y=n.length,b;g<y;g++){b=n[g];if(c){h.push(s.GLatLng.fromType("baidu",u(b.google)))}else if(b.baidu&&b.baidu.length==2){h.push(s.GLatLng.fromType("baidu",u(b.baidu)))}else if(b.google){var w=a(b.google),E=w.join(",");if(f[E]){h.push(s.GLatLng.fromType("baidu",f[E]))}else{h.push(new s.GLatLng(w[0],w[1]));p.push(w);d.push(g);v.push(E)}}else{h.push(null)}}if(p.length===0||l){m();return h}t.convertGoogle2BaiduPoint(r,p,function(e){for(var t=0,n=e.length;t<n;t++){if(e[t]){var r=s.GLatLng.fromType("baidu",e[t]);if(r){f(v[t],e[t]);h[d[t]]=r}}}m()},o);return h},google:function(e){var t=e.items,n=e.callback,r=e.context;var i=[],s=function(){n(i)};for(var o=0,a=t.length,f;o<a;o++){f=t[o];if(f.google){var l=u(f.google);i.push(new r.GLatLng(l[0],l[1]))}else{i.push(null)}}s();return i}};t.toExactPoint=function(e){e.context=e.context||window;var t=e.context.GMap2.mapType;if(l[t]){return l[t](e)}return null};t.extendBound=function(e,t){t=t||15;var n=e.toSpan();var r=e.getSouthWest();var i=e.getNorthEast();return new GLatLngBounds(new GLatLng(r.lat()-n.lat()/t,r.lng()-n.lng()/t),new GLatLng(i.lat()+n.lat()/t,i.lng()+n.lng()/t))};t.drawBound=function(e,t,n){if(!e||!t){return}var r=t.getSouthWest();var i=t.getNorthEast();var s=new GPolygon([r,new GLatLng(r.lat(),i.lng()),i,new GLatLng(i.lat(),r.lng())]);n&&s.setStrokeStyle({color:n});e.addOverlay(s)};t.hahaNoMap=function(e,t){if(e){if(window.GBrowserIsCompatible&&!window.GBrowserIsCompatible.isMapSupport&&!t){e.innerHTML='<div class="no_map_img"><div class="low_browser">您的浏览器版本过低，建议尽快升级浏览器！</div></div>'}else{e.innerHTML='<div class="no_map_img"><div class="hide">地图暂时无法显示</div></div>'}}}},123:function(e,t){function i(e,t,n,r){var i=[],s=[],o=e?2:0;for(var u=0,a=t.length;u<a;u++){i.push(t[u][0]);s.push(t[u][1])}var f="PointConverter"+(new Date).getTime()+Math.round(Math.random()*1e4),l=document.head||document.getElementsByTagName("head")[0]||document.documentElement;window[f]=function(e){var r=Array(t.length);if(Object.prototype.toString.call(e)==="[object Array]"&&e.length===t.length){for(var i=0,s=e.length;i<s;i++){if(e[i].error==0&&e[i].x&&e[i].y){r[i]=[e[i].y,e[i].x]}}}window[f]=undefined;try{delete window[f]}catch(o){}n(r)};if(r){setTimeout(function(){window[f]&&window[f].call(window)},r)}var c=document.createElement("script");c.src="https://api.map.baidu.com/ag/coord/convert?mode=1&from="+o+"&to=4&x="+s.join(",")+"&y="+i.join(",")+"&callback="+f;l.insertBefore(c,l.firstChild)}var n=typeof n==="function"&&!n.amd?n:false;var r=2;e.exports={decodePath:function(e,t){var n=e?e.length:0,r=Array(Math.floor(e.length/2)),i=0,s=0,o=0,u=0;for(;i<n;++u){var a=1,f=0,l;do{l=e.charCodeAt(i++)-63-1;a+=l<<f;f+=5}while(l>=31);s+=a&1?~(a>>1):a>>1;a=1;f=0;do{l=e.charCodeAt(i++)-63-1;a+=l<<f;f+=5}while(l>=31);o+=a&1?~(a>>1):a>>1;r[u]=t?new t(s*1e-5,o*1e-5):[s*1e-5,o*1e-5]}r.length=u;return r},decodeLevel:function(e){var t=[];for(var n=0;n<e.length;++n){var r=e.charCodeAt(n)-63;t.push(r)}return t},convertGoogle2BaiduPoint:function(e,t,n,s){var o=[];var u=function(){if(t.length===0){n(o)}else{i(e,t.splice(0,r),function(e){o=o.concat(e);u()},s)}};u()}}},179:function(e,t,n){function u(){try{var e=s.performance||s.msPerformance||s.webkitPerformance||s.mozPerformance;return e!==null&&e["timing"]!==null}catch(t){return false}}function a(e){if(document.addEventListener){document.removeEventListener("DOMContentLoaded",e,false)}else if(document.attachEvent){document.detachEvent("onreadystatechange",e)}}function f(e){if(document.addEventListener){document.addEventListener("DOMContentLoaded",e,false)}else if(document.attachEvent){document.attachEvent("onreadystatechange",function(){if(/interactive|loaded|complete/.test(document.readyState))e()})}}function l(){i("send","performance",function(){var e=this.getData();var t=[];for(var n in e){var r={};r.code=o+n;r.time=e[n];t.push(r)}return t});a(l)}var r=typeof r==="function"&&!r.amd?r:false;var i=n(180);n(182);var s=window,o=window._ba_utm_s=="167"&&"hotel_home_"||window._ba_utm_s=="177"&&"hotel_list_"||window._ba_utm_s=="174"&&"hotel_detail_"||"hotel_";if(u()){f(l)}},180:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;var i=n(181);e.exports=i},181:function(e,t){function r(e,t,n){for(var r in e)t.call(n,r,e[r])}function i(e,t){r(t,function(t,n){if(k!=="prototype"){e[t]=n}});r(t.prototype,function(t,n){e.prototype[t]=n});return e}var n=typeof n==="function"&&!n.amd?n:false;var s=function(){};s.prototype={define:false,initialize:function(e){this.settings={url:e.url,isBatch:false};this.defaultParams=e.defaultParams||{}},toParams:function(e){var t=[];for(var n in e){t.push(n+"="+e[n])}return t},mixParams:function(){var e=Array.prototype.slice.call(arguments,0),t={};for(var n=0,i=e.length;n<i;n++){r(e[n]||{},function(e,n){t[e]=n})}return t},set:function(){if(arguments.length>1){var e=arguments[0],t=arguments[1];this.settings[e]=t}else{var n=arguments[0];for(var r in n){this.settings[r]=n[r]}}},getUrl:function(){return this.settings.url},report:function(e){var t=document.createElement("img"),n=this.getUrl();t.onload=function(){t.onload=null;t=null};t.src=n+(n.indexOf("?")<0?"?":"&")+e.join("&")},send:function(e){var t=this,n,r;if(e instanceof Array){for(var i=0,s=e.length;i<s;i++){n=this.mixParams(e[i],this.defaultParams);r=this.toParams(n);t.report(r)}}else{var o=this.defaultParams;n=this.mixParams(e,o);r=this.toParams(n);t.report(r)}}};var o={};var u=function(e,t,n){switch(e){case"define":if(typeof n.constructor!="undefined"){var r=i(n.constructor,s);var u=o[t]=new r(n)}u.define=true;u.initialize(n);break;case"send":if(o[t]){var a=o[t];if(typeof n=="function"){var f=n.call(a);a.send(f)}else{a.send(n)}}break;default:break}};e.exports=u},182:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;var i=n(180);var s=n(183);var o=window;var u="http://m.ued.qunar.com/monitor/log";i("define","performance",{url:u,defaultParams:{logbrowser:1},constructor:s})},183:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;var r=window,i=r.performance||r.msPerformance||r.webkitPerformance||r.mozPerformance,s=i&&i.timing;var o=function(e){return Math.round(e)};var u=function(){};u.prototype={getData:function(){if(!i&&!s){return}var e={};var t;if(r.chrome&&r.chrome.loadTimes){t=r.chrome.loadTimes().firstPaintTime*1e3;e.firstPaintTime=o(t-r.chrome.loadTimes().startLoadTime*1e3)}else if(typeof r.performance.timing.msFirstPaint==="number"){t=r.performance.timing.msFirstPaint;e.firstPaintTime=o(t-r.performance.timing.navigationStart)}e.domInteractive=s.domInteractive-s.domLoading;return e},printTable:function(){var e={};var t=this.getBaseParam();Object.keys(t).sort().forEach(function(n){e[n]={ms:t[n],s:+(t[n]/1e3).toFixed(2)}});console.table(e)}};e.exports=u},186:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;window.jsonParse=function(){function o(e,t,n){return t?s[t]:String.fromCharCode(parseInt(n,16))}var e="(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)";var t='(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]'+'|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))';var n='(?:"'+t+'*")';var r=new RegExp("(?:false|true|null|[\\{\\}\\[\\]]"+"|"+e+"|"+n+")","g");var i=new RegExp("\\\\(?:([^u])|u(.{4}))","g");var s={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"};var u=new String("");var a="\\";var f={"{":Object,"[":Array};var l=Object.hasOwnProperty;return function(e,t){var n=e.match(r);var s;var f=n[0];var c=false;if("{"===f){s={}}else if("["===f){s=[]}else{s=[];c=true}var h;var p=[s];for(var d=1-c,v=n.length;d<v;++d){f=n[d];var m;switch(f.charCodeAt(0)){default:m=p[0];m[h||m.length]=+f;h=void 0;break;case 34:f=f.substring(1,f.length-1);if(f.indexOf(a)!==-1){f=f.replace(i,o)}m=p[0];if(!h){if(m instanceof Array){h=m.length}else{h=f||u;break}}m[h]=f;h=void 0;break;case 91:m=p[0];p.unshift(m[h||m.length]=[]);h=void 0;break;case 93:p.shift();break;case 102:m=p[0];m[h||m.length]=false;h=void 0;break;case 110:m=p[0];m[h||m.length]=null;h=void 0;break;case 116:m=p[0];m[h||m.length]=true;h=void 0;break;case 123:m=p[0];p.unshift(m[h||m.length]={});h=void 0;break;case 125:p.shift();break}}if(c){if(p.length!==1){throw new Error}s=s[0]}else{if(p.length){throw new Error}}if(t){var g=function(e,n){var r=e[n];if(r&&typeof r==="object"){var i=null;for(var s in r){if(l.call(r,s)&&r!==e){var o=g(r,s);if(o!==void 0){r[s]=o}else{if(!i){i=[]}i.push(s)}}}if(i){for(var u=i.length;--u>=0;){delete r[i[u]]}}}return t.call(e,n,r)};s=g({"":s},"")}return s}}()},187:function(module,exports){var define=typeof define==="function"&&!define.amd?define:false;var JSON=window.JSON;if(!window.JSON){window.JSON={};JSON=window.JSON}(function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){escapable.lastIndex=0;return escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t==="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];if(a&&typeof a==="object"&&typeof a.toJSON==="function"){a=a.toJSON(e)}if(typeof rep==="function"){a=rep.call(t,e,a)}switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a){return"null"}gap+=indent;u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1){u[n]=str(n,a)||"null"}i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]";gap=o;return i}if(rep&&typeof rep==="object"){s=rep.length;for(n=0;n<s;n+=1){r=rep[n];if(typeof r==="string"){i=str(r,a);if(i){u.push(quote(r)+(gap?": ":":")+i)}}}}else{for(r in a){if(Object.prototype.hasOwnProperty.call(a,r)){i=str(r,a);if(i){u.push(quote(r)+(gap?": ":":")+i)}}}}i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}";gap=o;return i}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;if(typeof JSON.stringify!=="function"){JSON.stringify=function(e,t,n){var r;gap="";indent="";if(typeof n==="number"){for(r=0;r<n;r+=1){indent+=" "}}else if(typeof n==="string"){indent=n}rep=t;if(t&&typeof t!=="function"&&(typeof t!=="object"||typeof t.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":e})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i==="object"){for(n in i){if(Object.prototype.hasOwnProperty.call(i,n)){r=walk(i,n);if(r!==undefined){i[n]=r}else{delete i[n]}}}}return reviver.call(e,t,i)}var j;text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}})()},194:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;n(195)},195:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;(function(){n(10);$jsex.extend=function(){for(var e=1,t=arguments.length;e<t;e++)$jsex.merge(arguments[0],arguments[e]);return arguments[0]};$jsex.array.xcopy=function(){var e=-1,t=arguments.length,n,r=arguments[t-1];if(typeof arguments[t-1]=="number"){var i=[r,0];r=arguments[--t-1];while(++e<t-1)arguments.callee(arguments[e],i);Array.prototype.splice.apply(r,i)}else while(++e<t-1)for(var s=0,o=arguments[e].length;s<o;s++)r.push(arguments[e][s]);return r}})();(function(){$jsex.lightbox={overlay:null,content:null,a:{display:"none"},b:{display:"none"},c:{display:"block"},d:{display:"block"},binded:false,toBind:function(){$jsex.lightbox.show(null,null,1)},cache:{},gid:1,expand:"lightbox_temp",removeData:function(e){var t=e[this.expand];if(!t)return;try{delete e[this.expand]}catch(n){if(e.removeAttribute)e.removeAttribute(this.expand)}delete this.cache[t]},data:function(e,t){var n=e[this.expand]?e[this.expand]:e[this.expand]=""+this.gid++;if(t!=undefined)this.cache[n]=t;return this.cache[n]},resetPosition:function(e){e=e||3;var t=document.compatMode&&document.compatMode.toLowerCase()=="css1compat"?document.documentElement:document.body;if(e&2){var n=(t.clientHeight-this.content.offsetHeight)/2;var r=Math.floor(this.content.offsetWidth/2);$jsex.hash.each($jsex.extend({},this.c,{top:(n>0?n:0)+(window.pageYOffset||t.scrollTop)+"px",marginLeft:0-r+"px"}),function(e,t){$jsex.lightbox.content.style[e]=t})}if(e&1){$jsex.hash.each($jsex.extend({},this.d,{height:Math.max(t.clientHeight,t.scrollHeight)+"px",width:Math.max(t.clientWidth,t.scrollWidth)+"px"}),function(e,t){$jsex.lightbox.overlay.style[e]=t})}},_hide:function(){if(this.showed){if(this.opts["createInstance"])this.showed.style.display="none";else this.content.removeChild(this.showed)}this.showed=null;if(this.opts&&this.opts.onHide)this.opts.onHide.call(window);this.opts=null},showId:function(e){var t=$jsex.lightbox.data(this.content)||{};var n=t[e];if(n){$jsex.lightbox._hide();n.style.display="block";this.opts=$jsex.lightbox.data(n);this.showed=n;this.show(null,null,this.opts)}},show:function(e,t,n){n=n||{};var r;if(!this.overlay){this.overlay=document.body.appendChild(document.createElement("div"));this.content=document.body.appendChild(document.createElement("div"));this.overlay.className="lb_overlay";this.content.className="lb_content";$jsex.event.bind(this.overlay,"click",function(e){if($jsex.lightbox.opts["closeOnClickOverlay"])$jsex.lightbox.hide()})}if(e){var i=this.content.appendChild(document.createElement("div"));$jsex.lightbox.data(i,n);this._hide();this.showed=i;this.opts=n;if(n["createInstance"]){r=""+this.gid++;var s=$jsex.lightbox.data(this.content);if(!s)$jsex.lightbox.data(this.content,s={});s[r]=i}i.innerHTML=e}if(!this.binded){this.binded=true;var o=$jsex.array.xcopy(document.getElementsByTagName("object"),document.getElementsByTagName("select"),document.getElementsByTagName("embed"),[]);$jsex.array.each(o,function(e){$jsex.lightbox.data(e,e.style.visibility);e.style.visibility="hidden"});if(window.attachEvent)window.attachEvent("onresize",this.toBind);else if(window.addEventListener)window.addEventListener("resize",this.toBind,false)}this.content.style.visibility="hidden";this.content.style.display="block";if(typeof t=="function")t.call(this);this.resetPosition(n["reset"]||3);this.content.style.visibility="visible";return r},hide:function(){var e=$jsex.array.xcopy(document.getElementsByTagName("object"),document.getElementsByTagName("select"),document.getElementsByTagName("embed"),[]);$jsex.array.each(e,function(e){e.style.visibility=$jsex.lightbox.data(e)||"inherit";$jsex.lightbox.removeData(e)});for(var t in this.a)this.content.style[t]=this.a[t];for(var t in this.b)this.overlay.style[t]=this.b[t];if(window.detachEvent)window.detachEvent("onresize",this.toBind);else if(window.removeEventListener)window.removeEventListener("resize",this.toBind,false);this.binded=false;this._hide()}};var e=document.createElement("style");e.type="text/css";var t=".lb_content {display : none ; position : absolute ; z-index:10000 ; left:50% ;} .lb_overlay {display : none ; position : absolute ; z-index:10000 ; background-color : #000 ; left : 0px ; top : 0px ; opacity : 0.2 ; filter: Alpha(opacity=20) ;}";if(e.styleSheet)e.styleSheet.cssText=t;else e.appendChild(document.createTextNode(t));document.getElementsByTagName("head")[0].appendChild(e)})()},200:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;n(201)},201:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;(function(e){function h(){return document.compatMode&&document.compatMode.toLowerCase()=="css1compat"?document.documentElement:document.body}function p(){var e=h();return{width:window.innerWidth||e.clientWidth,height:window.innerHeight||e.clientHeight}}function d(e){return"rbox"+e}function v(t){if(typeof t=="string")return l[t];else if(t&&t.isRBox){return t}else{t=jQuery.event.fix(t||window.event);var n=e(t.target).parents("."+u);return n.size()>0&&l[d(n.data("ind"))]}}function y(t,n){var n=e(n||document.documentElement),r=n.scrollTop(),i=n.scrollLeft();if(typeof t==="object")n.css(t);else n.css({overflowX:t,overflowY:t,overflow:t});n.scrollTop(r);n.scrollLeft(i)}function b(t){t=t||document.documentElement;e(t).data("htmlOverflowBackup",{overflowX:t.style.overflowX,overflowY:t.style.overflowY,overflow:t.style.overflow})}function w(t){y(e(t||document.documentElement).data("htmlOverflowBackup")||{},t)}function x(){b(document.body);E={height:document.body.style.height||"",width:document.body.style.width||""};S={scrollTop:e(window).scrollTop(),scrollLeft:e(window).scrollLeft()}}function T(){w(document.body);a.css(E).scrollLeft(S.scrollLeft||0).scrollTop(S.scrollTop||0)}var t=function(){var e=1;var t=/MSIE 7\.0/.test(navigator.userAgent);if(t){if(document.body.getBoundingClientRect){var n=document.body.getBoundingClientRect();var r=n.right-n.left;var i=document.body.offsetWidth;e=Math.round(r/i*100)/100}}return e};var n={hideOnClickOutside:false};var r="ontouchmove"in window;var i={display:"none",position:"absolute",left:"0",top:"0",overflow:"scroll"};var s={display:"none",position:"absolute","background-color":"#000",left:"0",top:"0",opacity:.6,filter:"Alpha(opacity=60)"};var o=1e4,u="rbox_outerContent",a=e(document.body);var f=0,l={};var c=false;var m=function(t,n,r){var i=false,s=e("<div/>").hide(),o=!e.browser.msie||e.browser.verson>=7;if(n){n.after(s);t.bind("scroll.rbox."+r,this.onScroll=function(e){var r;if(i){r=s.position();if(r.top>=0){s.hide();n.css({position:"",left:0,top:0});i=false}}else{r=n.position();if(r.top<=0){s.css({width:n.width(),height:n.height()}).show();if(o)n.css({position:"fixed",top:0,left:s.position().left});i=true}}if(i&&!o){n.css({position:"absolute",top:t.scrollTop(),left:s.position().left})}});e(window).bind("resize.rbox."+r,this.onResize=function(e){if(i){if(!o){n.css({top:t.scrollTop(),left:s.position().left})}else{n.css({left:s.position().left})}}})}this.destroy=function(){e(window).unbind("resize.rbox."+r,this.onResize);t.unbind("scroll.rbox."+r,this.onScroll)}};var g=function(t,n,r){n.contentCss=n.contentCss||{};n.overlayerCss=n.overlayerCss||{};this.ZINDEX_BASE=n.baseIndex||o;this.key=d(r);this.args=n;this.alive=true;this.binded=false;this.visible=false;var a=this.outerContent=e("<div/>").addClass(u).css(e.extend({},i,{zIndex:this.ZINDEX_BASE+r},n.contentCss)).appendTo(e(document.body));this.content=e("<div/>").css({"float":"left",display:"inline"}).appendTo(a);this.overlayer=e("<div/>").css(e.extend({},s,{zIndex:this.ZINDEX_BASE-r},n.overlayerCss)).appendTo(e(document.body));a.data("ind",r);this.setContent(t);l[this.key]=this};g.prototype={isRBox:1,refresh:function(){}};e.each(["close","show","hide","trigger","bind","unbind","data","setContent"],function(t,n){g.prototype[n]=function(){return e.rbox[n].apply(window,[this].concat(Array.prototype.slice.call(arguments||[])))}});e.rbox=function(t,r){var i=++f;r=e.extend({},n,r||{});return new g(t||"",r,i)};e.rbox.setContent=function(t,n){var r=v(t);var i=r.content;if(r.fh){r.fh.destroy();r.fh=null}if(typeof n=="string")i.html(n);else if(n&&n.nodeType==1)i.append(e(n).show());else if(n instanceof jQuery){i.append(n.show())}var s=i.find(".js-header");if(s.size()===1)r.fh=new m(r.outerContent,s,r.key);if(r.visible)r.refresh();return r};e.rbox.bind=function(t,n,r){var i=v(t);if(!i||!i.alive)return;e(i.outerContent).bind(n+".rbox",r);return i};e.rbox.unbind=function(t,n,r){var i=v(t);if(!i||!i.alive)return;if(r)e(i.outerContent).unbind((n||"")+".rbox",r);else e(i.outerContent).unbind((n||"")+".rbox");return i};e.rbox.trigger=function(t,n,r){var i=v(t);if(!i||!i.alive)return;e(i.outerContent).triggerHandler(n+".rbox",r);return i};e.rbox.data=function(e,t,n){var r=v(e);if(!r||!r.alive)return;return r.outerContent.data(t,n)};e.rbox.show=function(n,i){var s=v(n);if(!s||!s.alive)return;if(c){s.outerContent.scrollTop(0).scrollLeft(0);if(s.visible)s.refresh();return}c=true;var o=s.args,u=o.vertical?o.vertical:"";if(!s.visible){if(r){x();e(window).scrollTop(0).scrollLeft(0)}b()}s.visible=true;y("hidden");s.outerContent.show();if(!s.binded){s.binded=true;s.refresh=function(n){s.outerContent.css({overflow:"hidden",width:"1px"});var o=p(),f=h();var l=t();var c=Math.max(document.body.scrollTop,document.documentElement.scrollTop)-(parseFloat(e(document.documentElement).css("borderTopWidth"))||0),d=Math.max(document.body.scrollLeft,document.documentElement.scrollLeft)-(parseFloat(e(document.documentElement).css("borderLeftWidth"))||0);s.outerContent.css({width:o.width,height:o.height,top:c/l,left:d/l,overflow:"auto"});s.overlayer.css({width:Math.max(f.clientWidth,f.scrollWidth),height:Math.max(f.clientHeight,f.scrollHeight),overflow:"hidden",display:"block"});if(r){a.css({height:o.height,width:o.width,overflow:"hidden",overflowX:"hidden",overflowY:"hidden"})}var v=0,m;s.content.css({marginLeft:0,marginTop:0});if(u==="middle")v=(f.clientHeight/l-s.content.height())/2;m=(o.width/l-s.content.width())/2;if(v<0)v=0;if(m<0)m=0;if(typeof i==="number"){s.content.css({marginLeft:m+"px",marginTop:i+"px"})}else{s.content.css({marginLeft:m+"px",marginTop:v+"px"})}};e(window).bind("scroll.rbox."+s.key+" resize.rbox."+s.key+" touchesMoved.rbox."+s.key,s.refresh);if(o.hideOnClickOutside){s.outerContent.bind("mousedown.rbox",function(e){if(e.target===s.outerContent[0]||e.target===s.content[0])s.hide()})}}s.outerContent.scrollTop(0).scrollLeft(0);e(window).triggerHandler("resize.rbox."+s.key);e(s.outerContent).triggerHandler("show.rbox");return s};e.rbox.hide=function(t){var n=v(t);if(!n||!n.alive||!n.visible)return;n.visible=false;c=false;w();e(window).unbind("scroll.rbox."+n.key+" resize.rbox."+n.key);n.binded=false;n.outerContent.unbind("scroll.rbox."+n.key+" resize.rbox."+n.key);n.content.unbind("scroll.rbox."+n.key+" resize.rbox."+n.key);n.outerContent.unbind("mousedown.rbox."+n.key);n.overlayer.unbind("mousedown.rbox."+n.key);n.outerContent.scrollTop(0).scrollLeft(0);n.outerContent.hide();n.overlayer.hide();e(n.outerContent).triggerHandler("hide.rbox");if(r){T()}return n};e.rbox.close=function(t){var n=v(t);if(!n||!n.alive)return;e.rbox.hide(n);n.alive=n.binded=false;n.outerContent.remove();delete l[n.key];e(n.outerContent).triggerHandler("close.rbox");return n};var E={},S={}})(jQuery)},203:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;n(204)},204:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;String.prototype.asciiLength=function(){var e=0;for(var t=0;t<this.length;t++){var n=this.charCodeAt(t);if(n>255){e+=2}else{if(n>65&&n<91){e+=2}else{e++}}}return e};window.getStringLengthLessThan=function(e,t,n){for(var r=0,i=e.length;r<i;r++){var s=e[r];if(s){var o=s.asciiLength();if(o>0&&o<=t){return s}else if(o>t){return s.substring(0,parseInt(t/2,10))+"..."}}}return n||""};String.prototype.asciiTrimByLength=function(e){var t="...";var n=t.length;var r=this.asciiLength();if(r<=e){return this}else if(e==n){return t}else if(e<n){throw new Error("The arguments is not allowed less than "+n)}else{var i=r;var s=this.length-1;for(;s>=0;s--){if(i<=e-n){break}else{var o=this.charCodeAt(s);if(o>255||o>65&&o<91){i=i-2}else{i=i-1}}}return this.substr(0,s+1)+t}}},205:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;window.HotelHistory=new function(){var e=6;var t="hhs";var n=new Date(2111,11,11);this.add=function(i){var s=this.get();s=r(s,i);if(s.length>=e){s=s.slice(s.length-e+1)}s.push(i);Cookie.setCookie(t,s.join(","),n,null,"/city/")};var r=function(e,t){var n=[];for(var r=0;r<e.length;r++){if(e[r]!=t){n.push(e[r])}}return n};var i=function(e){var e=r(r(e,""),0);var t=[];var n={};for(var i=0;i<e.length;i++){if(!n[e[i]]){t.push(e[i]);n[e[i]]=1}}return t};this.get=function(){var e=Cookie.values[t];if(e==null){return[]}else{return i(e.split(","))}};this.del=function(){if(arguments.length<=0)return;var e=arguments[0];var i=this.get();i=r(i,e);Cookie.setCookie(t,i.join(","),n,null,"/city/");$jsex.event.trigger(this,"delete",arguments)}}},226:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;e.exports=function(e){if(window.MapType&&window.MapType==="baidu"&&e){setTimeout(function(){if(e.innerHTML===""){var t=new Image;t.src="http://hotel.qunar.com/track.gif?key=baiduMapKeyError";document.body.appendChild(t)}},5e3)}}},232:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;(function(){function n(e){this.config=e||{};this.key=this.decodeKey()}var e="2wfLlyuiGOEg1bNa3D4xYC7h8oSVqPMQr60j";e+="TmkRtcWAdHpeInUKFs95BvXJz";var t=3;n.prototype.getKey=function(e){var t=this.key.slice(0);if(e){var n=0;var r=[];for(var i=0,s=t.length;i<s;i++){if(t[i]<e){r.push(t[i])}}return r}else{return this.key}};n.prototype.sliceKey=function(e,n){var r=n||this.config.originalKey||"";r=r.toString();var i=[],e=e||t;while(i.length<e){var s=parseInt(r.substr(0,2),16);if(isNaN(s))s=0;var o=r.substr(2,s);r=r.substr(s+2);if(o){i.push(o)}else{i.push("")}}return i};n.prototype.decodeKey=function(e){var n=this.config.slice||t;var r=this.sliceKey(n,e);if(!r||r.length!=n)return[];var i=r[1],s=r[2],o=parseInt(i.charAt(i.length-1),10);if(isNaN(o))return[];var u=this;s=s.substr(o);s=s.split("Z")[0].split("");var a=[];for(var f=0,l=s.length;f<l;f++){a[f]=u.getOrder(s[f])}return a};n.prototype.getOrder=function(t){for(var n=0,r=e.length;n<r;n++){if(e[n]===t){return n}}};e=e.split("");e.push("z");window.SortRestore=n})()},243:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;QClass.define("common.PopupLogin",{singleton:true,options:{cssURL:"//user.qunar.com/webApi/popup.jsp?css=ssl",scriptURL:"//user.qunar.com/webApi/popup.jsp?js=ssl",scriptTimeOut:10*1e3,proxy:"proxy_uc.htm"},initialize:function(e){var t=this;if(!e){e={}}else{t._isLBS=e.isLBS;t._isForce=e.isForce}if(location.host=="review.qunar.com"){t.options.proxy="h/proxy.htm"}t._scriptFlag=false;t._cssFlag=false;t._clickFlag=false;t._loadCSS(t.options.cssURL);t._loadJS(t.options.scriptURL)},show:function(e,t,n){var r=this;if(!!r.getCurrentUser()){$(this).trigger("hasLogined");if(t){t.call(r)}try{QNR.QUstatus.render()}catch(i){}return true}if(""===e){e=null}r._intro=e;r._callback=t;r._timeout=r._handleLoginTimeOut();if(r._scriptFlag&&r._cssFlag){clearTimeout(r._timeout);r._showLoginPop(e,t,n)}else{r._clickFlag=true}return false},_showLoginPop:function(e,t,n){var r=this;var i;var s=r._isLBS||n&&n._isLBS;if(s){i="render/proxy_uc2.htm"}else{i=r.options.proxy}if($.LoginPop){if(r._isForce||n&&n.isForce){window.LoginPop=new $.LoginPop({callback:function(){if(t){t.call(r)}try{QNR.QUstatus.render()}catch(e){}$(r).trigger("success")},proxy:i,prior:"mobile",twoWeek:false,regFlag:true,union:false,notice:e,closeFlag:false})}else{window.LoginPop=new $.LoginPop({callback:function(){if(t){t.call(r)}try{QNR.QUstatus.render()}catch(e){}$(r).trigger("success")},proxy:i,twoWeek:false,regFlag:true,notice:e,union:true})}}if(s){$("#QunarPopBoxBG").css("opacity","0");$(".login_content_head span").eq(0).html("登 录 去 哪 儿 网");$(".login_type .f_r").css("display","none");var o=window.setInterval(function(){if($("#QunarPopBox").length!=0){$("#QunarPopBox").css({top:"0"})}else{window.clearInterval(o)}},300)}},get_events:function(){return["failure","success","cancel"]},_loadCSS:function(e){var t=this;if(!e){return}if(document.getElementById("loginCSS")){return}var n=document.getElementsByTagName("head")[0];var r=document.createElement("link");r.rel="stylesheet";r.type="text/css";r.id="loginCSS";r.href=e;r.onload=r.onreadystatechange=function(){if(!r.readyState||/loaded|complete/.test(r.readyState)){r.onload=r.onreadystatechange=null;t._cssFlag=true;if(t._clickFlag&&t._scriptFlag){t._clickFlag=false;clearTimeout(t._timeout);t._showLoginPop(t._intro,t._callback)}}};n.appendChild(r)},_loadJS:function(e){var t=this;if(!e){return}if(document.getElementById("loginScript")){return}var n=document.getElementsByTagName("head")[0];var r=document.createElement("script");r.type="text/javascript";r.id="loginScript";r.src=e;r.onload=r.onreadystatechange=function(){if(!r.readyState||/loaded|complete/.test(r.readyState)){r.onload=r.onreadystatechange=null;t._scriptFlag=true;if(t._cssFlag&&t._clickFlag){t._clickFlag=false;clearTimeout(t._timeout);t._showLoginPop(t._intro,t._callback)}}};n.appendChild(r)},_handleLoginTimeOut:function(){var e=this;var t=setTimeout(function(){if(!e._scriptFlag){alert("亲，由于网络异常，请稍后重试。")}else if(e._clickFlag&&!e._cssFlag){e._showLoginPop(e._intro,e._callback)}},e.options.scriptTimeOut);return t},getCookie:function(e){var t={};var n=document.cookie.split(";");for(var r=0;r<n.length;r++){var i=n[r];var s=i.split("=");if(i.indexOf("=")!=-1){t[$.trim(s[0])]=$.trim(s[1])}}return t[e]},getCurrentUser:function(){if(QNR&&QNR.QUstatus){return QNR.QUstatus.getUserName().uname}else{return this.getCookie("_q")?this.getCookie("_q").replace("U.","").replace(/"/g,""):null}}})},250:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;(function(){var e=function(e){this._from={}};e.prototype.check=function(e){if(e.errcode){switch(e.errcode){case 110:$(this).triggerHandler("requestFrequently");break;case 111:$(this).triggerHandler("forceLogin");break;case 112:$(this).triggerHandler("showDecode");break}return false}return true};e.prototype.setFrom=function(e,t){this._from={who:e,args:t}};e.prototype.getFrom=function(){return this._from};e.prototype.clearFrom=function(){this._from={}};window.RequestMonitor=e})()},251:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;n(194);n(252)},252:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;(function(){var e="//qcommons.qunar.com/captcha1/api/image?k="+(window.captchaKey||"");var t=['<div id="cap_box" class="b_layer">','<div class="e_inner">','<div class="e_tit"> <a class="m_close js-close" id="cap_box_close" href="#" onclick="return false"></a>输入验证码</div>','<div class="e_con verif_code">','<dl class="m_msg_warn">','<dt><em class="ico_warning"></em></dt>','<dd class="f14">由于您的查询频率过高，请输入验证码后继续。</dd>','<dd class="codef_form"><input id="cap_box_value" type="text" class="input_code" value="请在此输入验证码" maxlength="10" /><a href="#" id="cap_box_submit" onclick="return false" class="btn_blue30 js-close"><span>提 交</span></a> </dd>','<dd class="error_tip" id="cap_box_error"></dd>','<dd class="vcode"><img id="cap_box_image" width="120" height="38" src="//simg1.qunarzz.com/hotel/pixel.gif"><a id="cap_box_change" onclick="return false" href="#">看不清？换一张</a></dd>',"</dl>","</div>","</div>","</div>"];var n="//hotel.qunar.com/render/vcodeValid.jsp";var r="请在此输入验证码";var i="验证码格式错误，请重新输入";var s="请输入验证码";QClass.define("common.CaptchaBox",{singleton:true,initialize:function(e){this.opts=e||{};this.bindTrack()},send:function(){var e=this,t=$(e);var r={vcode:$.trim($("#cap_box_value").val())||""};if(!this.verify(r)){return}this.hideError();$.ajax({url:e.opts.url||n,jsonp:"__jscallback",data:r,type:"GET",dataType:"jsonp",success:function(n){if(n&&n.ret===true){e.hide();t.triggerHandler("success")}else{e.showError(i);e.changeImage();t.triggerHandler("failure")}},error:function(){e.showError("请刷新页面或稍后再试");e.changeImage();t.triggerHandler("verifyError")}})},bindTrack:function(){var e=this;if(!e.opts.from)return;$(this).bind("popup",function(){drawQMonitor(e.opts.from+"_captcha_pop_up")})},verify:function(e){var t=true;if(e.vcode===""||e.vcode===r){t=false;this.showError(s);$("#cap_box_value").focus()}return t},showError:function(e){$("#cap_box_error").text(e).css("visibility","visible")},hideError:function(){$("#cap_box_error").css("visibility","hidden")},show:function(){if(this.open)return;$jsex.lightbox.show(t.join(""));var e=this;this.changeImage();this.bindEvent();$(this).triggerHandler("popup");this.open=true;$("#cap_box_close").hide()},changeImage:function(){$("#cap_box_image").attr("src",e+"&_="+Math.random());$("#cap_box_value").val("").focus()},hide:function(){$("#cap_box_submit").unbind(".captcha");$("#cap_box_change").unbind(".captcha");$("#cap_box_value").unbind(".captcha");$("#cap_box_close").unbind(".captcha");$(window).unbind(".captcha");$(document).unbind(".captcha");$jsex.lightbox.hide();this.open=false},bindEvent:function(){var e=this;$("#cap_box_submit").bind("click.captcha",function(t){e.send()});$("#cap_box_close").bind("click.captcha",function(t){e.hide()});$("#cap_box_change").bind("click.captcha",function(){e.changeImage()});var t=-1,n=false;$("#cap_box_value").bind("focus.captcha",function(){var e=$(this);if(t>=0){clearTimeout(t);t=-1}if(e.val()===r){e.val("")}}).bind("blur.captcha",function(e){var i=$(this);if(t>=0){clearTimeout(t)}t=setTimeout(function(){t=-1;if(i.val()===""){i.val(r)}},300);if(!n){try{if(document.activeElement===document.body){$(this).focus()}}catch(e){}}}).bind("keydown.captcha",function(e){if((e.keyCode||e.which)===13){n=true;$(this).blur();n=false}});$(window).bind("resize.captcha scroll.captcha",function(){$jsex.lightbox.resetPosition()});$(document).bind("keydown.captcha",function(t){if((t.keyCode||t.which)===13){if(!$(t.target).is("#cap_box_submit")){e.send()}}try{if($(document.activeElement).closest("#cap_box").length==0){setTimeout(function(){$("#cap_box_value").focus()},100)}}catch(t){}});$(document).bind("blur.captcha",function(t){if(!$(t.target).is("#cap_box_submit")){if((t.keyCode||t.which)===13){e.send()}}})}})})()},278:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;var i=n(279);var s=n(281);var o=n(282);var u=n(283);var a=n(284);var f=function(){var e=1;return function(){return e++}}();var l={0:"domestic",1:"intercity"};var c={domestic:430,intercity:530};e.exports=function(e,t,n){function z(){U.reset(function(){s.trigger("dateFinish")})}function W(e){var t=h==="intercity"?1:0;var n=C.getValue();var i=k.getValue();var o=T.val();var u=r.infoLast;if(t!==e){var a=$("#js_searchtype_inter"),f=$("#js_searchtype_mainland");if(u){C.setValue(u.cityLast);k.setValue(u.poiLast);N(u.cityurlLast);s.trigger("citychanged",u.cityLast)}var l={city:n,poi:i,cityurl:o};if(e){a.trigger("click",l)}else{f.trigger("click",l)}}else{r.infoLast={poiLast:i,cityLast:n,cityurlLast:o};Q(e)}}function X(e,t){return!e&&t!="澳门"&&t!="macao"&&t!="香港"&&t!="hongkong"}function J(){if(d){var e=$("#js_searchtype_mainland").attr("checked")?true:false;cityname=e?$("#mainlandForm").find("#toCity").val():$("#interForm").find("#toCity").val();V(cityname,function(e,t){if(e&&t!="澳门"&&t!="macao"&&t!="香港"&&t!="hongkong"){w="inter"}else{w="mainland"}})}}function K(){var e=$(".js-popContainer").find(".js-dateDesTag");if(!w){w=window.isNotInternatonLand?window.isNotInternatonLand:"mainland"}if(d){var t=setTimeout(function(){if(w=="inter"){e.slideDown(400);e.addClass("js-dateDesFlag")}else if(w=="mainland"){e.hide();e.removeClass("js-dateDesFlag")}clearTimeout(t)},300)}else{var n=$("#sForm").find("#toCity").val();var r=window.isMainland||n=="澳门"||n=="香港";if(!r){e.slideDown(400);e.addClass("js-dateDesFlag")}else{e.hide();e.removeClass("js-dateDesFlag")}}}function Y(){return h!=="domestic"}var r=this;var n=n||{};var s=$(this);var h=n.hotCityType;var p=n.isJudgeCity;var d=this.isHomePage=n.isHomePage;var v=n.queryTip||"酒店名、地标、商圈，可组合搜索";var m=n.fromRule||2;var g=n.toRule||3;var y=g-m;var b=$(e);var w=null;var E=typeof n.showHotCity=="undefined"?true:n.showHotCity;var S=typeof n.showQuery=="undefined"?true:n.showQuery;var x=typeof n.queryNumbers=="undefined"?"all":n.queryNumbers;var T=this.cityUrlInput=b.find("input[name=cityurl]");if(T.length==0){T=$('<input type="hidden" name="cityurl"/>');b.append(T)}r.toCityUrl=T;var N=function(e){T.val(e);$(r).trigger("cityUrlChange",e)};var C,k,L,A;var O=new ScriptRequest({oncomplete:function(e){r.HotelLang=e["hotCityConfig"];r.hotCityData=r.HotelLang["data"];C.render(h);C.cache["CITYNAME"]=C.getValue()},callbackName:"__jscallback"});var M=function(e,t){(new Image).src="//www.qunar.com/track.htm?_="+(new Date).getTime()+"&hotel=citybox&q="+encodeURIComponent(e)+"&c="+t;$(document).trigger("cityChanged",{city:e})};C=this.toCity=new i(e.toCity,{button:{mousedown:function(e){if(!E)return;e.preventDefault?e.preventDefault():e.returnValue&&(e.returnValue=false);this.openMainMenu();$(".sugbox").css("display","none");H.close()}},input:{label:n.cityLabel||"",click:function(e){if(!E)return;e.preventDefault?e.preventDefault():e.returnValue&&(e.returnValue=false);if(r.suggestOpen){}else{this.openMainMenu()}}},focus:function(){this.inputEl.select()},blur:function(){var e=$.trim(this.inputEl.value.replace(/["\\|]*/g,""));if(e===""){if(r.allRenderData){this.inputEl.value=r.allRenderData[0].c;if(d){s.trigger("tabchanged",this.inputEl.value)}else{s.trigger("citychanged",this.inputEl.value)}}}J()},popups:{main:{initialize:function(){var e=this.own;e.setPanel(this.panel);if(!r.HotelLang){O.send("//hotel.qunar.com/render/hoteldiv.jsp?")}else{C.render(h);e.cache["CITYNAME"]=e.getValue()}},open:function(){var e=this.own;if(!self.HotelLang){return}if(p){var t=e.getValue();if(e.cache["CITYNAME"]&&e.cache["CITYNAME"]!==t){V(t,function(t){e.panel.innerHTML="";e.render(l[t])});e.cache["CITYNAME"]=e.getValue()}}}}},attrs:{suggRequest:new ScriptRequest({oncomplete:function(e){C.dataLoaded(e)},callbackName:"callback"}),invalid:function(){return $(this.infoPanel).hasClass("errtext")},cache:{},suggLoaded:function(e){if(e)this.cache[e.userInput]=e;if(!e||!e.ret||!e.data||e.data.length==0){var t=this.popups.open("suggest");if(t.layer.error){t.layer.error()}else{this.setInfo("暂未收录","errtext");this.popups.close()}M(e.userInput,"0");return}this.setInfo("");e.q=e.userInput;var t=this.popups.open("suggest");t.layer.refresh(e,Y());t.layer.enter(0)},render:function(e){var t=c[e];var n=r.HotelLang[e];var i=r.hotCityData[e];if(!n||!i)return false;var s=this;var o=s.getOwnPanel();var a=[];var l=new UIObject;var h="__hotel_citybox_"+f();l.text('<div class="hotelhint" style="width:'+t+'px">').append("<img","close",' class="closeImg" src="//source.qunarzz.com/site/images/new_main/Hot_close.png"/>').append('<div class="b_hct_tit">直接输入可搜索71360个城市和热门的地标、商圈</div>').append('<div class="b_hct_nav">');for(var p=0;p<n.length;p++){var d="_hotel_search_tab_"+p+f();a.push({tabID:d,tabname:n[p],render:G({tabName:n[p],contents:i,own:s,boxId:h})});l.text('<span id="',d,'" key="',n[p],'"');if(p==0){l.text(' class="active" ')}l.text(">",n[p],"</span>")}l.text("</div>",'<div id="',h,'"></div>','<div class="b_hct_tip">更多城市可直接输入搜索</div></div>');l.write(o);new u({panelContainerID:h,items:a});s.cache[e]=s.panel.innerHTML;$(l.getDomNode("close")).bind("click",function(){s.popups.close()})},setPanel:function(e){this.panel=e},getOwnPanel:function(){return this.panel}}});var _=e.toCity;var D=$(".popContainer").eq(0);var P=$('<div class="sugbox" style="position:absolute; width:100%"></div>');D.append(P);var H=new a(_,P,{searchType:h});$(H).on("select",function(e,t){s.trigger("selectCityPoi",t.poi);J()});$(H).on("enter",function(){s.trigger("enterClick")});$(H).on("isOpened",function(e,t){r.suggestOpen=t;C.hideMainMenu()});$(H).on("isClosed",function(e,t){r.suggestOpen=t});$(H).on("getDataFail",function(e,t){if(t){if(t.data){$(r).trigger("sugEnter",t)}M(t.city,"0")}});$(H).on("selectFinish",function(e,t,n){$(r).trigger("sugClick",t.idx);s.trigger("cityfinished",this.inputEl.value);if(d){s.trigger("tabchanged",this.inputEl.value)}else{s.trigger("citychanged",this.inputEl.value)}N(t.url);s.trigger("selectCityPoi",t.poi);var i=C.getValue();M(i,"1");s.trigger("reloadList",[i,t.poi]);J();if(n==="enter"){k.focusin()}});$(H).on("change",function(e){C.hideMainMenu();if(this.inputEl.value){N("")}s.trigger("citychanged",this.inputEl.value)});$(H).on("getDataSuccess",function(e,t){if(t&&t.data){$(r).trigger("sugEnter",t);r.allRenderData=t.data}});var B=new ScriptRequest({oncomplete:function(e){k.listLoaded(e)},callbackName:"callback"});var j=new ScriptRequest({oncomplete:function(e){if(x!=="all"&&e&&e.data)e.data=e.data.slice(0,x);$(r).trigger("sugQueryEnter",e);k.suggLoaded(e)},callbackName:"callback"});var F=[];var I=function(){try{var e=F,t=e.length;if(t<4)return;var n=e[t-4]["k"]+e[t-3]["k"]+e[t-2]["k"]+e[t-1]["k"];if(n=="kcse"&&e[t-2]["f"]){(new Image).src="/opertrack.htm?v=1&t="+(new Date).getTime()+"&oper=keyboard&n="+encodeURIComponent(e[t-3]["v"])+"&o="+encodeURIComponent(e[t-3]["o"])+"&idx="+e[t-2]["v"]+"&c="+encodeURIComponent(C.getValue())}else if(n=="skse"&&t>=5&&e[t-2]["f"]){(new Image).src="/opertrack.htm?v=1&t="+(new Date).getTime()+"&oper=keyboard&n="+encodeURIComponent(e[t-5]["v"])+"&o="+encodeURIComponent(e[t-5]["v"])+"&idx="+e[t-2]["v"]+"&c="+encodeURIComponent(C.getValue())}else if((n=="ckcs"||n=="kccs"||n=="cccs")&&e[t-1]["f"]){(new Image).src="/opertrack.htm?v=1&t="+(new Date).getTime()+"&oper=mouse&n="+encodeURIComponent(e[t-2]["v"])+"&o="+encodeURIComponent(e[t-2]["o"])+"&idx="+e[t-1]["v"]+"&c="+encodeURIComponent(C.getValue())}else if(n=="kkcs"&&e[t-1]["f"]){(new Image).src="/opertrack.htm?v=1&t="+(new Date).getTime()+"&oper=mouse&n="+encodeURIComponent(e[t-2]["v"])+"&o="+encodeURIComponent(e[t-2]["v"])+"&idx="+e[t-1]["v"]+"&c="+encodeURIComponent(C.getValue())}}catch(r){}};k=this.q=new i(e.q,{button:{mousedown:function(e){if(!S)return;var t;if(e&&(t=e.target||e.srcElement)){this.openMainMenu();e.preventDefault?e.preventDefault():e.returnValue&&(e.returnValue=false)}}},input:{label:n.qLabel||'<div class="poi-add js-address"></div><div class="poi-hotel js-hotelname"></div>',click:function(e){if(!S)return;e.preventDefault?e.preventDefault():e.returnValue&&(e.returnValue=false);var t=this.popups.get("suggest");if(t&&t.isOpend()){}else{this.openMainMenu()}},change:function(e,t,n){if(e!==t){$(this.labelEl).hide()}if(!n){this.inputold=e;j.cancel();if(e){j.send("//innovation.qunar.com/suggestion?requestor=RT_PC&citytag="+encodeURI(T.val())+"&q="+encodeURIComponent(e)+"&fromDate="+encodeURI(L.getValue())+"&toDate="+encodeURI(A.getValue())+"&commonSwitchBit=1");this.popups.close("main")}else{this.popups.close("suggest")}}else{$(r).trigger("sugQueryClick",e)}F.push({k:"c",v:e,o:t})},keypress:function(e){this.keypress(e,e.keyCode);F.push({k:"k",v:e.keyCode})}},focus:function(){this.city=C.getValue();this.setInfo("");this.inputEl.select()},popups:{main:{open:function(){this.panel.innerHTML="";if(!C.invalid()){var e=C.getValue();if(this.own.cache[e]){this.own.listLoaded(this.own.cache[e])}else{B.send("//innovation.qunar.com/navigate?requestor=pc&platform=adr&cityRelation=1&cityName="+encodeURI(e))}}else this.close()}},suggest:{initialize:function(){this.layer=new o(this,{select:function(e,t){var n=this.popup.own;var r=true;if(e>-1){var i=this.nodes[e].item;$(n.labelEl).hide();t?n.setValue(i.ahead):n.volateValue(i.ahead)}else{t?n.initValue(n.inputold):n.volateValue(n.inputold)}n.vidx=e;if(t){this.popup.close();s.trigger("qsug");if(e>-1){s.trigger("enterSug",this.nodes[e].item)}}F.push({k:"s",v:e,f:t});I()}})}}},blur:function(){this.setTip()},attrs:{setValue:function(){i.prototype.setValue.apply(this,arguments);this.setTip()},setTip:function(){if(this.getValue()=="")this.setInfo(v,"infotext");else this.setInfo("")},keypress:function(e,t){var n=this.popups.get("suggest");if(!n||!n.isOpend()){if(t===13){s.trigger("enterClick")}return}switch(t){case 40:n.layer.moveCursor(1,true);break;case 38:n.layer.moveCursor(-1,true);break;case 13:e.preventDefault?e.preventDefault():e.returnValue&&(e.returnValue=false);n.layer.select(n.layer.cursor,true);s.trigger("qsug");if(n.layer.cursor>-1){s.trigger("enterSug",[n.layer.nodes[n.layer.cursor].item,t])}n.close();F.push({k:"e"});I();break;default:}},cache:{},listLoaded:function(e){if(!e||+e.errcode===500){this.popups.close("main");return}this.cache[e.cityName]=e;if(C.getValue()==e.cityName){var t=this;var n=this.popups.get("main");var r=[{name:"热门景点",fields:["touristSpots"],limits:[10]},{name:"机场车站",fields:["airports","trainStations"]},{name:"热门品牌",fields:["brands"],limits:[20]},{name:"地铁线路",fields:["subways"],showField:"name"}];var i=false;var o=[];o.push('<div class="hiddend showblock">');$.each(r,function(t,n){var r=[],s=n.showField||"qname";if(!n.fields){return}$.each(n.fields,function(t,i){if(!e[i]||e[i].length===0){return}var o=e[i].length;if(n.limits&&n.limits[t]&&o>n.limits[t]){o=n.limits[t]}for(var u=0;u<o;u++){r.push("<a>"+e[i][u][s]+"</a>\n")}});if(r.length>0){if(!i){i=true}o.push('<b class="oymTitle">'+n.name+"</b>","<p>");o=o.concat(r);o.push("</p>")}});o.push("</div>");if(!i){n.panel.innerHTML="";t.popups.close("main");return}var u=o.join(""),a="<p>",f=u.lastIndexOf(a);u=u.substr(0,f)+'<p class="last">'+u.substr(f+a.length,u.length);n.panel.innerHTML=u;var l=n.panel.getElementsByTagName("a");for(var c=0,h=l.length;c<h;c++){l[c].onclick=function(){t.setValue($.trim(this.innerHTML));t.popups.close();s.trigger("qdiv")}}}else{this.popups.close("main")}},suggLoaded:function(e){if(!e||!e.ret){this.popups.close("suggest")}else{var t=this.popups.open("suggest");t.layer.refresh(e)}}}});var R=new ActionDelay(100);this.getDateChecker=function(){return t};this.setDateChecker=function(e){t=e};L=this.fromDate=new i(e.fromDate,{button:{mousedown:function(e){e.preventDefault?e.preventDefault():e.returnValue&&(e.returnValue=false);this.openMainMenu()}},input:{label:n.fromDateLabel||"入住",click:function(e){e.preventDefault?e.preventDefault():e.returnValue&&(e.returnValue=false);this.openMainMenu()},change:function(e,n,r){var i=t.checkDate1(this.getValue());if(!i.error){t.setDate1(i.recommend);R.reset(function(){s.trigger("fromDateChanged")})}this.setTip(i)},keypress:function(e){this.keypress(e,e.keyCode)}},blur:function(){var e=t.checkDate1(this.getValue());t.setDate1(e.recommend);this.setValue(e.recommend)},popups:{main:{initialize:function(){this.dateLayer=new DateLayer(this.panel,t);var e=this.own;var n=this;$(this.dateLayer).bind("selected",function(t,r){e.setValue(QunarDate.format(r));n.close()})},open:function(){var e=t.checkDate1(this.own.getValue());var n=true;this.dateLayer.render(e.recommendDate,t.getMin(),null,n);K()}}},attrs:{keypress:function(e,t){switch(t){case 13:if(this.popups.isOpend()){this.popups.close()}s.trigger("enterClick");break;case 27:e.preventDefault?e.preventDefault():e.returnValue&&(e.returnValue=false);this.popups.close();break;default:}},setTip:function(e){var e=e||t.checkDate1(this.getValue());if(e.error)this.setInfo(e.value,"errtext",e.tip);else this.setInfo(QunarDate.getDateTip(e.recommend),"","")},invalid:function(){return $(this.infoPanel).hasClass("errtext")}}});A=this.toDate=new i(e.toDate,{button:{mousedown:function(e){e.preventDefault?e.preventDefault():e.returnValue&&(e.returnValue=false);this.openMainMenu()}},input:{label:n.toDateLabel||"离店",click:function(e){e.preventDefault?e.preventDefault():e.returnValue&&(e.returnValue=false);this.openMainMenu()},change:function(e,n,r){var i=Math.min(new Date(QunarDate.parse(L.getValue()).getTime()+28*24*3600*1e3),QunarDate.plus(t.getMax(),1));i=new Date(i);var o=t.checkDate2(this.getValue(),L.getValue(),QunarDate.format(i));if(!o.error){t.setDate2(o.recommend,QunarDate.format(QunarDate.plus(t.getMax(),1)));R.reset(function(){s.trigger("toDateChanged")})}this.setTip(o)},keypress:function(e){this.keypress(e,e.keyCode)}},blur:function(){var e=t.checkDate2(this.getValue(),L.getValue(),QunarDate.format(QunarDate.plus(t.getMax(),1)));t.setDate2(e.recommend,QunarDate.format(QunarDate.plus(t.getMax(),1)));this.setValue(t.getDate2())},popups:{main:{initialize:function(){this.dateLayer=new DateLayer(this.panel,t);var e=this.own;var n=this;$(this.dateLayer).bind("selected",function(t,r){e.setValue(QunarDate.format(r));n.close()})},open:function(){var e=t.checkDate2(this.own.getValue(),L.getValue(),QunarDate.format(QunarDate.plus(t.getMax(),1)));var n=new Date(QunarDate.parse(L.getValue()).getTime()+24*3600*1e3);var r=new Date(Math.min(new Date(QunarDate.parse(L.getValue()).getTime()+28*24*3600*1e3),new Date(QunarDate.plus(t.getMax(),1))));var i=false;this.dateLayer.render(e.recommendDate,n,r,i);K()}}},attrs:{keypress:function(e,t){switch(t){case 13:if(this.popups.isOpend()){this.popups.close()}s.trigger("enterClick");break;case 27:e.preventDefault?e.preventDefault():e.returnValue&&(e.returnValue=false);this.popups.close();break;default:}},setTip:function(e){var e=e||t.checkDate2(this.getValue(),L.getValue(),QunarDate.format(QunarDate.plus(t.getMax(),1)));if(e.error)this.setInfo(e.value,"errtext",e.tip);else this.setInfo(QunarDate.getDateTip(e.recommend),"","")},invalid:function(){return $(this.infoPanel).hasClass("errtext")}}});L.initValue(t.getDate1());L.setTip();A.initValue(t.getDate2());A.setTip();if(n.q){k.initValue(q);k.city=C.getValue()}else{k.setTip()}s.bind("fromDateChanged",function(){var e=t.checkDate1(L.getValue()).recommend;var n=Math.min(QunarDate.plus(QunarDate.parse(e),28).getTime(),QunarDate.plus(t.getMax(),1).getTime());var r=t.checkDate2(A.getValue(),e,QunarDate.format(new Date(n))).recommend;t.setDate2(r,QunarDate.format(new Date(n)));A.setValue(r);$(document).trigger("fromDateChanged")});s.bind("toDateChanged",function(){$(document).trigger("toDateChanged")});var U=new ActionDelay(200);s.bind("dateAllChanged",function(e,n){var r=n.desDate,i=n.formDate,o=n.toDate;var u=r?r.getTime():(window.SERVER_TIME||new Date).getTime();var a=i?i.getTime():(window.SERVER_TIME||new Date).getTime();var f=o?o.getTime():(window.SERVER_TIME||new Date).getTime();if(u>a){var l=QunarDate.format(new Date(u));var c=t.checkDate1(l);t.setDate1(c.recommend);L.setValue(c.recommend);s.trigger("fromDateChanged")}});s.bind("fromDateChanged",z);s.bind("toDateChanged",z);s.bind("citychanged",function(e,t){V(t,Q)});r.infoLast={cityLast:_.value,poiLast:"",cityurlLast:T.val()};s.bind("tabchanged",function(e,t){if(d){V(t,W)}});var V=r.judgeCity=function(e,n){var i=r.toCityUrl&&r.toCityUrl.val();$.ajax({type:"GET",url:"//hotel.qunar.com/render/mainland.jsp?cityname="+encodeURIComponent(e)+"&cityurl="+encodeURIComponent(i),cache:false,dataType:"jsonp",success:function(r){if(r){if(r.errcode){}else{n&&n(r.ret?0:1,e);try{var i=X(r.ret,e)?r.destTime?new Date(r.destTime):null:null;t.setDesTime(i);t.resetMinMaxDate();s.trigger("dateAllChanged",{desDate:i,formDate:t.date1,toDate:t.date2})}catch(o){window.console&&console.log(o)}}s.trigger("judgeCityEvent",r)}}})};var Q=r.resetDateSearchBox=function(e){var t=null;var n=r.fromDate.getValue();var i=r.toDate.getValue();var s=QunarDate.today();if(r.isOverseasOld!==e){if(e){t=new DateChecker(364,2,1);t.setDate1(n);t.setDate2(i,QunarDate.format(QunarDate.plus(t.getMax(),1)));r.fromDate.setValue(n);r.toDate.setValue(i);r.setDateChecker(t)}else{t=new DateChecker(89,2,1);var o,u;if(!n){o=new Date(s.getTime()+1e3*3600*24*m)}else{o=QunarDate.parse(n);if(o<s||o>t.getMax()){o=new Date(s.getTime()+1e3*3600*24*m)}}if(!i){u=new Date(o.getTime()+1e3*3600*24*y)}else{u=QunarDate.parse(i);if(u<=o||u>QunarDate.plus(t.getMax(),1))u=new Date(o.getTime()+1e3*3600*24*y)}t.setDate1(QunarDate.format(o));t.setDate2(QunarDate.format(u));r.fromDate.setValue(QunarDate.format(o));r.toDate.setValue(QunarDate.format(u));r.setDateChecker(t)}r.fromDate.popups.get("main").inited=false;r.toDate.popups.get("main").inited=false;r.isOverseasOld=e}};var G=function(e){var t=e.tabName,n=e.contents,r=e.own,i=e.boxId;return function(e){var o=[];if(!n[t])return false;var u=n[t].cityList;if(!u)return false;var a=n[t].charSort;for(var f=0;f<u.length;f++){if(!a){var l=u[f];var c=l.list;o.push("<ul>");for(var p=0;p<c.length;p++){var d=c[p];o.push('<li key="'+d.name+'">'+'<a href="#" key="'+t+'" class="js_hotcity_intercity" data-city="'+(d.cityurl||"")+'">'+d.name+"</a></li>")}o.push("</ul>")}else{var l=u[f];var c=l.list;var v=l["char"]?l["char"]:"";o.push('<dl class="e_hct_lst"><dt class="citychar">'+l["char"]+' </dt><dd class="cityname"><ul>');for(var p=0;p<c.length;p++){var d=c[p];o.push('<li key="'+d.name+'">'+'<a href="#" key="'+t+'" class="js_hotcity_maincity" data-city="'+(d.cityurl||"")+'">'+d.name+"</a></li>")}o.push("</ul></dd></dl>")}}e.innerHTML=o.join("");var m=e.getElementsByTagName("a");for(var f=0,g=m.length;f<g;f++){m[f].onclick=function(){var e=$.trim(this.innerHTML);var t=this.getAttribute("key");var n=this.getAttribute("data-city");r.setValue(e);N(n);s.trigger("citychanged",e);r.popups.close();M(r.getValue(),"1&hot=1");r.setInfo("");s.trigger("selectHotCity",e);s.trigger("select",e);s.trigger("gaHotcity",[e,h,t]);self._invalid=false;s.trigger("reloadList",e);return false}}if(n[t].cls){$("#"+i).get(0).className=n[t].cls}else{$("#"+i).get(0).className=""}}}}},279:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;var i=n(280);var s=function(e,t){function o(){i=null;if(n!=r)n=r;if(n){t.focusin()}else t.focusout()}var n=false;var r=false;var i=null;var s=5;$(e).bind("focusin",function(){r=true;if(i)clearTimeout(i);i=setTimeout(o,s)});$(e).bind("focusout",function(){r=false;if(i)clearTimeout(i);i=setTimeout(o,s)})};var o=function(e,t){var n=this.elem=e.parentNode;this.inputEl=e;this.collateValue=e.value;this.tempValue=null;var r=n?n.nodeType==9?n:n.ownerDocument||document:document;var o=r.createElement("DIV");o.className="labelContainer";n.insertBefore(o,e);this.labelEl=o;var u=r.createElement("DIV");u.className="boxWrapper";n.insertBefore(u,e);var a=(new UIObject).append("<div","main",' class="boxContainer">').append("<div","sinfo",' class="sinfo"></div><div class="sicon"></div>').text('<div style="clear:both"></div>').text("</div>");a.write(u);var f=a.getDomNode("main"),l=a.getDomNode("sinfo");this.infoPanel=l;$(f).bind("mouseover",function(){$(this).addClass("switcher_in")});$(f).bind("mouseout",function(){$(this).removeClass("switcher_in")});if(t.attrs)for(var c in t.attrs)this[c]=t.attrs[c];if(t.button){if(t.button.mousedown)$(this).bind("buttonmousedown",t.button.mousedown)}if(t.input){if(t.input.click){this.bindDom(e,"click",this,t.input.click)}if(t.input.mousedown)this.bindDom(e,"mousedown",this,t.input.mousedown);if(t.input.change){$(this).bind("valuechange",function(e,n,r,i,s){t.input.change.call(n,r,i,s)})}if(t.input.keypress)this.bindDom(e,"keydown",this,t.input.keypress);if(t.input.label)o.innerHTML=t.input.label}s(n,this,e);var h=this;if(t.focus){$(this).bind("focus",function(e){t.focus.call(h)})}if(t.blur){$(this).bind("blur",function(e){t.blur.call(h)})}this.bindDom(e,"keyup",this,function(e){var t=this;setTimeout(function(){return t._listenKey.apply(t,arguments)},0)});var p=this.popContainer=r.createElement("DIV");p.className="popContainer";p.display="none";n.appendChild(p);this.popups=new i(p);if(t.popups){for(var c in t.popups)this.popups.createPopup(c,t.popups[c]).own=this}$.browser.mise&&$.browser.version<9&&$(e).bind("focus",function(e){this._f_leave=0});this.bindDom(f,"mousedown",this,this.mousedown);p.onmousedown=function(t){e._f_leave=1;return false}};o.prototype.bindDom=function(e,t,n,r){$(e).bind(t,function(e){r.call(n,e,this)})};o.prototype.setValue=function(e){this.tempValue=null;this.inputEl.value=e;this._listenKey(true)};o.prototype.volateValue=function(e){this.tempValue=this.inputEl.value=e;this._listenKey()};o.prototype.initValue=function(e){this.collateValue=this.inputEl.value=e;this.tempValue=null};o.prototype.getValue=function(){return this.inputEl.value};o.prototype.setInfo=function(e,t,n){this.infoPanel.innerHTML=e||"";var r="sinfo";if(t)r=r+" "+t;this.infoPanel.className=r;this.infoPanel.title=n||""};o.prototype.focusin=function(){$(this.elem).addClass("qbc_fin");$(this).trigger("focus");this.timerListen(true)};o.prototype.focusout=function(){this.popups.close();$(this.elem).removeClass("qbc_fin");$(this).trigger("blur");this.timerListen(false)};o.prototype.mousedown=function(e){var t=this.inputEl;$.browser.mise&&$.browser.version<9&&(t._f_leave=1);window.setTimeout(function(){t.focus()},0);if(window.event){event.returnValue=false;event.cancelBubble=true}else{e.preventDefault();e.stopPropagation()}$(this).trigger("buttonmousedown",e);return false};o.prototype.openMainMenu=function(){var e=this.popups.get("main");if(e&&e.isOpend())this.popups.close();else this.popups.open("main")};o.prototype.hideMainMenu=function(){var e=this.popups.get("main");if(e&&e.isOpend())this.popups.close()};o.prototype._listenKey=function(e){if(this.inputEl.value==this.tempValue){}else if(this.inputEl.value!=this.collateValue||e){var t=this.collateValue;this.collateValue=this.inputEl.value;$(this).trigger("valuechange",[this,this.inputEl.value,t,e===true])}};o.prototype.timerListen=function(e){var t=this;if(e){if(!this.listenID)this.listenID=setInterval(function(){return t._listenKey.apply(t,arguments)},50)}else{if(this.listenID){clearInterval(this.listenID);this.listenID=null}}};e.exports=o},280:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;var r=function(e){this.panel=null;this.className="popPanel"+(e.className?" "+e.className:"");var t=this;if(e.close){$(this).bind("xClose",function(t){e.close.call(this)})}if(e.open)$(this).bind("open",function(n){e.open.call(t)});if(e.initialize)this.initialize=e.initialize};r.prototype.initialize=function(e){};r.prototype._open=function(){this.panel.style.display="";$(this).trigger("open")};r.prototype.isOpend=function(){return this.panel&&this.panel.style.display!="none"};r.prototype.close=function(){$(this).trigger("xClose");this.panel.style.display="none"};var i=function(e){this.popups={};this.container=e;this.current=null;this.defaultName=null};i.prototype.createPopup=function(e,t){return this.popups[e]=new r(t)};i.prototype.open=function(e){var t=this.popups[e];if(t){if(!t.inited){var n=t.panel;var r=this.container?this.container.nodeType==9?this.container:this.container.ownerDocument||document:document;if(!n){n=r.createElement("DIV");n.className=t.className;n.style.display="none";this.container.appendChild(n);t.panel=n}t.initialize();t.inited=true}if(this.current&&this.current!=t&&this.current.isOpend())this.current.close();if(!t.isOpend()){t._open()}return this.current=t}};i.prototype.close=function(e){if(e&&!this.isOpend(e))return;if(this.current!=null){this.current.close();this.current=null}};i.prototype.isOpend=function(e){if(e){if(this.popups[e])return this.popups[e].isOpend()}else if(this.current!=null)return this.current.isOpend();return false};i.prototype.get=function(e){return this.popups[e]};e.exports=i},281:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;var r={0:"CITY",1:"CITY",2:"CITY",3:"CITY",4:"CITY",5:"POI",6:"TRADING"};var i={CITY:'城市区县<i class="icon-category">&#xf008;</i>',POI:'地标<i class="icon-category">&#xe108;</i>',TRADING:'商圈<i class="icon-category">&#xe107;</i>'};var s=function(e,t){this.popup=e;this.cursor=-1;this.nodes=[];this.limit={TOTAL:10};var n=this;if(t.select){$(this).bind("_select",function(e,r,i,s){t.select.call(n,r,i,s)})}};s.prototype.error=function(){var e=new UIObject;e.append("<table","suggestList",' class="ill error" cellspacing="0" cellpadding="0" >');e.text('<tr class="illrow">',"<td>对不起，不支持该目的地</td>","</tr>");e.write(this.popup.panel)};s.prototype.escape=function(e){e=String(e===null?"":e);return e.replace(/&(?!\w+;)|["'<>\\]/g,function(e){switch(e){case"&":return"&amp;";case"\\":return"\\\\";case'"':return"&quot;";case"'":return"&#39;";case"<":return"&lt;";case">":return"&gt;";default:return e}})};s.prototype.refreshInter=function(e){this.cursor=-1;var t,n;if(this.nodes.length>0){for(var s=0;s<this.nodes.length;s++){t=this.nodes[s];n=$(t);t.item=null;t.layer=null;n.off("mouseover",this.mouseover).off("click",this.click).remove();n=null;this.nodes[s]=null}}this.nodes.length=0;var o=e.data||e.result;var u=o.length;var a=e.city;var f=new RegExp("("+a+")","i");var l=0;var c=new UIObject;c.append("<div ","suggestList",'class="m-suggest">');if(u>=this.limit.TOTAL){c.text('<h5 class="m-suggest-hd">').text('<span class="text_input">',a,"，</span>若需缩小范围，请输入更多条件。").text("</h5>")}c.text('<div class="m-suggest-bd">').text('<table class="suggest-list" cellpadding="0" cellspacing="0">');var h,p,d,v,m,g;for(var s=0;s<u;s++){if(l>=this.limit.TOTAL){break}l++;g=false;h=o[s];p=h.p?this.escape(h.p).replace(f,'<span class="key">$1</span>'):"";d=h.e?this.escape(h.e).replace(f,'<span class="key">$1</span>'):"";v=r[h.g||0];if(!m||m!==v){g=true}m=v;if(s!==0&&g){c.text('<tr><td colspan="3" class="line-box"><div class="line">&nbsp;</div></td></tr>')}c.append("<tr  ",s).text('class="suggest-item" title="',h.p,h.e?"\n("+h.e+")":"",'">').text("<td>").text('<div class="info">');if(p){c.text('<h3 class="info-ch">',p,"</h3>")}if(d){c.text('<h4 class="info-en">(',d,")</h4>")}c.text("</div>").text("</td>");c.text('<td><div class="num">',h.n?h.n+"家酒店":"","</div></td>");c.text('<td><div class="category">',g?i[v]:"","</div></td>");c.text("</tr>")}c.text("</table>").text("</div>");c.text("</div>");c.write(this.popup.panel);var y=this.nodes;var b=0;for(var s=0;s<u;s++){if(b>=10){break}if(+o[s].t===0||+o[s].t===2){b++}t=c.getDomNode(s);if(t){t.item={key:o[s].c,url:o[s].o,type:o[s].t,poi:o[s].i||"",showType:r[o[s].g||0]};t.layer=this;t.idx=s;y[s]=t;$(t).on("mouseover",this.mouseover);$(t).on("click",this.click)}else{console.log("node undefined")}}};s.prototype.refresh=function(e,t){if(t){this.refreshInter(e);return}this.cursor=-1;if(this.nodes.length>0){for(var n=0;n<this.nodes.length;n++){var r=this.nodes[n];r.item=null;r.layer=null;$(r).remove()}}this.nodes.length=0;var i=e.data||e.result;var s=e.city;var o=new RegExp("("+s+")","i");var u=/(,[^\)]*)/i;var a=/([,|\(].*)$/i;var f=new UIObject;f.append("<table","suggestList",' class="ill illtow illtow1" cellspacing="0" cellpadding="0" >');f.text('<tr class="splitrow">');f.text('<td class="splitline" ></td>');f.text('<td class="splitline" ></td>');f.text('<td class="splitline" ></td>');f.text("</tr>");var l=0;var c={0:"国家",1:"省份",2:"城市",3:"区县",4:"景点",5:""};for(var n=0;n<i.length;n++){if(l>=10){break}var h=i[n];var p=h.t==1&&n!=0?true:false;var d="";if(h.t==2){d=this.escape(h.p).replace(o,'<span class="keystring">$1</span>').replace(a,'<span class="greystring">$1</span>')}else{d=this.escape(h.p).replace(o,'<span class="keystring">$1</span>').replace(u,'<span class="greystring">$1</span>')}if(p){f.text('<tr class="splitrow">');f.text('<td class="splitline" ></td>');f.text('<td class="splitline" ></td>');f.text('<td class="splitline" ></td>');f.text("</tr>");f.text('<tr class="splitrow ',p?"split":"",'">');f.text('<td class="splitline" ></td>');f.text('<td class="splitline" ></td>');f.text('<td class="splitline" ></td>');f.text("</tr>")}f.append("<tr ",n).text(' class="illrow">');if(h.t==0){l++;f.text('<td  class="" data-key="',h.o,'"',' data-name="',h.c,'"','><div class="illn illnt">',d,"</div></td>")}else if(h.t==1){f.text('<td  class="" data-key="',h.o,'"',' data-name="',h.c,'"','><div class="illn illnt">',d+'<span class="city-tips">多数人前往以下目的地</span>',"</div></td>")}else if(h.t==2){l++;f.text('<td  class=" city" data-key="',h.o,'"',' data-name="',h.c,'"','><div class="illn illnt">',d,"</div></td>")}if(h.n){f.text('<td class="illcolumns2" data-key="',h.o,'"',' data-name="',h.c,'"','><div class="illn"><span class="greystring">',h.n,"家酒店</span></div></td>")}else{f.text('<td class="illcolumns2" data-key="',h.o,'"',' data-name="',h.c,'"',"></td>")}if(c[h.g]){f.text('<td class="illcolumns3" data-key="',h.o,'"',' data-name="',h.c,'"','><div class="illn"><span class="position">',c[h.g],"</span></div></td>")}else{f.text('<td class="illcolumns3" data-key="',h.o,'"',' data-name="',h.c,'"',"></td>")}f.text("</tr>")}f.text('<tr class="splitrow">');f.text('<td class="splitline" ></td>');f.text('<td class="splitline" ></td>');f.text('<td class="splitline" ></td>');f.text("</tr>");f.text("</table>");f.write(this.popup.panel);var v=this.nodes;var m=0;for(var n=0;n<i.length;n++){if(m>=10){break}if(i[n]["t"]==0||i[n]["t"]==2){m++}var r=f.getDomNode(n);r.item={key:i[n]["c"],url:i[n]["o"],type:i[n]["t"],poi:i[n]["i"]||""};r.layer=this;r.idx=n;v[n]=r;$(r).bind("mouseover",this.mouseover);$(r).bind("click",this.click)}};s.prototype.mouseover=function(e){if(this.item.type==0||this.item.type==2)this.layer.enter(this.idx)};s.prototype.click=function(e){if(+this.item.type===0||+this.item.type===2){this.layer.select(this.idx,true)}};s.prototype.select=function(e,t,n){$(this).trigger("_select",[e,t,n])};s.prototype.enter=function(e){var t;for(var n=0;n<this.nodes.length;n++){t=this.nodes[n];$(t).removeClass(" tllover suggest-item-active")}if(e>-1){t=this.nodes[e];var r=t.item;if(!(r.type==0||r.type==2)){e++}$(t).addClass(" tllover suggest-item-active");this.cursor=e}};s.prototype.moveCursor=function(e,t,n){if(this.nodes.length==0)return;if(this.cursor==-1&&e==-1){this.cursor=this.nodes.length-1}else{var r=this.nodes[this.cursor+e];if(r){if(!(r.item.type==0||r.item.type==2)){e*=2}}this.cursor+=e;if(this.cursor<-1||this.cursor>=this.nodes.length){this.cursor=-1}}this.enter(this.cursor);if(t)this.select(this.cursor,null,n)};e.exports=s},282:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;var i=n(7);if(!window.GARunerById){window.GARunerById=function(e,t){try{var n=window.__GA__;if(n){n.clk({_ba_utm_s:e,_ba_utm_ex:{a:t}})}}catch(r){}}}var s={city:"城市",area:"行政区",poi:"地标",tradingArea:"商圈",hotelName:"酒店",brand:"品牌",group:"集团",subway:"地铁线",station:"地铁站",grade:"档次",theme:"主题",other:"其他"};var o=function(e,t){this.popup=e;this.nodes=[];this.cursor=-1;if(t.select){i(this).bind("_select",function(e,n,r,i){t.select.call(n,r,i)})}};o.prototype.refresh=function(e){function f(e,t,n){if(!e||t.length<=n){return e}for(var r=t.length;r>n;r--){var i=t.substring(n,r),s=e.indexOf(i);if(s!==-1){return e.substr(0,s)+'<span class="keystring">'+i+"</span>"+f(e.substr(s+i.length),t,r)}}return f(e,t,n+1)}function l(e,n,r){var i=n.ahead||n.display;if(n.tag&&""!=n.tag){i+="("+n.tag+")"}i=f(i,c,0);var o=n.suggestType,u=s[n.suggestType]||"",a=n.commentScore,l=n.minPrice,h=n.subway,p=n.shortAddr;var d;var v=i;if(n.city&&n.city!==n.ahead){v+="，"+n.city}if(n.province&&n.province!==n.city){v+="，"+n.province}switch(o){case"hotelName":var m="";if(l){m=m&&m+" | ";m+='<span class="rmbsingle">&yen;</span>'+l+"起"}if(a){m=m&&m+" | ";m+=a+"分 "}if(p){m=m&&m+" | ";m+=p}d='<div class="name">'+v+'</div><div class="detail">'+m+"</div>";break;case"city":case"poi":case"area":case"tradingArea":d='<div class="name">'+v+"</div>";break;case"station":if(h){d='<div class="name">'+v+'（<span class="keystring">'+h+"</span>）</div>"}else{d='<div class="name">'+v+"</div>"}break;default:d='<div class="name">'+v+"</div>"}e.append('<tr class="illrow2"',t+r,">").text('<td class="info">',d,"</td>",'<td class="type">',u,"</td>","</tr>")}this.cursor=-1;if(this.nodes.length>0){for(var t=0;t<this.nodes.length;t++){var n=this.nodes[t];n.item=null;n.layer=null;i(n).remove()}}this.nodes.length=0;var r=e.q;var o=e.data,u=e.crossCity;var a=new UIObject;a.text('<table class="ill illtow2" cellspacing="0" cellpadding="0">');var c=i.trim(e.q);if(o.length>0){a.append('<tr class="illrow2 illhead"><td colspan="2">当前城市的查询结果（酒店起价为参考价）</td></tr>');for(var t=0;t<o.length;t++){l(a,o[t],0);if(t!==o.length-1){a.text('<tr class="splitrow">');a.text('<td class="splitline" colspan="2"><div class="line"></div></td>');a.text("</tr>")}}}else{a.append('<tr class="illrow2"><td class="noresult" colspan="2">对不起，当前城市未找到：'+c+"</td></tr>")}if(u.length>0){a.append('<tr class="illrow2 illhead"><td colspan="2">其他城市的查询结果（酒店起价为参考价）</td></tr>');for(var t=0;t<u.length;t++){l(a,u[t],o.length);if(t!==u.length-1){a.text('<tr class="splitrow">');a.text('<td class="splitline" colspan="2"><div class="line"></div></td>');a.text("</tr>")}}}a.text("</table>");a.write(this.popup.panel);var h=this.nodes;for(var t=0,p=o.length+u.length;t<p;t++){var n=a.getDomNode(t);n.item=t<o.length?o[t]:u[t-o.length];n.item.type=n.item.suggestType;n.layer=this;n.idx=t;h[t]=n;i(n).bind("mouseover",this.mouseover);i(n).bind("click",this.click)}};o.prototype.mouseover=function(e){this.layer.enter(this.idx)};o.prototype.click=function(e){this.layer.select(this.idx,true)};o.prototype.select=function(e,t){var n=this;var r=e;var s=jQuery(this.nodes[r]).hasClass("js_newSugArea");if(t&&!s){QunarStorage.ready(function(e){var t=e.getItem("selectSugItem");var n=e.getItem("selectSugItem_pageId");if(t&&n){window.GARunerById(n,t);e.removeItem("selectSugItem");e.removeItem("selectSugItem_pageId")}e.setItem("selectSugItem","sug"+(r+1));e.setItem("selectSugItem_pageId",window["_ba_utm_s"])})}i(this).trigger("_select",[this,e,t])};o.prototype.enter=function(e){for(var t=0;t<this.nodes.length;t++){i(this.nodes[t]).removeClass("tllover")}if(e>-1){i(this.nodes[e]).addClass("tllover");this.cursor=e}};o.prototype.moveCursor=function(e,t){if(this.nodes.length==0)return;if(this.cursor==-1&&e==-1){this.cursor=this.nodes.length-1}else{this.cursor+=e;if(this.cursor<-1||this.cursor>=this.nodes.length)this.cursor=-1}this.enter(this.cursor);if(t)this.select(this.cursor)};e.exports=o},283:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;var r=0;var i=function(e){this._contentMAP={};this.setting=e||{};this.setting.activeTab=this.setting.activeTab||0;this.setting.activeCls="active";this._initPanels();this._bindEvent();this.activeTab();this.bindedEvent=false};i.prototype._got=function(e){if(typeof e=="string"){return document.getElementById(e)}else{return e}};i.prototype._initPanels=function(){if(!this.setting.panelContainerID)return;var e=this.setting.items;var t=this._got(this.setting.panelContainerID);for(var n=0;n<e.length;n++){var i=e[n];if(i.render&&!i.panelID){var s=document.createElement("DIV");s.id="TG_PANEL_"+r++;s.className="b_hct_lst";t.appendChild(s);$(s).hide();i.panelID=s.id}}};i.prototype.activeTab=function(e){e=e||0;var t=this.setting;var n=this.setting.items;if(this.currentTab!=null&&this.currentPanel!=null){$(this.currentTab).removeClass(t.activeCls);$(this.currentPanel).hide()}var r=n[e];if(!r)return;var i=this.currentTab=this._got(r.tabID);var s=this.currentPanel=this._got(r.panelID);if(r.render&&!this._contentMAP[r.panelID]){r.container=s;r.render(s);this._contentMAP[r.panelID]=true}$(i).addClass(t.activeCls);$(s).show();$jsex.event.trigger(this,"onselected",r)};i.prototype._bindEvent=function(){if(this.bindedEvent)return;var e=this.setting.items;for(var t=0;t<e.length;t++){var n=e[t];var r=this._got(n.tabID);var i=this;var s=function(e){return function(){i.activeTab(e)}}(t);$(r).bind("mousedown",s)}this.bindedEvent=true};e.exports=i},284:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;var i=n(285);var s=n(286);var o=function(e,t,n){this.inputEl=e;this.opts=n||{};this.searchType=n.searchType||"";this.limit=10;this.isOpen=false;this.cursor=-1;this.isClick=false;this.oldInput=e.value;this.cacheData=[];this.oldValue=null;this.$inputEl=$(e);this.$containerDiv=$(t);var r=this.$Suggcontainer=$('<div class="m-suggest-container" id="'+this.searchType+'sugcontainer"></div>');this.$containerDiv.append(r);this.bindEvent()};o.prototype.bindDom=function(e,t,n,r){$(e).bind(t,function(e){r.call(n,e,this)})};o.prototype.bindEvent=function(){var e=this;this.bindDom(this.inputEl,"keydown",this,this.keydownInput);this.bindDom(this.inputEl,"keyup",this,this.keyupInput);this.bindDom(this.inputEl,"blur",this,this.blurInput);this.$Suggcontainer.on("mouseover","tr",function(t){e.mouseover(t)});this.$Suggcontainer.on("mousedown","tr",function(t){e.click(t)})};o.prototype.open=function(){this.$Suggcontainer.css("display","block");this.$containerDiv.css("display","block");this.isOpen=true;$(this).trigger("isOpened",[this.isOpen])};o.prototype.close=function(){this.$Suggcontainer.css("display","none");this.isOpen=false;this.cursor=-1;this.isClick=false;this.cacheData=[];this.oldValue=null;$(this).trigger("isClosed",[this.isOpen])};o.prototype.renderData=function(e){var t=e.data,n=t.length,r=e.city,o=0,u=null,a=[];this.$Suggcontainer.html("");this.cacheData=[];for(var f=0;f<n;f++){var l={};var c={};var h="";var p="";if(o>=this.limit){break}u=t[f];if(u.c){this.oldInput=u.c}if(u.p){h=s.mark(this.transform(u.p),r,function(e){return'<span class="key" data-idx="'+f+'">'+e+"</span>"})}if(this.searchType==="intercity"){if(u.e){p=s.mark(this.transform(u.e),r,function(e){return'<span class="key" data-idx="'+f+'">'+e+"</span>"})}}else{if(u&&u.m===0){if(u.e){p=s.mark(this.transform(u.e),r,function(e){return'<span class="key" data-idx="'+f+'">'+e+"</span>"})}}}var d=u.n===0?"":u.n+"家酒店";var v=i.showMap[i.gradeMap[u.g||1]];o++;l={idx:f,cityChinese:h,cityEnglish:p,num:d,grade:v};c={userInput:r,idx:f,cityName:u.c||"",showContent:this.transform(u.p)||"",url:u.o||"",type:u.t||0,poi:u.i||"",showType:i.gradeMap[u.g||1]};this.cacheData.push(c);a.push(l)}var m=i.tableTemplate.render({cityRenderArr:a});this.$Suggcontainer.html(m);this.cursor=0;this.getHover(this.cursor)};o.prototype.requestData=function(e){var t=this.inputEl.value;var n=$.trim(t.replace(/["\\|]*/g,""));var r=i.getUrl(this.searchType,n);var s=this;$.ajax({type:"GET",url:r,cache:false,dataType:"jsonp",success:function(e){if(e&&e.ret&&e.data&&e.data.length>0){s.renderData(e);$(s).trigger("getDataSuccess",[e])}else{s.renderError(e)}},error:function(e){}})};o.prototype.transform=function(e){var e=e===null?"":e;e.replace(/&(?!\w+;)|["'<>\\]/g,function(e){switch(e){case'"':return"&quot;";case"'":return"&#39;";case"<":return"&lt;";case">":return"&gt;";default:return e}});return e};o.prototype.renderError=function(e){this.cursor=-1;this.isClick=false;if(this.$Suggcontainer){this.$Suggcontainer.html("")}this.$Suggcontainer.html(i.errorTemplateStr);$(this).trigger("getDataFail",[e])};o.prototype.mouseover=function(e){this.cursor=$(e.target).data("idx");this.getHover(this.cursor)};o.prototype.click=function(){this.isClick=true;this.selectItemFinish(this.cursor,"click")};o.prototype.getHover=function(e){var t=$("#"+this.searchType+"sugcontainer").find(".item");t.removeClass("suggest-item-active");var n=t.find("div");var r=t.find("h3");var i=t.find("h4");n.removeClass("white");r.removeClass("white");i.removeClass("white");if(e>-1){var s=t.eq(e);s.addClass("suggest-item-active");var o=s.find("h3");var u=s.find("h4");var a=s.find(".number");var f=s.find(".type");o.addClass("white");u.addClass("white");a.addClass("white");f.addClass("white")}};o.prototype.blurInput=function(){if(!this.isOpen){return}if(!this.isClick){if(this.cursor>-1){this.selectItemFinish(this.cursor,"blur")}$(this).trigger("blur",this.isClick)}this.close()};o.prototype.keydownInput=function(e){var t=e.which;if(t===13){if(!this.isOpen){$(this).trigger("enter");return}else{e.preventDefault?e.preventDefault():e.returnValue&&(e.returnValue=false)}}};o.prototype.keyupInput=function(e){var t=e.keyCode;if(!this.isOpen){if(t===40){this.open();this.listenKey();return}}switch(t){case 40:this.moveCursor(1);break;case 38:this.moveCursor(-1);break;case 37:return;break;case 39:return;break;case 13:e.preventDefault?e.preventDefault():e.returnValue&&(e.returnValue=false);this.isClick=true;this.selectItemFinish(this.cursor,"enter");this.close();break;case 27:this.close();return;break;default:var n=$.trim(this.inputEl.value.replace(/["\\|]*/g,""));if(n===""){this.close();$(this).trigger("change");return}if(this.inputEl.value!==this.oldValue){this.open();this.listenKey()}}};o.prototype.listenKey=function(e){if(this.inputEl.value!==this.oldValue){this.oldValue=this.inputEl.value;this.changeInput(e)}};o.prototype.selectItem=function(e){if(e>-1){if(this.cacheData&&this.cacheData.length>0){var t=this.cacheData[e];var n={userInput:t.userInput,showContent:t.showContent,cityName:t.cityName,poi:t.poi,url:t.url,idx:t.idx,showType:t.showType};this.setValue(t.cityName);$(this).trigger("select",n||{})}}};o.prototype.selectItemFinish=function(e,t){if(e>-1){if(this.cacheData&&this.cacheData.length>0){var n=this.cacheData[e];var r={userInput:n.userInput,showContent:n.showContent,cityName:n.cityName,poi:n.poi,url:n.url,idx:n.idx,showType:n.showType};this.setValue(n.cityName)}this.sendMessage("click",e);this.close();$(this).trigger("selectFinish",[r||{},t])}};o.prototype.setValue=function(e){this.inputEl.value=e;this.listenKey(true)};o.prototype.changeInput=function(e){if(!e){this.requestData(this.searchType);$(this).trigger("change")}};o.prototype.moveCursor=function(e){var t=$("#"+this.searchType+"sugcontainer").find(".item");var n=t.length;if(n===0){return}this.cursor+=e;if(this.cursor<0){this.cursor=n-1}if(this.cursor>=n){this.cursor=0}this.getHover(this.cursor);this.selectItem(this.cursor)};o.prototype.sendMessage=function(e,t){if(e==="click"){window.QReport&&window.QReport.ac({acId:"city-suggset-"+this.cacheData[t].showType||"CITY",acType:"click",acData:this.cacheData[t].userInput+"|"+this.cacheData[t].showContent+"|"+this.cacheData[t].idx,pn:"dzs_hotel_pc_home"})}};e.exports=o},285:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;t.gradeMap={1:"CITY",2:"CITY",3:"DISTRICT",4:"CITY",7:"CITY",5:"POI",6:"TRADING"};t.showMap={CITY:"城市",DISTRICT:"区县",POI:"地标",TRADING:"商圈"};t.getUrl=function(e,t){var n=e==="intercity"?"isMainland=false":"isMainland=true";if(e==="intercity"){return"//hs.qunar.com/api/hs/citysugV3?"+n+"&city="+encodeURIComponent(t.replace(/[!"#$%&'()*+\-.\/:;<=>?@[\]^_`{|}~]/g,""))}else{return"//hs.qunar.com/api/hs/citysugV3?"+n+"&city="+encodeURIComponent(t.replace(/[!"#$%&'()*+\-.\/:;<=>?@[\]^_`{|}~]/g,""))}};t.tableTemplate=Hogan.compile('<table class="suggest-list">'+"{{#cityRenderArr}}"+'<tr class="item" data-idx={{idx}}>'+"<td data-idx={{idx}}>"+'<div class="info" data-idx={{idx}}>'+"<h3 data-idx={{idx}}>{{{cityChinese}}}</h3>"+"<h4 data-idx={{idx}}>{{{cityEnglish}}}</h4>"+"</div>"+"</td>"+"<td data-idx={{idx}}>"+'<div class="number" data-idx={{idx}}>{{num}}</div>'+"</td>"+"<td data-idx={{idx}}>"+'<div class="type" data-idx={{idx}}>{{grade}}</div>'+"</td>"+"</tr>"+"{{/cityRenderArr}}"+"</table>");t.errorTemplateStr='<div class="error-table">'+'<div class="error-tr">'+'<div class="error-td">对不起，不支持该目的地</div>'+"</div></div>"},286:function(e,t){function r(e,t,n,i){if(!e||t.length<=n){return e}for(var s=t.length;s>n;s--){var o=t.substring(n,s),u=e.indexOf(o);if(u!==-1){var a=i(o);return e.substr(0,u)+(a===undefined?"":a)+r(e.substr(u+o.length),t,s,i)}}return r(e,t,n+1,i)}var n=typeof n==="function"&&!n.amd?n:false;var i=function(e){return e};e.exports={mark:function(e,t,n){if(!n){n=i}return r(e,t,0,n)}}},288:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;n(7);t.Affix=n(289);t.affix_hBox=n(290)},289:function(e,t){function s(e,t){if(e==null||t==null){return true}return Number(u(e))>=Number(u(t))}function o(e,t,n){if(e==null||t==null||n==null){return false}else if(n.hasClass("active")){return false}return Number(u(e))>=Number(u(t))}function u(e,t){if($.type(e)==="object"){var n={};$.each(e,function(e,t){n[e]=u(t)});return n}else if($.isFunction(e)){return e()}else{return typeof t==="undefined"?e:t}}function l(){var e=1;if(document.body.getBoundingClientRect){var t=document.body.getBoundingClientRect();var n=t.right-t.left;var r=document.body.offsetWidth;e=Math.round(n/r*100)/100}return e}function c(e){var t=$(window),n=t.scrollTop(),r=t.scrollLeft(),i=t.width()+r;if($.isArray(e)){return s(n,e[0])&&s(e[1],i)&&(s(e[2],n+t.height())||o(e[4],n+t.height(),e[5]))&&s(r,e[3])}else{e=[e];return s(n,e[0])}}function h(e,t){var n=e.top,r=e.bottom,i=e.left,s=e.right,o={};if(n!=null){o.top=u(n,$(window).scrollTop()+n-t.offsetParent().offset().top)}else if(r!=null){o.top=u(r,$(window).scrollTop()+$(window).height()-t.outerHeight()-r-t.offsetParent().offset().top)}if(i!=null){o.left=u(i,$(window).scrollLeft()+i-t.offsetParent().offset().left)}else if(s!=null){o.left=u(s,$(window).scrollLeft()+$(window).width()-t.outerWidth()-s-t.offsetParent().offset().left)}return o}function p(e){var t=this;if(e!=null){$.each(e,function(e,n){if(e in t){t[e]=n}})}t.isWork=false;t.currentStyle={};t.lastStyle={};if(t.autoRender){t.render()}}var n=typeof n==="function"&&!n.amd?n:false;var r=/MSIE 6\.0/.test(navigator.userAgent),i=/MSIE 7\.0/.test(navigator.userAgent);var a=function(){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame;if(!e){e=function(e){return window.setTimeout(e,1e3/60)};e.noSupportAnimationFrame=true}return e}();var f=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||function(e){window.clearTimeout(e)}}();window.GetZoomFactor=l;p.getValue=u;p.getZoomFactor=l;p.isIE7=i;p.isIE6=r;$.extend(p.prototype,{el:null,everyTime:false,autoRender:true,heightHack:false,heightHackFix:null,range:null,top:null,left:null,bottom:null,right:null,additionStyle:null,recoveryStyle:null,currentStyle:{},lastStyle:{},isWork:false,setPosition:function(){var e=this,t=e.range,n=$(e.el);if(!e.run){return}if(c(t)){if(!e.isWork||e.everyTime){e.currentStyle=$.extend({top:u(e.top),left:u(e.left),bottom:u(e.bottom),right:u(e.right),position:"fixed"},e.additionStyle);if(!e.isWork){$.each(e.currentStyle,function(t){e.lastStyle[t]=n.css(t)})}if(r){e.currentStyle.position="absolute"}$.each(["top","bottom","left","right"],function(t,n){if(i){var r=l()||.1}if(e.currentStyle[n]===null){delete e.currentStyle[n];delete e.lastStyle[n]}else if(i){e.currentStyle[n]=e.currentStyle[n]/r}});n.css(e.currentStyle);e.heightHackDom&&e.heightHackDom.show();e.isWork=true;if(e.heightHackDom){if(e.heightHackFix){e.heightHackDom.css("height",e.heightHackFix)}else{e.heightHackDom.css("height",$(e.el).outerHeight(true))}}}if(r){n.css(h(e.currentStyle,n))}$(e).trigger("inRange");$(e).trigger("changePosition")}else{if(e.isWork){e.isWork=false;e.resetPosition()}else{$(e).trigger("outOfWork")}$(e).trigger("outOfRange")}$(e).trigger("position");e.onAnimation=false}});p.prototype.render=function(){var e=this,t=$(window);if(e.rendered){return e}e.rendered=true;e.onAnimation=false;e.animationId=null;e.alternation=false;e.endAnimation=false;e.scrollCount=0;if(e.heightHack){e.heightHackDom=$('<div style="margin-top: 0px; overflow: hidden;"></div>');$.each(["width","position","top","left"],function(t,n){e.heightHackDom.css(n,$(e.el).css(n))});e.heightHackDom.css("height",$(e.el).outerHeight(true)).hide().insertAfter(e.el)}e.setPositionProxy=$.proxy(e.setPosition,e);if($.type(e.renderFunc)!=="function"){if(a.noSupportAnimationFrame){e.renderFunc=function(){if(e.endAnimation){f(e.endAnimation);e.endAnimation=null}e.endAnimation=a(e.setPositionProxy)}}else{e.renderFunc=function(){if(!e.onAnimation){e.onAnimation=true;e.animationId=a(e.setPositionProxy)}}}}e.start();e.setPosition();$(e.el).data("$objAfix",e);return e};p.prototype.destroy=function(){$(this.el).data("$objAfix",null);this.pause();this.pause=this.start=this.destroy=function(){return false}};p.prototype.resetPosition=function(){var e=this,t=$(e.el);t.css($.extend(e.lastStyle,u(e.recoveryStyle)));e.heightHackDom&&e.heightHackDom.hide();$(e).trigger("positionReset");$(e).triggerHandler("resetPosition")};p.prototype.start=function(){if(!this.run){$(window).on("scroll.affix resize.affix",this.renderFunc);this.run=true}};p.prototype.pause=function(){this.run=false;if(this.endAnimation){f(this.endAnimation);this.endAnimation=null}else if(this.animationId){f(this.animationId)}$(window).off("scroll.affix resize.affix",this.renderFunc);if(this.isWorking()){this.isWork=false;this.resetPosition()}};p.prototype.isWorking=function(){return this.isWork};p.prototype.refreshAll=function(){$(window).trigger("scroll.affix")};p.prototype.getOriDomOffset=function(){if(this.isWorking()){return $(this.heightHackDom).offset()}else{return $(this.el).offset()}};e.exports=p},290:function(e,t,n){function o(e){function E(){var e=$(document).scrollTop(),t=f.outerHeight(),n=s(o),a;if(i.isIE7){t=t*(i.getZoomFactor()||.1)}if(e+t>=n&&u()){a=n-s(r)-t}else{a=l}f.css("top",a)}var t=e.top,n=e.left,r=e.rangeTop,o=e.rangeBottom,u=e.check||function(){return true},a=e.floatArea,f=$(a),l=f.css("top").substring(0,f.css("top").indexOf("px")),c,h=e.additionStyle||{},p=e.recoveryStyle||{},d=e.heightHack===false?false:true;var v={top:function(){var e=$(document).scrollTop(),t=f.outerHeight(),n=s(o);if(i.isIE7){t=t*(i.getZoomFactor()||.1)}if(e+t>=n&&u()){return n-s(r)-t}else{return l}}};if(!r||!o){return}if(!$.isFunction(o)&&$(o).get(0).nodeType){var m=$(o);o=function(){if(i.isIE7){var e=i.getZoomFactor()||.1;return m.offset().top+m.outerHeight()*e}else{return m.offset().top+m.outerHeight()}}}else{if(i.isIE7){var g=o,y=i.getZoomFactor()||.1;o=function(){return s(g)*y}}}if(!$.isFunction(r)&&$(r).get(0).nodeType){var b=$(r);r=function(){return b.offset().top}}if(n){if(!$.isFunction(n)&&$(n).get(0).nodeType){var w=$(n);n=function(){return w.offset().left-$(document).scrollLeft()}}}c=new i({el:f,heightHack:d,range:[r,null,function(){var e=f.outerHeight();if(i.isIE7){e=e*(i.getZoomFactor()||.1)}return s(o)+$(window).height()-e}],top:t,everyTime:true,left:n,additionStyle:h,recoveryStyle:$.extend({},v,p)});c.resetFloatPosition=E;$(c).bind("outOfWork",function(){E()});return c}var r=typeof r==="function"&&!r.amd?r:false;var i=n(289);var s=i.getValue;e.exports=o},309:function(e,t){function r(){var e,t,n={},r={},i;this.init=function(s){r=s||{};if(!r.id||!r.url){return}e=document.getElementById(r.id);t=r.url||"";n=r.params||{};n.search=n.search||{};n.hash=n.hash||{};i=r.box||document.getElementsByTagName("body")[0];if(!e){e=document.createElement("iframe");e.setAttribute("id",r.id);e.className=r["className"]||"";e.setAttribute("height",r.height||"0");e.setAttribute("style",r.styleContent||"");e.setAttribute("frameBorder",r.frameBorder||"0");e.setAttribute("scrolling",r.scrolling||"no");i.appendChild(e)}t=t+($.isEmptyObject(n.search)?"":"?"+$.param(n.search));e.setAttribute("src",t+($.isEmptyObject(n.hash)?"":"#"+$.param(n.hash)))};this.show=function(){e&&(e.style.display="block")};this.hide=function(){e&&(e.style.display="none")};this.refresh=function(t){var i=r.url;if(!e)return;n=$.extend({},n,t);i=i+($.isEmptyObject(n.search)?"":"?"+$.param(n.search))+($.isEmptyObject(n.hash)?"":"#"+$.param(n.hash));e.setAttribute("src",i)};this.getParams=function(){return n}}var n=typeof n==="function"&&!n.amd?n:false;e.exports=r},505:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;var r="domestic",i=Date.now();if(isMainland!=null){r=isMainland?"domestic":"intercity"}window.QReport&&window.QReport.ac({acId:"city-show-"+r,acType:"show"});var s=function(){var e={chrome:0,ver:null};var t=navigator.userAgent,n=navigator.platform;if(/AppleWebKit\/(\S+)/.test(t)){if(/Chrome\/(\S+)/.test(t)){e.ver=RegExp["$1"];e.chrome=parseFloat(e.ver)}}return{ua:t,browser:e,platform:n}}();if(s.browser.chrome){window.QReport&&window.QReport.ac({acId:"ua-chrome-"+s.browser.chrome,acType:"ua",acData:s.platform+"|"+s.ua})}e.exports={mapShow:function(e){if(!e){return}var t="domesticMapShow";if(e==="google"){t="interMapShow"}window.QReport&&window.QReport.ac({acId:t,acType:"show"})}}},506:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;var i=n(507);e.exports={MapPanel:hotel.map.control}},507:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;n(508);n(509);n(510);n(515);n(517);n(518);n(520);n(523);n(525);n(526);n(528);n(529);var i=function(){var e;if(window.MapType){if(!GBrowserIsCompatible.isMapSupport)e="none";else e=window.MapType}else{e="none"}return e==="none"||window.isMapDown?"none":e};QClass.define("hotel.map.control",{initialize:function(){this.rbox=$.rbox("",{hideOnClickOutside:false,vertical:"middle",overlayerCss:{"background-color":"#fff",opacity:.75}})},setHotelData:function(e){this.hotelData=new hotel.map.model.hotel(e);this.hotelPoint={baidu:this.hotelData.getBpoint()||null,google:this.hotelData.getGpoint()||null}},setHotelPois:function(e){var t=this;e=e||[];this.hotelPois=[];$.each(e,function(e,n){t.hotelPois.push(new hotel.map.model.point({index:e+1,name:n.name,title:n.name,gpoint:n.latlng,bpoint:n.blatlng,category:"poi"}))});this.hotelPoisPoints=$.map(this.hotelPois||[],function(e){return{baidu:e.getBpoint()||null,google:e.getGpoint()||null}})},show:function(e){e=e||{};var t=this;if(!window.mapEnabled||i()==="none"){return}this.mapPanel=new hotel.map.view.mapView;this.trafficStore=new hotel.map.store.traffic({type:"traffic"});this.aroundStore=new hotel.map.store.aroundHotel({type:"arrHotel",hotelName:this.hotelData.getTitle()});this.trafficStore.setHotelName(this.hotelData.getTitle());this.searchStore=new hotel.map.store.search;this.rbox.setContent(this.mapPanel.get$Container().get(0));this.rbox.show();this.trafficView=new hotel.map.view.pointView({$container:this.mapPanel.get$Container().find(".js-traffic")});this.aroundView=new hotel.map.view.pointView({$container:this.mapPanel.get$Container().find(".js-around")});this.searchView=new hotel.map.view.searchView({$container:this.mapPanel.get$Container().find(".js-searchForm")});this.carRouteView=new hotel.map.view.walkRouteView({$container:this.mapPanel.get$Container().find(".js-car-route")});this.busRouteView=new hotel.map.view.busRouteView({$container:this.mapPanel.get$Container().find(".js-bus-route")});this.walkRouteView=new hotel.map.view.walkRouteView({$container:this.mapPanel.get$Container().find(".js-walk-route")});this.startView=new hotel.map.view.chooseView({$container:this.mapPanel.get$Container().find(".js-start")});this.endView=new hotel.map.view.chooseView({$container:this.mapPanel.get$Container().find(".js-end")});this.printRouteView=new hotel.map.view.printRouteView({mode:"default",data:{seq:this.hotelData.hotelSeq}});this.searchView.setToValue(this.hotelData.getTitle());this.searchView.setHotelName(this.hotelData.getTitle());this.searchView.setToPoint({baidu:this.hotelData.getBpoint()||null,google:this.hotelData.getGpoint()||null});this.searchView.setHotelPoint({baidu:this.hotelData.getBpoint()||null,google:this.hotelData.getGpoint()||null});this.searchView.setToInfo(this.hotelData);this.bindEvent();this.mapPanel.render([this.hotelPoint].concat(this.hotelPoisPoints),[this.hotelData].concat(this.hotelPois));this.trafficView.show();this.trafficView.showLoading();if(e&&e.category){var n=new hotel.map.model.point(e);if(this.mapPanel.isLoaded){t.mapPanel.removeAllMarkers();t.mapPanel.showSecondPanel();t.searchView.setFromValue(n.name);t.searchView.setFromPoint({baidu:n.getBpoint()||null,google:n.getGpoint()||null});t.searchView.setFromInfo(n);t.busRouteView.empty();t.walkRouteView.empty();t.carRouteView.empty();$(t.searchView).trigger("searchQuery",[{end:t.searchView.getHotelPoint(),start:{baidu:n.getBpoint()||null,google:n.getGpoint()||null}},{end:t.searchView.getHotelName(),start:n.name},n.category])}}},dispose:function(){this.rbox.setContent("");this.mapPanel=null;this.trafficStore=null;this.aroundStore=null;this.trafficView=null;this.aroundView=null;this.searchView=null;this.searchStore=null;this.carRouteView=null;this.busRouteView=null;this.walkRouteView=null;this.printRouteView=null;this.startView=null;this.endView=null},bindEvent:function(){var e=this;$(this.mapPanel).bind("hide",function(){e.rbox.hide()}).bind("tabClick",function(t,n){var r=null;e.mapPanel.removeOtherMarker();if(n==="traffic"){e.trafficView.show();e.aroundView.hide();r=e.trafficStore.getAllPoints();e.mapPanel.isLoaded&&e.mapPanel.setCenter();e.mapPanel.isLoaded&&e.mapPanel.addMarkers(r.markerPoints,e.trafficStore.getTrafficInfos(),"first")}else if(n==="arrHotel"){e.aroundView.show();e.trafficView.hide();r=e.aroundStore.getAllPoints();e.mapPanel.isLoaded&&e.mapPanel.addMarkers(r.markerPoints,e.aroundStore.getHotelInfos(),"first")}}).bind("tabFirstClick",function(t,n){e.mapPanel.removeOtherMarker();if(n==="arrHotel"){e.aroundView.showLoading();e.aroundStore.load({hotelSeq:e.hotelData.hotelSeq});e.aroundView.show();e.trafficView.hide()}else if(n==="traffic"){e.trafficView.show();e.aroundView.hide()}}).bind("firstPanelShow",function(){e.mapPanel.removeAllMarkers();var t=[e.hotelData].concat(e.hotelPois);if(e.mapPanel.isLoaded){e.mapPanel.addMarkers([e.hotelPoint].concat(e.hotelPoisPoints),t,"first");if(e.trafficView.isShow()){e.trafficView.show();var n=e.trafficStore.getAllPoints();e.mapPanel.isLoaded&&e.mapPanel.setCenter();e.mapPanel.addMarkers(n.markerPoints,e.trafficStore.getTrafficInfos(),"first")}else if(e.aroundView.isShow()){var r=e.aroundStore.getAllPoints();e.mapPanel.addMarkers(r.markerPoints,e.aroundStore.getHotelInfos(),"first")}}}).bind("routeTabClick",function(t,n){if(n==="bus"){if(e.searchStore.getBusResult()&&e.searchStore.getBusResult().list&&e.searchStore.getBusResult().list.length){e.busRouteView.show();e.walkRouteView.hide();e.carRouteView.hide();$(e.busRouteView).trigger("drawMapRoute",e.busRouteView.getLastClick())}else{$(e.searchStore).trigger("suggestDrive")}}else if(n==="car"){e.busRouteView.hide();e.walkRouteView.hide();e.carRouteView.show();e.carRouteView.hideSuggest();$(e.carRouteView).trigger("drawMapRoute")}else if(n==="walk"){e.busRouteView.hide();e.walkRouteView.show();e.carRouteView.hide();$(e.walkRouteView).trigger("drawMapRoute")}}).bind("mapLoaded",function(){e.trafficStore.load({hotelSeq:e.hotelData.hotelSeq})});$(this.trafficStore).bind("dataReady",function(){var t=e.trafficStore.getAllPoints();e.trafficView.render(e.trafficStore.getData());e.mapPanel.isFirst()&&e.mapPanel.addMarkers(t.markerPoints,e.trafficStore.getTrafficInfos(),"first");e.searchStore.updateDistance(e.mapPanel.getMap(),t,e.hotelData.getGpoint(),e.trafficStore.getTrafficInfos())}).bind("error",function(){e.trafficView.render(e.trafficStore.getData())});$(this.aroundStore).bind("dataReady",function(){var t=e.aroundStore.getAllPoints();e.aroundView.render(e.aroundStore.getData());if(e.mapPanel.isLoaded){e.mapPanel.isFirst()&&e.mapPanel.addMarkers(t.markerPoints,e.aroundStore.getHotelInfos(),"first");e.searchStore.updateDistance(e.mapPanel.getMap(),t,e.hotelData.getGpoint(),e.aroundStore.getPointInfos())}}).bind("error",function(){e.aroundView.render(e.aroundStore.getData())});$(this.trafficView).bind("pointClick",function(t,n,r,i){e.mapPanel.removeAllMarkers();e.searchView.setFromPoint(i);e.searchView.setFromValue(r);e.searchView.setToPoint(e.searchView.getHotelPoint());e.searchView.setToValue(e.searchView.getHotelName());e.searchView.setFromInfo(e.trafficStore.getTrafficInfos()[n]);e.searchView.setToInfo(e.hotelData);$(e.searchView).trigger("searchQuery",[{start:i,end:e.searchView.getHotelPoint()},{start:r,end:e.searchView.getHotelName()}])}).bind("mouseEnterPoint",function(t,n){e.mapPanel.showMarker(n,e.trafficStore.getTrafficInfos()[n],"first")}).bind("mouseLeavePoint",function(t,n){e.mapPanel.hideMarker(n,e.trafficStore.getTrafficInfos()[n],"first")});$(this.aroundView).bind("pointClick",function(t,n,r,i){e.mapPanel.removeAllMarkers();e.searchView.setFromPoint(e.searchView.getHotelPoint());e.searchView.setFromValue(e.searchView.getHotelName());e.searchView.setToPoint(i);e.searchView.setToValue(r);e.searchView.setFromInfo(e.hotelData);e.searchView.setToInfo(e.aroundStore.getHotelInfos()[n]);$(e.searchView).trigger("searchQuery",[{start:e.searchView.getHotelPoint(),end:i},{start:e.searchView.getHotelName(),end:r}])}).bind("mouseEnterPoint",function(t,n){e.mapPanel.showMarker(n,e.aroundStore.getPointInfos()[n],"first")}).bind("mouseLeavePoint",function(t,n){e.mapPanel.hideMarker(n,e.aroundStore.getPointInfos()[n],"first")});$(this.searchView).bind("searchQuery",function(t,n,r,i){var s={};s.from={name:r.start,lat:n.start&&n.start.baidu&&n.start.baidu.length?n.start.baidu[0]:0,lng:n.start&&n.start.baidu&&n.start.baidu.length?n.start.baidu[1]:0};s.to={name:r.end,lat:n.end&&n.end.baidu&&n.end.baidu.length?n.end.baidu[0]:0,lng:n.end&&n.end.baidu&&n.end.baidu.length?n.end.baidu[1]:0};e.mapPanel.showSecondPanel();e.printRouteView.setData(s);e.mapPanel.removeAllMarkers();e.startView.empty();e.endView.empty();e.busRouteView.empty();e.walkRouteView.empty();e.carRouteView.empty();window.GARunerById&&window.GARunerById(window._ba_utm_s,"maptccxlx");e.searchStore.search(e.mapPanel.getMap(),n,r,i)});$(e.searchStore).bind("indistinctSearchComplete",function(t,n){e.mapPanel.showIndistinctPanel();if(n==="start"){e.startView.render(e.searchStore.getStartResult())}else if(n==="end"){e.endView.render(e.searchStore.getEndResult())}}).bind("busSearchComplete",function(){if(this.getBusResult()&&this.getBusResult().list&&this.getBusResult().list.length){!e.mapPanel.isFirst()&&e.busRouteView.isVisible()&&$(e.busRouteView).trigger("drawMapRoute");e.busRouteView.render(this.getBusResult(),true,e.searchView.getFromValue(),e.searchView.getToValue())}else if(e.busRouteView.getNeedShow()){$(this).trigger("suggestDrive")}}).bind("walkSearchComplete",function(){!e.mapPanel.isFirst()&&e.walkRouteView.isVisible()&&$(e.walkRouteView).trigger("drawMapRoute");e.walkRouteView.render(e.searchStore.getWalkResult())}).bind("carSearchComplete",function(){!e.mapPanel.isFirst()&&e.carRouteView.isVisible()&&$(e.carRouteView).trigger("drawMapRoute");e.carRouteView.render(e.searchStore.getCarResult())}).bind("buswalkSearchComplete",function(){e.busRouteView.renderWalk(e.searchStore.getBusWalkResult())}).bind("routeTabUpdate",function(t,n){e.mapPanel.hideIndistinctPanel();e.mapPanel.updateRouteTab(n);if(n==="bus"){e.busRouteView.show();e.busRouteView.setNeedShow(true);e.walkRouteView.hide();e.carRouteView.hide()}else if(n==="car"){e.busRouteView.hide();e.busRouteView.setNeedShow(false);e.walkRouteView.hide();e.carRouteView.show()}else if(n==="walk"){e.busRouteView.hide();e.busRouteView.setNeedShow(false);e.walkRouteView.show();e.carRouteView.hide()}}).bind("suggestDrive",function(){e.mapPanel.updateRouteTab("car");e.busRouteView.hide();e.walkRouteView.hide();e.carRouteView.showSuggest();e.carRouteView.show();$(e.carRouteView).trigger("drawMapRoute")}).bind("distanceUpdate",function(t,n){if(n.getCategory()==="arrHotel"){e.aroundView.updateDistance(n)}else{e.trafficView.updateDistance(n)}});$(e.startView).bind("pointClick",function(t,n,r,i){var s=e.searchStore.getStartResult();e.searchView.setFromPoint(i);e.searchView.setFromValue(r);e.searchView.setFromInfo(s["list"][n]);$(e.searchView).trigger("searchQuery",[{start:e.searchView.getFromPoint(),end:e.searchView.getToPoint()},{start:e.searchView.getFromValue(),end:e.searchView.getToValue()}])}).bind("deployClick",function(){var t=e.searchStore.getStartResult();var n=[];$.each(t.list||[],function(e,t){n.push({baidu:t.getBpoint(),google:null})});e.mapPanel.removeAllMarkers();e.mapPanel.addMarkers(n,t.list||[],"second");e.endView.hide()}).bind("mouseEnterPoint",function(t,n){var r=e.searchStore.getStartResult();e.mapPanel.showMarker(n,r.list[n],"second")}).bind("mouseLeavePoint",function(t,n){var r=e.searchStore.getStartResult();e.mapPanel.hideMarker(n,r.list[n],"second")});$(e.endView).bind("pointClick",function(t,n,r,i){var s=e.searchStore.getEndResult();e.searchView.setToPoint(i);e.searchView.setToValue(r);e.searchView.setToInfo(s["list"][n]);$(e.searchView).trigger("searchQuery",[{start:e.searchView.getFromPoint(),end:e.searchView.getToPoint()},{start:e.searchView.getFromValue(),end:e.searchView.getToValue()}])}).bind("deployClick",function(){var t=e.searchStore.getEndResult();var n=[];$.each(t.list||[],function(e,t){n.push({baidu:t.getBpoint(),google:null})});e.mapPanel.removeAllMarkers();e.mapPanel.addMarkers(n,t.list||[],"second");e.startView.hide()}).bind("mouseEnterPoint",function(t,n){var r=e.searchStore.getEndResult();e.mapPanel.showMarker(n,r.list[n],"second")}).bind("mouseLeavePoint",function(t,n){var r=e.searchStore.getEndResult();e.mapPanel.hideMarker(n,r.list[n],"second")});$(e.busRouteView).bind("lightLine",function(t,n){var r=e.searchStore.getBusResult().list[this.getLastClick()].maproutes[n];if(r&&r.points&&e.mapPanel.isLoaded){e.mapPanel.centerBound(r.points);e.mapPanel.addRoute("over",r.points)}}).bind("walkRouteRender",function(t,n){var r=e.searchStore.getBusResult().list[this.getLastClick()].routes[n];var i=r.startpoint,s=r.endpoint,o={start:e.searchView.getFromValue(),end:e.searchView.getToValue()};e.searchStore.searchBusWalkRoute(i,s,o)}).bind("printRoute",function(t,n){var r={type:"bus",planIndex:n};e.printRouteView.setMode("route");e.printRouteView.setData(r);e.printRouteView.go()}).bind("drawMapRoute",function(t,n){n=n||0;e.mapPanel.removeAllMarkers();var r=[],i=[],s=[],o=[],u=e.searchStore.getBusResult();r=r.concat([e.searchView.getFromInfo(),e.searchView.getToInfo()]);i=i.concat([e.searchView.getFromPoint()||e.searchView.getLastFromPoint(),e.searchView.getToPoint()||e.searchView.getLastToPoint()]);if(u&&u["list"]&&u["list"].length>n){s=u["list"][n]["maproutes"]||[];o=u["list"][n]["mapover"]||[]}if(e.mapPanel.isLoaded&&s.length){$.each(s||[],function(t,n){e.mapPanel.addRoute(n.type,n.points)});$.each(o,function(t,n){i.push({baidu:n.getBpoint(),google:n.getGpoint()});r.push(n);e.searchStore.searchRouteTime(n.point,n.endpoint,n.classname)});e.mapPanel.addMarkers(i,r,"third")}});$(e.carRouteView).bind("lightLine",function(t,n){var r=e.searchStore.getCarResult()["list"][this.getLastClick()]["routes"][n-1];e.mapPanel.isLoaded&&e.mapPanel.centerBound(r.points);e.mapPanel.isLoaded&&e.mapPanel.addRoute("over",r.points)}).bind("printRoute",function(t,n){var r={type:"nav",planIndex:n};e.printRouteView.setMode("route");e.printRouteView.setData(r);e.printRouteView.go()}).bind("drawMapRoute",function(t,n){n=n||0;e.mapPanel.removeAllMarkers();var r=e.searchView.getFromPoint()||e.searchView.getLastFromPoint(),i=e.searchView.getToPoint()||e.searchView.getLastToPoint(),s=e.searchView.getFromInfo(),o=e.searchView.getToInfo(),u=[],a=e.searchStore.getCarResult();if(a&&a["list"]&&a["list"].length){u=a["list"][n]["routes"]||[]}if(e.mapPanel.isLoaded&&u.length>n){e.mapPanel.addMarkers([r,i],[s,o],"third");$.each(u||[],function(t,n){e.mapPanel.addRoute(n.type,n.points)})}});$(e.walkRouteView).bind("lightLine",function(t,n){var r=e.searchStore.getWalkResult()["list"][this.getLastClick()]["routes"][n-1];if(r&&r.points){e.mapPanel.isLoaded&&e.mapPanel.centerBound(r.points);e.mapPanel.isLoaded&&e.mapPanel.addRoute("over",r.points)}}).bind("printRoute",function(t,n){var r={type:"walk",planIndex:n};e.printRouteView.setMode("route");e.printRouteView.setData(r);e.printRouteView.go()}).bind("drawMapRoute",function(t,n){n=n||0;e.mapPanel.removeAllMarkers();var r=e.searchView.getFromPoint()||e.searchView.getLastFromPoint(),i=e.searchView.getToPoint()||e.searchView.getLastToPoint(),s=e.searchView.getFromInfo(),o=e.searchView.getToInfo(),u=[],a=e.searchStore.getWalkResult();if(a&&a["list"]&&a["list"].length){u=a["list"][n]["routes"]||[]}if(e.mapPanel.isLoaded&&u.length>n){e.mapPanel.addMarkers([r,i],[s,o],"third");$.each(u||[],function(t,n){e.mapPanel.addRoute(n.type,n.points)})}})}})},508:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;var r=function(e,t){e=e||"";t=t||"";var n=e.lastIndexOf("_");var r="";var i="";if(n!=-1){r=e.substring(0,n);i=e.substr(n+1)}if(t)r=t;return"/city/"+r+"/dt-"+i};var i=["",'<em title="国家旅游局评定为一星级" class="star star10"></em>','<em title="国家旅游局评定为二星级" class="star star20"></em>','<em title="国家旅游局评定为三星级" class="star star30"></em>','<em title="国家旅游局评定为四星级" class="star star40"></em>','<em title="国家旅游局评定为五星级" class="star star50"></em>'];var s=["",'<em class="sort dangci" title="去哪儿网用户评定为经济型酒店">经济型</em>','<em class="sort dangci" title="去哪儿网用户评定为舒适型酒店">舒适型</em>','<em class="sort dangci" title="去哪儿网用户评定为高档型酒店">高档型</em>','<em class="sort dangci" title="去哪儿网用户评定为豪华型酒店">豪华型</em>',""];QClass.define("hotel.map.model.hotel",{initialize:function(e,t){e=e||{};t=t||{};this._limit=t.limit||20;this.initData(e)},initData:function(e){this.index=e.index;this.hotelSeq=e.hotelSeq||e.id;this.name=window.subByte(escapeHtml(e.hotelName||""),this._limit,"...");this.title=escapeHtml(e.hotelName);this.bpoint=e.bpoint||"";this.bpoint=this.bpoint.split(",");if(this.bpoint.length!=2){this.bpoint=null}this.gpoint=e.gpoint||"";this.gpoint=this.gpoint.split(",");if(this.gpoint.length!=2){this.gpoint=null}this.scale=e.scale||8;this.imageUrl=e.imageUrl||(e.imageUri?"//userimg.qunarzz.com/imgs/"+e.imageUri+"120.jpg":"//simg1.qunarzz.com/hotel/map_domestic/default_qunar.png");this.dangci=parseInt(e.dangci,10);this.dangciInfo=s[this.dangci];this.price=e.price;this.hotelStars=parseInt(e.hotelStars||e.stars);this.hotelStarsInfo=i[this.hotelStars];this.qptype=e.qptype;this.info=e.info||{};this.detailLink=e.detailLink||this._getDetailLink();this.category=e.category||"hotel";this.os=e.os;this.miniRetailPrice=e.miniRetailPrice||e.MiniRetailPrice||-1;this.isLowPrice=e.isLowPrice;this.isStatic=e.isStatic;this.priceTip=e.priceTip||this._getPriceTip();this.hasPriceTip=this.priceTip["hasPriceTip"];this.noPriceTip=this.priceTip["noPriceTip"];this.referPriceTip=this.priceTip["referPriceTip"]},getIndex:function(){return this.index},getHotelSeq:function(){return this.hotelSeq},getName:function(){return this.name||""},getTitle:function(){return this.title||""},getBpoint:function(){return this.bpoint},getGpoint:function(){return this.gpoint},getScale:function(){return this.scale||17},getImageUrl:function(){return this.imageUrl},getDangci:function(){return this.dangci},getPrice:function(){return this.price},setPrice:function(e){this.price=e;this.priceTip=this._getPriceTip();this.hasPriceTip=this.priceTip["hasPriceTip"];this.noPriceTip=this.priceTip["noPriceTip"];this.referPriceTip=this.priceTip["referPriceTip"]},getHotelStars:function(){return this.hotelStars},getCategory:function(){return this.category},setCategory:function(e){this.category=e},getDetailLink:function(){return this.detailLink},_getDetailLink:function(){if(this.detailLink)return this.detailLink;var e=this.qptype,t=this.info.pois,n=[];n.push(r(this.hotelSeq));n.push("/?tag=",typeof window.cityurl==="undefined"?"":window.cityurl);n.push("#fromDate=",window.fromDate,"&toDate=",window.toDate);n.push(window.qParam);n.push("&filterid=",encodeURIComponent(window.filterid||""));n.push("&showMap=0");if(typeof e!=="undefined"){n.push("&qptype=",e)}if(t&&t.length>0){n.push("&haspoi=1")}if(window.QHTrace&&window.QHTrace.instance){n.push(window.QHTrace.instance.generate())}if(this.isBNB){this.detailLink="//bnb.qunar.com"+n.join("")}else{this.detailLink="//hotel.qunar.com"+n.join("")}return this.detailLink},_getPriceTip:function(){var e="",t="",n="";if(this.os&&this.os!=="营业中"){t=this.os}else{if(this.isLowPrice===1){if(this.price>0){n="参考价："+this.price+"元"}else{n="参考价："+this.miniRetailPrice+"元"}}else{if(this.isStatic){if(this.miniRetailPrice!=-1){n="参考价："+this.miniRetailPrice+"元"}else{t="需电话咨询"}}else{if(this.price>0){e="&yen;"+this.price+"起"}else if(this.price==-1){t="已经订完"}else if(this.price==0){if(this.miniRetailPrice!=-1){n="参考价："+this.miniRetailPrice+"元"}else{t="需电话咨询"}}}}}return{hasPriceTip:e,noPriceTip:t,referPriceTip:n}}})},509:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;QClass.define("hotel.map.model.point",{CATEGORY_CLASSMAP:{arrHotel:"icon-num",flight:"icon-flight",train:"icon-train",subway:"icon-subway-blue",station:"icon-station",start:"icon-num",end:"icon-num"},HIDE_CLASSMAP:{arrHotel:"",flight:"hide",train:"hide",subway:"hide",station:"hide",start:"",end:""},initialize:function(e,t){e=e||{};t=t||{};this._limit=t.limit||16;this.initData(e)},initData:function(e){this.index=e.index;this.name=window.subByte(escapeHtml(e.name||""),this._limit,"...");this.title=escapeHtml(e.title);this.category=e.category;this.categoryText=e.categoryText||"";this.bpoint=e.bpoint||"";this.bpoint=this.bpoint.split(",");if(this.bpoint.length!=2){this.bpoint=null}this.gpoint=e.gpoint||"";this.gpoint=this.gpoint.split(",");if(this.gpoint.length!=2){this.gpoint=null}this.distance=e.distance;this.iconClass=this.CATEGORY_CLASSMAP[e.category];this.hideClass=this.HIDE_CLASSMAP[e.category];this.firstClass=e.firstClass;this.lastClass=e.lastClass},getIndex:function(){return this.index},getName:function(){return this.name||""},getTitle:function(){return this.title||""},getCategory:function(){return this.category||""},setCategory:function(e){this.category=e},getCategoryText:function(){return this.categoryText||""},getBpoint:function(){return this.bpoint},getGpoint:function(){return this.gpoint},getDistance:function(){return this.distance||0},setDistance:function(e){this.distance=e},setFirstClass:function(e){this.firstClass=e},setLastClass:function(e){this.lastClass=e}})},510:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;var i=n(122);var s=n(511);var o=n(512);n(200);var u=200;var a=3e3;var f={first:{hotel:[34,37],flight:[29,21],train:[29,21],station:[29,21],bus:[29,21],subway:[29,21],arrHotel:[27,25],poi:[25,35]},second:{start:[27,25],end:[27,25]},third:{start:[34,37],end:[34,37],lineBus:[28,18],lineSubway:[28,18]}};var l={first:{hotel:[15,37],flight:[14,21],train:[14,21],station:[14,21],bus:[14,21],subway:[14,21],arrHotel:[13,25],poi:[12,35]},second:{start:[13,25],end:[13,25]},third:{start:[17,37],end:[17,37],lineBus:[14,18],lineSubway:[14,18]}};var c={first:{hotel:"//simg1.qunarzz.com/hotel/map_domestic/icons1/hotel.png",flight:"//simg1.qunarzz.com/hotel/map_domestic/icons1/flight.png",train:"//simg1.qunarzz.com/hotel/map_domestic/icons1/train.png",station:"//simg1.qunarzz.com/hotel/map_domestic/icons1/station.png",bus:"//simg1.qunarzz.com/hotel/map_domestic/icons1/bus.png",subway:"//simg1.qunarzz.com/hotel/map_domestic/icons1/subway.png",arrHotel:"//simg1.qunarzz.com/hotel/map_domestic/icons1/other#.png",poi:"//source.qunarzz.com/hotel/map/sicon/black_#.png"},second:{start:"//simg1.qunarzz.com/hotel/map_domestic/icons1/other#.png",end:"//simg1.qunarzz.com/hotel/map_domestic/icons1/other#.png"},third:{start:"//simg1.qunarzz.com/hotel/map_domestic/icons1/start.png",end:"//simg1.qunarzz.com/hotel/map_domestic/icons1/dest.png",lineBus:"//simg1.qunarzz.com/hotel/map_domestic/icons1/line_bus.png",lineSubway:"//simg1.qunarzz.com/hotel/map_domestic/icons1/line_subway.png"}};var h={first:{hotel:"//simg1.qunarzz.com/hotel/map_domestic/icons1/hotel_hover.png",flight:"//simg1.qunarzz.com/hotel/map_domestic/icons1/flight_hover.png",train:"//simg1.qunarzz.com/hotel/map_domestic/icons1/train_hover.png",station:"//simg1.qunarzz.com/hotel/map_domestic/icons1/station_hover.png",bus:"//simg1.qunarzz.com/hotel/map_domestic/icons1/bus_hover.png",subway:"//simg1.qunarzz.com/hotel/map_domestic/icons1/subway_hover.png",arrHotel:"//simg1.qunarzz.com/hotel/map_domestic/icons1/other#_hover.png",poi:"//source.qunarzz.com/hotel/map/sicon/black_#.png"},second:{start:"//simg1.qunarzz.com/hotel/map_domestic/icons1/other#_hover.png",end:"//simg1.qunarzz.com/hotel/map_domestic/icons1/other#_hover.png"},third:{start:"//simg1.qunarzz.com/hotel/map_domestic/icons1/start_hover.png",end:"//simg1.qunarzz.com/hotel/map_domestic/icons1/dest_hover.png",lineBus:"//simg1.qunarzz.com/hotel/map_domestic/icons1/line_bus.png",lineSubway:"//simg1.qunarzz.com/hotel/map_domestic/icons1/line_subway.png"}};var p=12;var d={first:{hover:4,hotel:3,poi:2,defaultval:1,tip:5},second:{hover:4,defaultval:1},third:{hover:4,defaultval:1,tip:5}};var v={first:{hotel:{click:true,mouseenter:true,mouseleave:true},arrHotel:{click:true,mouseenter:true,mouseleave:true}},third:{hotel:{click:true,mouseenter:true,mouseleave:true},arrHotel:{click:true,mouseenter:true,mouseleave:true},lineBus:{click:false,mouseenter:false,mouseleave:false},lineSubway:{click:false,mouseenter:false,mouseleave:false}}};(function(){QClass.define("hotel.map.view.mapView",{initialize:function(){this.animateAble=true;this.$content=$(s);this.$mapContainer=this.$content.find(".js-mapContainer");this.$tipContainer=this.$content.find(".js-mapTips");this.$mainContainer=this.$content.find(".js-mainContainer");this.$tab=this.$content.find(".js-tab");this.$firstContent=this.$content.find(".js-first");this.$secondContent=this.$content.find(".js-second");this.$upButton=this.$content.find(".js-upButton");this.$routeContainer=this.$content.find(".js-route");this.$routeTab=this.$content.find(".js-route-tab");this.baseBound=null;this.bound=null;this.isFirstPanel=true;this.isLoaded=false;this.hotelPoint=null;this.mainCacheMarker=[];this.mainCacheTip=[];this.cacheMarker=[];this.cacheTip=[];this.animateHeight=this.$firstContent.height()||340;this.animateAble=true;this.bindEvent()},get$Container:function(){return this.$content},isFirst:function(){return this.isFirstPanel},showSecondPanel:function(){this.isFirstPanel=false;this.$mainContainer.addClass("ui-map-second-show")},hideSecondPanel:function(){this.isFirstPanel=true;this.$mainContainer.removeClass("ui-map-second-show")},showIndistinctPanel:function(){this.$routeContainer.addClass("ui-map-noresult-show")},hideIndistinctPanel:function(){this.$routeContainer.removeClass("ui-map-noresult-show")},show:function(){this.$content.show()},hide:function(){this.$content.hide()},bindEvent:function(){var e=this;var t=true;this.$tab.delegate(".js-tab-item","click",function(){var n=$(this);var r=n.data("category");if(n.hasClass("active")){return}if(r==="traffic"){window.GARunerById&&window.GARunerById(window._ba_utm_s,"maptcjtsn")}else{window.GARunerById&&window.GARunerById(window._ba_utm_s,"maptczbjd")}if(t){$(e).trigger("tabFirstClick",r);t=false}else{$(e).trigger("tabClick",r)}n.addClass("active").parent().siblings().find(".js-tab-item").removeClass("active")});this.$content.delegate(".js-close","click",function(t){e.hide();$(e).trigger("hide")});this.$upButton.bind("click",function(){e.hideSecondPanel();e.removeAllMarkers();$(e).trigger("firstPanelShow")});this.$routeTab.delegate("li","click",function(){var t=$(this);if(t.hasClass("hover")){return}t.addClass("hover").siblings().removeClass("hover");$(e).trigger("routeTabClick",t.data("type"))})},updateRouteTab:function(e){this.$routeTab.find('li[data-type="'+e+'"]').addClass("hover").siblings().removeClass("hover")},extendHotel:function(e){return $.extend({},e,{href:e.detailLink+"&from=maptcimg",namehref:e.detailLink+"&from=maptchotelname",pricehref:e.detailLink+"&from=maptcjg"})},render:function(e,t){var n=this;var r=new GMap2(this.$mapContainer.get(0),{minZoom:8});this.map=r;r.enableScrollWheelZoom();r.addControl(new GSmallMapControl,new GControlPosition(G_ANCHOR_TOP_LEFT));this.addMarkers(e,t,"first");this.map.addEventListener("movestart",function(){$.each(n.mainCacheTip||[],function(e,t){t&&t.hide()})})},getMap:function(){return this.map},_getIconUrl:function(e,t,n,r){var i=new RegExp("#");var s=r?h:c;return s[e][t].replace(i,t==="poi"?String.fromCharCode(97+n-1):n)},showTip:function(e){if(this.cacheTip&&this.cacheTip.length&&this.cacheTip[e]){this.cacheTip[e].show()}},hideTip:function(e){if(this.cacheTip&&this.cacheTip.length&&this.cacheTip[e]){this.cacheTip[e].hide()}},setCenter:function(){if(this.hotelPoint){this.map.setCenter(this.hotelPoint,p)}},showMarker:function(e,t,n){if(this.cacheMarker&&this.cacheMarker.length&&this.cacheMarker[e]){var r=this._getIconUrl(n,t.getCategory(),t.getIndex(),true);this.cacheMarker[e].setImage(r);this.cacheMarker[e].setZIndex(4)}},hideMarker:function(e,t,n){if(this.cacheMarker&&this.cacheMarker.length&&this.cacheMarker[e]){var r=this._getIconUrl(n,t.getCategory(),t.getIndex());this.cacheMarker[e].setImage(r);this.cacheMarker[e].setZIndex(1)}},addMarkers:function(e,t,n){var r=this;var s=null,o=false;t=t||[];i.toExactPoint({isGCJ02:typeof isMainland!=="undefined"&&isMainland,callback:function(e){if(!e||e.length===0){return}$.each(e,function(e,i){if(i){var u=t[e];var a,l,c;var h=null,p=null;var m=u.getCategory(),g;var y=d[n][m]||d[n]["defaultval"];if(n==="first"){if(!r.isLoaded){if(!r.baseBound){r.baseBound=new GLatLngBounds(i,i);r.bound=new GLatLngBounds(i,i)}else{r.baseBound.extend(i);r.bound.extend(i)}}else{if(!s){if(m==="arrHotel"){s=r.baseBound}}if(m==="arrHotel"){s.extend(i)}else{o=true}}}else{if(n==="third"){if(e===0){g="start"}else if(e===1){g="end"}}if(!s){s=new GLatLngBounds(i,i)}else{s.extend(i)}}a=r._getIconUrl(n,g||m,u.getIndex());l=r._getIconUrl(n,g||m,u.getIndex(),true);c=r._addMarker(i,n,g||m,u,u.getCategory()==="hotel"&&!r.isLoaded?l:a,y);if(v[n]&&v[n][m]){h=r._addTip(i,u,f[n][g||m],n,m);if(u.getCategory()==="hotel"){r.mainCacheTip.push(h);if(!r.isLoaded){h.show()}}else{r.cacheTip.push(h)}}(function(e,t,n,i,s,o,u,a){var f=null;var l=v[u]&&v[u]&&v[u][a]||{};e.addEventListener("click",function(){if(o&&r.animateAble){return}if(l["click"]){t&&t.toggle();if(t.css("display")==="none"){window.GARunerById&&window.GARunerById(window._ba_utm_s,"maptcqipaoclose")}}});e.addEventListener("mouseover",function(){if(o&&r.animateAble){return}e.setImage(i);e.setZIndex(d[u]["hover"])});e.addEventListener("mouseout",function(){if(o&&r.animateAble){return}f=setTimeout(function(){e.setImage(n);e.setZIndex(s);l["mouseleave"]&&t&&t.hide()},200)});if(t&&l["mouseenter"]&&l["mouseleave"]){t.bind("mouseenter",function(){if(o&&r.animateAble){return}if(f){clearTimeout(f)}t.show()}).bind("mouseleave",function(){if(o&&r.animateAble){return}e.setImage(n);e.setZIndex(s);t.hide()})}})(c,h,a,l,y,p,n,m);if(n==="first"&&u.getCategory()==="hotel"||u.getCategory()==="poi"){r.mainCacheMarker.push(c)}else{r.cacheMarker.push(c)}}});if(!r.isLoaded&&e[0]){r.hotelPoint=e[0];r.map.setCenter(e[0],p)}else{if(!o){s&&r.map.fitBounds(i.extendBound(s,10))}}if(!r.isLoaded){r.isLoaded=true;$(r).trigger("mapLoaded")}},timeout:5e3,items:e||[]})},removeOtherMarker:function(){var e=this;$.each(this.cacheTip||[],function(e,t){t&&t.hide()});$.each(this.cacheMarker||[],function(t,n){n&&e.map.removeOverlay(n)});this.cacheTip=[];this.cacheMarker=[]},removeAllMarkers:function(){var e=this;$.each(this.mainCacheTip||[],function(e,t){t&&t.hide()});$.each(this.mainCacheMarker||[],function(t,n){n&&e.map.removeOverlay(n)});$.each(this.cacheTip||[],function(e,t){t&&t.hide()});$.each(this.cacheMarker||[],function(t,n){n&&e.map.removeOverlay(n)});$.each(this.routeLines||[],function(t,n){n&&e.map.removeOverlay(n)});$.each(this.mapLabels||[],function(t,n){n&&e.map.removeOverlay(n)});this.overLine&&e.map.removeOverlay(this.overLine);this.mainCacheTip=[];this.mainCacheMarker=[];this.cacheTip=[];this.cacheMarker=[];this.routeLines=[];this.overLine=null;this.mapLabels=[]},restoreMarkers:function(e){},_addTip:function(e,t,n,r,i){var s=new o(this.$tipContainer,this.$mapContainer,e,this.extendHotel(t),n,r,i);this.map.addOverlay(s);s.getTip().css({zIndex:d[r]["tip"]});s.getTip().delegate(".js-tipClose","click",function(e){e.preventDefault();s.hide();window.GARunerById&&window.GARunerById(window._ba_utm_s,"listmaptcqipaoclose")});return s.getTip()},_addMarker:function(e,t,n,r,i,s){var o;var u=new GIcon;var a=f[t][n];var c=l[t][n];u.setSize(new GSize(a[0],a[1]));u.setAnchor(new GPoint(c[0],c[1]));u.setImageUrl(i);o=new GMarker(e,{title:r.title,clickable:true,zIndex:s||1,icon:u});this.map.addOverlay(o);return o},addRoute:function(e,t){if(!this.routeLines){this.routeLines=[]}var n=null;var r={};if(!t||!t.length)return;switch(e){case"car":r={strokeColor:"#3dc2fd",strokeWeight:8,strokeOpacity:.8};break;case"bus":r={strokeColor:"#3dc2fd",strokeWeight:8,strokeOpacity:.8};break;case"walk":r={strokeColor:"#7eb63d",strokeWeight:8,strokeOpacity:.8};break;case"over":r={strokeColor:"#ff5555",strokeWeight:8,strokeOpacity:.8};break}if(e=="over"&&this.overLine){this.map._impl.removeOverlay(this.overLine)}n=new GPolyline(t,r.strokeColor,r.strokeWeight,r.strokeOpacity);if(e=="over"){this.overLine=n}this.routeLines.push(n);this.map.addOverlay(n)},centerBound:function(e){if(!e.length)return;var t=new BMap.Bounds;for(var n=0;n<e.length;n++){var r=e[n];if(r.points){$.each(r.points,function(){t.extend(this)})}else if(r.point){t.extend(r.point)}else if(r.lat&&r.lng){t.extend(r)}}if(!t.isEmpty()){var i=this.extendBound(t);this.map._impl.setViewport(i)}},extendBound:function(e,t){t=t||15;var n=e.toSpan();var r=e.getSouthWest();var i=e.getNorthEast();return new BMap.Bounds(new BMap.Point(r.lng-n.lng/t,r.lat-n.lat/t),new BMap.Point(i.lng+n.lng/t,i.lat+n.lat/t))},clearOverLays:function(){this.map._impl.clearOverlays()}})})()},511:function(e,t){e.exports=' <div class="ui-map-pop">\n    <a class="ui-map-close js-close" href="#" onclick="return false;"><span class="close-txt">close</span></a>\n    <div class="ui-map-content clr_after">\n        <div class="ui-map-tips js-mapTips"></div>\n        <div class="ui-map-left column js-mapContainer"></div>\n        <div class="ui-map-right column js-mainContainer"> <!--显示搜索结果 新增“ui-map-second-show” 将ui-map-first 用动画隐藏起来-->\n            <!--<a href="#" onclick="return false;" class="ui-map-btn png24">展开样式 增加"ui-map-btn-deploy"\n                <span class="inner png24"></span>\n            </a>-->\n            <div class="ui-map-first js-first">\n                <div class="ui-map-tab">\n                    <ul class="clr_after js-tab">\n                         <li><div class="ui-map-tab-inner js-tab-item active"  data-category="traffic">交通枢纽</div></li>\n                         <li><div class="ui-map-tab-inner js-tab-item" data-category="arrHotel">周边酒店</div></li>\n                    </ul>\n                </div>\n                <div class="ui-map-trafnei">\n                    <div class="ui-map-traffic js-traffic">\n                        <div class="js-content trafnei-content"></div>\n                        <div class="gradient-bg js-bg"></div>\n                    </div>\n                    <div class="ui-map-arround js-around">\n                        <div class="js-content trafnei-content"></div>\n                        <div class="gradient-bg js-bg"></div>\n                    </div>\n                </div>\n            </div>\n            <div class="ui-map-second js-second">\n                <div class="ui-map-up">\n                    <a class="icon icon-pull png24 js-upButton" href="#" onclick="return false;"></a>\n                </div>\n                <div class="ui-map-search js-searchForm">\n                    <div class="ui-search-wrap">\n                        <div class="ui-search-input">\n                            <div class="clr_after">\n                                <div class="column"><a class="icon icon-start" href="#" onclick="return false;"></a></div>\n                                <div class="column txt"><input autocomplete="off" id="js-fromPosition" type="text" class="none-txt" maxlength="200" value="请输入起点" tabindex="20"/></div><!--默认文案样式 新增“none-txt”-->\n                            </div>\n                            <div class="clr_after">\n                                <div class="column"><a class="icon icon-destination" href="#" onclick="return false;"></a></div>\n                                <div class="column txt none-border"><input autocomplete="off" id="js-toPosition" type="text" maxlength="200" value="" tabindex="21"/></div>\n                            </div>\n                        </div>\n                        <a class="icon icon-change png24" id="js-changeButton" tabindex="22" href="#" onclick="return false;"></a>\n                    </div>\n                    <a class="icon icon-search" id="js-searchButton" href="#" tabindex="23" onclick="return false;"></a>\n                </div>\n                <div class="ui-search-content js-route"> <!--搜索路线结果 和 选择起点终点 只能显示一个 新增“ui-map-noresult-show” 可以将搜索路线结果隐藏  将选择起点终点显示 -->\n                    <div class="ui-search-result"><!--搜索路线结果-->\n                        <ul class="ui-search-result-tab clr_after js-route-tab">\n                            <li class="column" data-type="bus">公交</li>\n                            <li class="column" data-type="car">驾车</li>\n                            <li class="column last" data-type="walk">步行</li>\n                        </ul>\n                        <div class="ui-search-result-list js-route-content">\n                            <div class="result-items js-bus-route">\n                                <div class="js-content result-items-content"></div>\n                                <div class="gradient-bg js-bg"></div>\n                            </div>\n                            <div class="result-items result-items-easy js-car-route">\n                                <div class="js-content result-items-content"></div>\n                                <div class="gradient-bg js-bg"></div>\n                            </div>\n                            <div class="result-items result-items-easy js-walk-route">\n                                <div class="js-content result-items-content"></div>\n                                <div class="gradient-bg js-bg"></div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="ui-search-noresult js-indistinct">\n                        <div class="ui-choose-place js-start">\n                            <div class="choose-head png24 clr_after js-chooseBtn"><!--hover 增加“choose-head-hover”-->\n                                <div class="column"><a class="icon icon-start-round png24" href="#" onclick="return false;"></a></div>\n                                <div class="column txt">请选择起点</div>\n                                <div class="column down"><a class="icon icon-choose-down png24" href="#" onclick="return false;"></a></div>\n                                <div class="column up"><a class="icon icon-choose-up png24" href="#" onclick="return false;"></a></div>\n                            </div>\n                            <div class="ui-choose-place-content js-chooseContent">\n                                <div class="ui-choose-place-content-inner js-content"></div>\n                                 <div class="gradient-bg js-bg"></div>\n                            </div>\n                        </div>\n                        <div class="ui-choose-place js-end">\n                            <div class="choose-head png24 clr_after js-chooseBtn"><!--hover 增加“choose-head-hover”-->\n                                <div class="column"><a class="icon icon-destination-round png24" href="#" onclick="return false;"></a></div>\n                                <div class="column txt">请选择终点</div>\n                                <div class="column down"><a class="icon icon-choose-down png24" href="#" onclick="return false;"></a></div>\n                                <div class="column up"><a class="icon icon-choose-up png24" href="#" onclick="return false;"></a></div>\n                            </div>\n                            <div class="ui-choose-place-content js-chooseContent">\n                                <div class="ui-choose-place-content-inner js-content"></div>\n                                <div class="gradient-bg js-bg"></div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n'},512:function(e,t,n){function h(e,t,n,r,i,s,o){this._container=e;this._mapContainer=t;this._center=n;this._hotelInfo=r;this._markerSize=i;this._$div=null;this._$realTip=null;this.width=f[s][o];this.height=l[s][o];this.gap=2;this.category=o;this.type=s}var r=typeof r==="function"&&!r.amd?r:false;var i=n(513);var s=n(514);var o=Hogan.compile(i);var u=Hogan.compile(s);var a={first:{hotel:o,arrHotel:o},third:{hotel:o,arrHotel:o,lineBus:u,lineSubway:u}};var f={first:{hotel:306,arrHotel:306},third:{hotel:306,arrHotel:306,lineBus:0,lineSubway:0}};var l={first:{hotel:92,arrHotel:92},third:{hotel:92,arrHotel:92,lineBus:48,lineSubway:48}};var c={first:{hotel:true,arrHotel:true},third:{hotel:true,arrHotel:true,lineBus:false,lineSubway:false}};h.prototype.initialize=function(e){this.isHidden=true;this._map=e;this.tipHTML=a[this.type][this.category].render(this._hotelInfo);this._$div=$('<div class="tip-container"></div>').html(this.tipHTML);this._$realTip=$('<div class="tip-container"></div>').html(this.tipHTML);if(c[this.type][this.category]){this._$div.hide()}this._$realTip.hide();this._container.append(this._$realTip);e.getPane(G_MAP_MARKER_PANE).appendChild(this._$div.get(0));return this._$div.get(0)};h.prototype.getTip=function(){return c[this.type][this.category]?this._$realTip:this._$div};h.prototype.draw=function(){var e=this._map.fromLatLngToContainerPixel(this._center),t=this._map.fromLatLngToDivPixel(this._center);var n=this._mapContainer.width();var r=this._mapContainer.height();this._$realTip.css({left:e.x-this.width/2-this.gap,top:e.y-this.height-this.gap-this._markerSize[1]});if(!c[this.type][this.category]){this._$div.css({left:t.x-this.width/2-this.gap,top:t.y-this.height-this.gap-this._markerSize[1]})}};h.prototype.toggle=function(){if(this.isHidden){this.show()}else{this.hide()}};h.prototype.hide=function(){this.isHidden=true;this._$realTip.hide();this._$div.hide()};h.prototype.show=function(){this.isHidden=false;this._$realTip.show()};e.exports=h},513:function(e,t){e.exports='<div class="tip-inner clr_after">\n  <div class="tip-img column">\n      <a href="{{href}}" target="_blank"><img src="{{imageUrl}}"></a>\n  </div>\n  <div class="tip-content column">\n      <h2 class="tip-content-name"><a href="{{namehref}}" target="_blank" title="{{title}}">{{name}}</a></h2>\n      <div class="tip-content-other clr_after">\n          {{#hotelStars}}\n          <div class="tip-content-star column">{{&hotelStarsInfo}}</div>\n          {{/hotelStars}}\n          {{^hotelStars}}\n          <div class="tip-content-dc column">{{&dangciInfo}}</div>\n          {{/hotelStars}}\n          <div class="tip-content-price column-right">\n              {{#hasPriceTip}}\n              <a href="{{pricehref}}" target="_blank"><span class="price">{{&hasPriceTip}}</span></a>\n              {{/hasPriceTip}}\n              {{#referPriceTip}}\n              <a href="{{pricehref}}" target="_blank"><span class="ref-price">{{&referPriceTip}}</span></a>\n              {{/referPriceTip}}\n              {{#noPriceTip}}\n              <span class="no-price">{{noPriceTip}}</span>\n              {{/noPriceTip}}\n          </div>\n      </div>\n  </div>\n  <div class="tip-close js-tipClose png24"></div>\n  <div class="tip-arrow png24"></div>\n</div>\n\n'},514:function(e,t){e.exports='<div class="label-tip">\n    <div class="tip-che">乘坐{{title}}</div>\n    <div class=\'{{classname}} tip-dis\'></div>\n</div>'},515:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;n(67);n(71);var i=n(516);var s=Hogan.compile(i);var o=200;var u=100;var a='<div class="gradient-bg js-bg"></div>';var f='<div class="ui-map-loading js-loading"></div>';var l=/MSIE 6\.0/.test(navigator.userAgent),c=/MSIE 7\.0/.test(navigator.userAgent),h=/MSIE 8\.0/.test(navigator.userAgent);QClass.define("hotel.map.view.pointView",{initialize:function(e){this.conf=e||{};this.$container=this.conf.$container;this.$content=this.$container.find(".js-content");this.$bg=this.$container.find(".js-bg");this.data=[];this.isShowState=false;this.distanceCount=0;this.updateDistanceCount=0;this.bind()},render:function(e){var t=this;this.data=e||[];this.$content.html(s.render(e));this.scroller=new $jsex.ScrollBar({container:this.$content.get(0),zoneClass:"e_scroll_outer",showClass:"scroll-show",unselect:true});this.scroller.scrollTo(0);setTimeout(function(){t.scroller&&t.scroller.refresh()},300);$(this.scroller).bind("scrollerBarMove scrollerBarClick",function(){t.shadeFadeInOut()});$(this.scroller).one("scrollBarHide",function(){t.$bg.hide()}).one("scrollBarShow",function(){t.$bg.show()})},isShow:function(){return this.isShowState},show:function(){this.isShowState=true;this.$container.show();this.scroller&&this.scroller.refresh()},hide:function(){this.isShowState=false;this.$container.hide()},showLoading:function(){if(!this.$loading){this.$loading=$(f)}this.$content.append(this.$loading);this.$loading.show()},hideLoading:function(){this.$loading&&this.$loading.hide()},bind:function(){var e=this;var t=null;this.$container.delegate(".js-item","mouseenter",function(){var n=$(this);var r=n.find(".js-look");var i=parseInt(n.data("index"),10);t=setTimeout(function(){if(c){r.css({right:"0px"})}else{r.animate({right:"0px"},o)}},u);$(e).trigger("mouseEnterPoint",i-1)}).delegate(".js-item","mouseleave",function(){var n=$(this);var r=n.find(".js-look");var i=parseInt(n.data("index"),10);if(t){clearTimeout(t)}if(c){r.css({right:"-100px"})}else{r.animate({right:"-100px"},o)}$(e).trigger("mouseLeavePoint",i-1)}).delegate(".js-look","click",function(){var t=$(this).parent();var n=t.data("gpoint");var r=t.data("bpoint");var i=parseInt(t.data("index"),10)-1;var s=r?{baidu:r&&r.split(",")||null,google:n&&n.split(",")||null}:null;$(e).trigger("pointClick",[i,t.data("title"),s])})},updateDistance:function(e){var t=this.$container.find(".js-distance");if(!this.distanceCount){this.distanceCount=t.length}e=e||{};if(e.getIndex){this.updateDistanceCount++;$(t[e.getIndex()-1]).text(e.getDistance())}},shadeFadeInOut:function(){if(!this.scroller||!this.scroller.hasScrollBar()){return}var e=this.scroller.percent();if(l||c||h){if(e===1){$(this.$bg).hide()}else{$(this.$bg).show()}}else{if(e===1){$(this.$bg).fadeOut(o)}else{$(this.$bg).fadeIn(o)}}}})},516:function(e,t){e.exports='{{#length}}\n<div><!--加div 取到的高度 就正常了 否则scroll 内容取到的高度是一行的高度-->\n    {{#data}}\n    <div class="wraper-outer {{noborderClass}}">\n        {{#items}}\n        <div class="wraper-middle {{firstClass}} {{lastClass}}">\n            <div class="wraper-inner clr_after js-item" data-index="{{index}}" data-bpoint="{{bpoint}}" data-gpoint="{{gpoint}}" data-title="{{title}}">\n                <div class="column"><a class="icon {{iconClass}} png24" href="#" onclick="return false;"><span class="{{hideClass}}">{{index}}</span></a></div>\n                <div class="column txt" title="{{title}}">{{name}}</div>\n                <div class="column distance js-distance"></div>\n                <div class="column look icon-look js-look">查询路线</div>\n            </div>\n        </div>\n        {{/items}}\n    </div>\n    {{/data}}\n</div>\n{{/length}}\n{{^length}}\n    <div class="noresult">\n        <span class="content">\n            抱歉，没有在"<span class="search">{{hotelName}}</span>"{{typeContext}}\n        </span>\n    </div>\n{{/length}}\n\n\n'},517:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;QClass.define("hotel.map.view.searchView",{initialize:function(e){e=e||{};this.$container=e.$container;this.$from=this.$container.find("#js-fromPosition");this.$to=this.$container.find("#js-toPosition");this.$searchBtn=this.$container.find("#js-searchButton");this.$changeBtn=this.$container.find("#js-changeButton");this.defaultFromValue="请输入起点";this.defaultToValue="请输入终点";this.emptyPoint=null;this.fromInfo=null;this.toInfo=null;this.fromPoint=e.fromPoint||{};this.toPoint=e.toPoint||{};this.lastFromPoint=e.fromPoint||{};this.lastToPoint=e.toPoint||{};this.hotelName="";this.hotelPoint={baidu:null,google:null};this.bindEvent()},setHotelName:function(e){this.hotelName=e},getHotelName:function(){return this.hotelName},setHotelPoint:function(e){this.hotelPoint=e},getHotelPoint:function(){return this.hotelPoint},setFromInfo:function(e){this.fromInfo=e},getFromInfo:function(){return this.fromInfo},setToInfo:function(e){this.toInfo=e},getToInfo:function(){return this.toInfo},setLastFromPoint:function(e){this.lastFromPoint=e},setLastToPoint:function(e){this.lastToPoint=e},setToPoint:function(e){this.toPoint=e;if(e){this.setLastToPoint(e)}},setFromPoint:function(e){this.fromPoint=e;if(e){this.setLastFromPoint(e)}},getLastFromPoint:function(){return this.lastFromPoint},getLastToPoint:function(){return this.lastToPoint},getToPoint:function(){return this.toPoint},getFromPoint:function(){return this.fromPoint},setToValue:function(e){this.$to.removeClass("error-txt");if(e&&e!==this.defaultToValue){this.$to.removeClass("none-txt")}else{this.$to.addClass("none-txt")}this.$to.val(e)},setFromValue:function(e){this.$from.removeClass("error-txt");if(e&&e!==this.defaultFromValue){this.$from.removeClass("none-txt")}else{this.$from.addClass("none-txt")}this.$from.val(e)},getFromValue:function(){return $.trim(this.$from.val())},getToValue:function(){return $.trim(this.$to.val())},bindEvent:function(){var e=this;this.$searchBtn.bind("click",function(){if(e.validate()){$(e).trigger("searchQuery",[{start:e.getFromPoint(),end:e.getToPoint()},{start:e.getFromValue(),end:e.getToValue()}])}});this.$changeBtn.bind("click",function(){if(e.validate()){e.changePosition();window.GARunerById&&window.GARunerById(window._ba_utm_s,"maptcqizhongqiehuan")}});this.$from.bind("focus",function(){if(e.getFromValue()===e.defaultFromValue){e.setFromValue("")}}).bind("blur",function(){if(!e.getFromValue()){e.setFromValue(e.defaultFromValue)}}).bind("keyup change",function(){if(e.getFromValue()){e.$from.removeClass("none-txt")}}).bind("keydown",function(t){if(t.keyCode!==32){e.setFromPoint(e.emptyPoint)}});this.$to.bind("focus",function(){if(e.getToValue()===e.defaultToValue){e.setToValue("")}}).bind("blur",function(){if(!e.getToValue()){e.setToValue(e.defaultToValue)}}).bind("keyup change",function(){if(e.getToValue()){e.$to.removeClass("none-txt")}}).bind("keydown",function(t){if(t.keyCode!==32){e.setToPoint(e.emptyPoint)}})},changePosition:function(){var e=this.getFromValue(),t=this.getToValue(),n=this.getFromPoint(),r=this.getToPoint(),i=this.getFromInfo(),s=this.getToInfo();this.setFromValue(t);this.setToValue(e);this.setFromPoint(r);this.setToPoint(n);this.setFromInfo(s);this.setToInfo(i)},validate:function(){var e=this.getFromValue(),t=this.getToValue(),n=true;if(!e||e===this.defaultFromValue){n=false;this.$from.addClass("error-txt")}else{this.$from.removeClass("error-txt")}if(!t||t===this.defaultToValue){n=false;this.$to.addClass("error-txt")}else{this.$to.removeClass("error-txt")}return n}})},518:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;n(67);n(71);var i=n(519);var s=Hogan.compile(i);var o=200;var u=100;var a='<div class="gradient-bg js-bg"></div>';var f='<div class="ui-map-loading js-loading"></div>';var l=/MSIE 6\.0/.test(navigator.userAgent),c=/MSIE 7\.0/.test(navigator.userAgent),h=/MSIE 8\.0/.test(navigator.userAgent);QClass.define("hotel.map.view.walkRouteView",{initialize:function(e){e=e||{};this.$container=e.$container;this.$content=this.$container.find(".js-content");this.$bg=this.$container.find(".js-bg");this.bindEvent();this.isShowed=false},empty:function(){this.$content.empty();this.$content.html("");this.scroller=null;this.isRendered=false;this.lastClick=0;this.$loading=null;this.showLoading()},isVisible:function(){return this.isShowed},showSuggest:function(){this.$container.find(".js-suggestbus").removeClass("hide")},hideSuggest:function(){this.$container.find(".js-suggestbus").addClass("hide")},render:function(e){var t=this;this.$content.html(s.render(e));this.scroller=new $jsex.ScrollBar({container:this.$content.get(0),zoneClass:"e_scroll_outer",showClass:"scroll-show",unselect:true});this.scroller.scrollTo(0);setTimeout(function(){t.scroller&&t.scroller.refresh()},300);this.isRendered=true;$(this.scroller).bind("scrollerBarMove scrollerBarClick",function(){t.shadeFadeInOut()});$(this.scroller).one("scrollBarHide",function(){t.$bg.hide()}).one("scrollBarShow",function(){t.$bg.show()})},show:function(){this.$container.show();this.scroller&&this.scroller.refresh();this.isShowed=true},hide:function(){this.$container.hide();this.isShowed=false},showLoading:function(){if(!this.$loading){this.$loading=$(f)}this.$content.html(this.$loading);this.$loading.show()},hideLoading:function(){this.$loading&&this.$loading.hide()},getLastClick:function(){return this.lastClick||0},bindEvent:function(){var e=this;this.$container.delegate(".js-routebig","click",function(){var t=$(this).data("index");$(e).trigger("lightLine",t)});this.$container.delegate(".js-print","click",function(){$(e).trigger("printRoute",$(this).data("index")||e.lastClick)});this.$container.delegate(".js-item-line","mouseenter",function(){$(this).addClass("txt-hover")}).delegate(".js-item-line","mouseleave",function(){$(this).removeClass("txt-hover")})},isRenderable:function(){return this.isRendered},shadeFadeInOut:function(){if(!this.scroller||!this.scroller.hasScrollBar()){return}var e=this.scroller.percent();if(l||c||h){if(e===1){$(this.$bg).hide()}else{$(this.$bg).show()}}else{if(e===1){$(this.$bg).fadeOut(o)}else{$(this.$bg).fadeIn(o)}}}})},519:function(e,t){e.exports='<div class="wrap-item">\n    {{#list}}\n    {{#showTip}}\n    <div class="item-outter">\n        <div class="item item-tips">\n            <div class="content">起点与终点距离较近，建议您步行前往</div>\n        </div>\n    </div>\n    {{/showTip}}\n    {{#isCar}}\n    <div class="item-outter hide js-suggestbus">\n        <div class="item item-tips">\n            <div class="content">未发现公交路线，为您提供驾车方案</div>\n        </div>\n    </div>\n    {{/isCar}}\n    <div class="item-outter">\n        <div class="item last {{showClass}}">\n            <div class="distance">\n                <div class="column distance-txt"><em>约{{distance}}</em>{{categoryText}}{{time}}</div>\n                <div class="column"><a href="#" onclick="return false;" class="icon icon-print png24 js-print" data-index="{{index}}"></a></div>\n            </div>\n            <div class="station">\n                <div class="station-all">\n                    <div class="station-item  station-item-start">\n                        <div class="station-item-inner clr_after">\n                            <div class="column icon-txt"><a class="icon {{fromIconClass}} png24" href="#" onclick="return false;"></a></div>\n                            <div class="column txt" title="{{fromTitle}}">{{fromName}}</div>\n                        </div>\n                    </div>\n                    <div class="station-item active">\n                        {{#routes}}\n                        {{#firstClass}}\n                        <div class="station-item-inner clr_after">\n                            <div class="column icon-txt">\n                                <a class="icon {{iconClass}} png24" href="#" onclick="return false;"></a>\n                            </div>\n                            <div class="column txt js-item-line">\n                                <div class="walk-inner js-line-walkinner">\n                            {{/firstClass}}\n                                    <div class="walk-inner-item {{firstClass}} {{lastClass}} js-routebig" data-index="{{index}}"><cite>{{index}}.</cite>{{&description}}</div>\n                            {{#lastClass}}\n                                </div>\n                            </div>\n                        </div>\n                        {{/lastClass}}\n                         {{/routes}}\n                    </div>\n                    <div class="station-item station-item-dest">\n                        <div class="station-item-inner clr_after">\n                            <div class="column icon-txt"><a class="icon {{toIconClass}} png24" href="#" onclick="return false;"></a></div>\n                            <div class="column txt" title="{{toTitle}}">{{toName}}</div>\n                        </div>\n                    </div>\n                </ul>\n            </div>\n        </div>\n    </div>\n    {{/list}}\n    {{^list}}\n    <div class="noline js-walknoline">\n        <div class="noresult">\n            <span class="content">\n                抱歉，没有查询到相关路线，请更换地点重新查询\n            </span>\n        </div>\n    </div>\n    {{/list}}\n</div>\n'},520:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;n(67);n(71);var i=n(521);var s=n(522);var o=Hogan.compile(i);var u=Hogan.compile(s);var a='<div class="gradient-bg js-bg"></div>';var f='<div class="ui-map-loading js-loading"></div>';var l=200;var c=/MSIE 6\.0/.test(navigator.userAgent),h=/MSIE 7\.0/.test(navigator.userAgent),p=/MSIE 8\.0/.test(navigator.userAgent);QClass.define("hotel.map.view.busRouteView",{initialize:function(e){e=e||{};this.$container=e.$container;this.$content=this.$container.find(".js-content");this.$bg=this.$container.find(".js-bg");this.bindEvent();this.isShowed=false;this.needShow=false},empty:function(){this.$content.empty();this.$content.html("");this.scroller=null;this.isRendered=false;this.lastClick=0;this.walk$container=[];this.$loading=null;this.needShow=false;this.showLoading()},isVisible:function(){return this.isShowed},show:function(){this.$container.show();this.scroller&&this.scroller.refresh();this.isShowed=true},hide:function(){this.$container.hide();this.isShowed=false},showLoading:function(){if(!this.$loading){this.$loading=$(f)}this.$content.html(this.$loading);this.$loading.show()},hideLoading:function(){this.$loading&&this.$loading.hide()},setNeedShow:function(e){this.needShow=e},getNeedShow:function(){return this.needShow},render:function(e){var t=this;this.$content.html(o.render(e));this.scroller=new $jsex.ScrollBar({container:this.$content.get(0),zoneClass:"e_scroll_outer",showClass:"scroll-show",unselect:true});this.scroller.scrollTo(0);setTimeout(function(){t.scroller&&t.scroller.refresh()},300);this.isRendered=true;$(this.scroller).bind("scrollerBarMove scrollerBarClick",function(){t.shadeFadeInOut()});$(this.scroller).one("scrollBarHide",function(){t.$bg.hide()}).one("scrollBarShow",function(){t.$bg.show()})},renderWalk:function(e){this.walk$container.append(u.render(e));this.scroller.refresh()},isRenderable:function(){return this.isRendered},getLastClick:function(){return this.lastClick||0},bindEvent:function(){var e=this;this.$container.delegate(".js-pathroute","click",function(t){var n=$(this);var r=n.data("index");var i=t.target||t.srcElement;var s=0;var o=$(e.$container.find(".js-pathroute")[0]).offset().top;if(!$(i).hasClass("js-open")&&!$(i).parents().hasClass("js-open")){return}if(n.hasClass("item-active")){n.removeClass("item-active");e.scroller.refresh();s=n.offset().top;e.scroller.scrollTo(s-o);return}n.addClass("item-active").parent().siblings().find(".js-pathroute").removeClass("item-active");e.scroller.refresh();s=n.offset().top;e.scroller.scrollTo(s-o);e.lastClick=r;$(e).trigger("drawMapRoute",r)}).delegate(".js-pathroute","mouseenter",function(){var e=$(this);if(e.hasClass("item-active")){return}e.addClass("item-hover")}).delegate(".js-pathroute","mouseleave",function(){var e=$(this);e.removeClass("item-hover")}).delegate(".js-item-line","mouseenter",function(){$(this).addClass("txt-hover")}).delegate(".js-item-line","mouseleave",function(){$(this).removeClass("txt-hover")});this.$container.delegate(".js-line","click",function(){var t=$(this).data("index");$(e).trigger("lightLine",t);return false});this.$container.delegate(".js-line-walk","click",function(){var t=$(this);var n=t.data("index");e.walk$container=t.find(".js-item-line");if(t.hasClass("active")){t.removeClass("active")}else{t.addClass("active")}if(!t.data("hasRender")){$(e).trigger("walkRouteRender",n);t.data("hasRender",true)}}).delegate(".js-print","click",function(){$(e).trigger("printRoute",$(this).data("index")||e.lastClick);return false}).delegate(".js-line-walkinner","click",function(){return false})},shadeFadeInOut:function(){if(!this.scroller||!this.scroller.hasScrollBar()){return}var e=this.scroller.percent();if(c||h||p){if(e===1){$(this.$bg).hide()}else{$(this.$bg).show()}}else{if(e===1){$(this.$bg).fadeOut(l)}else{$(this.$bg).fadeIn(l)}}}})},521:function(e,t){e.exports='<div class="wrap-item">\n    {{#list}}\n    <div class="item-outter">\n    <div class="item js-pathroute {{showClass}}" data-index="{{index}}">\n        <div class="line js-open">{{&line}}</div>\n        <div class="distance clr_after js-open">\n            <div class="column distance-txt"><em>{{distance}}</em>{{time}}</div>\n            <div class="column"><a href="#" onclick="return false;" class="icon icon-print png24 js-print" data-index="{{index}}"></a></div>\n        </div>\n        <div class="station">\n            <div class="station-all">\n                <div class="station-item station-item-start"><!---起始点加上 “station-item-start”-->\n                    <div class="station-item-inner clr_after">\n                        <div class="column icon-txt">\n                            <a class="icon icon-start-round png24" href="#" onclick="return false;"></a>\n                        </div>\n                        <div class="column txt" title="{{fromTitle}}">{{fromName}}</div>\n                    </div>\n                </div>\n                {{#routes}}\n                <div class="station-item js-line {{#iswalking}}station-walk js-line-walk{{/iswalking}}" data-index="{{index}}">\n                    <div class="station-item-inner clr_after">\n                        <div class="column icon-txt">\n                            <a class="icon {{iconClass}} png24" href="#" onclick="return false;"></a>\n                        </div>\n                        {{#iswalking}}\n                        <div class="column txt js-item-line">\n                            <div class="walk-inner-title">\n                                步行至<em>{{endposition}}</em>\n                            </div>\n                        </div>\n                        {{/iswalking}}\n                        {{^iswalking}}\n                        <div class="column txt js-item-line">乘坐<em>{{number}}</em>，经过<em>{{stationnum}}</em>站，在<em>{{endposition}}</em>下车</div>\n                        {{/iswalking}}\n                    </div>\n                </div>\n                {{/routes}}\n                <div class="station-item station-item-dest"><!---终点加上 “station-item-dest”-->\n                    <div class="station-item-inner clr_after">\n                        <div class="column icon-txt">\n                            <a class="icon icon-destination-round png24" href="#" onclick="return false;"></a>\n                        </div>\n                        <div class="column txt" title="{{toTitle}}">{{toName}}</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    </div>\n    {{/list}}\n</div>'},522:function(e,t){e.exports='{{#list}}\n<div class="walk-inner js-line-walkinner">\n    {{#items}}\n    <div class="walk-inner-item {{firstClass}} {{lastClass}}"><cite>{{index}}.</cite>{{&description}}</div>\n    {{/items}}\n</div>\n{{/list}}'},523:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;n(67);n(71);var i=n(524);var s=Hogan.compile(i);var o=200;var u=100;var a='<div class="gradient-bg js-bg"></div>';var f='<div class="ui-map-loading js-loading"></div>';var l=/MSIE 6\.0/.test(navigator.userAgent),c=/MSIE 7\.0/.test(navigator.userAgent),h=/MSIE 8\.0/.test(navigator.userAgent);QClass.define("hotel.map.view.chooseView",{initialize:function(e){e=e||{};this.$container=e.$container;this.$bg=this.$container.find(".js-bg");this.$contentOuter=this.$container.find(".js-chooseContent");this.$content=this.$container.find(".js-content");this.scroller=null;this.isShow=false;this.bindEvent()},empty:function(){this.$content.empty();this.$content.html("");this.$loading=null;this.scroller=null;this.showLoading()},showLoading:function(){if(!this.$loading){this.$loading=$(f)}this.$content.append(this.$loading);this.$loading.show()},hideLoading:function(){this.$loading&&this.$loading.hide()},show:function(){this.$container.addClass("ui-choose-place-show");this.isShow=true},hide:function(){this.$container.removeClass("ui-choose-place-show");this.isShow=false},toggle:function(){if(this.isShow){this.hide()}else{this.show()}},render:function(e){var t=this;if(e.isShow){this.show();$(t).trigger("deployClick")}else{this.hide()}this.$content.html(s.render(e));this.scroller=new $jsex.ScrollBar({container:this.$content.get(0),zoneClass:"e_scroll_outer",showClass:"scroll-show",unselect:true});this.scroller.scrollTo(0);setTimeout(function(){t.scroller&&t.scroller.refresh()},300);$(this.scroller).bind("scrollerBarMove scrollerBarClick",function(){t.shadeFadeInOut()});$(this.scroller).one("scrollBarHide",function(){t.$bg.hide()}).one("scrollBarShow",function(){t.$bg.show()});if(e.isShow){this.show()}},bindEvent:function(){var e=this,t;this.$container.delegate(".js-chooseBtn","click",function(){if(!e.isShow){$(e).trigger("deployClick")}e.toggle();e.scroller.refresh()}).delegate(".js-item","mouseenter",function(){var n=$(this);var r=n.find(".js-look");var i=parseInt(n.data("index"),10);t=setTimeout(function(){if(c){r.css({right:"0px"})}else{r.animate({right:"0px"},o)}},u);$(e).trigger("mouseEnterPoint",i-1)}).delegate(".js-item","mouseleave",function(){var n=$(this);var r=n.find(".js-look");var i=parseInt(n.data("index"),10);if(t){clearTimeout(t)}if(c){r.css({right:"-100px"})}else{r.animate({right:"-100px"},o)}$(e).trigger("mouseLeavePoint",i-1)}).delegate(".js-look","click",function(){var t=$(this).parent().parent();var n=t.data("gpoint");var r=t.data("bpoint");var i=t.data("title");var s=parseInt(t.data("index"),10)-1;$(e).trigger("pointClick",[s,i,{baidu:r&&r.split(",")||null,google:n&&n.split(",")||null}])})},shadeFadeInOut:function(){if(!this.scroller||!this.scroller.hasScrollBar()){return}var e=this.scroller.percent();if(l||c||h){if(e===1){$(this.$bg).hide()}else{$(this.$bg).show()}}else{if(e===1){$(this.$bg).fadeOut(o)}else{$(this.$bg).fadeIn(o)}}}})},524:function(e,t){e.exports='<div class="wrap-outer">\n{{#list}}\n    <div class="wrap-inner {{firstClass}} {{lastClass}}"><!--margin 用 padding 代替-->\n        <div class="wrap-item clr_after js-item" data-index="{{index}}" data-category="{{category}}" data-bpoint="{{bpoint}}" data-gpoint="{{gpoint}}" data-title="{{title}}">\n            <div class="column"><a class="icon {{iconClass}} png24" href="#" onclick="return false;">{{index}}</a></div>\n            <div class="column txt-choose">\n                <div class="txt" title="{{title}}">{{name}}</div>\n                <div class="choose icon-look js-look">选为{{categoryText}}</div>\n            </div>\n        </div>\n    </div>\n{{/list}}\n{{^list}}\n    <div class="wrap-inner">\n        <div class="noresult">\n            <span class="content">\n                抱歉，在{{city}}没有找到"<span class="search">{{key}}</span>"相关的地点\n            </span>\n        </div>\n    </div>\n{{/list}}\n</div>\n\n'},525:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;QClass.define("hotel.map.view.printRouteView",{initialize:function(e){e=e||{};this.mode=e.mode;this.data=e.data;this.host="//hotel.qunar.com/hbmap/"},setMode:function(e){this.mode=e},setData:function(e){$.extend(this.data,e||{})},go:function(){var e=["print.jsp?"];var t={mode:this.mode};switch(this.mode){case"default":break;case"route":t["from"]=this.serialize(this.data.from);t["to"]=this.serialize(this.data.to);t["type"]=this.data.type;t["planIndex"]=this.data.planIndex;t["seq"]=this.data.seq;break}$.each(t,function(t,n){e.push(t+"="+encodeURIComponent(n)+"&")});window.open(this.host+e.join(""))},serialize:function(e){return[e.name,e.lat,e.lng].join(",")}})},526:function(e,t,n){function u(){var e=location.search.substr(1).match(/mixKey\=\w+/g);if(e&&e.length>0){return e[0].split("=")[1]}return $.trim($("#eyKxim").text())||""}function a(e,t,n){var r={cityurl:window.cityurl,q:e||"",fromDate:window.fromDate,toDate:window.toDate,distance:t||5e3,limit:n||"0,16"};return o(r)}var r=typeof r==="function"&&!r.amd?r:false;n(527);n(508);var i={"酒店名":"L0F4L3C1","星级":"ZO1FcGJH","酒店档次":"YRHLp-jc","google地标信息":"TDoolO-H","baidu地标信息":"pk4QaDyF","图片ID":"VAuXapLv","头图baseurl":"ZYCXZYHIRU"};var s=function(){var e=[];for(var t in i){if(i.hasOwnProperty(t)){e.push(i[t])}}return"attrs="+e.join(",")}();var o=function(e){var t=[s];t.push("showAllCondition=1");t.push("showBrandInfo=1");t.push("showNonPrice=1");t.push("showFullRoom=1");t.push("showPromotion=1");t.push("showTopHotel=1");t.push("showGroupShop=1");t.push("output=json1.1");t.push("v="+Math.random());t.push("requestTime="+(new Date).getTime());t.push("mixKey="+u());t.push("requestor=RT_HSLIST");for(var n in e){if(e.hasOwnProperty(n)){var r=e[n];if(r){t.push(n+"="+encodeURIComponent(r))}}}if(typeof window.newfilterid!="undefined"&&window.newfilterid!=""){window.filterid=window.newfilterid;t.push("filterid="+window.newfilterid)}else if(typeof window.filterid!="undefined"&&window.filterid!=""){t.push("filterid="+window.filterid)}var i="/render/renderAPIList.jsp?"+t.join("&");return i};var f=function(e){var t=[];var n=e&&e.queryInfo&&e.queryInfo.queries;if(n){var r={};for(var i=0,s=n.length;i<s;i++){for(var o in n[i]&&n[i]["qp"]||{}){r[o]=1}}for(var u in r){t.push(u)}t.sort()}return t};QClass.define("hotel.map.store.aroundHotel",{initialize:function(e){var t=this;this.conf=e||{};this.type=this.conf.type;this.srcData={};this.hotelInfos=[];this.pointInfos=[];this.hotelInfosMap={};this.limit=e.limit||15;this.hotelName=e.hotelName;var n=e.hotelName||"";this.loader=new hotel.map.store.infoLoader({maxRequest:1,url:a(n),dataType:"jsonp"});$(this.loader).bind("infoReady",function(e,n){t.srcData=n;t.initData();$(t).trigger("dataReady")});$(this.loader).bind("infoError",function(e,n){$(t).trigger("error")})},load:function(e){e=e||{};this.hotelSeq=e.hotelSeq;this.loader.load(function(e){return!e||!e.hotels||!e.hotels.length})},initData:function(){var e=this;var t,n,r=0;var i=f(this.srcData);$.each(this.srcData.hotels,function(s,o){if(o.id===e.hotelSeq){return}r++;if(r>e.limit){return false}o.attrs=o.attrs||{};t=new hotel.map.model.point({index:r,firstClass:r===1?"first":"",name:o.attrs.hotelName,title:o.attrs.hotelName,category:"arrHotel",bpoint:o.attrs.bpoint,gpoint:o.attrs.gpoint,distance:parseFloat(o.distance||0,10)});n=new hotel.map.model.hotel({index:r,category:"arrHotel",hotelSeq:o.id,hotelName:o.attrs.hotelName,bpoint:o.attrs.bpoint,gpoint:o.attrs.gpoint,scale:o.attrs.scale,imageUri:o.attrs.imageUri,dangci:o.attrs.dangci,price:o.price,hotelStars:o.attrs.hotelStars,stars:o.attrs.hotelStars.stars,qptype:i.join("|"),info:e.srcData.info||{},os:o.os,miniRetailPrice:o.attrs.MiniRetailPrice,isLowPrice:o.isLowPrice,isStatic:o.attrs.isStatic});e.pointInfos.push(t);e.hotelInfos.push(n);e.hotelInfosMap[n.getTitle()]=n});if(e.pointInfos.length){e.pointInfos[e.pointInfos.length-1].setLastClass("last")}},getData:function(){return{data:[{noborderClass:"",items:this.pointInfos||[]}],hotelName:this.hotelName,typeContext:"周围5公里内找到其它酒店",length:this.pointInfos.length}},setHotelName:function(e){this.hotelName=e},getHotelName:function(){return this.hotelName},getHotelInfos:function(){return this.hotelInfos||[]},getPointInfos:function(){return this.pointInfos||[]},getAllPoints:function(){if(!this.pointInfos.length){return{}}if(!this.allPoints){this.allPoints={}}var e=[];var t,n=[];var r=[];$.each(this.pointInfos,function(i,s){t=s.getGpoint();if(t){e.push(new GLatLng(t[0],t[1]));n.push(s.getDistance());r.push({baidu:s.getBpoint(),google:s.getGpoint()})}else{e.push(null);n.push(null);r.push({baidu:null,google:null})}});return this.allPoints={points:e,straight:n,markerPoints:r}},getHotelInfosMap:function(){return this.getHotelInfosMap||{}}})},527:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;QClass.define("hotel.map.store.infoLoader",{initialize:function(e){e=e||{};this.firstTime=true;this.maxRequest=e.maxRequest||10;this.url=e.url;this.dataType=e.dataType||"json";this.dataParam=e.dataParam||{};this.jsonp=this.dataType==="json"?"":e.jsonp||"__jscallback"},load:function(e){var t=this;if(this.url&&typeof e==="function"){var n={type:"GET",url:this.url,data:this.dataParam,dataType:this.dataType};if(this.jsonp){n.jsonp=this.jsonp}$.ajax($.extend(n,{success:function(n){if(t.firstTime){$(t).trigger("firstInfoReady",n)}t.firstTime=false;if(!t.maxRequest){$(t).trigger("infoReady",null)}else{if(e.call(t,n)){t.maxRequest--;t.load(t.url,e)}else{$(t).trigger("infoReady",n)}}},error:function(){$(t).trigger("infoError")}}))}else{$(this).trigger("infoError")}}})},528:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;n(527);n(509);var i=["traffic","subway"],s="//hotel.qunar.com/detail/detailMapData.jsp",o={0:"flight",1:"train",2:"station"},u=10;QClass.define("hotel.map.store.traffic",{initialize:function(e){this.conf=e||{};this.limit=e.limit||15;this.srcData={};this.trafficInfosFormat=[];this.trafficInfos=[];this.type=this.conf.type},load:function(e){var t=this;e=e||{};this.loader=new hotel.map.store.infoLoader({maxRequest:1,url:s,dataParam:{seq:e.hotelSeq,type:i.join(",")},dataType:"json"});$(this.loader).bind("infoReady",function(e,n){t.srcData=n;t.initData();$(t).trigger("dataReady")});$(this.loader).bind("infoError",function(e,n){$(t).trigger("error")});this.loader.load(function(e){return!e||!e.data||!e.data["traffic"]&&!e.data["subway"]||!e.data["traffic"].length&&!e.data["subway"].length})},initData:function(){var e=this,t=[],n=0,r=0,i={};$.each(this.srcData.data["traffic"]||[],function(e,t){if(!i[t.category]){i[t.category]=[]}i[t.category].push(t)});$.each(i,function(i,s){r++;$.each(s,function(e,r){n++;if(n>u){return false}t.push(new hotel.map.model.point({index:n,firstClass:n===1?"first":"",name:r.name,title:r.name,category:o[r.category],bpoint:r.bpoint.join(","),gpoint:r.gpoint.join(","),distance:parseFloat(r.distance||0,10)}))});e.trafficInfosFormat.push({noborderClass:parseInt(i,10)===0||!t.length?"none-border":"",items:t,sortIndex:r});t=[]});e.trafficInfosFormat.sort(function(e,t){return e.sortIndex-t.sortIndex});if(this.srcData.data["subway"]&&this.srcData.data["subway"].length){$.each(this.srcData.data["subway"],function(r,i){n++;if(n>e.limit){return false}t.push(new hotel.map.model.point({index:n,name:i.name,title:i.name,category:"subway",bpoint:i.bpoint.join(","),gpoint:i.gpoint.join(","),distance:parseFloat(i.distance||0,10)}))});e.trafficInfosFormat.push({noborderClass:e.trafficInfosFormat.length===0?"none-border":"",items:t})}$.each(e.trafficInfosFormat,function(t,n){e.trafficInfos=e.trafficInfos.concat(n.items);if(t===e.trafficInfosFormat.length-1){e.trafficInfosFormat[t]["items"][e.trafficInfosFormat[t]["items"].length-1].setLastClass("last")}})},getData:function(){return{data:this.trafficInfosFormat,hotelName:this.hotelName,typeContext:"周围找到交通枢纽",length:this.trafficInfosFormat.length}},setHotelName:function(e){this.hotelName=e},getHotelName:function(){return this.hotelName},getTrafficInfos:function(){return this.trafficInfos||[]},getAllPoints:function(){if(!this.trafficInfosFormat.length){return{}}if(!this.allPoints){this.allPoints={}}var e=[];var t=[];var n,r=[];$.each(this.trafficInfosFormat,function(i,s){$.each(s.items,function(i,s){n=s.getGpoint();if(n){e.push(new GLatLng(n[0],n[1]));r.push(s.getDistance());t.push({baidu:s.getBpoint(),google:s.getGpoint()})}else{e.push(null);r.push(null);t.push({baidu:null,google:null})}})});return this.allPoints={points:e,straight:r,markerPoints:t}}})},529:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;n(509);n(530);n(531);n(532);n(533);n(534);var i=1e3;var s=i;var o={start:15,end:15,walk:1,car:1,bus:5};var u=6378.137;var a={start:"起点",end:"终点"};var f={start:"icon-start-round",end:"icon-destination-round",walk:"icon-walk",bus:"icon-bus",subway:"icon-subway",none:"icon-none"};var l={walk:"item-active",car:"item-active",bus:"item-active"};var c=false;QClass.define("hotel.map.store.search",{initialize:function(e){this.conf=e||{};this.startResult={};this.endResult={};this.busResult={};this.walkResult={};this.carResult={};this.buswalkResult={}},getStartResult:function(){return this.startResult||{}},getEndResult:function(){return this.endResult||{}},getBusResult:function(){return this.busResult||{}},getWalkResult:function(){return this.walkResult||{}},getCarResult:function(){return this.carResult||{}},getBusWalkResult:function(){return this.buswalkResult||{}},updateDistance:function(e,t,n,r){var i=this;if(!e||!n||n.length!=2||!r||!r.length){return}t=t||{};var o=new GDirections(e);var u=t.points||[];var a=new GLatLng(n[0],n[1]);var f;var l=t.straight||[];$.each(r,function(e,t){o.route(u[e],a,function(e,n){if(n!=="OK"){return}f=o.getDistance(e);if(f.text){t.setDistance("约"+f.text);$(i).trigger("distanceUpdate",t)}},{isRenderPolyline:false,isAutoViewport:false,travelMode:l[e]<s?window.G_TRAVEL_MODE_WALKING:""})})},search:function(e,t,n,r){if(!e||!t||!n){return}this.map=e;var s=t.start,o=t.end,u,a,f=0,l=false;if(!s||!s.baidu||!o||!o.baidu){u=n.start;a=n.end;if(!s||!s.baidu){this.localSearch(u,"start",true);l=true}else{this.localSearch(u,"start",false)}if(!l&&(!o||!o.baidu)){this.localSearch(a,"end",true)}else{this.localSearch(a,"end",false)}}else{f=this._getLineDistance(s.baidu[0],s.baidu[1],o.baidu[0],o.baidu[1]);u=new BMap.Point(s.baidu[1],s.baidu[0]);a=new BMap.Point(o.baidu[1],o.baidu[0]);this.searchCarRoute(u,a,n);this.searchWalkRoute(u,a,n);this.searchBusRoute(u,a,n);if(f<i){$(this).trigger("routeTabUpdate",r||"walk");c=true}else{$(this).trigger("routeTabUpdate",r||"bus");c=false}}},searchCarRoute:function(e,t,n){var r=this;var i=new BMap.DrivingRoute(this.map._impl,{onSearchComplete:function(s){var u="car";r.carkResult={list:[]};if(!s||i.getStatus()!=window.BMAP_STATUS_SUCCESS){}else{var a=0,c=0,h,p,d,v,m,g,y=[];for(a;a<o[u];a++){h=s.getPlan(a);if(h){p=h.getRoute(a);m=p.getPath();v=p.getNumSteps();e=m[0];t=m[m.length-1];y.push(new hotel.map.model.route({showClass:l[u],distance:h.getDistance(),time:h.getDuration(),fromIconClass:f["start"],toIconClass:f["end"],fromName:n.start,fromTitle:n.start,toName:n.end,toTitle:n.end,category:u},{limit:20}));for(c;c<v;c++){if(!y[a]["routes"]){y[a]["routes"]=[]}d=p.getStep(c);g=r._findPointsFromPath(m,c===0?m[0]:p.getStep(c-1).getPosition(),c===v-1?m[m.length-1]:p.getStep(c).getPosition());y[a]["routes"].push(new hotel.map.model.routeline({type:"walk",iconClass:f["none"],index:c+1,description:r._replaceChar(d.getDescription()),points:g}))}if(y[a]["routes"].length){y[a]["routes"][0].setFirstClass("first");y[a]["routes"][y[a]["routes"].length-1].setLastClass("last")}}}r.carResult={list:y,showTip:false,categoryText:"驾车",isCar:true}}$(r).trigger("carSearchComplete")}});i.search(e,t)},searchWalkRoute:function(e,t,n){var r=this;var i=new BMap.WalkingRoute(this.map._impl,{onSearchComplete:function(e){var t="walk";r.walkResult={list:[]};if(!e||i.getStatus()!=window.BMAP_STATUS_SUCCESS){}else{var s=0,u=0,a,h,p,d,v,m,g,y,b,w=[];for(s;s<o[t];s++){a=e.getPlan(s);if(a){h=a.getRoute(s);m=h.getPath();g=m[0];y=m[m.length-1];v=h.getNumSteps();w.push(new hotel.map.model.route({showClass:l[t],distance:a.getDistance(),time:a.getDuration(),fromIconClass:f["start"],toIconClass:f["end"],fromName:n.start,fromTitle:n.start,toName:n.end,toTitle:n.end,category:t},{limit:20}));for(u;u<v;u++){if(!w[s]["routes"]){w[s]["routes"]=[]}p=h.getStep(u);b=r._findPointsFromPath(m,u===0?m[0]:h.getStep(u-1).getPosition(),u===v-1?m[m.length-1]:h.getStep(u).getPosition());w[s]["routes"].push(new hotel.map.model.routeline({type:"walk",iconClass:f["walk"],index:u+1,description:r._replaceChar(p.getDescription()),points:b}))}if(w[s]["routes"].length){w[s]["routes"][0].setFirstClass("first");w[s]["routes"][w[s]["routes"].length-1].setLastClass("last")}}}r.walkResult={list:w,showTip:c,categoryText:"步行",isCar:false}}$(r).trigger("walkSearchComplete")}});i.search(e,t)},searchBusRoute:function(e,t,n){var r=this;var i=new BMap.TransitRoute(this.map._impl,{onSearchComplete:function(e){var t="bus";r.busResult={list:[]};if(!e||i.getStatus()!=window.BMAP_STATUS_SUCCESS){}else{var s=0,u=0,a,c,h,p={},d={},v={},m=[];for(s;s<o[t]&&s<e.getNumPlans();s++){a=e.getPlan(s);c=r.getPlan(a);m.push(new hotel.map.model.route({index:s,showClass:s===0?l[t]:"",distance:a.getDistance(),time:a.getDuration(),fromIconClass:f["start"],toIconClass:f["end"],fromName:n.start,fromTitle:n.start,toName:n.end,toTitle:n.end,category:t,line:c},{limit:20}));m[s].routes=[];h=r.getRoutes(a);for(u=0;u<h.length;u++){p={};p.index=u;p.startpoint=h[u].data.getPath()[0];p.endpoint=h[u].data.getPath()[h[u].data.getPath().length-1];if(h[u].type=="walk"){p.type="walk";p.iswalking=true;if(h[u].nextLine){p.endposition=h[u].nextLine.getGetOnStop().title}else{p.endposition=n.end}}else{p.iswalking=false;p.endposition=h[u].data.getGetOffStop().title;p.stationnum=h[u].data.getNumViaStops();p.number=h[u].data.title;if(h[u].data.type==BMAP_LINE_TYPE_BUS){p.type="bus"}else{p.type="subway"}}p.iconClass=f[p.type];m[s].routes.push(new hotel.map.model.bus(p))}m[s].maproutes=[];m[s].mapover=[];h=r.getRoutes(a,true);for(u=0;u<h.length;u++){d={};v={};d.type=h[u].type;d.points=h[u].data.getPath();if(h[u].data.type==BMAP_LINE_TYPE_BUS){v.index=u;v.title=h[u].data.title;v.category="lineBus";v.point=h[u].data.getPath()[0];v.bpoint=v.point.lat+","+v.point.lng;v.endpoint=h[u].data.getPath()[h[u].data.getPath().length-1];v.lineinfo=h[u].data.title?h[u].data.title.replace(/\(.*\)/g,""):"";v.classname="js-route"+h[u].data.uid;m[s].mapover.push(new hotel.map.model.mapoverlay(v))}else if(h[u].data.type==BMAP_LINE_TYPE_SUBWAY){v.index=u;v.title=h[u].data.title;v.category="lineSubway";v.point=h[u].data.getPath()[0];v.bpoint=v.point.lat+","+v.point.lng;v.endpoint=h[u].data.getPath()[h[u].data.getPath().length-1];v.lineinfo=h[u].data.title?h[u].data.title.replace(/\(.*\)/g,""):"";v.classname="js-route"+h[u].data.uid;m[s].mapover.push(new hotel.map.model.mapoverlay(v))}m[s].maproutes.push(new hotel.map.model.routeline(d))}}if(m.length){m[m.length-1].setLastClass("last")}r.busResult={list:m,categoryText:"公交"}}$(r).trigger("busSearchComplete")}});i.search(e,t)},searchBusWalkRoute:function(e,t,n){var r=this;var i=new BMap.WalkingRoute(this.map._impl,{onSearchComplete:function(e){var t="walk";r.buswalkResult={list:[]};if(!e||i.getStatus()!=window.BMAP_STATUS_SUCCESS){}else{var n=0,s=0,u,a,f,l,c=[];for(n;n<o[t];n++){u=e.getPlan(n);if(u){a=u.getRoute(n);l=a.getNumSteps();c[n]={};for(s;s<l;s++){if(!c[n]["items"]){c[n]["items"]=[]}f=a.getStep(s);if(f){c[n]["items"].push(new hotel.map.model.walk({index:s+1,description:r._replaceChar(f.getDescription())}))}}if(c[n]["items"].length){c[n]["items"][c[n]["items"].length-1].setLastClass("last")}}}r.buswalkResult={list:c,categoryText:"步行"}}$(r).trigger("buswalkSearchComplete")}});i.search(e,t)},searchRouteTime:function(e,t,n){var r=new BMap.TransitRoute(this.map._impl,{onSearchComplete:function(e){var t=e.getPlan(0);var r=t?t.getDuration():"5分钟";$("."+n).text("约"+r)}});r.search(e,t)},_getLineDistance:function(e,t,n,r){var i=e*Math.PI/180;var s=n*Math.PI/180;var o=i-s;var a=t*Math.PI/180-r*Math.PI/180;var f=2*Math.asin(Math.sqrt(Math.pow(Math.sin(o/2),2)+Math.cos(i)*Math.cos(s)*Math.pow(Math.sin(a/2),2)));f=f*u;f=Math.round(f*1e4)/10;return f},localSearch:function(e,t,n){var r=this;var i={};var s=new BMap.LocalSearch(this.map._impl,{pageCapacity:o[t],onSearchComplete:function(u){i={isShow:n,category:t,categoryText:a[t],iconClass:f[t],city:window.cityName,key:e,list:[]};if(!u||s.getStatus()!=window.BMAP_STATUS_SUCCESS||!u.getCurrentNumPois()){}else{var l=0,c,h=[],p=0;for(l;l<o[t];l++){c=u.getPoi(l);if(c){p++;h.push(new hotel.map.model.point({index:p,firstClass:p===1?"first":"",name:c.title+"，"+c.address,title:c.title+"，"+c.address,category:t,categoryText:a[t],bpoint:[c.point.lat,c.point.lng].join(",")},{limit:30}))}}if(h.length){h[h.length-1].setLastClass("last")}i.list=h}if(t==="start"){r.startResult=i}else{r.endResult=i}$(r).trigger("indistinctSearchComplete",t)}});s.search(e)},getPlan:function(e){var t=[];var n="";var r=e.getNumLines();for(var i=0;i<r;i++){var n=e.getLine(i);var s=n.title.replace(/\(.*\)/,"");if(n.type==BMAP_LINE_TYPE_BUS){var s=s.replace(/\(.*\)/g,"");if(/^\d+$/.test(s)){s=s+"路"}t.push(s)}else{t.push(s)}}n=t.join("<em>&gt</em>");return n},getRoutes:function(e,t){var n=[];var r=e.getNumLines();var i;for(var s=0;s<r;s++){i=e.getRoute(s);if(i&&(t||i.getDistance(false)>0)){n.push({type:"walk",data:i,nextLine:e.getLine(s)})}i=e.getLine(s);if(i&&(t||i.getDistance(false)>0)){n.push({type:"bus",data:i})}}i=e.getRoute(s);if(i&&(t||i.getDistance(false)>0)){n.push({type:"walk",data:i,nextLine:null})}return n},getMapOverData:function(e){var t=e.data.title?e.data.title.replace(/\(.*\)/g,""):"";var n="js-route"+e.data.uid;var r=e.data.getPath()?e.data.getPath():[];var i={};i.startPoint=r[0];i.endPoint=r[r.length-1];i.line="乘坐"+t;i.classname=n;if(e.data.type==BMAP_LINE_TYPE_BUS){i.category="bus"}else if(e.data.type==BMAP_LINE_TYPE_SUBWAY){i.category="subway"}return i},_findPointsFromPath:function(e,t,n){var r=[];var i=e;var s=false,o=false;for(var u=0;u<i.length;u++){var a=i[u];if(a.equals(t)){r.push(a);s=true}else if(a.equals(n)){if(!s){r.push(t)}r.push(a);o=true;break}else{if(s){r.push(a)}}}if(!o){r=[];r.push(t);r.push(n)}return r},_replaceChar:function(e){e=e||"";e=e.replace(/<b>undefined<\/b>|undefined|<b><\/b>/g,"");e=e.replace(/，$/,"");return e}})},530:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;QClass.define("hotel.map.model.route",{initialize:function(e,t){e=e||{};t=t||{};this._limit=t.limit||30;this.initData(e)},initData:function(e){this.showClass=e.showClass;this.distance=e.distance;this.time=e.time;this.fromIconClass=e.fromIconClass;this.toIconClass=e.toIconClass;this.fromTitle=escapeHtml(e.fromName);this.fromName=window.subByte(escapeHtml(e.fromTitle||""),this._limit,"...");this.toTitle=escapeHtml(e.toName);this.toName=window.subByte(escapeHtml(e.toTitle||""),this._limit,"...");this.category=e.category;this.index=e.index;this.line=e.line;this.lastClass=e.lastClass},setLastClass:function(e){this.lastClass=e},getShowClass:function(){return this.showClass},getTime:function(){return this.time||""},getFromTitle:function(){return this.fromTitle||""},getFromName:function(){return this.fromName||""},getToTitle:function(){return this.toTitle||""},getToName:function(){return this.toName||""},getCategory:function(){return this.category||""},getFromIconClass:function(){return this.fromIconClass},getToIconClass:function(){return this.toIconClass},getDistance:function(){return this.distance||0},setDistance:function(e){this.distance=e},getIndex:function(){return this.index},getLine:function(){return this.line}})},531:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;QClass.define("hotel.map.model.walk",{initialize:function(e,t){e=e||{};t=t||{};this._limit=t.limit||16;this.initData(e)},initData:function(e){this.index=e.index;this.description=e.description;this.firstClass=e.firstClass;this.lastClass=e.lastClass},getIndex:function(){return this.index},getDescription:function(){return this.description||""},getLastClass:function(){return this.lastClass},setLastClass:function(e){this.lastClass=e},getFirstClass:function(){return this.firstClass},setFirstClass:function(e){this.firstClass=e}})},532:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;QClass.define("hotel.map.model.bus",{initialize:function(e,t){e=e||{};t=t||{};this._limit=t.limit||16;this.initData(e)},initData:function(e){this.index=e.index;this.type=e.type;this.iswalking=e.iswalking;this.endposition=e.endposition;this.number=e.number;this.stationnum=e.stationnum;this.iconClass=e.iconClass;this.showClass=e.showClass;this.startpoint=e.startpoint;this.endpoint=e.endpoint},getIndex:function(){return this.index},getType:function(){return this.type},getIsWorking:function(){return this.iswalking},getEndPosition:function(){return this.endposition},getNumber:function(){return this.number},getStationNum:function(){return this.stationnum},getIconClass:function(){return this.iconClass},getShowClass:function(){return this.showClass},getStartPoint:function(){return this.startpoint},getEndPoint:function(){return this.endpoint}})},533:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;QClass.define("hotel.map.model.routeline",{initialize:function(e,t){e=e||{};t=t||{};this.initData(e)},initData:function(e){this.index=e.index;this.description=e.description;this.type=e.type;this.points=e.points;this.firstClass=e.firstClass;this.lastClass=e.lastClass;this.iconClass=e.iconClass},getType:function(){return this.type},getPoints:function(){return this.points},setPoints:function(e){this.points=e},getLastClass:function(){return this.lastClass},setLastClass:function(e){this.lastClass=e},getFirstClass:function(){return this.firstClass},setFirstClass:function(e){this.firstClass=e},getIconClass:function(){return this.iconClass}})},534:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;QClass.define("hotel.map.model.mapoverlay",{initialize:function(e,t){e=e||{};t=t||{};this.initData(e)},initData:function(e){this.index=e.index;this.point=e.point;this.endpoint=e.endpoint;this.category=e.category;this.lineinfo=e.lineinfo;this.classname=e.classname;this.bpoint=e.bpoint||"";this.bpoint=this.bpoint.split(",");if(this.bpoint.length!=2){this.bpoint=null}this.gpoint=e.gpoint||"";this.gpoint=this.gpoint.split(",");this.title=e.title;if(this.gpoint.length!=2){this.gpoint=null}},getIndex:function(){return this.index||0},getPoint:function(){return this.point},getTitle:function(){return this.title},getEndPoint:function(){return this.endpoint},getCategory:function(){return this.category},getLineInfo:function(){return this.lineinfo},getClassName:function(){return this.classname},getBpoint:function(){return this.bpoint},getGpoint:function(){return this.gpoint}})},537:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;(function(){function h(){clearInterval(t);t=null;if(f)f();f=null}function p(){clearInterval(t);t=null}function d(){return Math.max(document.documentElement.scrollTop,document.body.scrollTop)}function v(){var t=d(),s=(new Date).getTime();if(Math.abs(t-i)>e||Math.abs(i-n)<2){h();return}if(s>u){i=n}else{i=l(s-o,u-o,n-r)+r}scrollTo($(document).scrollLeft(),i);if(i===n)h()}var e=5;var t,n,r,i,s,o,u,a,f,l;var c={time:1e3,tick:11,easing:function(e,t,n){return n/t*e}};$.scrollTo=function(e,h,m,g){p();m=$.extend({},c,m||{});n=h;r=d();i=r;s=m.time;a=m.tick;o=(new Date).getTime();u=o+s;l=m.easing;f=g;t=setInterval(v,a);v()}})(jQuery)},539:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;(function(){if(window.console){var e="margin:30px; padding:27px 46px;line-height:68px;background:url('//source.qunarzz.com/site/images/hotel/luotuo.gif') no-repeat;";var t="去哪儿网前端诚邀您的加入!\n加入我们，成为全球最大的中文旅行网站的前端开发者 ^_^\n加入我们，百万年薪，赢娶白富美，走上人生巅峰不再是梦，\n赶快发送简历至zhi.zhong@qunar.com或xin.lin@qunar.com";var n="请在邮件中注明：来自console";var r="line-height:30px; font-size:1.5em; color:red;";var i="line-height:30px; font-size:1.5em; text-shadow:0 1px 3px #f0f0f0;";console.log("%c",e);console.log("%c"+t,i);console.log("%c"+n,r)}})()},713:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;n(714)},714:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;(function(e){function u(){return document.compatMode&&document.compatMode.toLowerCase()=="css1compat"?document.documentElement:document.body}function a(){var e=u();return{width:Math.max(e.clientWidth,e.scrollWidth),height:Math.max(e.clientHeight,e.scrollHeight)}}function f(e,t,n){var r=u();var i=Math.max(document.documentElement.scrollTop,document.body.scrollTop);var t=(r.clientHeight-e.outerHeight())*t+i;var n=Math.floor(e.outerWidth()*n);return{marginLeft:-n+"px",top:t+"px"}}function l(e,t){return e}function c(e){return"qbox"+e}function h(t){if(typeof t=="string")return o[t];else if(t&&t.isqbox){return t}else{t=jQuery.event.fix(t||window.event);var n=e(t.target).parents(".qbox_content");if(n.size()>0){return o[c(n.data("ind"))]}}}var t={top:.382,left:.5,fixable:false,modeless:false};var n={display:"none",position:"absolute",zIndex:1e4,left:"50%"};var r={display:"none",position:"absolute",zIndex:1e4,top:"0px",left:"0px",opacity:.2,frameborder:0,backgroundColor:"#000"};var i=0;var s=1e4;var o={};var p=function(t,i,u){this.key=c(u);this.args=i;this.alive=true;this.binded=false;this.overlay=e("<div></div>").addClass("qbox_overlay").css(e.extend({},r,{zIndex:s+u})).appendTo(e(document.body));var a=this.content=e("<div />").addClass("qbox_content").css(e.extend({},n,{zIndex:s+u})).appendTo(e(document.body));a.data("ind",u);if(typeof t=="string")a.html(l(t));else if(t&&t.nodeType==1)a.append(e(t).show());o[this.key]=this};p.prototype={isqbox:1};e.each(["close","show","hide","trigger","bind","unbind","data"],function(t,n){p.prototype[n]=function(){return e.qbox[n].apply(window,[this].concat(Array.prototype.slice.call(arguments||[])))}});e.qbox=function(n,r){var s=++i;r=e.extend(t,r||{});return new p(n||"",r,s)};e.qbox.bind=function(t,n,r){var i=h(t);if(!i||!i.alive)return;e(i.content).bind(n+".qbox."+i.key,r)};e.qbox.unbind=function(t,n,r){var i=h(t);if(!i||!i.alive)return;if(r)e(i.content).unbind((n||"")+".qbox."+i.key,r);else e(i.content).unbind((n||"")+".qbox."+i.key)};e.qbox.trigger=function(t,n,r){var i=h(t);if(!i||!i.alive)return;e(i.content).triggerHandler(n+".qbox."+i.key,r)};e.qbox.data=function(e,t,n){var r=h(e);if(!r||!r.alive)return;return r.content.data(t,n)};e.qbox.show=function(t){var n=h(t);if(!n||!n.alive)return;if(!n.args.modeless)n.overlay.show();n.content.show();if(!n.binded){n.binded=true;e(window).bind("resize.qbox",function(e){n.overlay.css(a());if(n.args.fixable){n.content.css(f(n.content,n.args.top,n.args.left))}});e(window).bind("scroll.qbox",function(e){if(n.args.fixable){n.content.css(f(n.content,n.args.top,n.args.left))}})}var r=n.args.fixable;n.args.fixable=true;e(window).triggerHandler("resize.qbox");n.args.fixable=r;e(n.content).triggerHandler("show.qbox."+n.key)};e.qbox.hide=function(t){var n=h(t);if(!n||!n.alive)return;e(window).unbind("scroll.qbox");e(window).unbind("resize.qbox");n.binded=false;n.overlay.hide();n.content.hide();e(n.content).triggerHandler("hide.qbox."+n.key)};e.qbox.close=function(t){var n=h(t);if(!n||!n.alive)return;e.qbox.hide(n);n.alive=n.binded=false;n.overlay.remove();n.content.remove();delete o[n.key];e(n.content).triggerHandler("close.qbox."+n.key)}})(jQuery)},726:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;var r="";var i="";var s=[];var o=function(e){if(!e){return}$(e).bind("sugEnter",function(e,t){var n=t.data,i=t.city,s="";$(n).each(function(e,t){s=s+t.p+(e+1==n.length?"":"|")});r="enterCity="+encodeURIComponent(i)+"&suggestCity="+encodeURIComponent(s)}).bind("sugClick",function(e,t){var n="&cityIndex="+(t+1);u(r,n)});$(e).bind("sugQueryEnter",function(e,t){s=t.data;var n=t.q,r="";$(s).each(function(e,t){r=r+t.ahead+(e+1==s.length?"":"|")});i="enterQuery="+encodeURIComponent(n)+"&suggestQuery="+encodeURIComponent(r)}).bind("sugQueryClick",function(e,t){var n=1,r;$(s).each(function(e,i){if(t==i.ahead){r="&queryIndex="+(e+n);return}});u(i,r)})};var u=function(e,t){var n="http://m.ued.qunar.com/log/param?";var r=document.createElement("img");var i=(new Date).getTime().toString();r.onload=function(){r.onload=null;r=null};r.src=n+e+t+"&timestamp="+i;e=""};t.init=o},743:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;(function(){function r(e){if(e.pageX!=null)return{pageX:e.pageX,pageY:e.pageY};if(e.clientX!=null){var t=document.documentElement,n=document.body;return{pageX:e.clientX+(t&&t.scrollLeft||n&&n.scrollLeft||0)-(t&&t.clientLeft||n&&n.clientLeft||0),pageY:e.clientY+(t&&t.scrollTop||n&&n.scrollTop||0)-(t&&t.clientTop||n&&n.clientTop||0)}}return{pageX:0,pageY:0}}function i(e,t){t=t.charAt(0).toUpperCase()+t.substr(1);return Math.max(e["scroll"+t],e["offset"+t])}function s(e){var t,n,r,i,s=false;var o=e._opt["axis"];var u=$(e._opt["container"]);u.bind("touchstart",function(o){o=o.originalEvent;if(o.touches.length>1)return;var u=o.touches[0];t=e.getAOffset();n=u.pageX;r=u.pageY;i=false;s=true});u.bind("touchmove",function(i){i=i.originalEvent;if(!s){return}var u=i.touches[0];if(o==="x")e.ma(t+n-u.pageX);else e.ma(t+r-u.pageY);var a=e.percent();if(a!=1&&a!=0){i.preventDefault&&i.preventDefault()||(i.returnValue=false)}});u.bind("touchend",function(e){s=false});u.bind("click",function(e){if(i){i=false;e.preventDefault()}})}function o(e){e.preventDefault();return false}function u(e){e._opt["container"].bind(n,c(e,"_mousewheel",e))}function a(e,t){var n=e._opt,r=e._fix;var i=t;var s=n["container"]=$("<div></div>");var u=n["content"]=$("<div></div>");var a=n["scrollzone"]=$("<div></div>");var f=n["scrollclip"]=$("<div></div>");u.append(i.children());u.append($("<div></div>").css({clear:"both"}));i.append(s);s.append(a);s.append(f);f.append(u);s.css({height:"100%",width:"100%"});a.get(0).className="scroll-zone"+(n.zoneClass?" "+n.zoneClass:"");f.get(0).className="scroll-clip"+(n.clipClass?" "+n.clipClass:"");u.get(0).className="scroll-content"+(n.contentClass?" "+n.contentClass:"");a.html(['<a class="top" hidefocus="on" href="#">top</a>','<p class="ctn"><span class="cur" unselectable="on"></span></p>','<a class="down" hidefocus="on" href="#">down</a>'].join(""));var l=n["scrollzone"].find("a");n["bar_lt"]=l.eq(0).bind("click",o);n["bar_gt"]=l.eq(1).bind("click",o);l.eq(0).css(r["marginTop"],n["margins"][0]+"px");l.eq(1).css(r["marginBottom"],n["margins"][1]+"px");var c=n["scrollzone"].find("span");n["bar"]=c.eq(0);n["bar_container"]=n["scrollzone"].find("p:first");s.addClass("scroll-container")}function f(e){e=$.extend({axis:"y",margins:[0,0]},e);e.container=$(e.container);this._opt=e;this._fix=e["axis"]=="x"?{offsetHeight:"offsetWidth",scrollTop:"scrollLeft",height:"width",top:"left",axis:"x",offsetTop:"offsetLeft",marginTop:"marginLeft",marginBottom:"marginRight"}:{offsetHeight:"offsetHeight",scrollTop:"scrollTop",height:"height",top:"top",axis:"y",offsetTop:"offsetTop",marginTop:"marginTop",marginBottom:"marginBottom"};this.initialize()}function l(e,t,n){this.cb=t||function(){};this.repeat=n||100;this.el=e;var r=this;e.bind("click",c(this,"_click",this));e.bind("mousedown",c(this,"_mousedown",this));e.bind("mouseup",c(this,"_mouseup",this));e.bind("mouseover",c(this,"_mouseover",this));e.bind("mouseout",c(this,"_mouseout",this))}function c(e,t,n){return function(){if(e[t]){return e[t].apply(n||this,arguments)}}}var e="1.2.0";var t=navigator.userAgent;var n=/Firefox/i.test(t)?"DOMMouseScroll":"mousewheel";f.prototype.version=e;f.prototype.initialize=function(){var e=this._opt;if(!e["container"].attr("data-scroller")){a(this,e["container"]);e["bar"].bind("mousedown",c(this,"_mousedown",this));$(document).bind("mouseup",c(this,"_mouseup",this));$(document).bind("mousemove",c(this,"_mousemove",this));new l(e["bar_gt"],c(this,"_mfclick",this),50);new l(e["bar_lt"],c(this,"_mbclick",this),50);new l(e["bar_container"],c(this,"_barclick",this),100);u(this);s(this);e["container"].attr("data-scroller",1)}e["container"].css("overflow","hidden");e["scrollclip"].css("overflow","hidden");e["status"]={barlt:e["bar_lt"].get(0)[this._fix["offsetHeight"]]+e["margins"][0],bargt:e["bar_gt"].get(0)[this._fix["offsetHeight"]]+e["margins"][1],top:0};this.refresh()};f.prototype._show=function(){this._opt["scrollzone"].removeClass("hide");this._opt["container"].addClass("scroll-container-show")};f.prototype._hide=function(){this._opt["scrollzone"].addClass("hide");this._opt["container"].removeClass("scroll-container-show")};f.prototype.refresh=function(){this._show();var e=this._opt,t=e["status"],n=this._fix;var r={height:e["container"].get(0).offsetHeight-(e["axis"]==="x"?e["scrollzone"].get(0)["offsetHeight"]+(e["distance"]||2):0),width:e["container"].get(0).offsetWidth-(e["axis"]!=="x"?e["scrollzone"].get(0)["offsetWidth"]+(e["distance"]||2):0)};if(r.height<0){r.height=0}if(r.width<0){r.width=0}$jsex.hash.each(r,function(n,r){e["scrollclip"].css(n,r+"px");t["clip"+n.substr(0,1).toUpperCase()+n.substr(1)]=r});$.extend(e["status"],{totalHeight:(e["autoScrollBarSize"]===false?e["scrollzone"].get(0)[n["offsetHeight"]]:e["container"].get(0)[n["offsetHeight"]])-e["status"]["barlt"]-e["status"]["bargt"]});e["status"]["totalHeight"]=e["status"]["totalHeight"]>=0?e["status"]["totalHeight"]:0;e["bar_container"].css(n["height"],e["status"]["totalHeight"]+"px");var s=i(e["content"].get(0),n["height"]);var o=s&&e["scrollclip"].get(0)[n["offsetHeight"]]/s;$.extend(e["status"],{contentHeight:s,height:Math.round((o>=1?1:o)*e["bar_container"].get(0)[n["offsetHeight"]]),full:o>=1,empty:o<=0});e["bar"].css(n["height"],t["height"]+"px");this.a2b()};f.prototype.a2b=function(){var e=this._opt["status"];if(!e["full"]&&!e["empty"]||this._opt["scroll"]==="always"){var t=e["full"]?0:this.getAOffset()/(e["contentHeight"]-e["clipHeight"])*(e["totalHeight"]-e["height"]);this._setbar(t);this._show()}else{this._hide()}};f.prototype.b2a=function(){var e=this._opt["status"];var t=this.percent()*(e["contentHeight"]-e["clipHeight"]);this.ma(t)};f.prototype.scrollIntoView=function(e){var t=this._opt,n=t["status"],r=this._fix;var i=this.percent()*(n["contentHeight"]-n["clipHeight"]);var s=e&&e[r["offsetHeight"]];var o=e&&e[r["offsetTop"]];var u=n["clipHeight"];if(i>o){this.ma(o);this.a2b()}else if(i+u<o+s){this.ma(o+s-u);this.a2b()}};f.prototype.scrollTo=function(e){this.ma(e)};f.prototype.percent=function(){var e=this._opt["status"];var t=e["full"]?0:this.getBOffset()/(e["totalHeight"]-e["height"]);return t<0?0:t>1?1:t};f.prototype._setbar=function(e){var t=this._opt["status"];e=Math.round(e);t["top"]=e;this._opt["bar"].css(this._fix["top"],e+"px")};f.prototype.m=function(e){if(e<=0)e=0;else if(e+this._opt["status"]["height"]>this._opt["status"]["totalHeight"])e=this._opt["status"]["totalHeight"]-this._opt["status"]["height"];this._setbar(e);this.b2a()};f.prototype.ma=function(e){var t=this._opt["scrollclip"].get(0),n=this._opt["content"];var r=i(n.get(0),this._fix["height"]);if(e<=0)e=0;else if(e+t[this._fix["offsetHeight"]]>r)e=r-t[this._fix["offsetHeight"]];t[this._fix["scrollTop"]]=Math.floor(e);this.a2b()};f.prototype.getAOffset=function(){return this._opt["scrollclip"].get(0)[this._fix["scrollTop"]]};f.prototype.getBOffset=function(){var e=this._opt["status"];return e["top"]};f.prototype._mousemove=function(e){if(this._f){var t=r(e);this.m(t.pageY-this._p["_"+this._fix["axis"]]+this._p["_s"+this._fix["axis"]])}};f.prototype._mousedown=function(e){this._f=true;var t=r(e);this._p={_y:t.pageY,_x:t.pageX,_sx:this._opt["bar"].get(0).offsetLeft,_sy:this._opt["bar"].get(0).offsetTop}};f.prototype._mouseup=function(e){this._f=false};f.prototype._mousewheel=function(e){e.preventDefault();e=e.originalEvent;var t=e.detail?e.detail*-120:e.wheelDelta;if(typeof t!=="number"||t==0)return;if(t<0)this._mfclick();else if(t>0)this._mbclick()};f.prototype._mfclick=function(){this.m(this.getBOffset()+(this._opt["step"]||20))};f.prototype._mbclick=function(){this.m(this.getBOffset()-(this._opt["step"]||20))};f.prototype._barclick=function(e){var t=e["xy"];var n=this._opt["bar_container"].offset();var r=this.getBOffset();var i=this._opt["status"]["height"];if(t.pageY-n.top<r)this.m(r-i);else if(t.pageY-n.top>r+i)this.m(r+i);else return false};l.prototype._click=function(e){e=e.originalEvent;this._start(r(e),"click")};l.prototype._mouseover=function(){this._over=true};l.prototype._mouseout=function(){this._over=false;this._down=false;this._end()};l.prototype._start=function(e,t){var n=this;if(n._handler)clearInterval(n._handler);var r=function(e){if(e===true){if(n.cb.call(n.el,n)===false)n._end()}else if(!n._over||!n._down||n.cb.call(n.el,n)===false)n._end()};n.xy=e;n._handler=setInterval(r,n.repeat);if(t==="click")r(true)};l.prototype._end=function(){if(this._handler)clearInterval(this._handler);this._handler=null};l.prototype._mousedown=function(e){this._down=true;e=e.originalEvent;this._start(r(e),"mousedown")};l.prototype._mouseup=function(){this._down=false};window.ScrollBar=f})()},744:function(e,t,n){function o(e){i.extend(this,s);i.extend(this,e||{})}var r=typeof r==="function"&&!r.amd?r:false;var i=n(7);var s={sizeW:10,sizeH:10,anchorX:5,anchorY:5,draggable:false,template:'<img src="//source.qunarzz.com/hotel/map/traffic/cur_dot2.png" style="width:{{sizeW}}px,height:{{sizeH}}px">'};o.prototype.initialize=function(e){this._map=e;this.div=i('<div class="js-cm"/>').css("position","absolute").append(Hogan.compile(this.template).render(this))[0];this._map.getPane(G_MAP_MARKER_PANE).appendChild(this.div);if(this.zIndex)this.setZIndex(this.zIndex);if(this.draggable){this.enableDrag()}};o.prototype.setZIndex=function(e){this.div.style.zIndex=e};o.prototype.getDiv=function(){return this.div};o.prototype.onRemove=function(){i(this.div).remove();this.dragMarker&&this.dragMarker.remove&&this.dragMarker.remove()};o.prototype.draw=function(){var e=this._map.fromLatLngToDivPixel(this.latLng);i(this.div).css({left:e.x-this.anchorX,top:e.y-this.anchorY})};o.prototype.enableDrag=function(){var e=this,t=i(this.div);if(!this.dragMarker){this._buildFakeMarker()}t.bind("mouseover",function(){i(e).trigger("mouseover");t.hide();e.dragMarker.show()})};o.prototype.disableDrag=function(){i(this.div).unbind("mouseover").show();this.dragMarker.hide()};o.prototype._buildFakeMarker=function(){var e=this,t=i(this.div),n=this.imageUrl||t.find("img")[0]&&t.find("img")[0].src,r,s;r=new GIcon;r.setImageUrl(n);r.setSize(new GSize(this.sizeW,this.sizeH));r.setAnchor(new GPoint(this.anchorX,this.anchorY));s=new GMarker(this.latLng,{icon:r});s.setDragEnable(true);this.zIndex&&s.setZIndex(this.zIndex+1);s.hide();this._map.addOverlay(s);this.dragMarker=s;GEvent.addListener(s,"dragstart",function(n){e.isDragging=true;t.hide();i(e).trigger("dragstart",[n])});GEvent.addListener(s,"dragend",function(t){e.isDragging=false;e.latLng=t;e.draw();i(e).trigger("dragend",[t])});GEvent.addListener(s,"drag",function(t){i(e).trigger("drag",[t])});GEvent.addListener(s,"mouseout",function(){if(!e.isDragging){e.draw();t.show()}})};window.CustomMarker=o;e.exports=o},763:function(e,t){function r(){var e,t,n="B_";if(window.QHTrace){e=window.QHTrace.instance||null}if(e){t=e.channel||"ZS";return e.generateNewVal(t,n)}return""}var n=typeof n==="function"&&!n.amd?n:false;e.exports=r},775:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;n(67);n(776)},776:function(e,t){function i(){var e,t,n,i,s,o,u;var a=function(r){var s=$("<div/>");e=r,n=e.container;i=e.template,checkedClass=r.checkedClass||"selected",disabledClass=r.disabledClass||"disabled",t=e.fields;e.replace="undefined"===typeof e.replace?true:e.replace;f();l();if(!n.hasClass("js_customFilterBox")){n.addClass("js_customFilterBox");c()}};var f=function(){if(e.radioTemplate){o=Hogan.compile(e.radioTemplate)}if(e.checkboxTemplate){u=Hogan.compile(e.checkboxTemplate)}};var l=function(){s=n.find("input[type='radio'],input[type='checkbox']");$.each(s,function(e,t){var n=$(t);p(n)})};var c=function(){if(e.active===false)return;n.undelegate("change.customeFilter").delegate("input","change.customeFilter",function(e){e.stopPropagation();var t=$(this);t=$("#"+t.attr("id"));if("radio"===t.attr("type")){l()}else{p(t)}})};var h=function(e,t){var n=e.prop("checked");var r=e.prop("disabled");if(n){t.addClass(checkedClass)}else{t.removeClass(checkedClass)}if(r){t.addClass(disabledClass)}else{t.removeClass(disabledClass)}};var p=function(e){var t=e.closest("."+r);if(t.length>0){h(e,t)}else{d(e)}};var d=function(i){var s=i.attr("type");var a;if(s==="radio"){a=o}else if(s==="checkbox"){a=u}var f=n.find("label[for='"+i.attr("id")+"']");var l="<div id='wrapper_label_"+i.attr("id")+"'></div>";var c=e.replace?{opacity:.01,position:"absolute",top:0,left:0}:{opacity:0,position:"absolute"};i.css(c);var h="<div id='wrapper_input_"+i.attr("id")+"'></div>";var p=f.length>0?$.trim(f.text()):i.attr("value");var d={checked:i.prop("checked"),disabled:i.prop("disabled"),id:i.attr("id"),title:i.attr("title"),value:i.attr("value"),label:p,labelHTML:l,inputHTML:h};if(t&&t.length>0){for(var v=0,m=t.length;v<m;v++){var g=i.attr("data-"+t[v]);if(g){d[t[v]]=g==="false"?false:g}}}try{var y=a.render(d);var b=$(y).addClass(r).addClass("item-position");if(i.attr("title")=="公务员考点"){b=b.prepend($('<span class="icon_h"></span>'))}i.after(b);var w=$("#wrapper_label_"+i.attr("id"));f&&w.before(f);w.remove();var E=$("#wrapper_input_"+i.attr("id"));E.before(i);E.remove()}catch(S){}};var v=function(e){if(!e.container)return;a(e)};var m=function(){};return{refresh:v,clear:m}}var n=typeof n==="function"&&!n.amd?n:false;var r="js_wrapper";var s=new i;$.CustomFilterBox={refresh:function(e){(new i).refresh(e)}}},818:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;e.exports=n(819)},819:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;var i=n(7);var s=5e3;var o=function(e,t){this._map=e;this._mapContainer=i(e.getContainer());t=t||{};this._opts=i.extend({radius:5,circleStrokeWeight:1,circleStrokeOpacity:.6,circleStrokeColor:"#0000FF",circleFillOpacity:.2,circleFillColor:"white"},t);this.radiusNarrow=.95*1e3;this._marker=null;this._circle=null;this._followLabel=null;this._tip=null;this._bindFn=[];this._isOpen=false};o.prototype.open=function(){if(this._isOpen){return}this._isOpen=true;var e=this;var t=new GIcon;t.setImageUrl("//source.qunarzz.com/hotel/map/traffic/p_dot.png");t.setSize(new GSize(18,20));t.setAnchor(new GPoint(6,20));this._marker=new GMarker({_impl:null},{icon:t,clickable:false,title:"可移动改变位置"});this._marker.setDragEnable(false);this._marker.setZIndex(s);this._map.addOverlay(this._marker);this._marker.setAnimation(G_ANIMATION_DROP);this._followLabel=new GLabel("单击标记，右键或Esc退出",{offset:new GSize(10,10),style:{zIndex:s,color:"#333",borderColor:"#ff0103"}});this._map.addOverlay(this._followLabel);this._tip=new u(this._map,this);i(this._tip).bind("close",function(){e.close()});var n=function(t,n,r){e._marker.setLatLng(t);e._followLabel.setPosition(t)};var r=function(t,s,o,u){GEvent.removeListener(n);GEvent.removeListener(r);e._position=s;e._marker.setLatLng(s);e._marker.setDragEnable(true);e._followLabel.hide();e._circle=new GCircle(s,e._opts.radius*1e3,{strokeWeight:e._opts.circleStrokeWeight,strokeOpacity:e._opts.circleStrokeOpacity,strokeColor:e._opts.circleStrokeColor,fillOpacity:e._opts.circleFillOpacity,fillColor:e._opts.circleFillColor,strokeStyle:"dashed"});e._map.addOverlay(e._circle);e._map.fitBounds(e._circle.getBounds(),e._position);GEvent.addListener(e._marker,"click",f);i(e).trigger("marker",[s,e._opts.radius*e.radiusNarrow])};var o=function(t,n){e._tip.hide();e._circle.hide()};var a=function(t,n){e._position=t;e._circle.setCenter(t);e._circle.show();e._map.fitBounds(e._circle.getBounds(),t);i(e).trigger("marker",[t,e._opts.radius*e.radiusNarrow])};var f=function(t){e._tip.show()};var l=function(t){t=t||window.event;if(t.keyCode===27){setTimeout(function(){e.close()},10)}};var c=function(){e.close()};this.mapCtMouseenter=function(){if(e._isOpen&&!e._position){e._followLabel.show();e._marker.show()}};this.mapCtMouseleave=function(){if(e._isOpen&&!e._position){e._followLabel.hide();e._marker.hide()}};this._mapContainer.bind("mouseenter",this.mapCtMouseenter);this._mapContainer.bind("mouseleave",this.mapCtMouseleave);GEvent.addListener(this._map,"mousemove",n);GEvent.addListener(this._map,"click",r);GEvent.addListener(this._map,"rightclick",c);GEvent.addListener(this._marker,"dragstart",o);GEvent.addListener(this._marker,"dragend",a);GEvent.addDomListener(document,"keydown",l);this._bindFn=[n,r,o,a,l,c,f];i(this).trigger("openTool")};o.prototype.radiusChange=function(e){this._opts.radius=e;if(this._isOpen&&this._circle){var t=this._position;this._circle.setRadius(e*1e3);this._map.fitBounds(this._circle.getBounds(),this._position);i(this).trigger("marker",[t,e*this.radiusNarrow])}};o.prototype.isOpen=function(){return this._isOpen};o.prototype.close=function(){if(!this._isOpen){return}this._removeBind();this._clearData();this._isOpen=false;i(this).trigger("closeTool")};o.prototype._removeBind=function(){for(var e=0;e<this._bindFn.length;e++){GEvent.removeListener(this._bindFn[e])}this._mapContainer.unbind("mouseenter",this.mapCtMouseenter);this._mapContainer.unbind("mouseleave",this.mapCtMouseleave)};o.prototype._clearData=function(){this._marker&&this._marker.remove&&this._marker.remove();this._circle&&this._circle.remove&&this._circle.remove();this._followLabel&&this._followLabel.remove&&this._followLabel.remove();this._tip&&this._tip.remove&&this._tip.remove();this._marker=this._circle=this._followLabel=this._tip=null;this._position=null};var u=function(e,t){this._map=e;this._marker=t;this._hasInit=false};u.prototype.initialize=function(e){var t=this;var n=""+'<div class="position_r" style="z-index:9999; position:absolute; display:none">'+'<h4 class="map_close_s"><a title="关闭" node-type="closeTip" href="javascript:void(0);"><span class="hide">关闭</span></a></h4>'+'<div class="filter_layer_bg">'+'<div class="filter_layer clr_after" style="width:280px;">'+'<div class="map_info a_center">'+'<p class="a_left" node-type="info"></p>'+'<a href="javascript:void(0);" title="删除此点" node-type="closeTool" class="del_button">删除此点</a>'+"</div>"+"</div>"+'<div class="bottom_jt" style="left: 145px;bottom: -14px;"></div>'+"</div>"+"</div>";var r=i(n);this.tipInfo=r.find('[node-type="info"]');r.find('[node-type="closeTool"]').click(function(){t._marker.close()});r.find('[node-type="closeTip"]').click(function(e){r.hide()});e.getPane(G_MAP_MARKER_PANE).appendChild(r[0]);this.div=r;this._hasInit=true;return r[0]};u.prototype.draw=function(){var e=this._map.fromLatLngToDivPixel(this.position);if(this._map.mapType=="google"){e.y+=14}this.div[0].style.left=e.x-153+"px";this.div[0].style.top=e.y-(this._map.mapType==="google"?110:95)+"px"};u.prototype.remove=function(){if(this.div){this.div.find('[node-type="closeTool"]').unbind("click");this.div.find('[node-type="closeTip"]').unbind("click");this.div.empty()}};u.prototype.show=function(){var e=this;this.position=this._marker._position;if(!this._hasInit){this._map.addOverlay(this)}this.draw();(new GClientGeocoder).getLocations(e.position,function(t){if(t&&t.length>0){e.tipInfo.html("地点："+t[0].formatted_address);e.div.show()}})};u.prototype.hide=function(){this.div&&this.div.hide()};e.exports=o},820:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;e.exports=n(821)},821:function(e,t,n){function f(e){function i(e){window.clearTimeout(r);r=window.setTimeout(function(){if(e){n.setZoom(n.getZoom()+1)}else{n.setZoom(n.getZoom()-1)}},150)}var t=e._mask;var n=e._map;var r;t.bind("dblclick",function(){i(true)});t.bind("mousewheel",function(e){if(e&&e.originalEvent){if(e.originalEvent.wheelDelta){e.preventDefault();i(e.originalEvent.wheelDelta>0)}}})}var r=typeof r==="function"&&!r.amd?r:false;var i=n(7);var s=n(822);var o=5e3;var u="拖拽鼠标左键选择区域";var a=function(e,t,n){if(!e||!t){return}this._map=e;this._mask=t;n=n||{};this._opts=i.extend({strokeWeight:2,strokeColor:"blue",strokeOpacity:.4,fillOpacity:.2,fillColor:"white"},n);this._opts.clickable=false;this._polygon=null;this._followLabel=null;this._isOpen=false};a.prototype.open=function(){if(this._isOpen){return}this._polygon=new GPolygon([],this._opts);this._map.addOverlay(this._polygon);this._followLabel=new GLabel(u,{offset:new GSize(10,10),style:{zIndex:o,color:"#333",borderColor:"#ff0103"}});this._map.addOverlay(this._followLabel);this._mask.css("cursor","crosshair");this._mask.show();this._isOpen=true;var e=this;this._mask.one("mousedown",i.proxy(this._maskMousedownHandler,this));this._mask.bind("mousemove",i.proxy(this._maskMousemoveHandler,this));this._mask.bind("contextmenu",i.proxy(this.close,this));this._mask.bind("mouseup",i.proxy(this._maskMouseupHandler,this));GEvent.addDomListener(document,"keydown",i.proxy(this._documentKeyDownHandler,this));GEvent.addListener(this._map,"rightclick",i.proxy(this.close,this));this._mask.bind("mouseenter",function(){if(e._isOpen&&!e._startPoint){e._followLabel&&e._followLabel.show()}});this._mask.bind("mouseleave",function(){if(e._isOpen&&!e._startPoint){e._followLabel&&e._followLabel.hide()}if(e._isOpen&&e._startPoint){e._restart()}});f(e);i(this).trigger("openTool")};a.prototype.close=function(){if(!this._isOpen){return}this._startPoint=null;this._endPoint=null;this._over();GEvent.removeDomListener(this._documentKeyDownHandler);GEvent.removeListener(this.closeHandler);this._polygon&&this._polygon.setPath([]);this._followLabel&&this._followLabel.remove&&this._followLabel.remove();this._polygon=this._followLabel=null;this._isOpen=false;i(this).trigger("closeTool")};a.prototype._maskMousedownHandler=function(e){e=this._fixEvent(e);this._startPoint=this._pixel2GLatLng(e.offsetX,e.offsetY);this._startX=e.offsetX;this._startY=e.offsetY;this._followLabel.hide()};a.prototype._maskMousemoveHandler=function(e){e=this._fixEvent(e);var t=this._pixel2GLatLng(e.offsetX,e.offsetY);var n=this._startPoint;this._followLabel.setPosition(t);if(n){var r=new GLatLng(n.lat(),t.lng());var i=new GLatLng(t.lat(),n.lng());this._polygon.setPath([n,i,t,r,n])}};a.prototype._maskMouseupHandler=function(e){e=this._fixEvent(e);if(!this._startPoint||Math.abs(this._startX-e.offsetX)<4||Math.abs(this._startY-e.offsetY)<4){this._restart();this._followLabel.show();return}this._over();this._endPoint=this._pixel2GLatLng(e.offsetX,e.offsetY);var t=GLatLngBounds.buildByTwoLatLng(this._startPoint,this._endPoint);this._map.fitBounds(t);t=s.extendBound(t,-10);i(this).trigger("end",[t.getSouthWest(),t.getNorthEast()])};a.prototype._documentKeyDownHandler=function(e){var t=this;e.keyCode===27&&setTimeout(function(){t.close()},10)};a.prototype._restart=function(){this._startPoint=null;this._polygon.setPath([]);this._mask.one("mousedown",i.proxy(this._maskMousedownHandler,this))};a.prototype._pixel2GLatLng=function(e,t){return this._map.fromContainerPixelToLatLng(new GPoint(e,t))};a.prototype._over=function(){this._followLabel.hide();this._mask.css("cursor","auto");this._mask.hide();this._mask.unbind("mousemove mousedown mouseup mouseenter mouseleave dblclick mousewheel contextmenu")};a.prototype._fixEvent=function(e){if(e.offsetX&&e.offsetY){return e}else{var t=e.target.parentNode;var n=i(t).offset();e.offsetX=e.pageX-n.left;e.offsetY=e.pageY-n.top;return e}};e.exports=a},822:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;var i=n(823);for(var s in i)e.exports[s]=i[s];var o=function(e){var t=Object.prototype.toString.call(e);if(t==="[object String]"){var n=e.split(",");return[n[0]*1,n[1]*1]}else if(t==="[object Array]"){return e}return[]};var u={baidu:function(e){var n=e.items,r=e.isGCJ02,i=e.callback,s=e.context,u=e.timeout,a=!!e.noRequest;var f=[],l=[],c=[],s=s||window,h=function(){i(f)};for(var p=0,d=n.length,v;p<d;p++){v=n[p];if(v.baidu){f.push(s.GLatLng.fromType("baidu",o(v.baidu)))}else if(v.google){var m=o(v.google);f.push(new s.GLatLng(m[0],m[1]));l.push(m);c.push(p)}else{f.push(null)}}if(l.length===0||a){h();return f}t.convertGoogle2BaiduPoint(r,l,function(e){for(var t=0,n=e.length;t<n;t++){var r=s.GLatLng.fromType("baidu",e[t]);if(r)f[c[t]]=r}h()},u);return f},google:function(e){var t=e.items,n=e.callback,r=e.context;var i=[],s=function(){n(i)};for(var u=0,a=t.length,f;u<a;u++){f=t[u];if(f.google){var l=o(f.google);i.push(new r.GLatLng(l[0],l[1]))}else{i.push(null)}}s();return i}};t.toExactPoint=function(e){e.context=e.context||window;var t=e.context.GMap2.mapType;if(u[t]){return u[t](e)}return null};t.extendBound=function(e,t){t=t||15;var n=e.toSpan();var r=e.getSouthWest();var i=e.getNorthEast();return new GLatLngBounds(new GLatLng(r.lat()-n.lat()/t,r.lng()-n.lng()/t),new GLatLng(i.lat()+n.lat()/t,i.lng()+n.lng()/t))};t.drawBound=function(e,t,n){if(!e||!t){return}var r=t.getSouthWest();var i=t.getNorthEast();var s=new GPolygon([r,new GLatLng(r.lat(),i.lng()),i,new GLatLng(i.lat(),r.lng())]);n&&s.setStrokeStyle({color:n});e.addOverlay(s)};t.hahaNoMap=function(e){if(e)e.innerHTML='<div class="no_map_img"><span class="hide">地图暂时无法显示</span></div>'}},823:function(e,t){function i(e,t,n,r){var i=[],s=[],o=e?2:0;for(var u=0,a=t.length;u<a;u++){i.push(t[u][0]);s.push(t[u][1])}var f="PointConverter"+(new Date).getTime()+Math.round(Math.random()*1e4),l=document.head||document.getElementsByTagName("head")[0]||document.documentElement;window[f]=function(e){var r=new Array(t.length);if(Object.prototype.toString.call(e)==="[object Array]"&&e.length===t.length){for(var i=0,s=e.length;i<s;i++){if(e[i].error==0&&e[i].x&&e[i].y){r[i]=[e[i].y,e[i].x]}}}window[f]=undefined;try{delete window[f]}catch(o){}n(r)};if(r){setTimeout(function(){window[f]&&window[f].call(window)},r)}var c=document.createElement("script");c.src="//api.map.baidu.com/ag/coord/convert?mode=1&from="+o+"&to=4&x="+s.join(",")+"&y="+i.join(",")+"&callback="+f;l.insertBefore(c,l.firstChild)}var n=typeof n==="function"&&!n.amd?n:false;var r=2;e.exports={decodePath:function(e,t){var n=e?e.length:0,r=Array(Math.floor(e.length/2)),i=0,s=0,o=0,u=0;for(;i<n;++u){var a=1,f=0,l;do l=e.charCodeAt(i++)-63-1,a+=l<<f,f+=5;while(l>=31);s+=a&1?~(a>>1):a>>1;a=1;f=0;do l=e.charCodeAt(i++)-63-1,a+=l<<f,f+=5;while(l>=31);o+=a&1?~(a>>1):a>>1;r[u]=t?new t(s*1e-5,o*1e-5):[s*1e-5,o*1e-5]}r.length=u;return r},decodeLevel:function(e){var t=[];for(var n=0;n<e.length;++n){var r=e.charCodeAt(n)-63;t.push(r)}return t},convertGoogle2BaiduPoint:function(e,t,n,s){var o=[];var u=function(){if(t.length===0){n(o)}else{i(e,t.splice(0,r),function(e){o=o.concat(e);u()},s)}};u()}}},824:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;e.exports=n(825)},825:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;var i=n(7);var s=5e3;var o=function(e,t){if(!e){return}this._map=e;this._mapContainer=i(e.getContainer());t=t||{};this._opts=i.extend({followText:"单击确定地点，双击结束",startFollowText:"单击确定起点",unit:"metric",lineColor:"#ff6319",lineStroke:2,opacity:.8,lineStyle:"solid",secIcon:null,closeIcon:null},t);this._units={metric:{name:"metric",conv:1,incon:1e3,u1:"米",u2:"公里"},us:{name:"us",conv:3.2808,incon:5279.856,u1:"英尺",u2:"英里"}};this._followLabel=null;this._followLine=null;this._closeMarker=null;this._points=[];this._pointPXs=[];this._paths=[];this._dis=[];this._labels=[];this._markers=[];this._bindFn=[];this._isOpen=false};o.prototype.open=function(){if(this._isOpen){return}this._isOpen=true;var e=this,t;this._map.setDefaultCursor("crosshair");e._followLabel=new GLabel(this._opts.startFollowText,{offset:new GSize(10,10),style:{zIndex:s,color:"#333",borderColor:"#ff0103"}});e._map.addOverlay(e._followLabel);var n=function(t,n,r,i){var o;if(!n){return}if(e._points.length>0){var u=Math.sqrt(Math.pow(e._pointPXs[e._pointPXs.length-1].x-r.x,2)+Math.pow(e._pointPXs[e._pointPXs.length-1].y-r.y,2));if(u<10){return}}e._points.push(n);e._pointPXs.push(r);if(e._points.length<2){o="起点"}else{e._dis.push(e._map.getDistance(e._points[e._points.length-2],e._points[e._points.length-1]));o=e._formatDisStr(e._totalDis(e._dis));var a=new GPolyline([e._points[e._points.length-2],n],"#ff6319",2,.8);e._map.addOverlay(a);e._paths.push(a)}var f=new GLabel(o,{style:{zIndex:s,color:"#333",borderColor:"gray",borderRadius:"4px"},offset:new GSize(10,-5),enableMassClear:e._enableMassClear});e._map.addOverlay(f);e._labels.push(f);setTimeout(function(){f.setPosition(n)},100);var l=new GIcon;l.setImageUrl("//source.qunarzz.com/hotel/listnew/map/dot.png");l.setSize(new GSize(12,12));l.setAnchor(new GPoint(6,6));var c=new GMarker(n,{title:"",icon:l,cursor:"default",enableClicking:false});e._map.addOverlay(c);e._markers.push(c)};var r=function(t,n,r){e._followLabel.setPosition(t);if(e._points.length===1&&!e._followLine){e._followLine=new GPolyline([e._points[0],t],"#ff6319",2,.8,{clickable:false});e._map.addOverlay(e._followLine)}if(e._points.length>0&&e._followLine){var i="总长："+e._formatDisStr(e._totalDis(e._dis)+e._map.getDistance(e._points[e._points.length-1],t),true);i+="<br>点击左键确定地点，右键结束";e._followLabel.setContent(i);e._followLine.setPath([e._points[e._points.length-1],t])}};var o=function(t){t=t||window.event;if(t.keyCode===27){setTimeout(function(){e.close()},50)}};var u=function(t,i,o,a){if(e._points.length===0){e.close();return}GEvent.removeListener(r);GEvent.removeListener(u);GEvent.removeListener(n);e._followLabel&&e._followLabel.remove&&e._followLabel.remove();e._followLine&&e._followLine.remove&&e._followLine.remove();var f=new GIcon;f.setImageUrl("//source.qunarzz.com/hotel/listnew/map/mapctrls.png");f.setSize(new GSize(12,12));f.setAnchor(new GPoint(20,1));e._closeMarker=new GMarker(e._points[e._points.length-1],{title:"",icon:f});e._closeMarker.setZIndex(s+1);e._map.addOverlay(e._closeMarker);e._map.setDefaultCursor("");GEvent.addListener(e._closeMarker,"click",function(){e.close()})};GEvent.addListener(e._map,"mousemove",r);GEvent.addListener(e._map,"click",n);GEvent.addListener(e._map,"rightclick",u);GEvent.addDomListener(document,"keydown",o);this._bindFn=[r,u,o,n];this.mapCtMouseenter=function(){if(e._isOpen&&e._points.length==0){e._followLabel.show()}};this.mapCtMouseleave=function(){if(e._isOpen&&e._points.length==0){e._followLabel.hide()}};this._mapContainer.bind("mouseenter",this.mapCtMouseenter);this._mapContainer.bind("mouseleave",this.mapCtMouseleave);i(this).trigger("openTool")};o.prototype.isOpen=function(){return this._isOpen};o.prototype.close=function(){if(!this._isOpen){return}this._removeBind();this._clearData();this._map.setDefaultCursor("");this._isOpen=false;i(this).trigger("closeTool")};o.prototype._clearData=function(){var e,t;for(e=0,t=this._points.length;e<t;e++){this._points[e]&&this._points[e].remove&&this._points[e].remove()}for(e=0,t=this._paths.length;e<t;e++){this._paths[e]&&this._paths[e].remove&&this._paths[e].remove()}for(e=0,t=this._labels.length;e<t;e++){this._labels[e]&&this._labels[e].remove&&this._labels[e].remove()}for(e=0,t=this._points.length;e<t;e++){this._markers[e]&&this._markers[e].remove&&this._markers[e].remove()}this._followLabel&&this._followLabel.remove&&this._followLabel.remove();this._followLine&&this._followLine.remove&&this._followLine.remove();this._closeMarker&&this._closeMarker.remove&&this._closeMarker.remove();this._followLabel=this._followLine=this._closeMarker=null;this._points=[];this._paths=[];this._labels=[];this._markers=[];this._dis=[]};o.prototype._removeBind=function(){for(var e=0;e<this._bindFn.length;e++){GEvent.removeListener(this._bindFn[e])}this._mapContainer.unbind("mouseenter",this.mapCtMouseenter);this._mapContainer.unbind("mouseleave",this.mapCtMouseleave)};o.prototype._totalDis=function(e){var t=0;for(var n=0,r=e.length;n<r;n++){t=t+e[n]}return t};o.prototype._formatDisStr=function(e,t){var n=this._opts.unit||"metric";var r=this._units[n].u1;var i=this._convertUnit(e,n);if(i>this._units[n].incon){i=i/this._units[n].incon;r=this._units[n].u2;i=i.toFixed(1)}else{i=i.toFixed(0)}if(t){i='<span style="color : red;">'+i+"</span>"}return i+r};o.prototype._convertUnit=function(e,t){t=this._opts.unit||"metric";if(this._units[t]){return e*this._units[t].conv}return e};e.exports=o},831:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;var r=function(e){return Math.pow(e,1.5)},i=function(e){return 1-r(1-e)};var s=function(e){var t=$.trim(e.$numWrapper.text());t=this._checkOriginNum(t);this.unArrOriginNum=t;t="<span>"+this._transContent(t)+"</span>";e.$numWrapper.text("");var n=e.$numWrapper.append(t);this.$numWrapper=n.children(0);this.$numWrapper.addClass("inner-wrapper");this.duration=~~e.duration||1e3;this.times=~~(this.duration/16);this.maxTimes=~~e.maxTimes>=this.times?this.times:~~e.maxTimes;this.step=16/this.duration;var r=this.$numWrapper.width();this.perDigitWidth=r/this.$numWrapper.text().split("").length};s.prototype={constructor:s,_init:function(e){this.startTime=$.now();this._initWrapper(e);this._initOriginNum()},_initWrapper:function(e){var t=this;this.originNum=this.$numWrapper.text().split("");this.targetNum=e.toString().split("");this.originLength=this.originNum.length;this.targetLength=this.targetNum.length;this.originWidth=this.$numWrapper.width();if(this.perDigitWidth==0){this.perDigitWidth=this.$numWrapper.find("span").first().width()}this.finalWidth=this.perDigitWidth*this.targetLength;this.diffDistance=this.finalWidth-this.originWidth},_checkOriginNum:function(e){var e=$.trim(e).toString(),t=/\D/g;e=e.replace(t,"");return e?e:0},_initOriginNum:function(){var e=function(e,t){var n=0;for(n;n<e;n++){t.push(n)}return t};var t=this.targetLength-this.originLength;t>=0?this.originNum=e(t,this.originNum):this.targetNum=e(-t,this.targetNum)},_generateNum:function(){var e=this.originNum.length;for(var t=0;t<e;t++){var n=~~this.originNum[t],r=~~this.targetNum[t];this.originNum[t]=++n%10==r?++n%10:n%10}},_showNum:function(e){var t=this,n=$.now(),r=Math.max((n-this.startTime)/this.duration,0);var s=function(){t.$numWrapper.css("width",t.finalWidth);t.targetNum.splice(t.targetLength,t.targetNum.length-t.targetLength);var e=t._transContent(t.targetNum.join(""));t.$numWrapper.html(e);if(typeof t._timeControl!="undefined")clearTimeout(t._timeControl);return false};if(r>=1){s()}else{if(e<this.times){this.$numWrapper.css("width",this.originWidth+this.diffDistance*r+"px");var o=Math.ceil(i(this.step*(e-1))*this.maxTimes),u=Math.ceil(i(this.step*e)*this.maxTimes);if(o!=u){this._generateNum();var a=this._transContent(this.originNum.join(""));this.$numWrapper.html(a)}this._timeControl=setTimeout(function(){t._showNum(++e)},16)}else{s()}}},updateNum:function(e){this._interruptStop();var e=this._checkOriginNum(e),t=this.unArrOriginNum;if(t!=e){this.unArrOriginNum=e;this._init(e);var n=1;this._showNum(n)}},_interruptStop:function(){if(typeof this._timeControl!="undefined"){clearTimeout(this._timeControl||null)}},_transContent:function(e){var t=e.toString().split(""),n=t.length,r=0,i=[],s=["<span>","","</span>"];for(r=0;r<n;r++){s[1]=t[r];i[r]=s.join("")}return i.join("")}};e.exports=s},878:function(e,t){function o(){function o(o){if(t>=0){clearTimeout(t)}t=setTimeout(function(){t=-1;var n=$("."+s);var o=document.documentElement.clientWidth;var u="";if(o<r){u=i.className}u=u||i.defaultClass;n.removeClass(i.className+" "+i.defaultClass).addClass(u);$(e).trigger("adjustWidth",o)},o?0:n)}var e=this,t=-1,n=300;o(true);$(window).resize(function(){o()});this.getWindowWidth=function(){return document.documentElement.clientWidth};this.getConfigure=function(){return i};this.isWider=function(){return this.getWindowWidth()>r};this.getDefaultWidth=function(){return r};this.adjust=function(e){o(e)};this.setConfigure=function(e){if(e){i=e;o(true)}return i}}var n=typeof n==="function"&&!n.amd?n:false;var r=1200;var i={className:"master-980",defaultClass:"master-1200"};var s="js_adjustwidth";e.exports=new o},923:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;n(67);n(46);n(118);n(53);n(60);n(82);n(203);n(95);n(205);n(78);n(232);n(103);n(743);n(744);n(200);n(250);n(186);n(187);n(251);n(924);n(539);n(179);n(505)},924:function(e,t,n){function Tt(e){E.initialRender(e);w.setPagerInfo(ct.getDefaultPagerInfo());var t=w.getUrl({isFirstPage:1});ht.load(t)}function _t(){if(et)return;var e=D.checkIsSelectPOI(q);if(e&&(typeof window.qArea=="undefined"||window.qArea=="")){E.hidePosition();xt.hidePosition=true}else{E.loadPosition();xt.hidePosition=false}et=true}function Dt(e){e=e||[];if(!xt.isLoaded()){return}if(w.isOpenDragPOI()||w.isPreOpenDragPOI()){xt.showHotelsAfterDragPOI(e);return}var t=w.getIsUsingMapTool();Pt();if(w.isFiltered()){if(ot.isFocusPanel){xt.showHotels(e,!t,w.getPosInfos())}else{if(!t&&(w.isTradingAreaFiltered()||w.getTradingAreaFilter())){xt.showHotels(e,true)}else{xt.showHotels(e,!t,w.getPosInfos())}}}else{xt.showHotels(e,!t)}if(w.isFiltered()&&w.getTradingAreaFilter()){$(xt).trigger("filterFormChange",["isQ"])}}function Pt(){if(!_){$(".js-cm").remove()}}function Ht(){if(window.init_qhotel_analysis){window.init_qhotel_analysis(ct)}}function Bt(){var e=$("#hotsearch_div");e.find("a").each(function(){var e=$(this),t=e.attr("href"),n=t.indexOf("#")<=0?"#":"&";t=t+n+"fromDate="+fromDate+"&toDate="+toDate;e.attr("href",t)})}function jt(){QunarStorage.ready(function(e){var t=e.getItem("selectSugItem");var n=e.getItem("selectSugItem_pageId");if(t&&n){if(window.GARunerById){window.GARunerById(n,t)}e.removeItem("selectSugItem");e.removeItem("selectSugItem_pageId")}})}var r=typeof r==="function"&&!r.amd?r:false;n(537);n(243);var i=n(925);var s=n(933);var o=n(937);var u=n(940);var a=n(942);var f=n(945);var l=n(956);var c=n(958);var h=n(966);var p=n(988);var d=n(1002);var v=n(1004);var m=n(506);var g=n(831);var y,b;y=n(878);b=function(){return y.isWider()};i.isWider=b;var w=c.filterManager,E=c.filterPanel,S=c.hotelSortAffix.hotel_sort,x=E.initFilterBox(),T=i.MixKey,N=i.listParams,C=p.MapManager,k=p.MapPanel,L=m.MapPanel,A=h.InfoLoader,O=h.hotelAffixControl,M=f.ListPromotionBar,_=i.isMainlandIncludeHM,D=i.utils,P=h.ListPanelUpdate,H=p.funcs,B=h.Active,j=i.GARuner;var F=D.getPolygonsInfo(),I=new L,q,R=$("#searchHotelPanel"),U=$("#focusHotelPanel"),z=$("#jxContainer"),W=$("#jxContentPanel"),X=$("#focusPanel"),V=$("#js_leftPanel"),J=$("#jxMapArea"),K=$("#jxMapPanel"),Q=$("#loadingDiv"),G=$("#noResult"),Y=$(".js-clearalloption"),Z=$("#hotel_sort"),et=false,tt=a.searchbox.searchBox,nt=i.listParams.opts;var rt=R.find(".js_pager"),it=$(".js_easypager_search");V.append('<div class="screen hide" id="js_screen"></div>');var st=new M({$container:J,sliderItemsCount:3,context:i});$(st).bind({listDSellRendered:function(e,t){window.globalEvent&&window.globalEvent.trigger("listDSellRendered",t)}});y.adjust(true);$(y).bind("adjustWidth",function(e,t){var n=t>=this.getDefaultWidth();$(S).trigger("adjustWidth",n);S.setPosition();$(O).trigger("adjustWidth",n);O.setPosition();$(xt).trigger("resetMapPosition");st.updateSliders(st.getWidthMap()[n?1:0]);st.reverseHotelName();E.adjustFilterShowMore(n);if(!n){E.adjustFilterItemPosition()}s.gongyu.refresh()});if(!i.isWider()){$(S).trigger("adjustWidth",false);$(O).trigger("adjustWidth",false);st.updateSliders(st.getWidthMap()[0])}else{$(S).trigger("adjustWidth",true);$(O).trigger("adjustWidth",true);st.updateSliders(st.getWidthMap()[1])}w.setFilterForm(x);w.setPolygonsInfo(F);w.setContext(i);var ot=v.tab;var ut=new hotel.list.LazyLoad({container:R,ns:"listpanel"});var at=new hotel.list.LazyLoad({container:U,ns:"focuspanel"});var ft=new P(i,{container:R});var lt=new P(i,{container:U});var ct=new hotel.list.ListPanel({wrapContainer:R,listContainer:W,pagerContainer:rt,easyPagerContainer:it,loadingContainer:Q,noResultContainer:G,numPerPage:30,oneRequestPageNum:15,LINES_ASCII_LENGTH:160,fromDate:window.fromDate,toDate:window.toDate},i);var ht=new A(null,i);var pt=new A(null,i);var dt=new hotel.list.FocusPanel({wrapContainer:U,listContainer:X},i);var vt=new B({container:R},i);var mt=new B({container:U},i);var gt=D.getActivityURL();var yt=function(e){$.ajax({url:e,type:"GET",dataType:"json",success:function(e){if(e.ret){vt.setActivityInfo(e.data);mt.setActivityInfo(e.data)}}})};yt(gt);$(dt).bind({mapShow:function(e,t){var n=$(t);if(_){I.setHotelData(dt.getHotelInfosCache()[parseInt(n.data("index"),10)-1]);I.setHotelPois(w.getPosInfos());I.show()}else{Lt.show(n.data("id"),{hotelName:n.data("hotelname"),bpoint:n.data("bpoint"),gpoint:n.data("gpoint"),scale:n.data("scale")},w.getPosInfos())}j("listMap")},tradingAreaRepeat:function(e,t,n){n=n.join("-");j("tradingArea",{seq:t,areas:n})},afterRender:function(e,t){var n,r;mt.update(t);lt.setUpdateCount(0);n=D.getPriceURL(D.getNotStaticHotelSeqs(t.hotelInfos));if(n){pt.loadPrice(n,"focuspanel")}var i=D.getCommentAllSeqs(t.hotelInfos);for(var s=0,o=i.length;s<o;s++){if(_){r=D.getCommentURL(i[s])}else{r=D.getInterCommentURL(i[s])}if(r){pt.loadComment(r,i[s],"focuspanel")}}window.globalEvent.trigger("setPosition.Affix")},focusInfoReady:function(e,t){this.clearCache();this.render(t);this.show();$(xt).trigger("dataReady",[this.getHotelInfosCache(),this.getHotelsBySeqs(at.getVisibleHotelSeqs())])},removeFocusState:function(e,t){xt.unhighlightHotel();ct.removeFocusState(t)},reload:function(){pt.ajaxGet(this.getRequestUrl(),function(e){return!e||!e.hotels||!e.hotels.length})},updateTabStatus:function(e,t){ot.setHotelFocusNum(t);ot.updateHotelFocus()},changeTab:function(){ot.changeToHotel()},hotelMouseenter:function(e,t){xt.highlightHotel(t);var n=$("#js_block_"+t).data("tradingarea");if(n){xt.highlightTradingAreaByName(n)}},hotelMouseleave:function(e,t){xt.unhighlightHotel();xt.unHighlightTradingAreaByName()}});$(ot).bind({tabClick:function(e,t,n){this.isFocusPanel=n;if(n){ct.scrollTopValue=$(document).scrollTop();Y.hide();dt.show();ct.hide();z.addClass("margintop-gap");if(i.isIE6||i.isIE7){E.hide();o.hide();l.hide()}else{E.hide(true,500);o.hide(true,500);l.hide(true,500)}if(dt.refresh){$(dt).trigger("reload")}$(xt).trigger("dataReady",[dt.getHotelInfosCache(),dt.getHotelsBySeqs(at.getVisibleHotelSeqs())]);window.scrollTo(0,dt.scrollTopValue)}else{dt.scrollTopValue=$(document).scrollTop();if(At){S.pause()}Y.show();dt.hide();ct.show();z.removeClass("margintop-gap");if(i.isIE6||i.isIE7){E.show();o.show();l.show()}else{E.show(true,500);o.show(true,500);l.show(true,500)}if(ct.easypager.total===0){ct.easypager.hide()}else{ct.easypager.show()}window.scrollTo(0,ct.scrollTopValue)}S.heightHackFix=Z.outerHeight(true);setTimeout(function(){window.globalEvent.trigger("setPosition.Affix")},500)}});var bt=new common.CaptchaBox({from:"list"});var wt=$(bt);var Et=new RequestMonitor;var St=$(Et);var xt=new C(window.mapEnabled,D.getMapType()==="none",K.get(0),cityBounds,F,allLatLngs,i);K.click(function(e){j("mapPanelClick")});setTimeout(function(){Tt(nt)},100);S.heightHackFix=Z.outerHeight(true);S.render();if(window.mapEnabled&&D.getMapType()!=="none"){xt.affix(J,z,V)}St.bind("requestFrequently",function(){bt.show();Logger.count({code:"hotel_captcha"})});wt.bind("success",function(){var e=ht.getLastUrl();if(e){ht.load(e)}});var Nt=new common.PopupLogin({},"forceLogin");var Ct=$(Nt);St.bind("forceLogin",function(){Logger.count({code:"hotel_forceLogin"});Nt&&Nt.show(null,function(){isLoginByWidget=true;try{var e=document.createElement("script");e.type="text/javascript";e.src="//q.qunarzz.com/js/userstatus/build/userstatus-0.4.min.js";document.body.appendChild(e)}catch(t){}});setTimeout(function(){$(".login_type .f_r").css("display","none");$("#QunarPopBoxClosePop").css("display","none")},100)});Ct.bind("success",function(){Logger.count({code:"hotel_forceLogin_success"});var e=ht.getLastUrl();if(e){ht.load(e)}});var kt=new MapPanel;var Lt=new k;$(kt).bind("listMapClose",function(){j("listMapClose")});var At=false;var Ot=new Date;$(ct).bind({mapShow:function(e,t){var n=$(t);if(_){I.setHotelData(ct.getHotelInfosCache()[parseInt(n.data("index"),10)-1]);I.setHotelPois(w.getPosInfos());I.show()}else{Lt.show(n.data("id"),{hotelName:n.data("hotelname"),bpoint:n.data("bpoint"),gpoint:n.data("gpoint"),scale:n.data("scale")},w.getPosInfos())}j("listMap")},tradingAreaRepeat:function(e,t,n){n=n.join("-");j("tradingArea",{seq:t,areas:n})},pagerClick:function(e,t){this.clearCache();this.showLoading();if(i.isIE6){$(S).trigger("hideSorter")}O.setSingleHotelHtml("");O.resetDefault();O.hideSingleHotelDom();w.setPagerInfo(ct.getPagerInfo());ht.load(w.getUrl());j("page",[t])},hotelMouseenter:function(e,t){xt.highlightHotel(t);var n=$("#js_block_"+t).data("tradingarea");if(n){xt.highlightTradingAreaByName(n)}},hotelMouseleave:function(e,t){xt.unhighlightHotel();xt.unHighlightTradingAreaByName()},beforeRender:function(){Ot=new Date},afterRender:function(e,t){var n,r,i=this;vt.update(t);ft.setUpdateCount(0);n=D.getPriceURL(D.getNotStaticHotelSeqs(t.hotelInfos));if(n){ht.loadPrice(n)}var s=D.getCommentAllSeqs(t.hotelInfos);for(var o=0,u=s.length;o<u;o++){if(_){r=D.getCommentURL(s[o])}else{r=D.getInterCommentURL(s[o])}if(r){ht.loadComment(r,s[o])}}var a=0,f={},l=this.getHotelInfosCache()||[],c=0;c=l.length-this.config.oneRequestPageNum;c=c<0?0:c;for(a=l.length;a>c;a--){f=l[a-1];if(dt.focusHotelSeqsMap[f.id]){i.addFocusState(f.id)}else{i.removeFocusState(f.id)}}window.globalEvent.trigger("setPosition.Affix");window.Logger&&window.Logger.log("listpanel: "+((new Date).getTime()-Ot.getTime())+" ms")},fullMatchHotelName:function(e,t,n){if(t){O.setSingleHotelHtml(t);O.setSingleHotelTypeStyle(n);O.showSingleHotelDom();S.pause();O.renderAffix();O.startAffix();At=true}else{O.setSingleHotelHtml("");O.resetDefault();S.start();O.pauseAffix();O.hideSingleHotelDom();At=false}},focusClick:function(e,t,n,r){dt.setRrefresh(true);if(r){xt.highlightHotel(n,null,"click")}else{xt.unhighlightHotel();this.removeFocusState(n,true);dt.removeHotelSeq(n)}},addFocusAnimateFinished:function(e,t){dt.addHotelSeq(t)},mouseEnterFocusIcon:function(e,t){if(dt.focusHotelCount>=dt.maxcarenum&&!t.hasClass("hotel-focused")){t.siblings(".js_tipover").show()}}});$(ft).bind({afterRenderPrice:function(e,t){window.globalEvent.trigger("priceRender");vt.update(t);var n,r,i=ct.getHotelInfosCache()||[],s=t.hotelInfos||[];for(n=0;n<s.length;n++){for(r=0;r<i.length;r++){if(s[n].id===i[r].id){i[r].os=s[n].os;i[r].isLowPrice=s[n].isLowPrice;i[r].isStatic=s[n].isStatic;i[r].miniRetailPrice=s[n].miniRetailPrice;i[r].price=s[n].price;break}}}},firstUpdateNoPrice:function(e,t){var n=D.getPriceURLNew(t);if(n){ht.loadPriceNew(n)}}});$(lt).bind({afterRenderPrice:function(e,t){mt.update(t);var n,r,i=dt.getHotelInfosCache()||[],s=t.hotelInfos||[];for(n=0;n<s.length;n++){for(r=0;r<i.length;r++){if(s[n].id===i[r].id){i[r].os=s[n].os;i[r].isLowPrice=s[n].isLowPrice;i[r].isStatic=s[n].isStatic;i[r].miniRetailPrice=s[n].miniRetailPrice;i[r].price=s[n].price;break}}}},firstUpdateNoPrice:function(e,t){var n=D.getPriceURLNew(t);if(n){pt.loadPriceNew(n)}}});$(ut).bind({onRenderMarker:function(e,t){if(!ot.isFocusPanel){Dt(ct.getHotelsBySeqs(t.seqs))}},onLazyLoad:function(e){if(!ot.isFocusPanel){if(ct.pager.currentPage===ct.pager.total&&!ct.needLazyLoad){}else{ct.showLoading();w.setPagerInfo(ct.getPagerInfo());var t=w.getUrl();ht.load(t)}}}});$(at).bind({onRenderMarker:function(e,t){if(ot.isFocusPanel){Dt(dt.getHotelsBySeqs(t.seqs))}}});if(window.mapEnabled){xt.loadMap();setTimeout(function(){if(!xt.isLoaded()){Logger.count({code:window.MapType=="baidu"?"hotel_list_bdmap_fail":"hotel_list_googlemap_fail"})}},5e3)}$(xt).bind({firstDragPOIEnd:function(e){var t=5e3;x.getControl("distance").hideEl("clear");try{var n=x.getControl("distance");if(n.getValue().value.length===0){n.setSelected(5)}else{t=n.getValue().value[0].value*1e3}}catch(r){}w.setIsOpenDragPOI(true);E.setDistanceName("您选择的位置")},dragPOIMarkerOpen:function(){w.setIsPreOpenDragPOI(true)},tradeCancel:function(){E.positionClear()},hoverHotel:function(e,t){if(t&&t.length>0){var n=getPriceURL(t);ht.loadSinglePrice(n)}},mapToolMarkerPositon:function(e,t,n){ct.showLoading();w.setCoordInfo(t,n);w.setPagerInfo(ct.getDefaultPagerInfo());ht.load(w.getUrl())},mapToolRectEnd:function(e,t,n){ct.showLoading();w.setBounds(t,n);w.setPagerInfo(ct.getDefaultPagerInfo());ht.load(w.getUrl())},poiDragEnd:function(e,t,n){ct.showLoading();w.setCoordInfo(t,n);w.setPagerInfo(ct.getDefaultPagerInfo());ht.load(w.getUrl());j("dragpoi","end")},openTool:function(e,t){if(t!=="ruler"){w.setIsUsingMapTool(true)}j("bigMapTool",t)},closeTool:function(e,t){w.setIsUsingMapTool(false);if(t==="marker"){w.setCoordInfo(null)}else if(t==="rect"){w.setBounds(null)}else if(t==="ruler"){return}ct.showLoading();w.setPagerInfo(ct.getDefaultPagerInfo());ht.load(w.getUrl())},mapModeChanged:function(e,t){function s(e,t){$.each(e,function(e,n){if(n.value==t+"-default"){n.checked=false}else if(n.value==t+"-desc"){n.checked=true}})}if(_)return;if(t){z.removeClass("normalModel").addClass("bigMapModel");var n=x.getControl("smallSorter");var r=n.getValue();if(r.value&&r.value.length>0){if(r.value[0].value=="DC-default"){s(n.data,"DC")}else if(r.value[0].value=="PRICE-default"){s(n.data,"PRICE")}}n.render(n.data);E.changeSmallSorterTitle(n);x.getControl("bigSorter").hide();j("bigMapModel",true);setTimeout(function(){st.switchPosition("big")},100)}else{z.removeClass("bigMapModel").addClass("normalModel");var i=x.getControl("bigSorter");i.render(i.data);x.getControl("smallSorter").hide();j("bigMapModel",false);setTimeout(function(){st.switchPosition("small")},100)}$(O).trigger("mapResize",t);$(S).trigger("mapResize",t)},scopeChange:function(e,t){var n=x.getControl("distance");if(t===0){n.clearStatus();n.render(n.data,true)}else{E.setSelected("distance",t)}var r=t==0?"不限":t+"公里内";j("filter","距离|"+r,0,{qhfp:i.listtrace.getQHFP()});n.updateNoLimitState();if(w.isOpenDragPOI()){var s=w.getCoordInfo();s&&w.setCoordInfo(s.coord,t*1e3)}ct.showLoading();w.setPagerInfo(ct.getDefaultPagerInfo());ht.load(w.getUrl())},mapFiltered:function(e){w.setBounds(e)},mapFloat:function(e){j("mapFloat",e)},tradingAreaFiltered:function(e,t){if(!window.positionSelected){E.setSelected("position",t,"商圈")}else{var n=["//",location.host,"/city/",window.cityurl,"/q-||"+encodeURIComponent(t)+"||","#fromDate="+window.fromDate,"&toDate="+window.toDate];location.href=n.join("")}j("mapCbdPanelClick")},hotelMarkersInited:function(e,t){window.globalEvent.trigger("hotelMarkersInited",t)},hotelMarkerUpdate:function(e,t){window.globalEvent.trigger("hotelMarkerUpdate",t)},dataReady:function(e,t,n){if(this.isLoaded()){xt.setHotels(t);Dt(n)}},init:function(){s.qunarlinks.init();p.mapEnter.init(x,tt,i);if(nt.mapType=="0"){xt.switchToBigMap&&xt.switchToBigMap()}if(ot.isFocusPanel){if(dt.getHotelInfosCache().length){Dt(dt.getHotelsBySeqs(at.getVisibleHotelSeqs()))}}else{if(ct.getHotelInfosCache().length){Dt(ct.getHotelsBySeqs(ut.getVisibleHotelSeqs()));if(!_){this.updateMapComment(ft.getComments())}}}},updateMapComment:function(e){var t=ft.getComments()||{};if(this.isLoaded()&&t.ret&&!$.isEmptyObject(t.data)){this.updateMapComment(t)}},onSetMapScale:function(e,t){var n={map:xt.getMap(),isMapLoad:xt.isLoaded(),nowScale:t,isSelectPoi:D.checkIsSelectPOI(q),isOpenDragPOI:w.isOpenDragPOI(),isPreOpenDragPOI:w.isPreOpenDragPOI()};H.setMapScale(n)}});$(x).bind({change:function(e,t,n){var r=n;var s=x.lastClick;var o=$("#filterBox").offset().top;ct.clearCache();$.scrollTo(0,o,{time:300},function(){O.hideSingleHotelDom();ct.showLoading();w.setPagerInfo(ct.getDefaultPagerInfo());ht.load(w.getUrl(),false);var e=w.getLastClickBeaconInfo(r);if(e){j("filter",e,0,{qhfp:i.listtrace.getQHFP()})}if(r==="clearAll"){$(xt).trigger("filterFormChange",["clearAll"])}else{$(xt).trigger("filterFormChange",[s])}window.globalEvent.trigger("setPosition.Affix")});if(s&&s.key==="distance"&&t.distance&&t.distance.length>0&&w.isOpenDragPOI()){var u=w.getCoordInfo();var a=t.distance[0].value;u&&w.setCoordInfo(u.coord,a*1e3)}else if(s&&s.key==="position"||r==="clearAll"){if(w.isOpenDragPOI()||w.isPreOpenDragPOI()){w.setCoordInfo(null);w.setIsOpenDragPOI(false);w.setIsPreOpenDragPOI(false);xt.removeDragPOIMarker()}if(t.position&&t.position.length>0){var f=t.position[0].tagName;if(f==="行政区"||f==="商圈"||f==="区域"){xt.dragPOIHide()}else{xt.initDragPOIMarker();xt.dragPOIHide()}}}},distanceChange:function(e,t){xt.distanceChange(t,true)},positionChange:function(e,t){xt.distanceChange(0,false)},showMore:function(e){j("qmore")},hideMore:function(e){j("qless")},clearAll:function(){if(xt.isBigMap){x.getControl("smallSorter").show();E.changeSmallSorterTitle(null,"默认排序")}else{x.getControl("smallSorter").hide()}E.updateSorterValue.call(x.getControl("bigSorter"),"default");E.updateSorterValue.call(x.getControl("smallSorter"),"default")}});var Mt=new g({$numWrapper:$("#js_hotel_num"),duration:500,maxTimes:10});$(ht).bind({firstInfoReady:function(e,t){l.initQueryCorrect(t);if(!Et.check(t)){return}var n=D.getQueryInfo(t);w.setResult(n);q=D.getQPTypes(t);_t();var r=function(){var e=[];if(t&&t.hotelInfos&&t.hotelInfos.length>0){var n=t.hotelInfos;for(var r=0,i=n.length;r<i;r++){e.push(n[r].id)}}return e}();window.globalEvent.trigger("firstRenderAPIList",{r:t.info.count,limit:t.info.limit,qptype:q.join("|")})},infoReady:function(e,t){if(!Et.check(t)){return}var n=D.getQueryInfo(t);w.setResult(n);q=D.getQPTypes(t);if($.browser.msie&&$.browser.version<7){$(S).trigger("showSorter")}var r=0,o={},u=!t.info.count,a=w.isMapFilteredEnabled(),f=w.isFiltered()||a,l=w.exactlyMatch(),c=query&&query.length,h=w.isFilteredByCheckBox();if(u&&!c&&!f){r=1;o.text=cityName}else if(u&&f&&l&&a){r=2}else if(!u&&f&&!l){r=3;o.text=$.trim(w.getFirstNonEmptyType())}else if(u&&c){r=4;o.text=w.getTips()}else if(u&&h){r=5;o.text=w.getTips()}if(u&&w.getTips()!=""){j("noresult",{query:query,filtered:h},0,{b:typeof filterid!=="undefined"?filterid:""})}window.globalEvent.trigger("filterChanged",{r:t.info.count,limit:t.info.limit,qptype:q.join("|")});var p={distance:w.getDistance(),isOpenDragPOI:w.isOpenDragPOI(),openDragPOIText:w.getDragPOIText()};ct.render(t,r,o,p);Mt.updateNum(t.info.count);$(xt).trigger("dataReady",[ct.getHotelInfosCache(),ct.getHotelsBySeqs(ut.getVisibleHotelSeqs())]);if(!w.isPreOpenDragPOI()){try{var d=t.queryInfo.queries[0].containsFts1;var v=t.queryInfo.queries[0].qp;var m=true;if(!d&&v.poi.length===1){for(var g in v){if(v.hasOwnProperty(g)&&g!=="poi"){m=false;break}}}else{m=false}xt.isSinglePOI=m;if(m){xt.dragPOIHide()}else{xt.dragPOIHide()}}catch(y){xt.dragPOIHide&&xt.dragPOIHide()}x.getControl("distance").showEl("clear")}E.updateData(t);E.checkShowBnbJNHFilter(t);_t();var b=w.getPosInfos().length===1||w.isOpenDragPOI();var T=b?limitString(w.isOpenDragPOI()?w.getDragPOIText():w.getPosInfos()[0].name||"",20,18,"..."):"";w.isOpenDragPOI()&&x.getControl("distance").hideEl("clear");E.showDistance(b,T,xt.isBigMap);ht.stop();i.listTrans.initTrans({r:t.info&&t.info.count,qptype:q.join("|"),sgroup:typeof SERVER_GROUP!=="undefined"?SERVER_GROUP:"",ex_track:N.getParameter("ex_track")});s.marketCode(t,i);var C=["dali","lijiang"];if($.inArray(cityurl,C)!==-1){$(".bestbnb_title_icon").css("display","block")}if(window.QReport&&!window.QReport.isHotelListAtfSend){window.QReport.isHotelListAtfSend=true;window.QReport.pf({cat:"atf"})}},allInfoReady:function(e,t){xt.showHotspots(t.hotelInfos)},priceUpdate:function(e,t){if(!Et.check(t)){return}ft.updatePrice(t,ct.getListPanelFomatter());xt.updatePrice(t.hotelInfos)},commentUpdate:function(e,t){var n=ct.getResultInfo();if(_){ft.updateMainlandComment(t,n)}else{var r=ct.getHotelInfosCache();if(t&&t.data){var i=t.data;$.each(r,function(e,t){if(!t){return}var n;if(n=i[t.id]){t.CommentCount+=n["brief"]&&n["brief"]["count"]||0}})}ft.setComments(t);$(xt).trigger("updateMapComment",ft);ft.updateInterTop40Comments(t,n)}}});$(pt).bind({infoReady:function(e,t){if(!t){dt.showNoResult()}else{dt.hideNoResult();t.hotels=dt.sortHotel(t.hotels);this.formatResult(t);dt.success(t)}},infoError:function(e){dt.error()},priceUpdate:function(e,t){if(!Et.check(t)){return}lt.updatePrice(t,ct.getListPanelFomatter());xt.updatePrice(t.hotelInfos)},commentUpdate:function(e,t){var n=dt.getResultInfo();if(_){lt.updateMainlandComment(t,n)}}});(function(){if(!window.globalEvent){window.globalEvent=$({})}window.globalEvent.bind("setPosition.Affix",function(){setTimeout(function(){if(ot.isFocusPanel){Dt(dt.getHotelsBySeqs(at.getVisibleHotelSeqs()))}else{Dt(ct.getHotelsBySeqs(ut.getVisibleHotelSeqs()))}},500);S.setPosition();if(xt){$(xt).trigger("resetMapPosition")}});o.initAladin();u.hotbrand.init();a.searchcookie.initSearchCookie();Bt();Ht();var e=4e3;s.qunarlinks.init(e);s.gongyu.init(i);jt();$("#sorterPanel").append('<div id="js_block_sell"></div>');$("#js_block_sell").delegate("#js-close-sell","click",function(){$("#js_block_sell .sell_out_tips").remove()})})()},925:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;var i=n(926);var s=n(928);var o=n(929);var u=n(930);var a=n(931);var f=n(932);e.exports={GARuner:i.GARuner,listParams:s,MixKey:o,utils:u,listtrace:a,listTrans:f,isIE6:/MSIE 6\.0/.test(navigator.userAgent),isIE7:/MSIE 7\.0/.test(navigator.userAgent),isMainland:window.isMainland,isMainlandIncludeHM:window.isMainland||window.cityurl=="macao_city"||window.cityurl=="hongkong_city"||window.isMainlandIncludeHM,isInterCityTop100:function(){var e=["singapore_city","taipei","seoul","koh_phuket_tha","bangkok","chiang_mai","tokyo","bali","jeju","osaka","kuala_lumpur","surat_thani_th","pingdong_xian","maldives","sabah","paris_city","dubai","kaohsiung","saipan_mnp","boracay_philippines","pattaya","los_angeles_ca","kyoto_kyo","new_york_new","london_england","hualian","sydney_nsw","langkawi","taizhong","nantou","siem_reap_cambodia","melbourne_australia","clark_county_nv","krabi_th","san_francisco_county","manila","busan_kr","taipei_xian","rome_rm","bintan_ria","kathmandu_bag","sapporo_hok","vancouver_gre","incheon_kr","jakarta","kentrikos_tomeas_athinon","moscow_g","ko_phi_phi_don","seychelles_sey","honolulu_county","taoyuan","chiayi","munich_m","mae_hong_son_th","berlin_ber","milan_mi","toronto_tor","frankfurt_da","fiji_fij","tainan","government_of_amsterdam","gold_coast_qld","ko_tao_th","hawaii_county","koh_chang_th","colombo_wp","okinawa_oki","ashigarashimo_district","khanh_hoa_province","auckland_auc","istanbul_ist","king_county","phnom_penh_new","cook_il","venice_ve","florence","cairns_qld","madrid_com","malacca_mel","budapest","guam","vienna_vie","abu_dhabi_abu","kobe_hyo","xinzhu","lisbon_pt","nice_alp","zurich_zur","ko_samet","prague_hla","narita_chi","naha","st_petersburg_g","santorini_not","prachuap_khiri_khan_th","hanoi_vn","nagoya_aic","barcelona","geneva_gen","city_of_edinburgh","ho_chi_minh_city","ko_samui_district","las_vegas_cla","hua_hin_hua","hua_hin_district","hakone_ash","otaru_hok","hakodate","noboribetsu"];var t=false;$.each(e,function(e,n){if(n===window.cityurl){t=true;return false}});return t}()}},926:function(e,t,n){function u(e,t,n,r){if(typeof i==="undefined")return;var s=null;try{if(i[e])s=i[e](t)}catch(u){}if(s==null)return;setTimeout(function(){try{var e=window.__GA__;if(e){e.clk({_ba_utm_s:o,_ba_utm_ex:$.extend({a:s},r||{})})}}catch(t){}},n||0)}var r=typeof r==="function"&&!r.amd?r:false;var i=n(927);var s=2e3;var o=200;t.GARuner=window.GARuner=u},927:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;var r={qs_DEF_0:function(e){return"排序方式|类别|综合"+(e||"")},qs_SCORE_1:function(e){return"排序方式|类别|评分"+(e||"")},qs_PRICE_0:function(e){return"排序方式|价格|低高"+(e||"")},qs_PRICE_1:function(e){return"排序方式|价格|高低"+(e||"")},qs_DC_0:function(e){return"排序方式|档次|低高"+(e||"")},qs_DC_1:function(e){return"排序方式|档次|高低"+(e||"")},qs_DISTANCE_0:function(e){return"排序方式|距离|近远"+(e||"")},qs_DISTANCE_1:function(e){return"排序方式|距离|远近"+(e||"")},filter:function(e){return e},qp:function(e){return e?"价格|"+(e[0]||"")+"-"+(e[1]||""):"价格|自定义"},qdf:function(e){return"距离|"+e[0]+"公里内"},qff:function(e){return"设施服务|"+e[0].getAttribute("data-title")},equipqff:function(e){return"设施服务|"+e[0]},qtf:function(e){return"商圈|"+e[0]},brand:function(e){return"品牌|"+e[0]},grade:function(e){return"星级|"+e},lmp:function(e){return"地标|"+e[0]},kd_dh:function(e){return"直销酒店"},kd_kdh:function(e){return"可订酒店"},tuan:function(){return"团购酒店"},hotelType:function(e){return"酒店类型|"+e[0]},landMarker:function(e){return"热门地点|"+(typeof cityName==="undefined"?"未知":cityName)},bigMapModel:function(e){return e?"展开地图":"收起地图"},bigMapTool:function(e){if(e==="ruler"){return"测距"}else if(e==="rect"){return"框选搜索"}else if(e==="marker"){return"拖动定位"}else if(e==="print"){return"打印"}},dragpoi:function(e){if(e==="start"){return"list页|修正地标"}else if(e==="close"){return"list页|关闭修正地标"}else if(e==="end"){return"list页|拖动地标完成"}},mapFilter:function(e){if(e){return"拖动地图找酒店"}else{return null}},mapFloat:function(e){if(e){return"随屏幕滚动"}else{return null}},hotelNameClick:function(){return"列表酒店名称"},hotelPriceClick:function(){return"列表酒店报价"},hotelCommentClick:function(){return"列表酒店点评"},hotelImageClick:function(){return"列表酒店图片"},mapPanelClick:function(){return"地图酒店信息"},mapCbdPanelClick:function(){return"地图区域酒店"},noresult:function(e){e=e||{};var t=e.query;var n;if(t&&t.length){return e.filtered?"无结果-YS":"无结果-YN"}if(e.filtered){return"无结果-NS"}},page:function(e){return"页码"+(e&&e.length?e[0]+1:"")},qmore:function(){return"筛选项更多"},qless:function(){return"筛选项收起"},noPrice:function(){return"价格范围|不限"},noGrade:function(){return"酒店级别|不限"},noArea:function(){return"所属商圈|不限"},noBrand:function(){return"连锁品牌|不限"},noType:function(){return"酒店类型|不限"},noRequire:function(){return"入住要求|不限"},noDistance:function(){return"距离|不限"},noHotArea:function(){return"热门地点|不限"},positionRoute:function(e){return"酒店位置"+"|"+e.category.name+"|"+e.name},positionCategory:function(e){return"酒店位置"+"|"+e.name},position:function(e){return"酒店位置"+"|"+(e?e.category.name+"|"+window.cityName+"|"+e.routeType+" | "+e.name:"不限")},fixprice:function(){return"list页关闭一口价推荐"},listMap:function(){return"list地图弹层"},listMapClose:function(){return"关闭地图弹层"},fastbooking:function(){return"快速booking"},fbMorePrice:function(){return"闪电订更多报价"},listComment:function(){return"list点评标题"},listName:function(){return"list_name"},listPrice:function(){return"list_price"},listScore:function(){return"list_score"},listComments:function(){return"list_comments"},listHotcity:function(e){return"酒店list|"+e[0]+"|热门城市|"+e[1]},listHotcityNav:function(e){return"酒店list|"+e[0]+"|"+e[2]+"|"+e[1]},tradingArea:function(e){return"商圈重复-"+e.seq+"-"+e.areas},trySleeper:function(e){switch(e){case"show":return"酒店list|出现试睡员推荐";case"click":return"酒店list|点击试睡员推荐"}},listPic:function(){return"list页酒店头图"},bigpicshow:function(){return"list页酒店大图"},selectSugItem:function(e){return e},listRankMouseEnter:function(e){return"list页|hover酒店榜单"},listRankClick:function(){return"list页|点击酒店榜单"},picBtnNex:function(){return"list页酒店图片|下一张"},picBtnPrev:function(){return"list页酒店图片|上一张"},carehotel:function(){return"关注酒店"},cancelcare1:function(){return"取消关注1"},cancelcare2:function(){return"取消关注2"},carehoteltab:function(){return"关注酒店tab"},searchtab:function(){return"搜索结果tab"}};e.exports=r},928:function(e,t,n){function v(){var e={fromDate:fromDate,toDate:toDate,cityurl:cityurl,cityName:cityName,query:query};do{var t=o.getParameter("pr");if(!t){t=window.qPrice||""}if(t){t=t.split(",");var n=[];for(var r=0,s=t.length;r<s;r++){var u=t[r];if("0-200"==u&&!window.isWhiteCityUrl){n.push({value:"0,200",title:"¥200以下"})}else if("200-300"==u){n.push({value:"200,300",title:"¥200-¥300"})}else if("300-500"==u&&!window.isWhiteCityUrl){n.push({value:"300,500",title:"¥300-¥500"})}else if("500-max"==u){n.push({value:"500,1.7976931348623157e+308",title:"¥500以上"})}else if(u.split("-").length===2){var a=u.split("-");n.push({value:a[0]+","+a[1],title:"自定义价格",from:a[0],to:a[1]})}}e.price=n}}while(false);var f=o.getParameter("fc");if(f){e.equip=f.split(",")}var l=o.getParameter("ht");if(l){e.hotelType=l.split(",")}var c=o.getParameter("st");if(!c){c=window.qDangci||""}if(c){stArr=c.split(",");e.st=[];for(var r=0,s=stArr.length;r<s;r++){var h=stArr[r];switch(h){case"0":e.st.push({value:"1",title:"经济型"});break;case"1":e.st.push({value:"2",title:"三星级/舒适"});break;case"2":e.st.push({value:"3",title:"四星级/高档"});break;case"3":e.st.push({value:"4",title:"五星级/豪华"});break;case"5":e.st.push({value:"0,5",title:"二星级/其他"});break}}}e.grade=e.st;var p=o.getParameter("br");if(p){p=p.split(",");e.brand=[];for(var r=0,s=p.length;r<s;r++){var d=p[r].split("|");e.brand.push({value:decodeURIComponent(d[1]),title:decodeURIComponent(d[0])})}}var v=window.qBrandUrl;if(v){e.brand=[{value:v,title:qBand}]}var m=o.getParameter("kdh");if(m==="true"){e.kdh=true}var g=o.getParameter("LZ");if(g==="true"&&window.isSpecialStay){e.LZ=true}var y=o.getParameter("dh");if(y==="true"){window.filter_dh=true}var b=o.getParameter("limitTime");if(b==="true"){e.limitTime=true}var w=o.getParameter("starVoucher");if(w==="true"){e.starVoucher=true}var E=o.getParameter("bestbnb");if(E==="true"){e.bestBnb=true}var S=o.getParameter("JNH");if(S){S=decodeURIComponent(S);var x=S.split("|");e.bnbJNH=[];for(var T=0,N=x.length;T<N;T++){switch(x[T]){case"allInOne":e.bnbJNH.push({title:"一价全包",value:"allInOne"});break;case"jnhLZ":e.bnbJNH.push({title:"连住特惠",value:"lz"});break;case"gift":e.bnbJNH.push({title:"超值买赠",value:"gift"});break;case"cheapest":e.bnbJNH.push({title:"震撼低价",value:"cheapest"});break}}}var C=window.qArea||"";if(C!=""){e.qArea=C}var k=o.getParameter("sort");if(k){e.sorter=k}var n=[5,6,7,8,9,10,11,12];var L=o.getParameter("fea");L=isNaN(L)?-1:L;if(L>=0&&L<n.length){e.fea=L}var A=o.getParameter("mapType");if(A){e.mapType=A}var O=i.getMixKey();if(O){e.mixKey=O}return e}var r=typeof r==="function"&&!r.amd?r:false;var i=n(929);var s=function(){var e=navigator.userAgent;if(e.indexOf("QQBrowser")!==-1&&e.indexOf("Chrome")!==-1){return true}else{return false}}();var o=Parameter.parseURL(location.href,s?"?":"#");var u=Parameter.parseURL(location.search,"?");var a=$("#sForm").get(0);var f=window.fromDateRule||1;var l=window.toDateRule||2;var c=l-f||1;var h=o.getParameter("fromDate")||a.fromDate.value||QunarDate.format(new Date(QunarDate.today().getTime()+f*24*60*60*1e3));var p=o.getParameter("toDate")||a.toDate.value||QunarDate.format(new Date(QunarDate.today().getTime()+l*24*60*60*1e3));var d=null;if(isMainland){d=new DateChecker(89,f+1,c)}else{d=new DateChecker(364,f+1,c)}window.dchecker=d;window._fromDate=h;window._toDate=p;d.setDate1(h);d.setDate2(p,QunarDate.format(QunarDate.plus(d.getMax(),1)));window.fromDate=d.getDate1();window.toDate=d.getDate2();window.fromParam="&from="+encodeURI(o.getParameter("from")||"list_page");window.qParam="&q="+encodeURIComponent(window.query||"");t.params=o;t.queryParams=u;t.getParameter=function(e){return u.getParameter(e)||o.getParameter(e)};t.opts=v()},929:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;$=n(7);t.getMixKey=function(){var e=location.search.substr(1).match(/mixKey\=\w+/g);if(e&&e.length>0){return e[0].split("=")[1]}return $.trim($("#eyKxim").text())||""};var i;t.format=function(e){if(!i){i=new SortRestore({originalKey:t.getMixKey()})}var n=function(e,t){var n=0;for(var r=0,i=t.length;r<i;r++){n=n+t[r].price*(r+1)}if(e===n){return true}else{return false}};var r=function(e){var t=e.length;var n=i.getKey(t);var r={};for(var s=0,o=n.length;s<o;s++){r[n[s].toString()]=e[s].price}for(var s=0;s<o;s++){var u=r[s.toString()];if("undefined"!==typeof u){e[s].price=u}else{Logger.error("指定排序的酒店报价不存在")}}return e};var s=function(){drawQMonitor("list_sumerror",{cityurl:window.cityurl,fromDate:window.fromDate,toDate:window.toDate,q:encodeURIComponent(window.query)})};if(e.hotelInfos&&e.hotelInfos.length>0&&e.info&&e.info.time===0){e.hotelInfos=r(e.hotelInfos);var o=e.info.checkSum||0;if(!n(o,e.hotelInfos)){e.hotelInfos=function(){var t=e.hotelInfos;for(var n=0,r=t.length;n<r;n++){t[n].price=-1}return t}();s()}}}},930:function(e,t,n){function w(e){var t=[];$(e).each(function(e,n){t.push(n.id)});return t}function E(e){var t=w(e),n=t.length,r=Math.ceil(n/15),i=[],s=0;for(var o=0;o<r;o++){i.push(t.slice(o*15,(o+1)*15))}return i}function S(e){var t=[];$(e).each(function(e,n){if(!n.isStatic){t.push(n.id)}});return t}function x(e){var t=["poi","hotelarea","tradingArea","subway"],n=false;for(var r=0,i=e.length;r<i;r++){if($.inArray(e[r],t)!==-1){n=true;break}}return n}var r=typeof r==="function"&&!r.amd?r:false;var i=n(929);t.qShowTip=function(e){var t=e.srcElement||e.target;var n=document.getElementById("tipIPanel");if(n){n.innerHTML='<b class="top"></b>'+unescape(t.getAttribute("data-tip"));n.style.display="block";n.style.top=(e.pageY||e.clientY+(document.documentElement.scrollTop||document.body.scrollTop))+15+"px";n.style.left=(e.pageX||e.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft))-55+"px"}};t.qHideTip=function(e){var t=document.getElementById("tipIPanel");if(t){t.style.display="none"}};t.rollToElement=function(e){var e=document.getElementById(e);if(e){var t=0,n=0;do{t+=e.offsetTop||0;n+=e.offsetLeft||0;e=e.offsetParent}while(e);window.scrollTo(n,t)}};t.TimerControl=function(e,t){function s(){r=setTimeout(o,t)}function o(){if(i.run()===true)s();else r=null}var n,r,i=this;this.reset=function(){this.stop();n=setTimeout(s,e)};this.run=function(){};this.stop=function(){if(n){clearTimeout(n);n=null}if(r){clearTimeout(r);r=null}}};new function(){$jsex.event.adds=function(e,t){var n=[];for(var r in t){n.push($jsex.event.add(e,r,t[r]))}return n}};var s=window.getQueryInfo=function(e){if(e.ret===false){return""}else{return{q:e.info.q,key:e.info.key,qtype:e.info.qtype,poiInfo:e.info.pois,queryInfo:e.queryInfo}}};var o=[["免费宽带","HGYGeXFY"],["商务中心","ownT_WG6"],["游泳池","0Ie44fNU"],["健身房","yYdMIL83"],["餐厅","MMObDrW4"],["新开业/装修","dDjWmcqr"],["会议室","Y0LTFGFh"],["早餐","6X7_yoo3"],["接待外宾","8F2RFLSO","0"]];var u={"酒店名":"L0F4L3C1","星级":"ZO1FcGJH","一句话":"J6TkcChI","评论个数":"HCEm2cI6","评论评分":"08F7hM4i","主题":"8dksuR_","酒店档次":"YRHLp-jc","是否是cwt成员":"pl6clDL0","是否是LP推荐酒店":"HFn32cI6","是否是500强公司签约酒店":"vf_x4Gjt","地址":"2XkzJryU","静态酒店":"vNfnYBK6","google地标信息":"TDoolO-H","baidu地标信息":"pk4QaDyF","商圈":"x0oSHP6u","无烟房":"z4VVfNJo","品牌":"5_VrVbqO","图片ID":"VAuXapLv","图片个数":"U1ur4rJN","评论排名":"px3FxFdF","地图缩放":"U3rHP23d","头图baseurl":"ZYCXZYHIRU"};t.getAllHotelsURL=function(e){var t=function(){var e=[];e.push("L0F4L3C1");e.push("ZO1FcGJH");e.push("YRHLp-jc");e.push("TDoolO-H");e.push("pk4QaDyF");return"attrs="+e.join(",")}();var n=function(e){var n=[t];n.push("showAllCondition=1");n.push("showBrandInfo=1");n.push("showNonPrice=1");n.push("showFullRoom=1");n.push("showPromotion=1");n.push("showTopHotel=1");n.push("showAllHotel=1");n.push("output=json1.1");n.push("v="+Math.random());n.push("requestTime="+(new Date).getTime());n.push("mixKey="+i.getMixKey());n.push("requestor=RT_HSLIST");for(var r in e){if(e.hasOwnProperty(r)){var s=e[r];if(s){n.push(r+"="+encodeURIComponent(s))}}}if(typeof newfilterid!="undefined"&&newfilterid!=""){filterid=newfilterid;n.push("filterid="+newfilterid)}else if(typeof filterid!="undefined"&&filterid!=""){n.push("filterid="+filterid)}var o="/render/renderAPIList.jsp?"+n.join("&");return o};var r=function(e,t){var n=[];for(var r=0,i=(e||[]).length;r<i;r++){n.push(e[r].value)}return n.join(t||",")};var s={cityurl:cityurl,q:query,fromDate:fromDate,toDate:toDate};var u=e.position;if(u&&u.length>0){var a=u[0];if(a.category&&a.category.value!="商圈"){s.q=s.q?s.q+" "+a.value:a.value;s.lq=a.value}else{s["PF_x0oSHP6u"]=a.value}}var f=e.sort;if(f&&f.length>0){var l=f[0].value.split("-");s.sort=l[0];s.desc=l[1]}var c=e.distance;if(c&&c.length>0){s.distance=parseInt(e.distance[0].value)*1e3}var h=e.status;if(h&&h.length>0){for(var p=0,d=h.length;p<d;p++){switch(h[p].value){case"kdh":s.kdh=1;break;case"tuan":s.tuan=fromDate+","+toDate;break;case"gr":s.gr=1;break;case"dh":s.dh=1}}}var v=e.equip;if(v&&v.length>0){for(var p=0,d=v.length;p<d;p++){var m=o[v[p].value];if(m&&m[1]){s["PF_"+m[1]]=m[2]?m[2]:"Y"}}}s.levels=r(e.grade);s["PF_5_VrVbqO"]=r(e.brand);s.prs=r(e.price,";");s.hotelType=r(e.hotelType);s.levels=r(e.grade);s.coord=e.coord;s.coordDist=e.coordDist;s.bounds=e.bounds;s.limit="0,100";return n(s)};var a={isWebFree:{title:"免费宽带",confirmedValue:"Y"},HasIndoorPool:{title:"游泳池",confirmedValue:"Y"},isNewHotel:{title:"新开业/装修",confirmedValue:"Y"},HasRestaurant:{title:"餐厅",confirmedValue:"Y"},HasBusinessCenter:{title:"商务中心",confirmedValue:"Y"},HasFitnessRoom:{title:"健身房",confirmedValue:"Y"},HasMeetingORBanquetSpace:{title:"会议室",confirmedValue:"Y"},hasReceiveVisitor:{title:"接待外宾",confirmedValue:"0"},HasNonSmokingAvailable:{title:"吸烟室",confirmedValue:""},hasBreakfast:{title:"早餐",confirmedValue:""}};window.getEquipInfos=function(e){var t=[];for(opt in e){var n=opt,r=e[n];if(a[n]&&r==a[n].confirmedValue){t.push(a[n].title)}}return t.join("、")};var f=function(){var e;if(window.MapType){if(!GBrowserIsCompatible.isMapSupport)e="none";else e=window.MapType}else{e="none"}return e==="none"||window.isMapDown?"none":e};var l=function(){var e=null;if(typeof poiInfo!=="undefined"&&poiInfo.length>0){e=poiInfo;$.each(e,function(e,t){t.idx=e})}return e};var c=function(e,t){if(!t){t=""}if(e&&e.length>0){return["/render/renderAPIDetail.jsp?"+t,"&updatePrice=1","&showAllCondition=1","&requestor=RT_HSLIST","&attrs=vNfnYBK6","&output=json1.1","&showPromotion=1","&showNonPrice=1","&showPrices=0","&cityurl=",window.cityurl,"&fromDate=",fromDate,"&toDate=",toDate,"&ids=",e,"&v=",Math.random(),"&filterid=",window.filterid,"&requestTime=",(new Date).getTime(),"&mixKey=",i.getMixKey()].join("")}return""};var h=function(e,t){if(!t){t=""}var n=QunarDate.parse(fromDate),r=QunarDate.parse(toDate),s=QunarDate.plus(new Date(QunarDate.today().getTime()),30),o=fromDate,u=toDate,a=24*60*60*1e3,f=false;if(QunarDate.compareDate(r,n)/a===1){if(QunarDate.compareDate(n,s)/a>=0){o=QunarDate.format(new Date(QunarDate.today().getTime()+1*a));u=QunarDate.format(new Date(QunarDate.today().getTime()+2*a));f=true}}else{o=QunarDate.format(new Date(QunarDate.today().getTime()+1*a));u=QunarDate.format(new Date(QunarDate.today().getTime()+3*a));f=true}if(f&&e&&e.length>0){return["/render/renderAPIDetail.jsp?"+t,"&updatePrice=1","&showAllCondition=1","&requestor=RT_HSLIST","&attrs=vNfnYBK6","&output=json1.1","&showPromotion=1","&showNonPrice=1","&showPrices=0","&cityurl=",window.cityurl,"&fromDate=",o,"&toDate=",u,"&ids=",e,"&v=",Math.random(),"&filterid=",window.filterid,"&requestTime=",(new Date).getTime(),"&mixKey=",i.getMixKey()].join("")}return""};var p=function(e){if(e&&e.length>0){return["//review.qunar.com/api/h/hotelMultiTitles?","seq=",e.join(","),"&requestTime=",(new Date).getTime()].join("")}return""};var d=function(){return"//hotel.qunar.com/render/activityContext.jsp"};var v=function(e){if(e&&e.length>0){return["//review.qunar.com/api/h/brief/query?","seqs=",e.join(","),"&requestTime=",(new Date).getTime()].join("")}return""};var m=function(e){if(e&&e.length>0){return["/render/fastBookingPriceAPI.jsp?","&cityurl=",window.cityurl,"&fromDate=",fromDate,"&toDate=",toDate,"&ids=",e,"&v=",Math.random()].join("")}return""};var g=function(e,t){if(e===t){return true}if(!e&&t||!t&&e){return false}if(!e&&!t){if(e===t){return true}else{return false}}var n=typeof e;var r=typeof t;if(n!=r){return false}if(n=="number"){var i=isNaN(e);var s=isNaN(t);if(i&&!s||s&&!i){return false}if(i&&s){return true}else{return e==t}}else if(n=="string"||n=="boolean"||n=="undefined"){return e==t}else if(n=="function"){return g(e.toString(),t.toString())}else if(n=="object"){var o={};for(var u in e){if(e.hasOwnProperty(u)){o[u]=1;if(g(e[u],t[u])){continue}else{return false}}}for(var u in t){if(t.hasOwnProperty(u)){if(o[u])continue;else return false}}return true}};var y=function(e){var t=[];var n=e&&e.queryInfo&&e.queryInfo.queries;if(n){var r={};for(var i=0,s=n.length;i<s;i++){for(var o in n[i]&&n[i]["qp"]||{}){r[o]=1}}for(var u in r){t.push(u)}t.sort()}return t};var b=function(e,t,n,r){var i=t||[];var s=[],o=0,u=0;while(1){if(++u>1e3)break;var a=-1,f;for(var l=0,c=i.length;l<c;l++){var h,p;if((h=i[l])&&(p=e.indexOf(h,o))!=-1&&(p<a||a==-1)){a=p;f=h}}if(a===-1){if(r){s.push(escapeHtml(e.substr(o)))}else{s.push(e.substr(o))}break}if(r){s.push(a!=o?escapeHtml(e.substring(o,a)):"");s.push(n.replace("{1}",escapeHtml(f)))}else{s.push(a!=o?e.substring(o,a):"");s.push(n.replace("{1}",f))}o=a+f.length}return s.join("")};e.exports={contentEquals:g,getPolygonsInfo:l,getMapType:f,getPriceURL:c,getCommentURL:p,getInterCommentURL:v,getFbPriceURL:m,getActivityURL:d,getQPTypes:y,doLight:b,getHotelAllSeqs:w,getNotStaticHotelSeqs:S,checkIsSelectPOI:x,getQueryInfo:s,getCommentAllSeqs:E,getPriceURLNew:h}},931:function(e,t){function i(){return r.getQHFP()}var n=typeof n==="function"&&!n.amd?n:false;var r;(function(e,t){function n(t){var n=e.browser;if(n.msie&&(n.version=="6.0"||n.version=="7.0"||n.version=="8.0")&&t.indexOf("@")!=-1){return true}return false}function i(e){if(e){Cookie.refresh()}return Cookie.values["flowidList"]}t.init_qhotel_analysis=function(s){var o=location.href.split(new RegExp("[?#&]ex_track=([^&#]*)"));if(o.length>=2){o=o[1]}else{o=""}var u={cityurl:t.cityurl,fromDate:t.fromDate,toDate:t.toDate,v:Math.random()+t.qParam+o};if(t.fromParam&&t.fromParam.split){var a=t.fromParam.split("&");if(e.isArray(a)){e.each(a,function(e,t){if(t){var n=t.split("=");if(n&&n[1]){u[n[0]]=n[1]}}})}}if(t.SERVER_GROUP){u.sgroup=t.SERVER_GROUP}var f=i();var l={};if(f){l.flowidList=f}r=new t.QHTrace("ZS","L_",e.param(e.extend({},u,l),true),"",true);var c=1;e(s).bind("pagerClick",function(e,t){c=t+1});if(t.globalEvent){var h=e("#jxContentPanel");var p=e("#js_list_fixprice").length>0;var d=function(e,t){if(!e||!e.indexOf){return e}var n=e.indexOf(t);if(n>=0){var r=e.substring(0,n);var i=e.substring(n);n=i.indexOf("&");if(n>=0){i=i.substring(n)}else{i=""}if(r.charAt(r.length-1)=="&"){r=r.substring(0,r.length-1)}e=r+i}return e};var v=function(e,t,i){var s=new RegExp("^/city/[^/]+/dt-.*$"),o=new RegExp("^//hotel.qunar.com/city/[^/]+/dt-.*$"),u=new RegExp("^//bnb.qunar.com/city/[^/]+/dt-.*$"),a=new RegExp("^//discount.qunar.com/city/[^/]+/.*$"),f=e.html();if(n(f)){return}var l=e.attr("href");if(l.indexOf("#")<0){l+="#"}l=d(l,"QHFP");l=d(l,"QHPR");var h=0;if(!t){var v=e.parents(".js_list_block:first");h=v.find(".js_hotel_num").text()||v.index()+(p?0:1)}else{h=i||0}var m=["&QHPR=",c,"_",h,"_",p?"1":"0","_",t?"1":"0"].join("");if(s.test(l)||o.test(l)||u.test(l)||a.test(l)){e.attr("href",l+r.generate()+m)}};var m=function(e,t,i,s){var o=new RegExp("^/city/[^/]+/dt-.*$"),u=new RegExp("^//hotel.qunar.com/city/[^/]+/dt-.*$"),a=new RegExp("^//bnb.qunar.com/city/[^/]+/dt-.*$"),f=new RegExp("^//discount.qunar.com/city/[^/]+/.*$");if(n(t)){return""}if(e.indexOf("#")<0){e+="#"}e=d(e,"QHFP");e=d(e,"QHPR");var l=s||0;var h=["&QHPR=",c,"_",l,"_",p?"1":"0","_",i?"1":"0"].join("");if(o.test(e)||u.test(e)||a.test(e)||f.test(e)){return e+r.generate()+h}};t.globalEvent.bind("listDSellRendered",function(t,n){if(n.container){n.container.find("a").each(function(){var t=e(this);t.attr("href",t.attr("href")+r.generate())})}});t.globalEvent.bind("priceRender",function(){h.find(".js_list_price a").each(function(){var t=e(this);v(t)})});t.globalEvent.bind("hotelMarkersInited",function(t,n){e.each(n,function(t,n){var r=n.hotelTip,i=n.index;var s=n.hotelInfo.href,o=m(s,"",true,i+1);n.hotelInfo.href_param=o;e(r).find("a").each(function(t,n){var r=e(this);v(r,true,i+1)})})});t.globalEvent.bind("hotelMarkerUpdate",function(t,n){if(n){var r=n.hotelTip,i=n.index;var s=n.hotelInfo.href,o=m(s,"",true,i+1);n.hotelInfo.href_param=o;e(r).find("a").each(function(t,n){var r=e(this);v(r,true,i+1)})}});t.globalEvent.bind("filterChanged",function(t,n){var s=n.limit.split(",");var o=s[0]-0;if(o==0){c=1}delete n["limit"];var a=i();var f={};if(a){f.flowidList=a}r.navigate("ZS","S_",n?e.param(e.extend({},u,n,f),true):"")});t.globalEvent.bind("firstRenderAPIList",function(t,n){var s=n.limit.split(",");var o=s[0]-0;if(o==0){c=1}delete n["limit"];var a=i(true);var f={};if(a){f.flowidList=a}r.navigate("ZS","S_",n?e.param(e.extend({},u,n,f),true):"")});var g=e("#HotBrandHotelCommend_Div");t.globalEvent.bind("HotBrandRender",function(){g.find("a").each(function(){var t=e(this);if(n(t.html())){return}t.attr("href",t.attr("href")+r.generate())})})}var y=e("#sForm");y.append('<input type="hidden" name="QHFP" value="'+r.pageFrom+'"/>');e("#hotsearch_div").find("a").each(function(){var t=e(this);if(n(t.html())){return}t.attr("href",t.attr("href")+r.generate())})}})(jQuery,window);e.exports={getQHFP:i}},932:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;var r=false;t.initTrans=function(e){if(r)return;r=true;var t=$.param($.extend({},e,{cityurl:window.cityurl,fromDate:window.fromDate,toDate:window.toDate,v:Math.random(),QHFP:window.QHPTrace.QHFP,QHP:window.QHPTrace.QHP}));t+=window.fromParam+window.qParam;var n=encodeURIComponent("refer")+"="+encodeURIComponent(document.referrer);var i="/trans?"+t+"&"+n;var s=new Image;s.onload=function(){s.onload=null;s=null};s.src=i}},933:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;var i=n(934);var s=n(935);var o=n(936);e.exports={qunarlinks:i,marketCode:o.refresh,gongyu:s}},934:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;var r=false;var i=function(){if(r)return;if(!window.globalEvent){window.globalEvent=$({})}r=true;(new Image).src="//www.qunar.com/twell/cookie/allocateCookie.jsp";AD_Manage.qde_query=function(e){e("fromDate="+(typeof fromDate!=="undefined"?fromDate:"")+"&toDate="+(typeof toDate!=="undefined"?toDate:"")+"&to="+cityNameEn.replace(/(%20|\s)/ig,"_")+"&toCity="+encodeURIComponent(cityName)+(typeof isMainland==="undefined"||isMainland?"&pt=dmst":"&pt=intl"))};AD_Manage.qad_query=function(e){e("adto="+cityurl+"&pt="+(typeof isMainland==="undefined"||isMainland?"dmst":"intl")+"&rows=10")};AD_Manage.ip_query=function(e){QNR.ips(e)};QNR.AD.createQdeCallback("bottomofmap",function(){window.globalEvent.trigger("setPosition.Affix")});QNR.AD.createQdeCallback("ifrBannerHotelVendorList",function(){window.globalEvent.trigger("setPosition.Affix")});QNR.AD.createWinShowCall("listResultBottomAd1_QAD",function(e,t){if(t){AD_Manage.showHeadFoot()}});QNR.AD.createCallback("listResultBottomAd1_QAD",function(e,t){var n=t&&t.key_data&&t.key_data.length;if(window.cpc){window.cpc.qadLength=t.key_data.length||0}if(!n){e.style.display="none";return}AD_Manage.showHeadFoot();AD_Manage.modifyMore("listResultBottomAd1_QAD",window.cityName);AD_Manage.append_link_css();e.innerHTML=AD_Manage._renderHTML(t);if("undefined"!=typeof cpc&&window.isCpcCity=="true"){cpc.paintLeft()}});AD_Manage.load()};var s=function(e){if(e){setTimeout(function(){window.Logger&&window.Logger.time("Ad render");i();window.Logger&&window.Logger.timeEnd("Ad render")},e)}else{window.Logger&&window.Logger.time("Ad render");i();window.Logger&&window.Logger.timeEnd("Ad render")}};t.init=s},935:function(e,t,n){function a(e){o=e;o.isMainland&&s.init({id:"gongyuifr",box:$("#js_leftPanel").get(0),url:"//gongyu.qunar.com/roomType4Hotel/t/list",className:"gongyuad",height:"552",params:{search:{cityCode:window.cityurl,checkInTime:window.fromDate,checkOutTime:window.toDate},hash:{isWider:o.isWider()?1:0}}});u=true}function f(){if(u){o.isMainland&&s.refresh({hash:{isWider:o.isWider()?1:0}})}}var r=typeof r==="function"&&!r.amd?r:false;var i=n(309);var s=window._gongyuad_=new i;var o,u=false;e.exports={init:a,refresh:f}},936:function(e,t,n){function o(e,t){e=e||{};var n=t.utils.getHotelAllSeqs(e.hotelInfos||[]);var r=window.Cookie&&window.Cookie.values||{};if(!s){s=new i;s.init({id:"marketingga",url:"/render/ga_new.jsp",params:{hash:{v:(new Date).getTime(),pageType:"list",fromDate:window.fromDate,toDate:window.toDate,hotelSeqs:n.slice(0,3).join(","),refresh:1}}})}else{s.refresh({hash:{v:(new Date).getTime(),pageType:"list",fromDate:window.fromDate,toDate:window.toDate,hotelSeqs:n.slice(0,3).join(","),refresh:1}})}}var r=typeof r==="function"&&!r.amd?r:false;var i=n(309);var s=null;t.refresh=o},937:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;var i=n(938);e.exports={initAladin:i.init,show:i.show,hide:i.hide}},938:function(e,t,n){function u(e,t){if(e){t=t||"normal";s.show(t)}else{s.show()}}function a(e,t){if(e){t=t||"normal";s.hide(t)}else{s.hide()}}var r=typeof r==="function"&&!r.amd?r:false;var i=n(939);var s=$("#aladin");var o=function(){window.Logger&&window.Logger.time("Aladin");var e=function(){if(e.done)return;e.done=1;$.ajax({url:"//hotel.qunar.com/cityintro.jsp",data:{v:2,cityurl:window.cityurl,fromDate:window.fromDate,toDate:window.toDate,q:window.query||""},dataType:"jsonp",jsonp:"__jscallback",cache:false,success:function(e){e=e||{};i(s,e.content_aladin,30);window.Logger&&window.Logger.timeEnd("Aladin")}})};if(ihgAladin){$.ajax({url:"/price/ihgA.jsp",type:"GET",cache:false,data:{cityurl:window.cityurl,fromDate:window.fromDate,toDate:window.toDate,query:window.query||""},dataType:"text",success:function(t){var n=$.trim(t);var r=$("#aladin");if(n){r.html(n);if(!n.html()){n.hide()}window.Logger&&window.Logger.timeEnd("Aladin")}else{e()}}})}else{e()}};t.init=o;t.show=u;t.hide=a},939:function(e,t,n){function i(e,t,n){function u(){s.removeClass("e_recommend_tip").html(t);s.on("click",".js-close",function(e){e.preventDefault();s.hide();QunarStorage.ready(function(e){e.setItem("aladin_exp",o.getTime()+n*24*3600*1e3)})})}var r='<a href="#" class="close js-close" title="不再推荐"></a>',i=30,s=$(e),o=typeof SERVER_TIME==="undefined"?new Date:SERVER_TIME;if(s.length==0){return}if(!t){s.hide();return}n=typeof n==="undefined"?i:n;QunarStorage.ready(function(e){var t;try{t=e.getItem("aladin_exp")}catch(n){}if(!t||t<o.getTime()){u()}else{s.hide()}})}var r=typeof r==="function"&&!r.amd?r:false;n(22);e.exports=i},940:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;var i=n(941);e.exports={hotbrand:i}},941:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;var r=function(){window.Logger&&window.Logger.time("HotBrand");$.ajax({url:"//hotel.qunar.com/hotbrand.jsp",dataType:"JSONP",data:{city:window.cityName,q:window.query},jsonp:"callback",cache:false,success:function(e){var t=$("#HotBrandHotelCommend_Div");if(typeof e=="undefined"||typeof e.ret=="undefined"||typeof e.data=="undefined"||typeof e.data[0]=="undefined"||typeof e.data[0].hot_brands=="undefined"||!e.ret){t.hide();window.Logger&&window.Logger.timeEnd("HotBrand");return}var n=e.data[0].hot_brands.split(",");if(n==null||n.length==0||n.length==1&&""==n[0]){t.hide();if("undefined"==typeof window.hasHotSearch||!window.hasHotSearch){$("#hotsearch_div").hide()}window.Logger&&window.Logger.timeEnd("HotBrand");return}var r="";var i=0;$.each(n,function(e,t){if(i>=10)return false;if($.trim(t)=="")return;var n=t.asciiTrimByLength(14);if(n!=t)r+='<a href="/city/'+window.cityurl+"/q-"+encodeURIComponent(t)+"#from=topbrand&fromDate="+window.fromDate+"&toDate="+window.toDate+'" title="'+t+'">'+n+"</a> ";else r+='<a href="/city/'+window.cityurl+"/q-"+encodeURIComponent(t)+"#from=topbrand&fromDate="+window.fromDate+"&toDate="+window.toDate+'">'+t+"</a> ";i++});$("#HotBrandHotelCommend_UL").html(r);if(r!==""){t.show()}if(window.globalEvent){window.globalEvent.trigger("HotBrandRender")}window.Logger&&window.Logger.timeEnd("HotBrand")}})};t.init=r},942:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;var i=n(943);var s=n(944);e.exports={searchbox:i,searchcookie:s}},943:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;var i=n(278);var s=n(726);window.Logger&&window.Logger.time("searchbox");var o="#sForm",u="#fromParam";var a=$(o).get(0);var f=isMainland?"domestic":"intercity";var l=window.fromDateRule||1;var c=window.toDateRule||2;var h=new i(a,dchecker,{hotCityType:f,isJudgeCity:true,jqEventDispatch:true,fromRule:l,toRule:c});s.init(h);$(h).bind("gaHotcity",function(){var e=arguments[0];var t=e[0];var n=e[1]==="intercity"?"国际":"国内";var r=e[2];GARuner("listHotcity",[n,t]);GARuner("listHotcityNav",[n,t,r])});a.from.value="hotellist";var p=function(e){var t=$(u);var n=t.val();var r=n.indexOf("|");if(r!=-1){n=n.substring(0,r)}t.val(n+"|"+e)};var d=$(h);d.bind("qsug",function(){p("sug")});d.bind("qdiv",function(){p("div")});var v=function(e){var t=a.cityurl.value,n=getDetaiContextPath(e),r=[];r.push(n);r.push("/?tag=",typeof t==="undefined"?"":t);r.push("#fromDate=",window.fromDate,"&toDate=",window.toDate);r.push("&q=",a.q.value);r.push("&from=",a.from.value);r.push("&filterid=",encodeURIComponent(window.filterid||""));r.push("&showMap=0");if(window.QHTrace&&window.QHTrace.instance){r.push(window.QHTrace.instance.generate())}var i="//hotel.qunar.com"+r.join("");return i};d.bind("reloadList",function(e,t,n){a.bs.value="";a.bc.value=t;h.q.setValue(n||"");a.submit()}).bind("selectCityPoi",function(e,t){if(t){this.q.setValue(t)}else{this.q.setValue("")}}).bind("enterSug",function(e,t){if(t){switch(t.type){case"hotelName":if(t.hotelSeq){p("sugHotel");window.open(v(t.hotelSeq))}break;case"city":a.bs.value="";a.bc.value=t.city;a.cityurl.value=t.cityCode;h.toCity.setValue(t.city);$(this).trigger("citychanged",t.city);h.q.setValue("");a.submit();break;default:a.bs.value="";if(t.city){a.bc.value=t.city;a.cityurl.value=t.cityCode;h.toCity.setValue(t.city);$(this).trigger("citychanged",t.city)}h.q.setValue(t.ahead);a.submit();break}}});window.Logger&&window.Logger.timeEnd("searchbox");t.searchBox=h},944:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;var r=function(){QunarHisControl=new function(){var e=null;var t=[];this.write=function(){document.getElementById("historyFrameContainer").innerHTML='<iframe src="//history.qunar.com/history/history.html" onload="jx05CFEventFC(this)" style="width:1px;height:1px;visibility:hidden;position:absolute"></iframe>'};window.jx05CFEventFC=function(e){var n=null;try{n=e.contentWindow.QunarHistory}catch(r){}if(!n)return;for(var i=0;i<t.length;i++){try{t[i](n)}catch(r){}}};this.addListener=function(e){t.push(e)}};var e=new Date((new Date).getTime()+365*24*60*60*1e3);Cookie.setCookie("ls",cityName,e,null,"/");Cookie.deleteCookie("ft",null,"/");var t=QunarDate.parse(fromDate).getTime();var n=QunarDate.parse(toDate).getTime();QunarHisControl.addListener(function(e){e.addHotelLists({toCity:cityName,fromDate:new Date(t),toDate:new Date(n)})});QunarHisControl.write()};t.initSearchCookie=r},945:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;var i=n(946);var s=n(955);e.exports={initCPC:i.init,ListPromotionBar:s}},946:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;var i=n(947);n(949);n(950);n(951);n(952);n(953);n(954);var s=null;t.init=function(e){var t=new i;window.cpc=t;if("undefined"!=typeof t&&window.isCpcCity==="true"){var n=$.extend({},{fromDate:fromDate,toDate:toDate,cityurl:cityurl,cityName:cityName,query:query,isMainland:isMainland});t.init(n);$(t).bind("cpcReady",function(e,t){});$(t).bind("cpcRightReady",function(){if(window.mapManager)$(window.mapManager).trigger("resetMapPosition")});var r={basicOptions:{priceUrl:"/price/cpcDetail.jsp",basicUrl:"/render/cpcDetailBasic.jsp",priceRequestAmout:15,pricePanel:"cpc_basic_price",infoPanel:"cpc_basic_info",scrollPanel:"cpc_basic_scroll",maxNum:3},mapOptions:{scrollPanel:"cpc_map_scroll",trafficPanel:"cpc_trafficPanel",mapPanel:"cpc_maparea",mapType:e},commentsOptions:{scrollPanel:"cpc_comments_scroll"}};$(t).bind("popup",function(e,t){if(!s){s=new window.hotel.list.cpc.cpcRBox(r)}else{s.setOptions(r)}s.open(t)})}else if(window.isCpcCity==="false"){}}},947:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;var i=n(948);var s=n(763);var o=false;var u=function(){this.url="/render/renderCPCAPI.jsp";this.data;this.times=0;this.opts;this.hashcode=0;this.isRefresh=false;this.isPaint=false;this.isChangeQ=false;this.hotelIds;this.hotelPrices;this.maxCount;this.leftIfmReady=false;this.leftCpcReady=false;this.qadLength};u.prototype={constructor:u,init:function(e){this.opts=e;o=e.isMainland;this.getData()},getUrl:function(){var e=[];var t=this.opts;e.push("output=json1.1");e.push("requestor=RT_HSLIST");e.push("showNonPrice=1");e.push("cityurl="+t.cityurl||"");e.push("fromDate="+t.fromDate||"");e.push("toDate="+t.toDate||"");e.push("q="+encodeURIComponent(t.query)||"");if(0==this.times||this.isChangeQ){var n={"酒店名":"L0F4L3C1","评论评分":"08F7hM4i","地址":"2XkzJryU","商圈":"x0oSHP6u","图片ID":"VAuXapLv","酒店商圈":"xaSZV4wU","星级":"ZO1FcGJH","档次":"YRHLp-jc"};e.push("attrs="+function(){var e=[];for(var t in n){e.push(n[t])}return e.join(",")}());e.push("showBrandInfo=1");e.push("showFullRoom=1");e.push("showTopHotel=1")}else{e.push("attrs=vNfnYBK6");e.push("showPrices=0");e.push("last="+this.hashcode);e.push("ids="+this.hotelIds.join(","))}return this.url+"?"+e.join("&")},updateStatus:function(e){if(this.times==0){this.data=e;if(this.checkNoResult(e)){this.isPaint=true;if(e.hotels.length<12&&this.opts.query!=""){this.isChangeQ=true;this.opts.query=""}else{this.idsReady=true}}else{if(this.opts.query!=""){this.opts.query="";this.isPaint=true;this.isChangeQ=true}}}else{if(this.isPaint&&!this.isChangeQ){this.isPaint=false;this.isRefresh=true}else if(this.isChangeQ&&this.checkNoResult(e)){this.isPaint=true;this.isRefresh=false;this.mergeCpcData(e);this.isChangeQ=false;this.idsReady=true}else{this.isPaint=false;this.isRefresh=false;this.isChangeQ=false}}},mergeCpcData:function(e){var t=this,n=t.maxCount||12,r=e.hotels;if("undefined"==typeof t.data){t.data=e;return}for(var i=0,s=r.length;i<s;i++){if("undefined"==typeof t.hotelPrices[r[i].id]){var o=s>2&&i>1?"chaodi_left_"+(i-1):"chaodi_right_"+(i+1);this.updateHotelInfo(r[i],o);t.data.hotels.push(r[i]);if(t.data.hotels.length==n){break}}}},updateHotelInfo:function(e,t){var n=this;e.bookingURL=n.paintTools.buildBookingUrl(e,t);e.starInfo=n.getHotelStarInfo(e);e.starTitle=n.getHotelStarTitle(e);e.priceStr=n.getHotelPriceStr(e)},getData:function(){var e=this;var t=e.getUrl();var n=new ScriptRequest({oncomplete:function(t){if("undefined"!=typeof t){e.updateStatus(t);if(e.isPaint){e.paint(t)}else if(e.isRefresh){e.refresh(t)}else{return}}e.times++;if(e.times<15){e.getData()}},ontimeout:function(){}});n.send(t,1e4)},paint:function(e){this.analysisData();if(!this.opts.isMainland){this.paintRight(2)}if(this.leftIfmReady&&!this.leftCpcReady){this.paintLeft()}this.hashcode=e.hashcode||""},analysisData:function(){var e=[],t={},n=this.data.hotels,r=n.length;this.responseCount=r;this.hotelMap={};var i=this;for(var s=0;s<r;s++){e.push(n[s].id);t[n[s].id]=n[s].price;this.data.hotels[s].area=""!=n[s].attrs.tradingArea?(n[s].attrs.tradingArea+"商圈").replace("商圈商圈","商圈"):""!=n[s].attrs.HotelArea?(n[s].attrs.HotelArea+"商圈").replace("商圈商圈","商圈"):"";var o=this.data.hotels[s].bookingURL;var u=r>2&&s>1?"chaodi_left_"+(s-1):"chaodi_right_"+(s+1);n[s].bookingURL=this.paintTools.buildBookingUrl(n[s],u);n[s].starInfo=this.getHotelStarInfo(n[s]);n[s].starTitle=this.getHotelStarTitle(n[s]);n[s].priceStr=this.getHotelPriceStr(n[s]);i.hotelMap[n[s].id]=n[s]}this.hotelIds=e;this.hotelPrices=t;if(this.idsReady){$(this).triggerHandler("cpcReady",{ids:this.hotelIds})}},paintRight:function(e){window.Logger&&window.Logger.time("CPC Right");if(!this.checkNoResult(this.data)){return}var t=this.data.hotels.slice(0,e);if(t.length==0)return;var n;n=this.createRightHtml(t);$("#rightCpcAd").remove();$("#jxMapBootAD").append(n);$(this).triggerHandler("cpcRightReady");window.Logger&&window.Logger.timeEnd("CPC Right")},updateRightHotelInfo:function(e,t){var n=_hotelName1=_hotelName2=t.attrs.hotelName||"",r=_cpcRoomType1=_cpcRoomType2=t.cpcRoomType||"",i=_hotelAddress1=_hotelAddress2=t.attrs.hotelAddress||"",s=t.wrapperName||"";if(n.length>12){_hotelName1=n.substr(0,12)+"..."}if(n.length>12){_hotelName2=n.substr(0,18)+"..."}if(r.length>6){_cpcRoomType1=r.substr(0,6)+"..."}if(i.length>25){_hotelAddress1=i.substr(0,25)+"..."}if(r.length>10){_cpcRoomType2=r.substr(0,10)+"..."}if(i.length>16){_hotelAddress2=i.substr(0,16)+"..."}if(s.length>6){s=s.substr(0,6)+"..."}return{index:e,id:t.id,img:t.attrs.imageID,name:t.attrs.hotelName,_name1:_hotelName1,_name2:_hotelName2,cpcRoomType:t.cpcRoomType,_cpcRoomType1:_cpcRoomType1,_cpcRoomType2:_cpcRoomType2,area:t.area,starInfo:t.starInfo,starTitle:t.starTitle,hotelAddress:t.attrs.hotelAddress,_hotelAddress1:_hotelAddress1,_hotelAddress2:_hotelAddress2,priceStr:t.priceStr,wrapperName:t.wrapperName,_wrapperName:s}},createRightHtml:function(e){var t=[];var n=this;$.each(e,function(e,r){t.push(n.updateRightHotelInfo(e,r))});var r=['<h3 class="hottitle">酒店推广</h3>'];for(var i=0,s=t.length;i<s;i++){r=r.concat(this.createSingleHtml(t[i]))}var o=document.createElement("div");o.id="rightCpcAd";$(o).addClass("b_hotarea").addClass("no_line").addClass("cpcboxbg");o.innerHTML=r.join("");return o},paintLeft:function(){function i(e){var t=e.qadLength;if(!t){return 10}else if(t<10){return 10-t}else{return 0}}function s(t){var n=(o?0:2)+e;t.hotelPrices=function(){var e=0;var r=t.hotelPrices;var i={};for(var s in r){i[s]=r[s];e++;if(e==n){break}}return i}();t.hotelIds=t.hotelIds.slice(0,n);t.data.hotels=t.data.hotels.slice(0,n);t.maxCount=n;t.data.responseCount=t.responseCount||0;t.paintTools.cpcGARunner(t.data)}window.Logger&&window.Logger.time("CPC Left");if(!this.leftIfmReady){this.leftIfmReady=true}var e=i(this);if(!this.checkNoResult(this.data)){return}s(this);var t=this.opts.isMainland?0:2;var n=this.data.hotels.slice(t,e+t),r;if(n.length==0)return;r=this.createLeftHtmls(n);$("#leftCpcAd").remove();$("#jxBootomAD").after(r);this.leftCpcReady=true;window.Logger&&window.Logger.timeEnd("CPC Left")},updateLeftHotelInfo:function(e,t){var n=_hotelName1=_hotelName2=t.attrs.hotelName||"",r=_cpcRoomType1=_cpcRoomType2=t.cpcRoomType||"",i=_hotelAddress1=_hotelAddress2=t.attrs.hotelAddress||"",s=t.wrapperName||"";if(n.length>12){_hotelName1=n.substr(0,12)+"..."}if(n.length>18){_hotelName2=n.substr(0,18)+"..."}if(r.length>6){_cpcRoomType1=r.substr(0,6)+"..."}if(i.length>25){_hotelAddress1=i.substr(0,25)+"..."}if(r.length>10){_cpcRoomType2=r.substr(0,10)+"..."}if(i.length>16){_hotelAddress2=i.substr(0,16)+"..."}if(s.length>6){s=s.substr(0,6)+"..."}return{index:e,id:t.id,img:t.attrs.imageID,name:t.attrs.hotelName,_name1:_hotelName1,_name2:_hotelName2,cpcRoomType:t.cpcRoomType,_cpcRoomType1:_cpcRoomType1,_cpcRoomType2:_cpcRoomType2,area:t.area,starInfo:t.starInfo,starTitle:t.starTitle,hotelAddress:t.attrs.hotelAddress,_hotelAddress1:_hotelAddress1,_hotelAddress2:_hotelAddress2,priceStr:t.priceStr,wrapperName:t.wrapperName,_wrapperName:s}},createSingleHtml:function(e){var t=Hogan.compile(i.tmp_single);var n=t.render(e);return n},createLeftHtmls:function(e){var t=[];var n=this;$.each(e,function(e,r){t.push(n.updateLeftHotelInfo(e,r))});var r=['<h3 class="hottitle">酒店推广</h3>'];for(var i=0,s=t.length;i<s;i++){r=r.concat(this.createSingleHtml(t[i]))}var o=document.createElement("div");o.id="leftCpcAd";o.setAttribute("class","b_hotarea no_line");o.innerHTML=r.join("");return o},open:function(e){tryFixIe6();var t=this;var n=t.hotelMap[e];if(n){$(t).trigger("popup",n);trackLogger({city:window.cityurl,query:window.query,checkin:window.fromDate,checkout:window.toDate,click_time:(new Date).toUTCString(),name:n.hotelName,seq:n.id,area:n.area,wrapperid:n.wrapperId,wrappername:n.wrapperName,roomtype:n.cpcRoomType,price:n.price,bookingsource:"chaodi_"+n.source,source:n.source})}},paintTools:{getCpcClass:function(e,t){var n;if(e%2!=1&&e+1!=t){n=""}else{n="";if(e%2==1){n+=" odd"}if(e+1==t){n+=" end"}n=n}return n},buildDetailLink:function(e,t){var n=getDetaiContextPath(e.id);return[n,"/?tag=",typeof this.opts.cityurl==="undefined"?"":this.opts.cityurl,"#fromDate=",this.opts.fromDate,"&toDate=",this.opts.toDate,"&q=",encodeURIComponent(window.query),"&from="+t].join("")},buildBookingUrl:function(e,t){var n=/from=\w*/g,r=e.bookingURL||"",i=r.match(n);if(i!=null){r=r.replace(n,"from="+t)}else{r+="&from="+t}if(r.match(/&q=\w*/g)==null){r=r+"&q="+encodeURIComponent(window.query)}if(r.match(/&retailPrice=\w*/g)==null){r=r+"&retailPrice="+e.price}if(r.match(/&QHP=\w*/g)==null){var o;s&&(o=s());o&&(r+="&QHP="+o)}return r},cpcGARunner:function(e){try{var t=this;var n=0;if("undefined"!=typeof e.hotels){n=e.hotels.length}var r=n>2?2:n,i=n>2?n-2:0;for(var s=0,u=e.hotels;s<n;s++){var a={},f=u[s];if(!o){if(s<2){f.source="right_"+(s+1)}else{f.source="left_"+(s-1)}}else{f.source="left_"+(s+1)}a["checkin"]=e.info.fromDate;a["checkout"]=e.info.toDate;a["cityurl"]=e.info.cityurl;a["query"]=window.query;a["request_time"]=(new Date).toUTCString();a["hotelname"]=f.attrs.hotelName;a["seq"]=f.id;a["area"]=f.area;a["wrapperid"]=f.wrapperId;a["wrappername"]=f.wrapperName;a["roomtype"]=f.cpcRoomType;a["price"]=f.price;a["source"]=f.source;a["type"]="CPC_LIST_PV1";trackLogger(a)}trackLogger({cityurl:e.info.cityurl,query:window.query,checkin:e.info.fromDate,checkout:e.info.toDate,requesttime:(new Date).toUTCString(),requestcount:12,responsecount:e.responseCount,shownCount:n,type:"CPC_LIST_PV2"})}catch(l){}},STARS_INFO:["","一星级","二星级","三星级","四星级","五星级"],GRADES_INFO:["","经济型","舒适型","高档型","豪华型",""]},refresh:function(e){if("undefined"==typeof e.hotels||0==e.hotels.length){return}var t={};var n=e.hotels;for(var r=0,i=n.length;r<i;r++){if("undefined"!=typeof this.hotelPrices[n[r].id]&&n[r].price!=this.hotelPrices[n[r].id]&&!isNaN(n[r].price)){var s=i>2&&r>1?"left_"+(r-1):"right_"+(r+1);n[r].bookingURL=this.paintTools.buildBookingUrl(n[r],s);this.refreshOnePrice(n[r],r)}}if("undefined"!=typeof e.hashcode){this.hashcode=e.hashcode}},refreshOnePrice:function(e,t){var n=e.id;this.hotelPrices[n]=e.price;if("undefined"==typeof this.data.hotels[t])return;e.priceStr=this.getHotelPriceStr(e);this.data.hotels[t].price=e.price;this.data.hotels[t].bookingURL=e.bookingURL;this.data.hotels[t].cpcRoomType=e.cpcRoomType;this.data.hotels[t].priceStr=e.priceStr;var r=this.data.hotels[t];var i=$("#cpc-"+n);if(i.length==0)return;i=i[0];var s=i.cloneNode(true);(function(){var e=s.getElementsByTagName("a");for(var t=0,n=e.length;t<n;t++){if(e[t].getAttribute("data-type")=="cpc-booking"){if(r.price!=-1&&r.price!=0){e[t].innerHTML="查看详情"}else if(r.price==-1){e[t].innerHTML="订完"}}}})();(function(){if(r.cpcRoomType=="")return;var e=s.getElementsByTagName("h5");var t=_cpcRoomType2=_cpcRoomType=r.cpcRoomType;var n=r.attrs.hotelName||"";if(_cpcRoomType.length>5){t=_cpcRoomType.substr(0,5)+"..."}if(_cpcRoomType.length>10){_cpcRoomType2=_cpcRoomType.substr(0,10)+"..."}if(n.length>15){n=n.substr(0,15)+"..."}for(var i=0,o=e.length;i<o;i++){if(e[i].getAttribute("data-type")=="cpc-rt"&&e[i].className.indexOf("landscape")!=-1){var u=[];u.push('<a href="javascript:void(0)"><span title="'+r.attrs.hotelName+"-"+r.cpcRoomType+'">'+n+"</span>");u.push('-<span title="'+r.attrs.hotelName+"-"+r.cpcRoomType+'">'+t+"</span>");u.push("</a>");e[i].innerHTML=u.join("")}if(e[i].getAttribute("data-type")=="cpc-rt"&&e[i].className.indexOf("portait")!=-1){var u=[];u.push('<a href="javascript:void(0)"><span title="'+r.attrs.hotelName+"-"+r.cpcRoomType+'">'+n+"</span>");u.push('-<span title="'+r.attrs.hotelName+"-"+r.cpcRoomType+'">'+_cpcRoomType2+"</span>");u.push("</a>");e[i].innerHTML=u.join("")}}})();(function(){var t=s.getElementsByTagName("div");for(var n=0,i=t.length;n<i;n++){if("undefined"!=typeof e.wrapperName&&t[n].getAttribute("data-type")=="cpc-wrapper"&&t[n].className.indexOf("landscape")!=-1){t[n].innerHTML=r.wrapperName+"报价";t[n].setAttribute("title",r.wrapperName)}if("undefined"!=typeof e.wrapperName&&t[n].getAttribute("data-type")=="cpc-wrapper"&&t[n].className.indexOf("portait")!=-1){var o=r.wrapperName||"";if(o.length>6){o=o.substr(0,6)+"..."}t[n].innerHTML=o+"报价";t[n].setAttribute("title",r.wrapperName)}if(t[n].getAttribute("data-type")=="cpc-price"){if(r.price!=-1){t[n].innerHTML=r.priceStr}}}})();i.innerHTML=s.innerHTML},checkNoResult:function(e){if("undefined"==typeof e||"undefined"==typeof e.hotels||0==e.hotels.length){return false}else{return true}},getHotelStarInfo:function(e){var t=this.paintTools.STARS_INFO,n=this.paintTools.GRADES_INFO,r="";if(e.attrs.hotelStars){r=t[e.attrs.hotelStars]}if(r==""){if(e.attrs.dangci){r=n[e.attrs.dangci]}}return r||""},getHotelStarTitle:function(e){var t=this.paintTools.STARS_INFO,n=this.paintTools.GRADES_INFO,r="",i="";if(e.attrs.hotelStars){r=t[e.attrs.hotelStars];i=r==""?"":"国家旅游局评定为"+r}if(r==""){if(e.attrs.dangci){r=n[e.attrs.dangci];i=r==""?"":"去哪儿网用户评定为"+r+"酒店"}}return i||""},getHotelPriceStr:function(e){var t=[],n=e.preferentialPrice;if(e.price==-1||e.price==0){return""}if(n==0){t.push("<span class='pr'>&yen;","<em>",e.price,"</em>","</span>")}else if(n>0){t.push("<span class='pr'>&yen;","<em>",parseInt(e.price+n),"</em>","</span> - <span class='pr'>&yen;","<em>",n,"</em>","</span>")}else if(n<0){t.push("<span class='pr'>&yen;","<em>",parseInt(e.price+n),"</em>","</span> + <span class='pr'>&yen;","<em>",Math.abs(n),"</em>","</span>")}return t.join("")}};e.exports=u},948:function(e,t){var n;n={tmp_single:'<div id="cpc-{{id}}" class="e_hotel_popularize clr_after {{^index}}e_hotel_popularize_first{{/index}}" data-type="cpc-booking-link" {{^jumpOut}}onclick="cpc.open(\'{{id}}\')"{{/jumpOut}} {{#jumpOut}}onclick="window.open(\'{{bookingUrl}}\')"{{/jumpOut}}>\n  <div class="landscape">\n      <p class="c1" data-type="cpc-booking-link"><img width="62" height="62" src="{{img}}" alt=""/></p>\n      <dl class="c2">\n          <dt>\n              <a href="javascript:;" data-type="cpc-rt">\n                  <span title="{{name}}-{{cpcRoomType}}">{{_name2}}</span>{{#cpcRoomType}} - <span title="{{name}}-{{cpcRoomType}}">{{_cpcRoomType2}}</span>{{/cpcRoomType}}\n              </a>\n          </dt>\n          <dd>\n              <span class="area">{{#area}}{{area}}{{/area}}</span>\n              <em {{#starInfo}}title="{{starTitle}}"{{/starInfo}} class="sort">{{starInfo}}</em>\n          </dd>\n          <dd title="{{hotelAddress}}">{{_hotelAddress1}}</dd>\n      </dl>\n      <span class="price" data-type="cpc-price">{{{priceStr}}}</span>\n      <span class="offer" data-type="cpc-wrapper" {{#wrapperName}}title="{{wrapperName}}"{{/wrapperName}}>{{#wrapperName}}{{wrapperName}}报价{{/wrapperName}}</span>\n      <a href="javascript:;" title="查看详情" data-type="cpc-booking" class="more">查看详情</a>\n  </div>\n  <div class="portait">\n    <dl class="clr_after">\n        <dt>\n            <a href="javascript:;" data-type="cpc-rt">\n                <span title="{{name}}-{{cpcRoomType}}">{{_name1}}</span>{{#cpcRoomType}} - <span title="{{name}}-{{cpcRoomType}}">{{_cpcRoomType1}}</span>{{/cpcRoomType}}\n            </a>\n        </dt>\n        <dd title="{{hotelAddress}}">{{_hotelAddress2}}</dd>\n    </dl>\n    <div class="e_hotel_p_content clr_after">\n        <p class="img" data-type="cpc-booking-link"><img width="62" height="62" src="{{img}}" alt=""/></p>\n        <ul class="hotel_p_info">\n            <li>\n                <span>{{#area}}{{area}}{{/area}}</span>\n                <em {{#starInfo}}title="{{starTitle}}"{{/starInfo}} class="sort">{{starInfo}}</em>\n            </li>\n            <li><span class="price" data-type="cpc-price">{{{priceStr}}}</span></li>\n            <li><span {{#wrapperName}}title="{{wrapperName}}"{{/wrapperName}} class="offer">{{#wrapperName}}{{_wrapperName}}报价{{/wrapperName}}</span></li>\n        </ul>\n        <a href="javascript:;" title="查看详情" data-type="cpc-booking" class="more_btn">查看详情</a>\n    </div>\n  </div>\n</div>'};n.tmp_right=n.tmp_left;e.exports=n},949:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;var i=n(763);(function(){QClass.define("hotel.list.cpc.priceRender",{initialize:function(e){this.initDate();this.options=e;this.pricePanel=$("#"+e.panel);this.initEvent()},initEvent:function(){var e=this;this.pricePanel.delegate("#lnk_cpc_morePrices","click",function(){var t=e.pricePanel.find("tr:hidden");t.show();e.sendHiddenRoomsTrack(t);$(this).hide();$(e).trigger("showMore")});$(e).bind("refresh",function(t){e.refreshPrices(t)})},initDate:function(){this.fromDate=QunarDate.parse(window.fromDate),this.toDate=QunarDate.parse(window.toDate),this.partToDate=QunarDate.plus(this.fromDate,1);this.fromDateStr=QunarDate.formatDateAsNumAndChinese(this.fromDate);this.toDateStr=QunarDate.formatDateAsNumAndChinese(this.toDate);this.partToDateStr=QunarDate.formatDateAsNumAndChinese(this.partToDate);this.partRoomStr="部分日期有房<br>"+this.fromDateStr+"至"+this.partToDateStr+"可预订"},render:function(e,t,n){var r=["<h3>其他房型</h3>"];if(e&&e.vendors&&e.vendors.length>0){this.vendor=e.vendors[0]}if(e&&e.pricePart&&e.pricePart.length>0){r=this.renderPrices(e.pricePart,t,n)}else{r=this.renderNoResult()}return r},renderNoResult:function(){if(!this.options.isPromotion){this.pricePanel.css("height",0).hide();return'<p style="text-align:center;padding:20px;">暂无其他房型报价</p>'}else{return'<p style="text-align:center;padding:20px;"> 非常抱歉，加载失败，请您稍后重试！</p>'}},renderPrices:function(e,t,n){var r=[];r.push(this.getPriceListHeader(n));e=this.sortPrices(e);this.priceObj=this.storePrices(e);var i=this.getPricesHtml(e,t,n);r=r.concat(i);r.push("</tbody></table>");if(this.shownCount>this.options.maxNum){r.push('<p id="lnk_cpc_morePrices" class="more_roompr"><a title="更多房型报价" href="javascript:;">更多房型报价&nbsp;&gt;</a></p>')}if(i.length==0){return this.renderNoResult()}else{this.pricePanel.css("height","auto").show()}return r.join("")},getPriceListHeader:function(e){var t={cpc:'<table width="100%" cellpadding="0" border="0" class="tbl_roomtype"><tbody><tr><th class="c1">房型</th><th class="c2">房型价格</th><th class="c3">房态</th><th class="c4">预订</th></tr>',promotion:'<table width="100%" cellpadding="0" border="0" class="tbl_roomtype b_promotion_detail_header"><tbody><tr><th class="c1" style="width:120px;">预订网站</th><th class="c2" style="width:auto;">房型</th><th class="c3" style="width:120px;">均价</th><th class="c4">预订</th></tr>'};return t[e]},storePrices:function(e){var t={};for(var n=0,r=e.length;n<r;n++){var i=e[n];t[i.rtHashCode]=i}this.pricesObj=t},refreshPrices:function(e){var t=this,n=t.options.hotel.id;for(var r=0,i=e.length;r<i;r++){var s=e[r];var o=t.getPriceStr(s,n);var u=$("#cpc_price_"+n+"_"+s.rtHashCode).html(o);var a=s.roomStatus;if(a==-1||a==-2){var f=u.parents("tr");if(a==-1){f.find(".js_cpc_roomStatus").text("订完");f.find(".js_cpc_roomLink").html('<a href="javascript:;" class="btn btn_disable"><span>订完</span></a>')}if(a==-2){f.find(".js_cpc_roomStatus").html(t.partRoomStr)}}}},getPricesHtml:function(e,t,n){var r=[],i=this.options.basicHotel.cpcRoomType,s=this,o=s.options.hotel,u=o.cpcRoomType||"";var a=this.shownCount=0;for(var f=0,l=e.length;f<l;f++){if(e[f].roomStatus!=-1&&e[f]&&e[f].roomType!==u){r=r.concat(s.getOnePriceHtml(e[f],a,t,n));e[f].order=a;a++}if(e[f].roomType===u){s.checkDefaultChange(e[f])}}this.shownCount=a;return r},checkDefaultChange:function(e){var t=this.options.hotel;if(e.roomStatus==-2||e.roomStatus==-1||e.price!=t.price||e.preferentialPrice!=t.preferentialPrice){$(this).trigger("defaultPriceChange",e);return}},sortPrices:function(e){e.sort(function(e,t){return e.price-t.price});return e},getOnePriceHtml:function(e,t,n,r){var i=this;var s=e.roomStatus==-2?this.partRoomStr:"有房",o=this.getPriceStr(e),u=t>i.options.maxNum-1,a=(this.options.isFb?"":"chaodi_")+this.options.basicHotel.source+"_"+(t+1),f=!this.options.isPromotion?this.buildBookingUrl(e,a):e.bookingUrl,l="",c="预订";if(e.roomStatus===-1){c="订完";l=" btn_disable";s="订完";f="javascript:;"}var h={isHidden:u,rtHashCode:e.rtHashCode,roomType:e.roomType,wrapperLogo:e.wrapperLogo,wrapperName:e.wrapperName,seq:n,price:o,roomStatus:s,url:f,bookingClass:l,text:c};var p=this.getOnePriceContent(h,r);if(!u){this.sendRoomTracklog(e,t)}return p},getOnePriceContent:function(e,t){var n={cpc:['<tr data-key="',e.rtHashCode,'"',e.isHidden?" style='display:none'":"",">",'<td class="c1">',e.roomType,"</td>",'<td class="c2"><div class="ht_prc" id="cpc_price_',e.seq,"_",e.rtHashCode,'">',e.price,"</div></td>",'<td class="c3 js_cpc_roomStatus">',e.roomStatus,"</td>",'<td class="c4 js_cpc_roomLink"><a target="_blank" href="',e.url,'" class="btn',e.bookingClass,'"><span>',e.text,"</span></a></td>","</tr>"],promotion:['<tr data-key="',e.rtHashCode,'"',e.isHidden?" style='display:none'":"",">",'<td class="c1">',e.wrapperLogo?'<img src="'+e.wrapperLogo+'"/>':e.wrapperName,"</td>",'<td class="c2">',e.roomType,"</td>",'<td class="c3"><div class="ht_prc" id="cpc_price_',e.seq,"_",e.rtHashCode,'">',e.price,"</div></td>",'<td class="c4 js_cpc_roomLink"><a target="_blank" href="',e.url,'" class="btn',e.bookingClass,'"><span>',e.text,"</span></a></td>","</tr>"]};return n[t]},buildBookingUrl:function(e,t){var n=/from=\w*/g,r=e.bookingUrl||"",s=r.match(n);if(s!=null){r=r.replace(n,"from="+t)}else{r+="&from="+t}if(r.match(/&q=\w*/g)==null){r=r+"&q="+encodeURIComponent(window.query)}if(r.match(/&retailPrice=\w*/g)==null){r=r+"&retailPrice="+e.price}if(r.match(/&QHP=\w*/g)==null){var o;i&&(o=i());o&&(r+="&QHP="+o)}return"//hotel.qunar.com"+r},sendRoomTracklog:function(e,t){var n=this.options.basicHotel;trackLogger({city:window.cityurl,query:window.query,checkin:window.fromDate,checkout:window.toDate,click_time:(new Date).toUTCString(),name:n.hotelName,seq:n.id,area:n.area,wrapperid:n.wrapperId,wrappername:n.wrapperName,roomtype:e.roomType,price:e.price,bookingsource:"chaodi_"+n.source+"_"+(t+1),source:n.source,type:"CPC_POPUP_PV"})},sendHiddenRoomsTrack:function(e){var t=this.pricesObj,n=this;e.each(function(e,r){var i=$(r).data("key");if("undefined"!=typeof t[i]){n.sendRoomTracklog(t[i],e+3)}})},getPriceStr:function(e){if(!e)return"";var t=this.vendor,n="",r=[];if(t){if(e.preferentialFlag>0){if(!t.preferentialObj&&t.preferentialDesc){t.preferentialObj={};var i;for(var s=0,o=t.preferentialDesc.length;s<o;s++){i=t.preferentialDesc[s];t.preferentialObj[i.pid]=i}}n=t.preferentialObj&&t.preferentialObj[e.preferentialFlag]&&t.preferentialObj[e.preferentialFlag].pt||""}if(e.preferentialPrice!==0){var u;if(e.preferentialFlag===0){u={};u.codebase=e.wrapperid;u.type=1}else if(e.preferentialFlag>0&&!n){u={};u.codebase=e.wrapperid;u.type=2}if(u){window.trackPreferential&&window.trackPreferential(u)}}}else if(e.preferentialType){n=e.preferentialType}r.push('<p class="h2_pirce">');if(e.preferentialPrice>0&&n==="返现"){r.push('&yen;<b class="pr">',e.price+e.preferentialPrice,"</b>",'<span class="fan"><em class="re">返</em><em class="pr">&yen;',e.preferentialPrice,"</em></span>")}else if(e.preferentialPrice>0&&n==="直减"){r.push('&yen;<b class="pr">',e.price+e.preferentialPrice,"</b>",'<span class="fan lapse"><em class="re">立减</em><em class="pr">&yen;',e.preferentialPrice,"</em></span>")}else if(e.preferentialPrice<0&&n==="税费"){r.push('&yen;<b class="pr">',e.price+e.preferentialPrice,"</b>",'<b class="pr shuifei">'+"+ &yen;",Math.abs(e.preferentialPrice),"税费</b>")}else{r.push('&yen;<b class="pr">',e.price,"</b>")}r.push("</p>");return r.join("")}})})()},950:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;(function(){QClass.define("hotel.list.cpc.basic",{initialize:function(t){this.options=t;this.priceUrl=t.priceUrl;this.basicUrl=t.basicUrl;this.priceRequestAmout=t.priceRequestAmout;this.basicInfoTpl=TrimPath.parseTemplate(e);this.timestamp=(new Date).getTime();this.maxImagesNum=t.maxImagesNum},setHotel:function(e){this.hotel=e;this.isFb=e.isFb},load:function(){this.loadPrice();this.loadBasic();this.loadScoreComments()},resizeScroll:function(e){if(e)this.options=e;var t=$("#"+this.options.scrollPanel);if(t.length==0||!this.pricePanel||!this.infoPanel)return;if(!this.scroller){this.scroller=new window.ScrollBar({container:t,zoneClass:"e_scroll_outer"});this.scroller.scrollTo(0)}var n=this.options.maxScrollHeight;var r=this.options.commonInfoHeight+(this.pricePanel.height()||0)+(this.infoPanel.height()||0)+35;if(r>n){t.css("height",n+"px")}else{t.css("height",r+"px")}this.scroller&&this.scroller.refresh()},refreshStatus:function(){this.priceRequestOrder=0,this.priceLastUpdate=-1,this.seq=this.hotel.id,this.wrapperId=this.hotel.wrapperId;if(!this.pricePanel){this.initPrice()}},initPrice:function(){this.pricePanel=$("#"+this.options.pricePanel);this.priceRender=new hotel.list.cpc.priceRender({panel:this.options.pricePanel,basicHotel:this.hotel,maxNum:this.options.maxNum,hotel:this.hotel,isFb:this.isFb,isPromotion:this.options.isPromotion});var e=this;$(this.priceRender).bind("showMore",function(){e.resizeScroll()});$(this.priceRender).bind("defaultPriceChange",function(t,n){$(e).trigger("defaultPriceChange",n)})},loadPrice:function(){this.refreshStatus();var e=this.requestHandler=(new Date).getTime();this.initPriceSearch();this.sendPriceRequest()},initPriceSearch:function(){var e=document.createElement("img");var t="//hotel.qunar.com/render/detailInit.jsp?cityurl="+cityurl+"&fromDate="+fromDate+"&toDate="+toDate+"&HotelSEQ="+this.seq;e.src=t;e=null},getPriceUrl:function(){var e;if(!this.options.isPromotion){e=this.priceUrl+"?"+["fromDate="+window.fromDate,"toDate="+window.toDate,"cityurl="+window.cityurl,"HotelSEQ="+this.seq,"codebase="+this.wrapperId,"lastupdate="+this.priceLastUpdate,"_v="+this.timestamp].join("&")}else{e=this.priceUrl+"?"+["fromDate="+window.fromDate,"toDate="+window.toDate,"cityurl="+window.cityurl,"ids="+this.seq,"codebase="+this.wrapperId,"isdetail="+1].join("&")}return e},sendPriceRequest:function(){function t(t){if(!e.requestHandler||e.requestHandler===0)return;if(t&&t.status){e.priceLastUpdate=t.status}e.receivePrices(t);e.priceRequestOrder++;$(e).trigger("priceLoad")}var e=this;$.ajax({url:e.getPriceUrl(),dataType:"json",type:"GET",success:function(e){e=e&&e.data?e.data:{};t(e)}})},receivePrices:function(e){var t=this;if(this.priceRequestOrder==0){this.data=e;this.renderPrices(e)}else{if(e&&this.data){this.refreshPrices(e)}else if(e&&!this.data){this.data=e;this.renderPrices(e)}}if(this.priceRequestOrder<this.priceRequestAmout){setTimeout(function(){t.sendPriceRequest()},2e3)}},renderPrices:function(e){var t=this.options.isPromotion?"promotion":"cpc";var n=[this.isFb||t==="promotion"?"":"<h3>其他房型</h3>",this.priceRender.render(e,this.seq,t)];this.pricePanel.html(n.join(""));this.resizeScroll()},refreshPrices:function(e){if(!e||!e.pricePart){return}else{if(!this.priceRender)return;$(this.priceRender).trigger("refresh",e.pricePart,this.seq)}},loadBasic:function(){if(!this.basicInited){this.initBasic()}var e=this;var t=this.basicUrl+"?"+"hotelSEQ="+this.hotel.id+"&showImage=1&codebase="+this.hotel.wrapperId;$.getJSON(t,function(t){if(!e.options.isPromotion){e.renderBasic(t);$(e).trigger("infoLoad",t)}else{e.handlePromotionImages(t)}})},getCommentsScoreUrl:function(){return"//review.qunar.com/api/h/"+this.hotel.id+"/v2/detail?="},loadScoreComments:function(){var e=this;var t=e.getCommentsScoreUrl();$.ajax({url:t,dataType:"jsonp",jsonp:"__jscallback",success:function(t){if(t.ret===true){t=t.data;if(!t)return;e.renderCommentsNum(t);e.renderBasicScore(t)}}})},handlePromotionImages:function(e){var t=this;var n=function(e,t){return t=="head"?{imageId:e.imageId,detailImageId:e.detailImageId,tag:""}:{imageId:e.gid,detailImageId:e.fid,tag:e.content}};$.getJSON("/render/hotelDetailAllImage.jsp?hotelseq="+t.hotel.id,function(r){if(!r.ret){return}var i=r.data.all,s=r.data.headImages,o={},u={},a=[];if(s){for(var f=0,l=s.length;f<l;f++){o[s[f].imageId]=s[f].imageId;a.push(n(s[f],"head"))}}var c={"外观":[],"大厅":[],"客房":[],"公共区域":[],"周边环境":[],"餐厅":[],"娱乐设施":[]};var h=["外观","大厅","客房","公共区域","周边环境","餐厅","娱乐设施"];for(var f=0,p=i.length;f<p;f++){var d=i[f].imageType,v=i[f].gid;if(c[d]&&!o[v]){c[d].push(n(i[f]))}}for(var f=0,p=h.length;f<p;f++){if(c[h[f]]&&c[h[f]].length){a=a.concat(c[h[f]].slice(0,3))}}for(var f=0,l=a.length;f<l;f++){u[a[f].imageId]=a[f].imageId}var m=t.maxImagesNum;var g=Math.min(m,i.length);if(a.length<g){for(var f=0,l=i.length;f<l;f++){if(a.length<g){var v=i[f].gid;if(!u[v]){a.push(n(i[f]))}}}}e.data.image={};e.data.image.headImageId=s[0].imageId;e.data.image.images=a;e.data.image.imageCount=i.length;t.renderBasic(e);$(t).trigger("infoLoad",e)})},initBasic:function(){this.infoPanel=$("#"+this.options.infoPanel);this.bindBasicEvent();this.basicInited=true},renderBasic:function(e){if(!e||!e.data)return;var t=e.data;var n={basicDesc:this.renderDesc(t),bigPic:this.renderBigPic(t),picList:this.renderPics(t)};if(this._hotelScoreAndComments){n.basicScore=this.renderScore(this._hotelScoreAndComments)}if(this.isFb&&t.basic&&t.basic.wrapperLogo){$(".js_wrapperLogo_"+this.hotel.wrapperId).html('<img alt="'+this.hotel.wrapperName+'" src="'+t.basic.wrapperLogo+'">')}this.infoPanel.html(this.basicInfoTpl.process(n));this._basicPicRendered=true;this.resizeScroll()},renderBasicScore:function(e){if(!e||!e.hotelScore)return;var t={basicScore:this.renderScore(e)};if(this._basicPicRendered){$("#cpc_basic_pics").after(t.basicScore)}else{this._hotelScoreAndComments=e}},renderCommentsNum:function(e){if(!e.countStat||e.countStat.commCnt<=0&&e.countStat.guruCnt<=0)return;var t=parseInt(e.countStat.commCnt+e.countStat.guruCnt,10);var n=$("#cpc_tab_commentsCount");var r=n.parents("li");if(t>0){n.html("("+t+")");r.show()}return t},renderScore:function(e){var t=['<div class="review_score">'];if(e.hotelScore){var n=e.hotelScore;var r="";if(n==="0.0"){r=["<em>暂无评分</em>"].join("")}else{r=["<b>",n,"</b>分"].join("")}t.push('<div class="score">','<p class="score_txt">',r,"</p>",'<span class="sbar" title="',n,'分">','<b class="ids" style="width:',parseInt(n*20,10),'%;"></b><b class="bg"></b></span>',"</div>")}var i=this.renderCommentsNum(e);if(i&&i>0){t.push('<div id="cpc_basic_commentsCount" class="review_number">','<p class="icon_ct"><span class="icon_ren"></span></p>','<p><a title="',i,'条住客点评" href="javascript:;">',i,"条住客点评</a></p>","</div>")}else{t.push('<div class="review_number" style="cursor: default;">','<p class="icon_ct"><span class="icon_ren"></span></p>',"<p>0条住客点评</p>","</div>")}t.push("</div>");return t.join("")},renderDesc:function(e){if(!e||!e.basic||!e.basic.hotelDesc)return"";var t=e.basic.hotelDesc,n=[],r="",i="",s="";if(t.length>120){r='<span id="js_cpc_shortDesc">'+t.substr(0,120)+"...</span>";i='<span style="display:none" id="js_cpc_fullDesc">'+t+"</span>";s='<a id="lnk_cpcMoreDesc" title="更多" href="javascript:;">更多&gt;</a>'}else{r=t}n.push('<div class="txt_abstract">',r,i,s,"</div>");return n.join("")},renderBigPic:function(e){if(!e||!e.image)return"";var t="";if(!e.image.headImageId&&e.image.images&&e.image.images.length>0){e.image.headImageId=e.image.images.shift()["imageId"]}if(e.image.headImageId){t='<img src="//userimg.qunarzz.com/imgs/'+e.image.headImageId+'i312.jpg">'}return t},renderPics:function(e){if(!e||!e.image||!e.image.images||e.image.images.length==0)return;var t=e.image.images,n=['<ul class="spic_list js_cpc_pics">'];for(var r=0,i=t.length;r<i;r++){if("undefined"!=typeof t[r]){n.push('<li><a href="javascript:void(0)">','<img src="//userimg.qunarzz.com/imgs/',t[r].imageId,'76.jpg">',"</a></li>")}else{n.push("<li></li>")}}n.push("</ul>");return n.join("")},bindBasicEvent:function(){function t(){e.infoPanel.delegate(".js_cpc_pics li","mouseover",function(){if(!e.smallPics||e.smallPics.length==0){e.smallPics=e.infoPanel.find(".js_cpc_pics li")}if(!e.bigPic){e.bigPic=$("#bigpic")}e.smallPics.removeClass("on");var t=$(this),n=t.find("img");if(n.length<1)return;var r=n.attr("src").replace("76.jpg","i312.jpg");t.addClass("on");e.bigPic.html('<img src="'+r+'">')})}function n(){e.infoPanel.delegate("#lnk_cpcMoreDesc","click",function(){$("#js_cpc_shortDesc").hide();$("#lnk_cpcMoreDesc").hide();$("#js_cpc_fullDesc").show();e.resizeScroll()})}function r(){e.infoPanel.delegate("#cpc_basic_commentsCount","click",function(){$(e).trigger("goToComments")})}var e=this;t();n();r()}});var e=['<div class="pic_ratreview clrfix">','<div id="cpc_basic_pics" class="pic_show clrfix">','<div id="bigpic" class="bigpic">{if "undefined" != typeof bigPic && bigPic}${bigPic}{/if}</div>','{if "undefined" != typeof picList && picList}${picList}{/if}',"</div>",'{if "undefined" != typeof basicScore && basicScore}${basicScore}{/if}',"</div>",'{if "undefined" != typeof basicDesc && basicDesc}${basicDesc}{/if}'].join("")})()},951:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;(function(){QClass.define("hotel.list.cpc.comments",{initialize:function(t){this.options=t;this.url="//review.qunar.com/api/h/";this.pageNum=1;this.commentTpl=TrimPath.parseTemplate(e);this.limit=5;this.requestOrder=0},setHotel:function(e){this.hotel=e},resizeScroll:function(e){try{if(e)this.options=e;var t=$("#"+this.options.scrollPanel);if(!t||!this.panel)return;if(!this.scroller){this.scroller=new window.ScrollBar({container:t,zoneClass:"e_scroll_outer"});this.scroller.scrollTo(0)}var n=this.options.maxScrollHeight;var r=this;var i=function(){if("undefined"==typeof r.pagerContainer)return 0;return r.pagerContainer.height()}();var s=this.options.commonInfoHeight+(this.panel.height()||0)+i+30;if(s>n){t.css("height",n+"px")}else{t.css("height",s+"px")}this.scroller.refresh()}catch(o){Logger.log("comment resize popup exception")}},getUrl:function(){return this.url+this.hotel.id+"/detail/v1/page/"+this.pageNum+"?pageSize="+this.limit},loadComments:function(){var e=this;var t=e.getUrl();tryFixIe6();$.ajax({url:t,dataType:"jsonp",jsonp:"__jscallback",success:function(t){if(t.ret===true){t=t.data;if(!t||!t.list||t.list.length===0)return;if(!e.panel){e.panel=$("#cpc_commentsContent");e.bindEvents()}e.amount=t.count;e.renderComments(t.list);e.refreshPager();e.resizeScroll();e.scroller.scrollTo(0);if(e.requestOrder===0){$(e).trigger("commentsLoad",t)}e.requestOrder++}}})},bindEvents:function(){var e=this;this.panel.delegate(".js_fullCommentsLnk","click",function(){var t=$(this).data("id");$("#cpc_comment_part_"+t).hide();$("#cpc_comment_full_"+t).show();e.resizeScroll()})},renderComments:function(e){var t=[],n=this;for(var r=0,i=e.length;r<i;r++){t=t.concat(n.getCommentHtml(e[r]))}this.panel.html(t.join(""))},getCommentHtml:function(e){e.userAvatar="//headshot.user.qunar.com/avatar/"+e.encodeUserName+".png?m";var t=$.parseJSON(e.content).feedContent;if(t.length===0){t="我给这个酒店打"+$.parseJSON(e.content).evaluation+"分"}else{t=t.replace(/\n/g,"<br/>")}e.content=t;e.partContent=t.length>120?t.substr(0,120)+"...":"";return this.commentTpl.process(e)},initPager:function(){var e=this;this.pagerContainer=$("#cpc_commentsPager");this.pager=new Pager(this.pagerContainer[0],1,1,function(t,n){jQuery.event.fix(n).stopPropagation();e.pageNum=t;e.loadComments()},function(){return"javascript:;"})},refreshPager:function(){if(!this.pager)this.initPager();var e=Math.ceil(this.amount/this.limit);if(e==0)e=1;this.pager.total=e;this.pager.render(this.pageNum)}});var e=['<div class="singer_coments clrfix">','<div class="user_pic">',"<p>",'<img width="50" height="50" src="${userAvatar}">',"</p>","<p>${nickName}</p>","</div>",'<dl class="coments_txt">',"{if partContent}",'<dd id="cpc_comment_part_${feedOid}" class="js_part_comments">${partContent}<a data-id="${feedOid}" href="javascript:;" class="js_fullCommentsLnk">更多</a></dd>','<dd id="cpc_comment_full_${feedOid}" style="display:none" class="js_part_comments">${content}</dd>',"{else}",'<dd class="js_part_comments">${content}</dd>',"{/if}","</dl>","</div>"].join("")})()},952:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;(function(){QClass.define("hotel.list.cpc.MapNeighbor",{})})();(function(){function o(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function u(e,t,n,r){var i=e*Math.PI/180;var o=t*Math.PI/180;var u=i-o;var a=n*Math.PI/180-r*Math.PI/180;var f=2*Math.asin(Math.sqrt(Math.pow(Math.sin(u/2),2)+Math.cos(i)*Math.cos(o)*Math.pow(Math.sin(a/2),2)));f=f*s;f=Math.round(f*1e4)/10;return f}function a(t,n,r,i,s,o){e=window["isBaiduMap"];var u;if(e)u=new f(t,n);else u=new l(t,n);u.queryInfo=s||"";u.hasPOI=o||"";u.hotelSEQ=r;u.startPoint=i;return u}function f(e,t){this.map=e;this.container=t;this.queryPOI=[];this.mapData={};var n=this;$(this).bind("onQueryPOIComplete",function(){n.callMapDataApi()});$(this).bind(this,"onMapDataComplete",function(){n.render()});$(this).bind("onMapDataRendered",function(){})}function l(e,t){f.call(this,e,t)}var e=null;var t="//source.qunarzz.com/gmarker";var n=800;var r=17;var i=6;var s=6378.137;f.prototype.start=function(){this.callQueryPOIApi()};f.prototype.render=function(){var e=this;var t=[];t.push('<div><h3>交通信息</h3><div class="e_poipanelct">');t.push('<table class="tbl_nearhotel" id="bdTable" cellspacing="0" cellpadding="0">');var n=0,r={},i=false;$.each(this.queryPOI.concat(this.mapData.traffic||[]),function(e,s){if(n>=6)return;i=true;var u=s.name;if(r[u])return;r[u]=1;n++;var a=s.gpoint&&s.gpoint.length&&s.gpoint.join(",")||"";var f=s.bpoint&&s.bpoint.length&&s.bpoint.join(",")||"";t.push('<tr class="js_traffic_line" data-gpoint="',a,'" data-bpoint="',f,'" data-distance="',s.distance,'">');t.push("<th>");if(s.category)t.push('<img width="16" height="16" src="//source.qunarzz.com/gmarker/traff/icon/'+s.category+'.gif">');else t.push('<img width="16" height="16" src="//source.qunarzz.com/gmarker/poim/icon/db.gif">');t.push("</th>");t.push("<td>");t.push('<div class="title">');t.push(""+o(u)+"");t.push("</div>");t.push('<div class="title js_traffic_desc"></div>');t.push("</td>");t.push("</tr>")});t.push("</table>");t.push("</div></div>");this.controlType="tr";this.container.innerHTML=t.join("");this.container.style.display=i?"block":"none";$(this).trigger("onMapDataRendered")};f.prototype.initEvents=function(){var e=this,t=e.map,n=e.startPoint,r;if(!!n)r=new BMap.Point(n[0],n[1]);var i=this.container.getElementsByTagName(e.controlType);$.each(i,function(n,i){var s=$(i);if(s.hasClass(i,"js_traffic_line")){var o=s.attr("data-bpoint"),u=s.attr("data-distance"),a;if(!o||!u){return}a=e.getTrafficType(u);o=o.split(",");o=new BMap.Point(o[1],o[0]);if(a=="driver"){e.driverSearch(t,r,o,i)}else{e.walkingSearch(t,r,o,i)}}})};f.prototype.getTrafficType=l.prototype.getTrafficType=function(e){return e-n>0?"driver":"walking"};f.prototype.searchOptions={avoidHighways:true,drivingPolicy:2,getPolyline:true,locale:"zh_CN",travelMode:1};f.prototype.baiduSearchCallBack=function(e,t,n){var r=this.getDistance(e),i=this.getDuration(e),s;var o=this;if(!isObjEmpty(r)&&!isObjEmpty(i)){s=n+"：大约"+r.html+"(约"+i.html+")";s="大约"+r.html+"<b>"+n+"</b>约"+i.html}else{s="抱歉，暂无交通信息"}t.innerHTML=t.innerHTML+s;t.style.display="block";$(o).trigger("trafficLineLoad")};f.prototype.getDistance=function(e){if(!!e){if(e.getNumPlans()===0)return{};var t=e.getPlan(0);var n=t._distance;var r=null;if(n>=1e3){r=(n/1e3).toFixed(1)+"公里"}else{r=n+"米"}return{meters:n,html:r}}else{return{}}};f.prototype.getDuration=function(e){if(!!e){if(e.getNumPlans()===0)return{};var t=e.getPlan(0);var n=t._duration;var r=null;if(n<60){r=n+"秒"}else if(n>=60&&n<=3600){r=(n/60).toFixed(0)+"分钟"}else{r=(n/3600).toFixed(1)+"小时"}return{seconds:n,html:r}}else{return{}}};f.prototype.walkingSearch=function(e,t,n,r){var i=this;var s=new BMap.WalkingRoute(e,this.searchOptions);s.setSearchCompleteCallback(function(e){i.baiduSearchCallBack(e,r,"步行")});s.search(t,n)};f.prototype.driverSearch=function(e,t,n,r){var i=this;var s=new BMap.DrivingRoute(e._impl,this.searchOptions);s.setSearchCompleteCallback(function(e){i.baiduSearchCallBack(e,r,"驾车")});s.search(t,n)};f.prototype.callQueryPOIApi=function(){var e=this;if(this.queryInfo&&this.hasPOI){var t=new ScriptRequest({callbackName:"callback",oncomplete:function(t){var n=e.queryPOI=t&&t.data&&t.data.pois||[];var r=[];n&&$.each(n,function(e,t){var n=t["latlng"].split(",");t["gpoint"]=[n[0]*1,n[1]*1];t["distance"]=u(t["gpoint"][0],hotelPoint[0],t["gpoint"][1],hotelPoint[1]);r.push(t["gpoint"])});if(r.length)TO_ExactGPoints(r,function(t){for(var r=0,i=t.length;r<i;r++){var s=t[r];n[r]["bpoint"]=[s._impl.lat,s._impl.lng]}$(e).trigger("onQueryPOIReturn",e.queryPOI);$(e).trigger("onQueryPOIComplete",e.queryPOI)});else{$(e).trigger("onQueryPOIReturn",e.queryPOI);$(e).trigger("onQueryPOIComplete",e.queryPOI)}},ontimeout:function(){$(e).trigger("onQueryPOIComplete",e.queryPOI)}});t.send("//hotel.qunar.com/render/hotelPOIData.jsp?cityurl="+window.cityUrl+"&q="+encodeURIComponent(this.queryInfo),3e3);return true}else{$(e).trigger("onQueryPOIComplete",e.queryPOI);return false}};f.prototype.callMapDataApi=function(){var e=this;var t=["traffic","canguan","jingdian","ent"];if(t.length>0){var n=new ScriptRequest({oncomplete:function(t){e.mapData=t&&t.data||{};$(e).trigger("onMapDataComplete",e.mapData)},ontimeout:function(){$(e).trigger("onMapDataComplete",e.mapData)},callbackName:"callback"});n.send("/detail/detailMapData.jsp?seq="+e.hotelSEQ+"&type="+t.join(","),3e3)}};l.prototype.start=function(){f.prototype.callQueryPOIApi.call(this)};l.prototype.callMapDataApi=function(){f.prototype.callMapDataApi.call(this)};l.prototype.render=function(){f.prototype.render.call(this)};l.prototype.initEvents=function(){var e=this,t=e.map,n=e.startPoint,r;if(!!n)r=[n[1],n[0]];var i=this.container.getElementsByTagName(e.controlType);i&&$.each(i,function(n,i){var s=$(i);if(s.hasClass("js_traffic_line")){var o=s.attr("data-gpoint"),u=s.attr("data-distance"),a;if(!o||!u){return}a=e.getTrafficType(u);o=o.split(",");e.trafficSearch(t,r,o,i,a)}})};var c="//maps.googleapis.com/maps/api/directions/json?";l.prototype.trafficSearch=function(e,t,n,r,i){var s=this;var o=new GDirections(null);GEvent.addListener(o,"load",function(){try{var e=o.getDistance();var t=o.getDuration();if(e&&t){s.trafficSearchCallbck(e,t,r,i)}}catch(n){}});var u=[t[1],t[0]];o.loadFromWaypoints([u,n],{renderOptions:{},getPolyline:true,locale:"zh_CN",travelMode:i==="driver"?G_TRAVEL_MODE_DRIVING:G_TRAVEL_MODE_WALKING,avoidHighways:true})};l.prototype.trafficSearchCallbck=function(e,t,n,r){var i;var s=this;if(!isObjEmpty(e)&&!isObjEmpty(t)){i=r+"：大约"+e.html+"(约"+t.html+")";i="大约"+e.html+"<b>"+(r==="driver"?"驾车":"步行")+"</b>约"+t.html}else{i="抱歉，暂无交通信息"}n.innerHTML=n.innerHTML+i;n.style.display="block";$(s).trigger("trafficLineLoad")};hotel.list.cpc.MapNeighbor=a})()},953:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;var i=n(122);(function(){function e(){var e=this;var t=[];t.push('<div class="clrfix"><div id="tranfictitle" style="display:none" class="tranfictitle">交通信息</div>');t.push('<ul class="tranfic_info">');var n=0,r={},i=false;$.each(this.queryPOI.concat(this.mapData.traffic||[]),function(e,s){if(n>=6)return;i=true;var o=s.name;if(r[o])return;r[o]=1;n++;var u=s.gpoint&&s.gpoint.length&&s.gpoint.join(",")||"";var a=s.bpoint&&s.bpoint.length&&s.bpoint.join(",")||"";var f="";o=escapeHtml(o);if(o.length>12){f="<b title='"+o+"'>"+o.substr(0,12)+"...</b>"}else{f="<b>"+o+"</b>"}t.push('<li style="display:none" class="js_traffic_line" data-gpoint="',u,'" data-bpoint="',a,'" data-distance="',s.distance,'">');t.push("距"+f);t.push("</li>")});t.push("</ul>");t.push("</div></div>");this.controlType="li";this.container.innerHTML=t.join("");this.container.style.display=i?"block":"none";$(this).trigger("onMapDataRendered")}QClass.define("hotel.list.cpc.map",{initialize:function(e){this.options=e;this.mapTpl=TrimPath.parseTemplate(t);this.mapType=e.mapType},setHotel:function(e){this.hotel=e},loadMap:function(){function u(){o.map=map;map.enableContinuousZoom();map.addControl(new GSmallMapControl,new GControlPosition(G_ANCHOR_TOP_LEFT));var t=new GMarker(GLatLng.fromMap({baidu:[n[0],n[1]],google:[r[0],r[1]]}),{title:e.attrs.hotelName,clickable:false,zIndexProcess:function(){return 1e4}});map.addOverlay(t);map.setCenter(GLatLng.fromMap({baidu:[n[0],n[1]],google:[r[0],r[1]]}),17);$(o).trigger("mapLoad")}if(!this.mapArea){this.mapArea=$("#cpc_maparea").get(0)}if(this.mapType==="none"){i.hahaNoMap(this.mapArea);this.mapArea.style.backgroundColor="#fff";this.mapArea.style.height="auto";return}var e=this.hotel,t,n=this.hotel&&this.hotel.bPoint,r=this.hotel&&this.hotel.gPoint,s=this.mapArea;n=n?n.split(","):[0,0];r=r?r.split(","):[0,0];var o=this;this.resizeScroll();map=new GMap2(s,{minZoom:6});u()},loadTraffic:function(){if(this.mapType==="none")return;if("undefined"==typeof GDirections){var t=this;t.trafficHandler=setInterval(function(){if("undefined"!=typeof GDirections){t.clearInterval(t.trafficHandler);t.loadTraffic()}},1e3);return}if(!this.trafficArea){this.trafficPanel=$("#"+this.options.trafficPanel).get(0);this.trafficArea=$("#cpc_trafficArea").get(0)}this.mapNeighbor=new hotel.list.cpc.MapNeighbor(this.map,this.trafficArea,this.hotel.id,window.MapType==="baidu"?[this.hotel.bPoint[1],this.hotel.bPoint[0]]:this.hotel.gPoint);this.mapNeighbor.render=e;var t=this;$.each({onMapDataRendered:function(){t.resizeScroll()},trafficLineLoad:function(){$("#tranfictitle").show();t.resizeScroll()}},function(e,n){$(t.mapNeighbor).bind(e,n)});this.mapNeighbor.start();$(t).trigger("trafficLoad")},resizeScroll:function(e){if(e)this.options=e;var t=$("#"+this.options.scrollPanel).get(0);if(!this.mapArea){this.mapArea=$("#cpc_maparea").get(0)}if(!this.trafficPanel){this.trafficPanel=$("#"+this.options.trafficPanel).get(0);this.trafficArea=$("#cpc_trafficArea").get(0)}if(!t||!this.mapArea||!this.trafficPanel)return;if(!this.scroller){this.scroller=new window.ScrollBar({container:t,zoneClass:"e_scroll_outer",clipClass:"cpcmap-scrollclip"});this.scroller.scrollTo(0)}var n=$(this.mapArea).height()||0;var r=$(this.trafficPanel).height()||0;var i=this.options.maxScrollHeight;var s=this.options.commonInfoHeight+r+n+35;if(s>i){t.style.height=i+"px"}else{t.style.height=s+"px"}this.scroller.refresh()}});var t=['<div class="cpcmap">','<div class="mapshow" id="cpc_maparea"></div>','<div class="landmarkhotel" id="cpc_trafficPanel">','<ul class="landmarklist">','<li><span class="map_icon01"></span><span class="name">${attrs.hotelName}</span>',"{if area}",'<span class="district">商圈：${area}</span></li>',"{/if}","</ul>",'<div class="cpc_tranfic" id="cpc_trafficArea"></div>',"</div>","</div>"].join("")})()},954:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;(function(){var e=hotel.list.cpc.basic;var t=hotel.list.cpc.comments;var n=hotel.list.cpc.map;QClass.define("hotel.list.cpc.cpcRBox",{initialize:function(e){this.options=e;this.quickBookTpl=TrimPath.parseTemplate(o);this.status={};this.eventHandler={}},setOptions:function(e){this.options=e},refreshHeight:function(){this.controlHeight={tabHeight:54,commonInfoHeight:65,quickBookingHeight:this.quickBookingBarHeight||87};this.controlHeight.maxScrollHeight=$(window).height()-this.controlHeight.tabHeight-this.controlHeight.quickBookingHeight-20},clear:function(){this.isHide=true;this.overlayer.css({display:"none",width:0,height:0});if("undefined"!=typeof this.basicRender&&"undefined"!=typeof this.basicRender.priceRender){this.basicRender["requestHandler"]=0}this.clearEvents();$(window).unbind("resize.cpcRBox")},clearEvents:function(){var e=this;$.each(["goToComments","infoLoad","priceLoad","defaultPriceChange"],function(t,n){$(e.basicRender).unbind(n+".cpcRBox")});$.each(["mapLoad","trafficLoad"],function(t,n){$(e.mapRender).unbind(n+".cpcRBox")});$(e.commentsRender).unbind("commentsLoad.cpcRBox");$(e).unbind("choose");$("#cpc_title").unbind("click")},open:function(r){tryFixIe6();this.isHide=false;if(!this.rbox){this.rbox=$.rbox("",{hideOnClickOutside:true})}this.options.basicOptions.isPromotion=this.options.isPromotion;this.basicRender=this.commentsRender=this.mapRender={};this.basicRender=new e(this.options.basicOptions);this.commentsRender=new t(this.options.commentsOptions);this.mapRender=new n(this.options.mapOptions);this.status={};this.hotel=this.analysisHotel(r);this.isFb=r.isFb;var i=this.render(r).join("");this.rbox.setContent(i);this.rbox.show();this.refreshOverlayer();this.basicRender.setHotel(r);this.mapRender.setHotel(r);this.commentsRender.setHotel(r);this.basicRender.load();this.bindScrollAndResize();this.initControls();this.bindEvent();this.shownTab="cpc_basic";this.refreshScrolllHeightByQuickBar()},setRendersHeight:function(){var e=this;e.basicRender.options=$.extend({},e.options.basicOptions,e.controlHeight);e.mapRender.options=$.extend({},e.options.mapOptions,e.controlHeight);e.commentsRender.options=$.extend({},e.options.commentsOptions,e.controlHeight)},analysisHotel:function(e){var t=this;e.starInfo=function(e){if(e.attrs.hotelStars&&e.attrs.hotelStars!="0"||e.attrs.stars&&e.attrs.stars!="0"){return t.tools.getStarStr(e.attrs.hotelStars||e.attrs.stars)}else if(e.attrs.dangci){return t.tools.getDangciStr(e.attrs.dangci)}else{return""}}(e);e["quickPriceStr"]=this.getQuickPriceStr(e);e["jingpinMark"]=e.jingpinMark?parseInt(e.jingpinMark,10):0;return e},bindEvent:function(){this.bindRBox();this.bindChooseEvent();this.bindTabEvents();this.bindControlsEvent()},initControls:function(){this.controls={};this.controls["bacisPanel"]=$("#cpc_basic").get(0);this.controls["mapPanel"]=$("#cpc_map").get(0);this.controls["commentsPanel"]=$("#cpc_comments").get(0);this.panels=[this.controls["bacisPanel"],this.controls["mapPanel"],this.controls["commentsPanel"]];this.tabs=$("#cpc_title").get(0).getElementsByTagName("li");this.quickBookingBar=$("#quickBookPanel")},render:function(e){var t=[];t=t.concat(r);t=t.concat(s);t=t.concat(this.renderContent(e));if(!this.isFb&&!this.options.isPromotion)t=t.concat(this.renderQuickBook(e));t=t.concat(i);return t},renderContent:function(e){var t=!this.options.isPromotion?u:a;this.commonInfoTpl=TrimPath.parseTemplate(t);var n=this.commonInfoTpl.process(e);var r=['<div id="cpc_contents" class="cpc_tab_ct">','<div id="cpc_basic" class="sumry_aprice active js_cpc_panel">','<div class="b_abstrprice cpc_panel" id="cpc_basic_scroll">',n,'<div id="cpc_basic_info">',this.basicRender.basicInfoTpl.process(e),"</div>",'<div id="cpc_basic_price" class="b_roomtypecpc" style=""></div>',"</div>","</div>",'<div id="cpc_map" class="cpctraffic_info js_cpc_panel">','<div class="b_abstrprice cpc_panel" id="cpc_map_scroll">',n,this.mapRender.mapTpl.process(e),"</div>","</div>",'<div id="cpc_comments" class="cpchotel_review js_cpc_panel">','<div class="b_abstrprice cpc_panel" id="cpc_comments_scroll">',n,'<div id="cpc_commentsContent" class="cpc_comments"></div>','<div id="cpc_commentsPager"></div>',"</div>","</div>","</div>"];return r},refreshScrolllHeightByQuickBar:function(){this.quickBookingBarHeight=this.quickBookingBar.outerHeight()+10;this.refreshHeight();this.setRendersHeight()},renderQuickBook:function(e){if(e.roomStatus){if(e.roomStatus==-2){e.partPriceStr=this.getPartTimeStr()}else if(e.roomStatus==-1){e.partPriceStr="指定日期客房已售完"}else{e.partPriceStr=""}}return this.quickBookTpl.process(e)},bindScrollAndResize:function(){var e=this,t;$(window).bind("resize.cpcRBox",function(){if(!e.rbox||e.isHide)return;if(t)clearTimeout(t);t=setTimeout(function(){try{e.refreshOverlayer();if(e.isHide)return;e.refreshHeight();var t=e.getRender(e.shownTab);e.setRendersHeight();t.resizeScroll()}catch(n){Logger.log("cpcRBox resize error");Logger.log(n)}},300)})},bindRBox:function(){var e=this;e.rbox.bind("hide",function(){$(e).trigger("close");e.clear()})},bindControlsEvent:function(){function t(t){if(!t||!t.data)return;e.hotel=$.extend(e.hotel,t.data["basic"],t.data["image"]);e.basicRender.setHotel(e.hotel);e.mapRender.setHotel(e.hotel);e.commentsRender.setHotel(e.hotel)}var e=this;$.each({goToComments:function(){e.chooseTab(e.tabs[2])},infoLoad:function(n,r){e.status["basic"]=true;t(r)},priceLoad:function(){e.status["price"]=true},defaultPriceChange:function(t){$.extend(e.hotel,t);e.hotel.quickPriceStr=e.getQuickPriceStr(e.hotel);e.quickBookingBar.replaceWith(e.renderQuickBook(e.hotel));e.quickBookingBar=$("#quickBookPanel");e.refreshScrolllHeightByQuickBar()}},function(t,n){$(e.basicRender).bind(t+".cpcRBox",n)});$.each({mapLoad:function(){e.status["map"]=true},trafficLoad:function(){e.status["traffic"]=true}},function(t,n){$(e.mapRender).bind(t+".cpcRBox",n)});$(e.commentsRender).bind("commentsLoad.cpcRBox",function(t,n){e.status["comments"]=true})},getRender:function(e){var t={cpc_basic:this.basicRender,cpc_map:this.mapRender,cpc_comments:this.commentsRender};return t[e]},bindChooseEvent:function(){var e=this,t;$(e).bind("choose",function(n,r){n.preventDefault();t=e.getRender(r);if(r==="cpc_basic"&&!e.status["basic"]){t.loadBasic()}if(r==="cpc_basic"&&!e.status["price"]){t.loadPrice()}if(r==="cpc_map"&&!e.status["map"]){t.loadMap()}if(r==="cpc_map"&&!e.status["traffic"]){t.loadTraffic()}if(r==="cpc_comments"&&!e.status["comments"]){t.loadComments()}t.resizeScroll();e.scrollToTop.call(t)})},scrollToTop:function(){if(this.scroller){this.scroller.scrollTo(0)}},bindTabEvents:function(){var e=$("#cpc_title"),t=this;e.bind("click",function(n){var r=n.target;while(r&&r.tagName&&r.tagName.toUpperCase()!=="LI"&&r!==e){r=r.parentNode}if(r&&r.tagName&&r.tagName.toUpperCase()==="LI"){t.chooseTab(r)}})},chooseTab:function(e){var t=this.tabs,n=this;e=$(e);t&&$.each(t,function(e,t){$(t).removeClass("active");$(n.panels[e]).hide()});e.addClass("active");var r=e.attr("data-for");n.shownTab=r;var i=$("#"+r);i.show();$(n).trigger("choose",r)},getQuickPriceStr:function(e){var t=e.preferentialType||"",n,r,i,s;n='<li class="lapse">&nbsp;</li>',r='<li class="original">&nbsp;</li>',i='<li class="salepr">仅售：<em class="pr">&yen;<b>'+e.price+"</b></em></li>";if(e.preferentialPrice!==0&&t==="返现"){n='<li class="lapse"><span class="fan"><em class="re">返现</em><em class="pr">&yen;'+e.preferentialPrice+"</em></span></li>";r='<li class="original">原价：<del>&yen;'+(e.preferentialPrice+e.price)+"</del></li>";i='<li class="salepr">仅售：<em class="pr">&yen;<b>'+e.price+"</b></em></li>"}else if(e.preferentialPrice!==0&&(t==="直减"||t==="税费")){n='<li class="lapse">'+t+"：<em>&yen;"+Math.abs(e.preferentialPrice)+"</em></li>";r='<li class="original">原价：<del>&yen;'+(e.preferentialPrice+e.price)+"</del></li>";i='<li class="salepr">仅售：<em class="pr">&yen;<b>'+e.price+"</b></em></li>"}var o="//hotel.qunar.com"+e.bookingURL,u="立即预订",a="",f='target="_blank"';if("undefined"!=typeof e.roomStatus&&e.roomStatus==-1){o="javascript:;";u="已订完";a=" btn_disable";f=""}s='<li class="btn_ct"><a href="'+o+'" '+f+' class="btn_book'+a+'" title="'+u+'"><span>'+u+"</span></a></li>";return["<ul class='clrfix'>",n,r,i,s,"</ul>"].join("")},getPartTimeStr:function(){var e=QunarDate.parse(window.fromDate),t=QunarDate.plus(e,1);e=QunarDate.formatDateAsNumAndChinese(e),t=QunarDate.formatDateAsNumAndChinese(t);return["<p>部分日期客房已售完<br>",e,"至",t," 可预订</p>"].join("")},refreshOverlayer:function(){var e=this;if(!this.overlayer){this.overlayer=$('<div id="cpc_overlayer" class="cpc_poplayerbg"></div>');$("body").append(this.overlayer);this.overlayer.bind("click",function(t){e.rbox.hide(t)})}if(e.isHide){this.overlayer.css("display","none");return}this.overlayer.css({width:$(document).width(),height:$(document).height(),"z-index":9500,display:"block"})},tools:{getStarStr:function(e){var t="",n="";switch(e){case"1":t="一星级",n="star10";break;case"2":t="二星级",n="star20";break;case"3":t="三星级",n="star30";break;case"4":t="四星级",n="star40";break;case"5":t="五星级",n="star50";break;default:t="",n="";break}if(t==""&&n=="")return;return'<em title="国家旅游局评定为'+t+'" class="star '+n+'"></em>'},getDangciStr:function(e){var t=["","经济型","舒适型","高档型","豪华型",""];var n=t[parseInt(e,10)];if(!n)return"";return'<span class="dangci" title="去哪儿网用户评定为'+n+'酒店">'+n+"</span>"}}});var r=['<div id="cpc_layer" class="cpc_poplayer">','<div class="mutualinfo">','<div class="mutualinfo_ct">','<span onclick="$.rbox.hide(event);return false;" class="icon_close"></span>'];var i=["</div>","</div>","</div>"];var s=['<div class="cpctitlepd">','<div class="cpc_title" id="cpc_title">','<ul class="cpc_tabs">','<li data-for="cpc_basic" class="first active"><a hidefocus="true" title="酒店概况及报价" href="javascript:void(0)">酒店概况及报价</a></li>','<li data-for="cpc_map"><a hidefocus="true" title="交通信息" href="javascript:void(0)">交通信息</a></li>','<li data-for="cpc_comments" style="display:none"><a hidefocus="true" title="酒店点评" href="javascript:void(0)">酒店点评<em id = "cpc_tab_commentsCount"></em></a></li>',"</ul>","</div>","</div>"];var o=['<div class="b_sheaproom" id="quickBookPanel">','<table width="100%" border="0" cellpadding="0" class="tbl_cheaproom">',"<tbody><tr>",'<td class="c1"><p>最便宜房型：<b>${cpcRoomType}</b></p>','{if "undefined" != typeof roomStatus && roomStatus == -2}',"${partPriceStr}","{/if}","</td>",'<td class="c2">','<div class="bookinfo">',"<h3>现在预订</h3>","${quickPriceStr}","</div>","</td>","</tr></tbody>","</table>","</div>"].join("");var u=['<div class="adress_name clrfix">','<dl class="hbase_info">',"<dt>${attrs.hotelName}","${starInfo}","</dt>","<dd>地址：${attrs.hotelAddress}</dd>","</dl>",'<div class="agents_ct">','<p class="agent_pic js_wrapperLogo_${wrapperId}">','{if "undefined" !== typeof wrapperName && "undefined !== typeof wrapperLogo" && wrapperName && wrapperLogo}','<img alt="${wrapperName}" src="${wrapperLogo}">',"{/if}</p>",'{if "undefined" !== typeof wrapperName && wrapperName}','<p class="agent_name">${wrapperName}</p>',"{/if}","</div>","</div>"].join("");var a=['<div class="adress_name clrfix">','<dl class="hbase_info">',"<dt>${attrs.hotelName}","${starInfo}","</dt>","<dd>地址：${attrs.hotelAddress}</dd>","</dl>","</div>"].join("")})()},955:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;var i=n(288).Affix;var s=n(947);var o={}.hasOwnProperty;var u={0:262,1:310,2:310,3:640};var a={Wider:9,Narro:6};var f=function(){function e(e){this.$container=e.$container,this.sliderItemsCount=e.sliderItemsCount,this.affixLeft=e.affixLeft,this.affixTop=e.affixTop,this.affixRangeTop=e.affixRangeTop,this.affixRangeBottom=e.affixRangeBottom,this.context=e.context;this.listBaseUrl="/render/HotelHmsApiProxyServlet.jsp";this.detailBaseUrl="/render/HotelHmsDetailBasicServlet.jsp";this.stayDuration=8e3;this.sliding=false;this.sliderOffset=u[1];this.requestTimes=0;this.rendered=false;this.refreshed=false;this.isIE7=/MSIE 7\.0/.test(navigator.userAgent);this.currentIndex=0;this.__cpcProp=s.prototype;this.data={};this.timers=[];this.request()}e.prototype.getWidthMap=function(){return u};e.prototype.getRequestUrl=function(){return""+this.listBaseUrl+"?isdetail=0&fromDate="+window.fromDate+"&toDate="+window.toDate+"&cityurl="+window.cityurl+"&attrs=L0F4L3C1,08F7hM4i,2XkzJryU,x0oSHP6u,VAuXapLv,xaSZV4wU,ZO1FcGJH,YRHLp-jc"};e.prototype.request=function(){var e,t,n;t=this;n=this.getRequestUrl();e=new ScriptRequest({oncomplete:function(e){var n;if(e){n=e.hotels;if(n.length){t.handleData(n);t.update(n.length);t.rendered=true}if(t.refreshed){return}}t.requestTimes+=1;if(t.requestTimes<15){return t.request()}}});return e.send(n,1e4)};e.prototype.handleData=function(e){var t,n,r,i,s,o,u,a,f;f=[];for(u=0,a=e.length;u<a;u++){r=e[u];this.data[r.id]=r;s=r.attrs.tradingArea;i=r.attrs.HotelArea;n="商圈";this.data[r.id].area=s?s.replace(n+n,n):"";this.data[r.id].area=i?i.replace(n+n,n):"";o=["//hotel.qunar.com"];t=window.getDetaiContextPath(r.id);o.push(t);o.push("/?tag=",window.cityurl||"");o.push("#fromDate=",window.fromDate,"&toDate=",window.toDate);o.push("&from=zxjd");f.push(this.data[r.id]._detailurl=o.join(""))}return f};e.prototype.update=function(e){var t,n,r,i,s,u,a,f,l,c,h,p;this.clearTimers();t=this.data;this.sliderCount=Math.ceil(e/this.sliderItemsCount);c=[];for(n=h=0,p=this.sliderCount;0<=p?h<p:h>p;n=0<=p?++h:--h){c[n]=[]}r=0;for(i in t){if(!o.call(t,i))continue;s=~~(r/this.sliderItemsCount);c[s].push(this.renderHotelItem(t[i]));r+=1}a=function(){var e,t,n;n=[];for(r=e=0,t=c.length;e<t;r=++e){l=c[r];n.push("<div class='list_promotion_slider' id='promotionSlider-"+r+"' style='width:"+this.sliderOffset+"px'>"+l.join("")+"</div>")}return n}.call(this);f='<div class="list_promotion_bar" data-ref="map_switch"><div style="position: absolute; right: 5px; bottom: 5px; font-size: 12px; background: #e4e4e4; color: #6d6d6d; line-height: 16px; opacity: 0.7; padding: 0 2px; border-top-left-radius: 2px">广告</div>\n    <p class="tit">\n        <strong>直销酒店推广</strong>\n        {$pagination}\n    </p>\n    <div class="list_promotion_container">\n        <div id="listPromotionSliders" class="list_promotion_sliders" style="width:'+2*this.sliderOffset+'">\n            '+a.join("")+"\n        </div>\n    </div>\n</div>";u='<a class="list_promotion_next" data-behavior="next" href="javascript:void(0)">&gt;</a>\n<a class="list_promotion_prev" data-behavior="prev" href="javascript:void(0)">&lt;</a>\n <span class="list_promotion_index"><em id="listPromotionCurrentIndex">1</em>/'+this.sliderCount+"</span>";f=f.replace("{$pagination}",this.sliderCount===1?"":u);this.$promotionBar=$(f);if(!this.rendered){this.$container.append(this.$promotionBar)}else{this.$container.children().last().replaceWith(this.$promotionBar);this.refreshed=true}this.$slidersContainer=$("#listPromotionSliders");this.$sliderCurrentIndex=$("#listPromotionCurrentIndex");this.$slidersContainer.children().first().show();$(this).trigger("listDSellRendered",{container:this.$slidersContainer});this.bindEvent();return this.autoPlay()};e.prototype.updateSliders=function(e){this.sliderOffset=e;$(".list_promotion_slider").width(this.sliderOffset);return $(".list_promotion_sliders").width(this.sliderCount*this.sliderOffset)};e.prototype.updateIndex=function(e){if(this.$sliderCurrentIndex[0]){return this.$sliderCurrentIndex.html(e+1)}};e.prototype.bindEvent=function(){var e;e=this;return this.$promotionBar.bind("click",function(t){var n,r,i;n=$(t.target);r=n.attr("data-behavior");if(/^open\//.test(r)){i=r.split("/");r=i[0]}switch(r){case"prev":return e.prev(true);case"next":return e.next(true);default:break}})};e.prototype.renderHotelItem=function(e){var t,n,r,i,s;n=0;if(this.context.isWider()){n=a["Wider"]}else{n=a["Narro"]}e._limit=n;i=e.attrs.tradingArea?e.attrs.tradingArea.split("|"):[];s=i.length>0?this.cutHotelName(i[0],n):"";t=this.getHotelStar(e);r='<div id="prom_'+e.id+'" class="e_hotel_popularize clr_after">\n    <div class="landscape">\n        <p class="c1">\n            <a href="'+e._detailurl+'" target="_blank"><img src="'+e.attrs.imageID+'" data-behavior="open/jifen_pic/'+e.id+'" /></a>\n        </p>\n        <dl class="c2">\n            <dt>\n                <a href="'+e._detailurl+'" target="_blank">\n                    <span data-ref="map_switch_hotel_name" title="'+e.attrs.hotelName+'" data-behavior="open/jifen_name/'+e.id+'">'+this.cutHotelName(e.attrs.hotelName,e._limit)+'</span>\n                </a>\n            </dt>\n            {$tradingArea}\n            {$hotelStar}\n        </dl>\n        <span class="price">\n            <a href="'+e._detailurl+'" target="_blank"><span class="pr"><em class="pr-sym">&yen;</em><em data-behavior="open/jifen_price/'+e.id+'">'+e.price+'</em><span class="pr-affix">起</span></span></a>\n        </span>\n        <span class="more">直销报价</span>\n    </div>\n</div>';r=r.replace("{$tradingArea}",s?"<dd><span class='area' title='"+i[0]+"'>"+s+"</span></dd>":"");r=r.replace("{$hotelStar}",t?"<dd title='"+this.__cpcProp.getHotelStarTitle(e)+"'>"+t+"</dd>":"");return r};e.prototype.getHotelStar=function(e){var t;t=e.attrs.hotelStars;if(t&&5>=t&&t>0){return"<em class='star star"+t+"0'></em>"}return this.__cpcProp.getHotelStarInfo(e)};e.prototype.cutHotelName=function(e,t){return e=e&&e.length>t?e.slice(0,t)+"...":e};e.prototype.reverseHotelName=function(){var e,t,n;n=this;t=0;if(this.context.isWider()){t=a["Wider"]}else{t=a["Narro"]}e=$("span[data-ref=map_switch_hotel_name]");return e.each(function(e,r){var i,s;s=$(r).attr("title");i=n.cutHotelName(s,t);return $(r).html(i)})};e.prototype.affix=function(){var e;e=this;e.fixedFloat=new i({el:this.$promotionBar,heightHack:true,heightHackFix:this.$promotionBar.outerHeight(true),range:[this.affixRangeTop,null,this.affixRangeBottom],everyTime:true,top:this.affixTop,left:this.affixLeft,recoveryStyle:{left:"auto",top:"auto",position:"static"}});return e.fixedFloat.render()};e.prototype.setFixedFloatRange=function(e){return this.fixedFloat.range=e};e.prototype.switchPosition=function(e,t){if(!this.$promotionBar){return}this.updateSliders(e=="small"?u[2]:u[3]);this.$slidersContainer.css("left",0);this.reverseHotelName(e);return this.$container.find("[data-ref=map_switch]").toggleClass("bigMap",e==="big")};e.prototype.autoPlay=function(){var e,t,n;t=this;e=function(){t.next();return t.autoPlay()};n=setTimeout(e,t.stayDuration);return t.timers.push(n)};e.prototype.clearTimers=function(){var e,t,n,r,i;r=this.timers;i=[];for(t=0,n=r.length;t<n;t++){e=r[t];i.push(clearTimeout(e))}return i};e.prototype.prev=function(e){if(this.sliding){return}if(e){this.clearTimers()}this.moveSlider(e,"prev");if(e){return GARunerById(window._ba_utm_s,"jifen_page_left")}};e.prototype.next=function(e){if(this.sliding){return}if(e){this.clearTimers()}this.moveSlider(e,"next");if(e){return GARunerById(window._ba_utm_s,"jifen_page_right")}};e.prototype.limitIndex=function(e){return e=function(){switch(false){case!(e>=this.sliderCount):return 0;case!(e<0):return this.sliderCount-1;default:return e}}.call(this)};e.prototype.moveSlider=function(e,t){var n,r,i,s,o,u,a;this.sliding=true;s=350;o="#promotionSlider-";n=t==="next"?this.limitIndex(this.currentIndex+1):this.limitIndex(this.currentIndex-1);i=$(""+o+this.currentIndex);r=$(""+o+n);if(n===this.currentIndex){return}a=function(){i.hide();if(e){u.clearTimers();u.autoPlay()}u.currentIndex=n;u.updateIndex(u.currentIndex);return u.sliding=false};u=this;if(u.isIE7){r.show();return a()}else{u.$slidersContainer.css({width:2*u.sliderOffset,marginLeft:t==="next"?0:-u.sliderOffset});r.show();if(t==="next"){r.insertAfter(i)}if(t==="prev"){i.insertAfter(r)}return u.$slidersContainer.animate({marginLeft:t==="next"?-u.sliderOffset:0},s,function(){u.$slidersContainer.css({width:u.sliderOffset,marginLeft:0});return a()})}};e.prototype.open=function(e,t,n){var r;r={basicOptions:{priceUrl:this.listBaseUrl,basicUrl:this.detailBaseUrl,priceRequestAmout:15,pricePanel:"cpc_basic_price",infoPanel:"cpc_basic_info",scrollPanel:"cpc_basic_scroll",maxNum:3,maxImagesNum:26},mapOptions:{scrollPanel:"cpc_map_scroll",trafficPanel:"cpc_trafficPanel",mapPanel:"cpc_maparea",mapType:n},commentsOptions:{scrollPanel:"cpc_comments_scroll"},isPromotion:true};if(!window.cpcRBox){window.cpcRBox=new window.hotel.list.cpc.cpcRBox(r)}window.cpcRBox.setOptions(r);window.cpcRBox.open(this.data[e]);return GARunerById(window._ba_utm_s,t)};return e}();e.exports=f},956:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;var i=n(957);e.exports={initQueryCorrect:i.init,show:i.show,hide:i.hide}},957:function(e,t){function s(e,t){if(e){t=t||"normal";r.show(t)}else{r.show()}}function o(e,t){if(e){t=t||"normal";r.hide(t)}else{r.hide()}}var n=typeof n==="function"&&!n.amd?n:false;var r=$("#queryCorrect");var i=function(e){if(e&&e.hint&&e.hint.cityCode){var t=e.hint;if(r.length>0){var n=$.trim((t.location?t.location+" ":"")+t.detail);if(n.length==0)r.html('<div class="b_place_recommend"><p>你要找的是不是：<a href="/search.jsp?cityurl='+encodeURIComponent(t.cityCode)+"&toCity="+encodeURIComponent(t.cityName)+"&fromDate="+fromDate+"&toDate="+toDate+'&from=cityerror" hidefocus="on">位于'+t.cityName+"的酒店</a></p></div>");else r.html('<div class="b_place_recommend"><p>您要找的是不是：<a href="/search.jsp?cityurl='+encodeURIComponent(t.cityCode)+"&toCity="+encodeURIComponent(t.cityName)+"&q="+encodeURIComponent(n)+"&fromDate="+fromDate+"&toDate="+toDate+'&from=cityerror" hidefocus="on">'+t.cityName+" "+n+"</a></p></div>");s()}}};t.init=i;t.show=s;t.hide=o},958:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;var i=n(959);var s=n(964);var o=n(965);e.exports={filterPanel:i,filterManager:s,hotelSortAffix:o}},959:function(e,t,n){function Lt(e){var t=e.price;var n=e.grade;var r=e.qArea;var i=e.brand;var s=e.equip;var o=e.hotelType;var u=e.sorter&&e.sorter.toUpperCase();var a=e.tuan;var f=e.kdh;var l=e.LZ;var c=e.bnbJNH;var h=e.limitTime;var p=e.starVoucher;var d=e.bestBnb;if(t&&t.length>0){Ht(t)}if(n&&n.length>0){jt(n)}if(r){Ot(r)}if(s){Pt(s)}if(o){Dt(o)}if(i){Mt(i)}if(u&&$.trim(u).length){At(u)}var v=j.status;for(var m=0;m<v.length;m++){if(v[m].value==="tuan"&&a===true){v[m].checked=true;continue}if(v[m].value==="kdh"&&f===true){v[m].checked=true;continue}if(v[m].value==="limitTime"&&h===true){v[m].checked=true;continue}if(v[m].value==="lianzhu"&&l===true){v[m].checked=true;continue}if(v[m].value==="starVoucher"&&p===true){v[m].checked=true;continue}if(v[m].value==="bestbnb"&&d===true){v[m].checked=true;continue}}if(c){_t(c)}}function At(e){if(e.indexOf("DEFAULT")!==-1){return}var t=[],n,r,i,s=e.split("-");for(var o=0,u=b.length;o<u;o++){var a=b[o],f=b[o].value.toUpperCase();if(a["checked"]===true){t.push(a)}if(f===e){n=a}else if(f.split("-")[0]===s[0]){if(f.split("-")[1]==="DEFAULT"){i=a}else{r=a}}}if(n&&t.length){n["checked"]=true;if(r&&i){r["data-isshown"]=true;n["data-isshown"]=false;i["data-isshown"]=false}$.each(t,function(e,t){t["checked"]=false})}}function Ot(e){O=e}function Mt(e){k=e;Tt.getControl("brand").setDefaultValue(e);$t()}function _t(e){if(e&&e.length){P=e;for(var t=0,n=x.length;t<n;t++){for(var r=0,i=P.length;r<i;r++){if(x[t].value===P[r].value){x[t].checked=true;break}}}Tt.getControl("bnbJNH").setDefaultValue(e)}}function Dt(e){var t=[];for(var n=0,r=e.length;n<r;n++){t.push({value:e[n],title:C[e[n]]})}N=t;Tt.getControl("hotelType").setDefaultValue(t);$t()}function Pt(e){var t=[];for(var n=0,r=e.length;n<r;n++){for(var i=0,s=v.length;i<s;i++){if(v[i].ename===e[n]){v[i].checked=true;t.push(v[i]);break}}}Tt.getControl("equip").setDefaultValue(t);$t()}function Ht(e){for(var t=0,n=e.length;t<n;t++){for(var r=0,i=c.length;r<i;r++){if(c[r].value===e[t].value){c[r].checked=true;break}}}}function Bt(e,t,n){var r=/^\d{0,5}$/;for(var i=0,s=n.length;i<s;i++){if(n[i].title==="自定义价格"){var o=n[i].from,u=n[i].to;if(!o||!u||!r.test(o)||!r.test(u)){break}e.setValue(o,u);t.getItemByTitle("自定义价格").value=o+","+u;t.setSelectedByTitle("自定义价格",true);break}}}function jt(e){defaultGrade=e;for(var t=0,n=p.length;t<n;t++){for(var r=0,i=defaultGrade.length;r<i;r++){if(p[t].value===defaultGrade[r].value){p[t].checked=true;break}}}Tt.getControl("grade").setDefaultValue(defaultGrade)}function Ft(){var e=Tt.getControl("position");if(e){e.hide()}}function It(){var e={name:"position",container:q,visible:false,constructorName:common.filter.MultilayerFilter,expendFirstTime:O?true:false,controls:[{title:"酒店位置",contentTpl:vt,containerTpl:dt,expend:true,canRetract:true,canCancel:true},{contentTpl:gt,containerTpl:mt,itemTpl:tt,expend:false,canRetract:false},{contentTpl:bt,containerTpl:yt,itemTpl:et,type:"radio",expend:false,canCancel:true,hasFields:true,canRetract:false}],listener:{change:function(e,t,n){var r=this.views[0].container;r.find(".js_wrapper").removeClass("selectedsecond");Nt(this.container,["class","style"],false);var i=Tt.getControl("distance");var s=i.getValue();if(s.value.length>0){i.clear()}$(Tt).triggerHandler("positionChange",[t])},render:function(){Nt(this.container,["class","style","hotlogo"],false)},topTagClick:function(e,t,n,r){var i=this.getValue();if(i.value.length!==0){var s=i.value[0].tagName;var o=this.views[0].container;o.find(".js_wrapper").removeClass("selectedsecond");if(r.checked){if(s===r.tagName)return}var u=this.getTopDataByTagName(s);var a=o.find("input[data-key='"+u.key+"']");a.length>0&&(a=a.closest(".js_wrapper"));a.addClass("selectedsecond")}}}};Tt.register(e);if(O){Tt.getControl("position").setDefaultValue({value:O,tagName:"商圈",title:O})}}function qt(){if(Tt){return Tt}Tt=new common.filter.FilterForm(xt);$(Tt).bind("change",function(e,t,n){this.updateClearAllState(Tt.isFiltered())});Tn();return Tt}function Rt(e){Lt(e);It();Tt.render(j);Tt.updateClearAllState(Tt.isFiltered());Vt();gn();kt();Ut();zt(e);B=new u({container:".js_customFilterBox",targetElement:".bestbnb_title #js_selected_bestBnb",type:"templateBodyBest",autoWidth:true});ln()}function Ut(){if(!l)return;var e={wrapperTag:".js_light_wrapper",checkedClass:"selected",disabledClass:"disabled"};new o($.extend({container:R},e));new o($.extend({container:z},e));new o($.extend({container:J},e));new o($.extend({container:W},e));new o($.extend({container:U},e));new o($.extend({container:V},e));new o($.extend({container:K},e))}function zt(e){var t=new common.widgets.CustomPriceFilter({container:$("#customPrice")});var n=Tt.getControl("price");var r=e.price;if(r&&r.length){Bt(t,n,r)}$(t).bind("submit",function(){n.lastValue=$.extend(true,{},n.getValue());var e=n.getItemByTitle("自定义价格");e.value=t.getValue().join(",");n.setSelectedByTitle("自定义价格",true);n.onChange("click")});$(n).bind("change",function(e,n,r){if(r==="clear"){t.setValue("","")}});$(Tt).bind("clearAll",function(){t.setValue("","")})}function Wt(){var e=F.find(".js_filter_panel:visible");e.find(".js_contaienrEl").removeClass("no_line");e.last().find(".js_contaienrEl").addClass("no_line")}function Vt(){var e=Y;if(a){e.html("连锁品牌及酒店类型<em></em>")}e.bind("click",function(){if(Xt){Jt()}else{$t()}})}function $t(){var e=Y;if(a){Tt.show(["brand","hotelType"]);e.removeClass("less").addClass("more");$(Tt).triggerHandler("showMore");e.html("收起更多<em></em>")}else{Tt.show(["equip","hotelType"]);e.removeClass("less").addClass("more");$(Tt).triggerHandler("showMore");e.html("收起更多<em></em>")}Wt();Xt=true}function Jt(){var e=Y;if(a){Tt.hide(["brand","hotelType"]);e.removeClass("more").addClass("less");$(Tt).triggerHandler("hideMore");e.html("连锁品牌及酒店类型<em></em>")}else{Tt.hide(["equip","hotelType"]);e.removeClass("more").addClass("less");$(Tt).triggerHandler("hideMore");e.html("酒店类型及入住要求<em></em>")}Wt();Xt=false}function Gt(){if(Qt){Tt.getControl("position").show();return}$.ajax({url:"//hotel.qunar.com/city/hotelLocationCategory.jsp?cityurl="+window.cityurl,type:"get",cache:false,datatype:"json"}).done(function(e){var t=!!O;Zt(e);if(!window.isMainlandIncludeHM&&!t&&Kt){Yt(Kt,"观光景点")}Tt.render({position:Kt},true);Tt.getControl("position").show();Tt.getControl("position").visible=true;Qt=true}).fail(function(e){})}function Yt(e,t){var n,r=false,i;for(var s=0,o=e.length;s<o;s++){n=e[s];if(n&&n.tagName===t&&n.children&&n.children.length){i=n;r=true}if(n&&n.tagName!==t&&n.checked){r=false;break}}if(r){if(i){i.checked=true}}}function Zt(e){e["hotelStationAir"]=[];if(e["airports"]&&e["airports"].length){e["hotelStationAir"].push({name:"机场",value:e["airports"]})}if(e["trainStations"]&&e["trainStations"].length){e["hotelStationAir"].push({name:"火车站",value:e["trainStations"]})}if(e["busStations"]&&e["busStations"].length){e["hotelStationAir"].push({name:"汽车站",value:e["busStations"]})}var t=[];$.each(e["subways"]||[],function(e,n){t.push({name:n.name,value:n.stations})});e["subways"]=t;var n=["beijing_city","shanghai_city","chengdu"].join();var r=[];if(n.indexOf(window.cityurl)!=-1){$.each(e["tradeArea"]||[],function(e,t){r.push({name:t.name,value:t.hotRegions})})}else{$.each(e["tradeArea"]||[],function(e,t){r=r.concat(t)})}e["tradeArea"]=r;var i=[{name:"热门位置",value:"tradeArea"},{name:"行政区",value:"administrativeArea"},{name:"地铁线路",value:"subways"},{name:"车站/机场",value:"hotelStationAir"},{name:"观光景点",value:"touristSpots"},{name:"医院",value:"healthCares"},{name:"大学",value:"universitys"},{name:"郊游景点",value:"outingSpots"}];var s=[],o=[],u=[];var a=function(e,t,n){return limitString(n,e,t,"...")};$.each(i,function(t,n){var r=false;var i=e[n.value]||[];o=[];if(i.length){if(i[0].name){$.each(i,function(e,t){u=[];var i=false;$.each(t.value,function(e,s){var o=s.qname;var f="";var l=o===O;if(l){i=true;r=true;O=""}f=a(10,9,s.dname);var c={title:s.dname,tagName:n.name,label:f,routeType:t.name,value:o,checked:l,"data-style":"width:150px;margin-left:0;margin-right:0;padding-left:0;padding-right:0"};u.push(c)});if(u.length){o.push({title:t.name,tagName:n.name,label:a(5,5,t.name),checked:o.length===0||i,children:u})}})}else{var f=false;u=[];$.each(i,function(e,t){var i=t.qname;var s="";var o=i===O;if(o){f=true;r=true;O=""}s=a(10,9,t.dname);var l={title:t.dname,tagName:n.name,label:s,routeType:n.name,value:i,checked:o,"data-style":"width:150px;margin-left:0;margin-right:0;padding-left:0;padding-right:0"};u.push(l)});if(u.length){o.push({title:n.name,tagName:n.name,label:a(5,5,n.name),checked:o.length===0||f,children:u})}}}if(o.length){if(r){M=true}s.push({title:n.name,tagName:n.name,label:n.name,checked:r,children:o})}});O=null;Kt=s}function en(e){for(var t in e){return false}return true}function tn(e,t){var n=Tt.getValue(e);var r=null;var i=null;var s=0;var o=Tt.getControl(e);if(n&&n.value&&n.value.length>0){for(s=0;s<n.value.length;s++){i=n.value[s].value;r=o.valueMap[i];if(!r||!t[i]){if(!t[i]){t[i]=n.value[s];t[i]["name"]=t[i]["label"];t[i]["count"]=0}}else{t[i]=r;t[i]["name"]=r["label"]}}}}function rn(e){tn("brand",e);L=[];var t=$.extend(true,{},e),n=false;var r=function(){if((this.index+1)%nn===1){return true}return false};var i=function(e){if((this.index+1)%nn===0||this.index+1===e){return true}return false};var s=0;for(var o in t){var e=t[o];if(e.count<=0&&!e.checked)continue;e.title=e.name;e.value=o;e.label=limitString(e.name,6,5,"...");e.checkStart=r;e.checkEnd=i;n=false;if(k&&k.length){for(var u=0;u<k.length;u++){if(k[u].value===e.value&&k[u].title===e.title){e.checked=true;e.weight=k[u].weight||1;L.unshift(e);k.splice(u,1);n=true;break}}}!n&&L.push(e)}if(k.length>0){for(var u=0,a=k.length;u<a;u++){k[u].checked=true}L=k}k=[];L=L.sort(function(e,t){return t.count-e.count});A=vn(L)}function on(e){var t=false;if(!sn){var n=N.length!==0;for(var r in e){var i=e[r];t=false;if(!n&&i.count<=0&&!e.checked)continue;i.title=i.name;i.value=i.key;if(N){for(var s=0;s<N.length;s++){if(N[s].value===i.value){i.checked=true;i.weight=N[s].weight||1;_.unshift(i);N.splice(s,1);t=true;break}}}if(!t){if(!i.count||i.count===0){i.count=0;i.disabled=true}_.push(i)}}if(N.length>0){for(var s=0,o=N.length;s<o;s++){N[s].checked=true}_=N}_=_.sort(function(e,t){return t.count-e.count});D=vn(_);sn=true}else{un("hotelType",e,D)}}function un(e,t,n){tn(e,t);for(var r=0,i=t.length;r<i;r++){var s=n[t[r].name];if(!s)continue;if(t[r].count<=0&&!s.checked){s.disabled=true}else{s.disabled=false}}}function an(e,t,n){if(!t){t={cheapest:{name:"震撼低价",count:0},allInOne:{name:"一价全包",count:0},gift:{name:"超值买赠",count:0},lz:{name:"连住特惠",count:0}}}tn(e,t);var r;for(r in t){var i=n[t[r].name];if(!i)continue;if(t[r].count<=0&&!i.checked){i.disabled=true}else{i.disabled=false}}}function fn(e){var t;var n=getQueryInfo(e);t=Tt.lastClick||{};var r=t.value||[];var i=e.info;rn(i.brandCnt);on(i.hotelType);un("grade",i.dangci,d);un("equip",i.condition,m);i&&an("bnbJNH",i.jnh,T);var s={brand:L,hotelType:_,grade:p,equip:v,bnbJNH:x};if(r.length>0&&$.inArray(t.key||"",["brand","hotelType","grade","equip","bnbJNH"])!=-1){delete s[t.key]}Tt.render(s);Wt();cn();if(Xt){$t()}}function ln(){$("#filterBox").delegate(".promonite i","click",function(e){var t=$(this).attr("id");var n=t.substring(3);var r=$("#"+n);var i=r.prop("checked");if(i){i=false;r.closest("li").removeClass("selected")}else{i=true;r.closest("li").addClass("selected")}r.prop("checked",i);r.trigger("change.filterRender")})}function cn(){if(a&&!f){R.after(V.show());U.after(K.show());z.hide();W.hide();f=true}}function hn(e,t,n){var r=Tt.getControl("bigSorter").valueMap;var i=Tt.getControl("smallSorter");var s=Tt.getControl("bigSorter");if(e){$("#distance_area").text(t);Tt.getControl("distance").show();r["DISTANCE-asc"]["data-isshown"]=true;r["DISTANCE-asc"]["data-isshownsmall"]=true;$("#wrapper_DISTANCE-asc").show()}else{Tt.getControl("distance").hide();if(r["DISTANCE-asc"].checked==true){s.setSelected("default");if(n){i.setSelected("default");wn(i,"默认排序")}Tt.updateClearAllState(Tt.isFiltered())}r["DISTANCE-asc"]["data-isshown"]=false;r["DISTANCE-asc"]["data-isshownsmall"]=false;$("#wrapper_DISTANCE-asc").hide()}if(n){i.render(s.data)}else{s.show()}}function pn(e){$("#distance_area").text(e)}function dn(){var e=this.view;var t=$(window).width();e.popupLayerEl.css({position:"absolute",right:0,zIndex:1e3});e.popupLayerEl.css({top:e.container.height()})}function vn(e,t){var n={};for(var r=0,i=e.length;r<i;r++){var s=e[r];var o=s[t]||s.title;n[o]=s}return n}function mn(e){for(var t=0,n=e.length;t<n;t++){e[t].checked=false;e[t].weight=0}}function gn(){$.CustomFilterBox.refresh({container:Q,fields:["iconClass","isshown"],active:false,radioTemplate:['<li id="wrapper_{{value}}" class="{{^isshown}} hide{{/isshown}}{{#checked}} selected{{/checked}}"><em>','<span class="{{iconClass}} js_label" title="{{title}}">{{&labelHTML}}</span></em>{{&inputHTML}}</li>'].join("")})}function yn(e){function u(e,t){var n=i[e];for(var s=0,o=n.length;s<o;s++){var u=e+"-"+t;var a=n[s]===u;r[n[s]]["data-isshown"]=a;var f=$("#wrapper_"+r[n[s]].value);if(a){f.show()}else{f.hide()}}}function a(e){$("#wrapper_default,#wrapper_DISTANCE-asc,#wrapper_SCORE-desc").removeClass("selected");e&&$("#wrapper_"+e).addClass("selected")}var t=this;var n=this.data;var r=this.valueMap;var e;var i={PRICE:["PRICE-default","PRICE-asc","PRICE-desc"],DC:["DC-default","DC-asc","DC-desc"]};var s={asc:"desc",desc:"asc",DC:"PRICE",PRICE:"DC"};if(e==="DC-default"){u("DC","asc");u("PRICE","default");a()}else if(e==="PRICE-default"){u("DC","default");u("PRICE","desc");a()}else if($.inArray(e,["PRICE-desc","PRICE-asc","DC-desc","DC-asc"])!=-1){var o=e.split("-");u(o[0],s[o[1]]);u(s[o[0]],"default");a()}else{u("PRICE","default");u("DC","default");a(e)}}function bn(e,t,n){if(!e)return;var r=Tt.getControl(e);r&&r.setSelected(t,n)}function wn(e,t){var n=$("#smallSorterTitle");if(t){n.html(t);return}var r=e.getValue().value[0];if(!r)return;n.html(r["data-smalltitle"]);$("#smallSorterContent").hide()}function En(){var e=Tt.getControl("brand");var t=e.view.popupLayerEl;var n=t.find(".js_brand_list");var r=0;for(var i=0,s=n.length;i<s;i++){var o=n[i];var u=$(o).find("ul").length;r+=103*u+21}t.width(r)}function Sn(){Tt.getControl("position").clear()}function xn(e){if(e){var t=Tt.getControl("position")}}function Tn(){J.delegate(".js-list-lz-link","click",function(){window.GARunerById&&window.GARunerById(window["_ba_utm_s"],"list|连住特惠气泡")});J.delegate(".js-list-tips-link","click",function(){window.GARunerById&&window.GARunerById(window["_ba_utm_s"],"list|"+$(this).data("bc"))})}function Nn(){var e=Tt.getControl("brand");var t=Tt.getControl("hotelType");e.sortData();e.render(e.getData());t.sortData();t.render(t.getData())}function Cn(e){var t=Tt.getControl("equip");if(e){t.updateMaxNum(10)}else{t.updateMaxNum(8)}t.sortData();t.render(t.getData())}function kn(e){var t=Tt.getControl("bnbJNH");var n=t&&t.getValue();var r=n&&n.value&&n.value.length;if(e&&e.info&&e.info.jnh||r){K.show();Wt()}else{K.hide();Wt()}}function Ln(e,t){if(e){t=t||"normal";F.show(t)}else{F.show()}Z.children().show();Z.addClass("b_hotel_info_bg");Z.removeClass("b_sort_bar_topborder")}function An(e,t){if(e){t=t||"normal";F.hide(t)}else{F.hide()}Z.children().hide();Z.removeClass("b_hotel_info_bg");Z.addClass("b_sort_bar_topborder")}var r=typeof r==="function"&&!r.amd?r:false;n(52);n(57);n(775);n(76);var i=n(960);var s=n(961);var o=n(962).LightChoose;var u=n(963);var a=window.isWhiteCityUrl,f=false;var l=$.browser.msie&&($.browser.version==="6.0"||$.browser.version==="7.0");var c=i.priceValue;var h=vn(c);var p=i.gradeValue;var d=vn(p);var v=i.equipValue;var m=vn(v,"ename");var g=i.distanceValue;var y=vn(g);var b=i.bigSortValue;var w=vn(b);var E=i.statusValue;var S=vn(E);var x=i.bnbJNH;var T=vn(x);var N=[];var C=i.defaultHotelTypeMap;var k=[];var L=[];var A={};var O;var M;var _=[];var D={};var P=[];var H={};var B;var j={price:c,distance:g,bigSorter:b,smallSorter:b,status:E,bnbJNH:x};var F=$("#filterBox"),I=$("#js_clearAll"),q=$("#positionFilter"),R=$("#priceFilter"),U=$("#gradeFilter"),z=$("#brandFilter"),W=$("#hotelTypeFilter"),X=$("#distanceFilter"),V=$("#equipFilter"),J=$("#statusFilter"),K=$("#bnbJNHFilter"),Q=$("#bigSorter"),G=$("#smallSorter"),Y=$("#filter_more_link"),Z=$("#sorterPanel");var et=s.itemTpl;var tt=s.itemTplSecond;var nt=s.itemTplForIE67;var rt=s.checkBoxTemplate;var it=s.checkBoxContainerTemplate;var st=s.priceContainerTemplate;var ot=s.checkBoxTemplate;var ut=s.checkBoxClearTemplate;var at=s.checkBoxContentTemplate;var ft=s.checkBoxMoreTemplate;var lt=s.popupLayerTemplate;var ct=s.popupLayerItemTemplate;var ht=s.popupLayerItemForIE67Template;var pt=s.smallSorterContainerTemplate;var dt=s.firstContainerTemplate,vt=s.firstContentTemplate;var mt=s.secondContainerTemplate,gt=s.secondContentTemplate;var yt=s.thirdContainerTemplate,bt=s.thirdContentTemplate;var wt=s.bnbJNHContainerTemplate;var Et=s.brandcontentTpl;var St={constructorName:common.filter.UniqueFilter,contentTpl:at,containerTpl:it,clearTpl:ut,moreTpl:ft,popupLayerTpl:lt,itemTpl:l?nt:et};var xt={container:F,clearAllEl:I,controls:{price:$.extend({container:R,type:"checkbox",title:"价格范围",visible:true,hasFields:true,fullReplace:false,listener:{render:function(){!l&&Nt(this.view.container,["class"])}}},St,{containerTpl:st}),grade:$.extend({container:U,type:"checkbox",title:"酒店级别",visible:true,fullReplace:false,listener:{render:function(){!l&&Nt(this.view.container)}}},St),equip:$.extend({container:V,type:"checkbox",title:"入住要求",moreTitle:"全部要求",maxNumber:10,visible:a?true:false,hasSort:a?false:true,fullReplace:false,popupLayerGroupTpl:['<div class="brand_box hotelType_box">',"<h3>{{group.title}}</h3>",'<div class="brand_list clr_after">',"<ul>{{#children}}{{>popupLayerItemTpl}}{{/children}}</ul>","</div></div>"],popupLayerItemTpl:l?ht:ct,groups:[{key:"入住要求",title:""}],listener:{showMore:function(){dn.call(this);!l&&Nt(this.view.container)},render:function(){!l&&Nt(this.view.container)}}},St),distance:{container:X,type:"radio",title:"距离",visible:false,fullReplace:false,constructorName:common.filter.UniqueFilter,containerTpl:'<p id="js-singleHotelCover" class="distance_title singleHotelCover"></p><p class="distance_title" id="js-distance-title">距离<span id="distance_area"></span>：</p>{{&clearHTML}}{{&contentHTML}}',clearTpl:'<p class="distance_any"><a href="#" onclick="return false" class="selected js_clearEl">不限</a></p>',contentTpl:'<p class="distance_target js_contentEl"></p>',listener:{change:function(){var e=this.getValue();if(e.value&&e.value.length>0){e=e.value[0].value}else{e=0}$(Tt).triggerHandler("distanceChange",e)},render:function(){Ct()}}},brand:$.extend({container:z,type:"checkbox",title:"连锁品牌",moreTitle:"全部品牌",maxNumber:10,hasSort:true,fullReplace:true,popupLayerGroupTpl:['<div class="brand_box">',"<h3>{{group.title}}</h3>",'<div class="brand_list js_brand_list clr_after">',"{{#children}}{{>popupLayerItemTpl}}{{/children}}","</div></div>"],popupLayerItemTpl:l?ht:ct,groups:[{key:"经济型",title:"经济型品牌"},{key:"舒适",title:"舒适型品牌"},{key:"高级",title:"高档型品牌"},{key:"豪华",title:"豪华型品牌"}],listener:{showMore:function(){dn.call(this);En();!l&&Nt(this.view.container)},change:function(){if(l)return;if(arguments[2]&&arguments[2]==="popupClicked"){Nt(this.view.container)}},render:function(){!l&&Nt(this.view.container)}},visible:a?false:true},St,{contentTpl:Et}),hotelType:$.extend({container:W,type:"checkbox",title:"酒店类型",moreTitle:"全部类型",maxNumber:10,hasSort:true,fullReplace:false,popupLayerGroupTpl:['<div class="brand_box hotelType_box">',"<h3>{{group.title}}</h3>",'<div class="brand_list clr_after">',"<ul>{{#children}}{{>popupLayerItemTpl}}{{/children}}</ul>","</div></div>"],popupLayerItemTpl:l?ht:ct,groups:[{key:"类型",title:""}],listener:{showMore:function(){dn.call(this);!l&&Nt(this.view.container)},change:function(){},render:function(){!l&&Nt(this.view.container)}},visible:false},St),bigSorter:{container:Q,type:"radio",title:"排序",moreTpl:[""],clearTpl:[""],contentTpl:['<ul class="e_hotelSort_sortSel js_contentEl"></ul>'],constructorName:common.filter.UniqueFilter,hasFields:true,fullReplace:false,listener:{change:function(){var e=arguments[1];if(e&&e.value&&e.value.length>0){var t=e.value[0].value;yn.call(this,t);Tt.getControl("smallSorter").setData(this.data)}},render:function(){gn()}}},smallSorter:{container:G,type:"radio",title:"默认排序",moreTpl:[""],clearTpl:[""],containerTpl:pt,contentTpl:['<ul id="smallSorterContent" class="pop js_contentEl"></ul>'],constructorName:common.filter.UniqueFilter,hasFields:true,fullReplace:false,listener:{change:function(){var e=arguments[1];if(e&&e.value&&e.value.length>0){wn(this);var t=e.value[0].value;yn.call(this,t);Tt.getControl("bigSorter").setData(this.data)}},render:function(){$.CustomFilterBox.refresh({container:G,fields:["hasup","hasdown","isshownsmall","labelsmall"],radioTemplate:['<li id="wrapper_{{id}}" {{^isshownsmall}}style="display:none"{{/isshownsmall}} class=" {{class}}{{#checked}}active{{/checked}}"><span>{{labelsmall}}</span><s class="{{#hasup}} asc{{/hasup}}{{#hasdown}} desc{{/hasdown}}"></s>{{&labelHTML}}{{&inputHTML}}</li>'].join("")})}}},status:{container:J,type:"checkbox",constructorName:common.filter.UniqueFilter,moreTpl:[""],clearTpl:[""],fullReplace:false,hasFields:true,contentTpl:['<ul class="e_hotelSort_checkSel js_contentEl"></ul>'],listener:{render:function(){$.CustomFilterBox.refresh({container:J,fields:["ismultinight","hasBestBNB","redEnvelope","longTitle","onlyWideScreen","freePickup"],checkboxTemplate:""+'<li class="{{#checked}} selected{{/checked}}{{#disabled}} no{{/disabled}}{{#ismultinight}} multinight lz_title{{/ismultinight}}{{#hasBestBNB}}  multinight bestbnb_title {{/hasBestBNB}}{{#redEnvelope}}redenvelope {{/redEnvelope}}{{#onlyWideScreen}} only_widescreen {{/onlyWideScreen}}">'+"{{#ismultinight}}"+'<a title="连住更优惠" href="//hotelzt.qunar.com/ljlz0626/?in_track=lianzhu_h_list&from=hotellianzhu" class="lz_title_icon js-list-lz-link" target="_blank">'+'<span class="hide">连住更优惠</span>'+"</a>"+"{{/ismultinight}}"+"{{#hasBestBNB}}"+'<a title="{{longTitle}}" data-bc="最佳客栈气泡" href="javascript:;" class="bestbnb_title_icon js-list-tips-link" onclick="return false;">'+'<span class="hide">最佳客栈</span>'+"</a>"+"{{/hasBestBNB}}"+"{{#redEnvelope}}"+'<a title="{{longTitle}}" data-bc="红包直减气泡" href="javascript:;" class="bestbnb_title_icon js-list-tips-link" onclick="return false;">'+'<span class="hide">红包直减</span>'+"</a>"+"{{/redEnvelope}}"+'<em title="{{longTitle}}" id="js_selected_bestBnb">{{&labelHTML}}</em>{{&inputHTML}}'+"</li>"})}}},bnbJNH:$.extend({container:K,type:"checkbox",title:"客栈嘉年华",visible:false,fullReplace:false,listener:{render:function(){!l&&Nt(this.view.container)}}},St,{containerTpl:wt})}};var Tt;var Nt=function(e,t,n){var r={container:e,radioTemplate:rt,checkboxTemplate:ot};if(t&&t.length>0){r.fields=t}if("undefined"!==typeof n){r.replace=n}$.CustomFilterBox.refresh(r)};var Ct=function(){$.CustomFilterBox.refresh({container:X,radioTemplate:'<span class="{{#checked}}selected{{/checked}}" title="{{title}}">{{&labelHTML}}{{&inputHTML}}</span>'})};var kt=function(){G.bind("mouseenter",function(){$("#smallSorterContent").show()}).bind("mouseleave",function(){$("#smallSorterContent").hide()});G.hide()};var Xt=false;var Kt=[];var Qt=false;var nn=17;var sn=false;t.checkShowBnbJNHFilter=kn;t.adjustFilterItemPosition=Nn;t.changeSmallSorterTitle=wn;t.initFilterBox=qt;t.initialRender=Rt;t.setPositionData=Zt;t.updateData=fn;t.showDistance=hn;t.setSelected=bn;t.loadPosition=Gt;t.hidePosition=Ft;t.updateSorterValue=yn;t.positionClear=Sn;t.setDistanceName=pn;t.checkedByPositionTagName=xn;t.updateFilterNoLine=Wt;t.show=Ln;t.hide=An;t.adjustFilterShowMore=Cn},960:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;var r=[{title:"¥200以下",value:"0,200"},{title:"¥200-¥300",value:"200,300"},{title:"¥300-¥500",value:"300,500"},{title:"¥500以上",value:"500,"+Number.MAX_VALUE.toString()},{title:"自定义价格",value:"自定义","data-class":"hide","class":"hide"}];t.gradeValue=[{title:"经济型",value:"1"},{title:"二星级/其他",value:"0,5"},{title:"三星级/舒适",value:"2"},{title:"四星级/高档",value:"3"},{title:"五星级/豪华",value:"4"}];var i=[{title:"免费宽带",ename:"isWebFree",value:0},{title:"游泳池",ename:"HasIndoorPool",value:2},{title:"新开业/装修",ename:"isNewHotel",value:5},{title:"餐厅",ename:"HasRestaurant",value:4},{title:"商务中心",ename:"HasBusinessCenter",value:1},{title:"健身房",ename:"HasFitnessRoom",value:3},{title:"会议室",ename:"HasMeetingORBanquetSpace",value:6},{title:"接待外宾",ename:"hasReceiveVisitor",value:8},{title:"可携带宠物",ename:"isPetAllowed",value:13}];if(window.isWhiteCityUrl){i=[{title:"免费宽带",ename:"isWebFree",value:0},{title:"接机服务",ename:"HasAirportPickUp",value:10},{title:"接站服务",ename:"HasStationPickUp",value:11},{title:"24小时热水",ename:"hasHeatWaterName",value:12},{title:"游泳池",ename:"HasIndoorPool",value:2},{title:"餐厅",ename:"HasRestaurant",value:4},{title:"新开业/装修",ename:"isNewHotel",value:5},{title:"可携带宠物",ename:"isPetAllowed",value:13}];r=[{title:"¥100以下",value:"0,100"},{title:"¥100-¥200",value:"100,200"},{title:"¥200-¥300",value:"200,300"},{title:"¥300-¥400",value:"300,400"},{title:"¥400-¥500",value:"400,500"},{title:"¥500以上",value:"500,"+Number.MAX_VALUE.toString()},{title:"自定义价格",value:"自定义","data-class":"hide","class":"hide"}]}t.equipValue=i;t.priceValue=r;t.distanceValue=[{title:"1公里内",value:1},{title:"3公里内",value:3},{title:"5公里内",value:5}];t.bigSortValue=[{title:"默认排序",checked:true,value:"default",label:"默认排序","data-labelsmall":"默认排序","data-isshownsmall":true,"data-iconclass":"mr","data-isshown":true,"data-smalltitle":"默认排序"},{title:"按距离从近到远",value:"DISTANCE-asc",label:"距离","data-labelsmall":"距离：近到远","data-isshownsmall":false,"data-hasup":true,"data-iconclass":"aup","data-isshown":false,"data-smalltitle":"距离：近到远"},{title:"点击按星级从高到低",value:"DC-default",label:"星级","data-labelsmall":"","data-isshownsmall":false,"data-iconclass":"","data-isshown":true},{title:"点击按星级从高到低",value:"DC-desc",label:"星级","data-labelsmall":"星级：高到低","data-isshownsmall":true,"data-hasdown":true,"data-iconclass":"asc","data-isshown":false,"data-smalltitle":"星级：高到低"},{title:"点击按星级从低到高",value:"DC-asc",label:"星级","data-labelsmall":"低到高","data-isshownsmall":true,"data-hasup":true,"data-iconclass":"desc","data-isshown":false,"data-smalltitle":"星级：低到高"},{title:"点击按评分从高到低",value:"SCORE-desc",label:"评分","data-labelsmall":"评分：高到低","data-isshownsmall":true,"data-hasdown":true,"data-iconclass":"adown","data-isshown":true,"data-smalltitle":"评分：高到低"},{title:"点击按价格从低到高",value:"PRICE-default",label:"价格","data-labelsmall":"","data-isshownsmall":false,"data-iconclass":"","data-isshown":true},{title:"点击按价格从低到高",value:"PRICE-asc",label:"价格","data-labelsmall":"价格：低到高","data-isshownsmall":true,"data-hasup":true,"data-iconclass":"desc","data-isshown":false,"data-smalltitle":"价格：低到高"},{title:"点击按价格从高到低",value:"PRICE-desc",label:"价格","data-labelsmall":"高到低","data-isshownsmall":true,"data-hasdown":true,"data-iconclass":"asc","data-isshown":false,"data-smalltitle":"价格：高到低"}];var s=[];var o=/HALFOFF_GROUPBUY/;var u=/GLOBAL_RED_ENVELOPE/;if(!isMainlandIncludeHM){if(window.supportActivity&&u.test(window.supportActivity)){s.push({title:"红包直减",value:"redEnvelope","data-redEnvelope":true})}}if(window.hasBestBNB){s.push({title:"优选客栈",label:"优选客栈",value:"bestbnb","data-hasBestBNB":true})}if(isMainlandIncludeHM){s.push({title:"只看有房",value:"kdh"});if(window.isSpecialStay&&window.isSpecialCity){s.push({title:"连住特惠",value:"lianzhu","data-ismultinight":true})}s.push({title:"只看团队房",value:"gr"})}else{if(window.isSpecialStay&&window.isSpecialCity){s.push({title:"连住特惠",value:"lianzhu","data-ismultinight":true})}}t.statusValue=s;t.defaultHotelTypeMap={CHAIN_HOTEL:"连锁品牌",RESORT_HOTEL:"度假休闲酒店",VILLAGE_HOTEL:"乡村别墅",GUEST_HOTEL:"招待所",EXPO_HOTEL:"会展会务酒店",ECOMOMIC_HOTEL:"青年旅舍",SUBJECT_HOTEL:"主题酒店",FAMILY_HOTEL:"家庭旅馆",BEST_HOTEL:"奢华酒店",RENTAL_HOTEL:"酒店式公寓",EXCELLENT_HOTEL:"精品酒店",BUSINESS_HOTEL:"商务型酒店",GUZHEN_HOTEL:"客栈"};t.bnbJNH=[{title:"震撼低价",value:"cheapest"},{title:"连住特惠",value:"lz"},{title:"超值买赠",value:"gift"},{title:"一价全包",value:"allInOne"}]},961:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;t.itemTpl=['<input id="{{id}}" hidefocus="on" {{&fieldsHTML}} data-key="{{key}}" title="{{title}}" {{#disabled}}disabled="disabled"{{/disabled}} {{#checked}}checked = "checked"{{/checked}}',' class="js_item" type="{{type}}" name="{{name}}" value="{{value}}" />','<label hidefocus="on" class="js_item" for="{{id}}">{{label}}</label>'].join("");t.itemTplSecond=['<input id="{{id}}" hidefocus="on" {{&fieldsHTML}} data-key="{{key}}" title="{{title}}" {{#disabled}}disabled="disabled"{{/disabled}} {{#checked}}checked = "checked"{{/checked}}',' class="js_item" type="{{type}}" name="{{name}}" value="{{value}}" />','<label hidefocus="on" class="js_item" for="{{id}}">{{label}}</label>'];t.itemTplForIE67=['<li {{#style}}style="{{style}}"{{/style}} class="js_light_wrapper {{#checked}} selected{{/checked}} {{#disabled}} disabled{{/disabled}} {{class}}" style="position: relative;">','<em title="{{title}}"><label hidefocus="on" for="{{id}}">{{title}}</label></em>','<input hidefocus="on" class="js_item" {{#disabled}}disabled="disabled"{{/disabled}} {{#checked}}checked = "checked"{{/checked}} id="{{id}}" data-key="{{key}}" title="{{title}}" type="checkbox" name="{{name}}" value="{{value}}" style="opacity: 0.01; position: absolute; top: 0px; left: 0px;">',"</li>"].join("");t.checkBoxTemplate=['<li {{#style}}style="{{style}}"{{/style}} class="{{#checked}}selected{{/checked}}','{{#disabled}} disabled{{/disabled}} {{class}}">','<em title="{{title}}"><span class="delete"></span>{{&labelHTML}}</em>',"{{&inputHTML}}","</li>"].join("");t.radioBoxTemplate=['<li {{#style}}style="{{style}}"{{/style}} class="{{#checked}}selected{{/checked}}','{{#disabled}} disabled{{/disabled}}">','<em title="{{title}}">{{&labelHTML}}</em>',"{{&inputHTML}}","</li>"].join("");t.checkBoxContainerTemplate=['<div class="filter_b clr_after js_contaienrEl {{cls}}">','<p class="filter_title">{{title}}</p>','<div class="filter_rbox">',"{{&clearHTML}}","{{&contentHTML}}","{{&moreHTML}}","{{&popupLayerHTML}}","</div>","</div>"];t.bnbJNHContainerTemplate=['<div class="filter_b clr_after js_contaienrEl {{cls}}">','<p class="filter_title">{{{title}}}</p>','<div class="filter_rbox">',"{{&clearHTML}}","{{&contentHTML}}","{{&moreHTML}}","{{&popupLayerHTML}}","</div>","</div>"];t.priceContainerTemplate=['<div class="filter_b clr_after">','<p class="filter_title">{{title}}</p>','<div class="filter_rbox">',"{{&clearHTML}}","{{&contentHTML}}",'<div id="customPrice">','<div class="optional">自定义','<input type="text" maxlength="5" class="priTxt js_cpf_from">',"-",'<input type="text" maxlength="5" class="priTxt js_cpf_to">','<a href="#" onclick="return false" title="确定" class="hide priBut js_cpf_submit">确定</a></div>',"</div>","</div>","</div>"];t.checkBoxClearTemplate=['<p class="unlimited js_clearEl {{clearCss}}"><a href="#" onclick="return false">不限</a></p>'];t.checkBoxContentTemplate=["<ul class='item js_contentEl'></ul>"];t.brandcontentTpl=["<ul class='item js_contentEl'></ul><div class='promonite'></div>"];t.checkBoxMoreTemplate=['<p class="more js_moreEl"><a href="#" onclick="return false" title="{{moreTitle}}"></a></p>'];t.popupLayerTemplate=['<div class="filter_layer_bg js_popupLayerEl">','<div class="filter_layer clr_after">','<h4 class="js_closePopupButtonEl close"><a href="#" onclick="return false" title="关闭"><span class="hide">关闭</span></a></h4>',"{{&contentHTML}}","</div>","</div>"];t.popupLayerItemTemplate=['{{#checkStart}}<ul>{{/checkStart}}<input hidefocus="on" id="{{id}}" {{&fieldsHTML}} data-key="{{key}}" title="{{title}}" {{#disabled}}disabled="disabled"{{/disabled}} {{#checked}}checked = "checked"{{/checked}}',' class="js_item" type="{{type}}" name="{{name}}" value="{{value}}" />','<label class="js_item" hidefocus="on" for="{{id}}">{{label}}</label>{{#checkEnd}}</ul>{{/checkEnd}}'];t.popupLayerItemForIE67Template=['{{#checkStart}}<ul>{{/checkStart}}<li class="js_light_wrapper {{#checked}} selected{{/checked}} {{#disabled}} disabled{{/disabled}}">','<em title="{{title}}">','<label hidefocus="on" class="js_item" for="{{id}}">{{label}}</label>',"</em>",'<input hidefocus="on" {{#disabled}}disabled="disabled"{{/disabled}} {{#checked}}checked = "checked"{{/checked}} id="{{id}}" data-key="{{key}}" title="{{title}}" class="js_item" type="checkbox" name="{{name}}" value="{{value}}">',"</li>{{#checkEnd}}</ul>{{/checkEnd}}"];t.smallSorterContainerTemplate=['<ul class="title">','<li class="same"><span id="smallSorterTitle">{{title}}</span><span class="icon"></span></li>',"</ul>","{{&contentHTML}}"];t.firstContainerTemplate=['<div class="filter_b clr_after">','<p class="filter_title">{{title}}</p>','<div class="filter_rbox">',"{{&contentHTML}}","</div>","</div>"];t.firstContentTemplate=['<ul class="category js_contentEl"></ul>'];t.secondContainerTemplate=['<div class="filter_p clr_after no_line">{{&contentHTML}}</div>'];t.secondContentTemplate=['<ul class="js_contentEl subway clr_after"></ul>'];t.thirdContainerTemplate=['<div class="filter_p clr_after third_layer">{{&contentHTML}}</div>'];t.thirdContentTemplate=['<ul class="place js_contentEl clr_after"></ul>']},962:function(e,t){function r(e){var t=e.checkedClass||"selected";var n=e.disabledClass||"disabled";var r=e.container;r.delegate("input","change.LightChoose",function(r){var i=$(this);var s=i.closest(e.wrapperTag||".js_wrapper");if(i.prop("checked")){s.addClass(t)}else{s.removeClass(t)}if(i.prop("disabled")){s.addClass(n)}else{s.removeClass(n)}})}var n=typeof n==="function"&&!n.amd?n:false;t.LightChoose=r},963:function(e,t,n){function a(e){this.option=e;this.container=this.option.container;this.targetElement=this.option.targetElement;this.$tipLayer=[];this.tipHtmlTpl=o[this.option.type];this.tipWrapTemplate=s;this.renderTip();this.tipHtmlTpl&&this._bindEvent()}var r=typeof r==="function"&&!r.amd?r:false;n(67);var i=/MSIE 7\.0/.test(navigator.userAgent);var s=['<div class="m-activity-tips" id="js-filter-layer" style="z-index: 9502;display:none">','<div class="activity-tips-container clrfix filter-content">',"</div>","</div>"].join("");var o={templateBodyBest:'<div class="activity-tips-box clrfix"><div class="activity-content"><ol class="activity-info js-activity-content"><div class="what_pre_bnb"><h4>什么是优选客栈</h4><p><b>金冠优选</b>　最畅销客栈，提供最低价格，超赞服务，高品质首选住宿</p><p><b>银冠优选</b>　最好口碑客栈，提供最优惠的价格，最赞的服务</p><p><b>铜冠优选</b>　高性价比客栈，提供优惠价格，贴心服务</p></div></ol></div></div>',hotAccommodation:Hogan.compile(['<div class="filter-tips">','<div class="tip-scenic-desc-pic"><img class="tip-pic" src="{{imgUrl}}" /></div>','<div class="tip-scenic-desc">','<h4 class="tip-scenic-title">{{hotPlaceName}}</h4>','<span class="tip-guest-info"><span class="percent">{{percent}}%</span>的客人选择住在这里<span class="bnb-counts">{{bnbCounts}}</span>家客栈</span>','<p class="tip-scenic-text">',"{{viewDesc}}","</p>","</div>","</div>"].join(""))};var u={templateBodyBest:"bestbnb_seleted",hotAccommodation:"hot_place_tip"};a.prototype={renderTip:function(){var e=$("#js-filter-layer"),t=e.length;this.$filterLayer=e;if(!t){$("body").append(this.tipWrapTemplate)}},setData:function(e){this.data=e},showTip:function(e){var t=this.$filterLayer.length;if(!t){this.renderTip()}if(this.option.autoWidth){this.$filterLayer.addClass("m-activity-tips-autowidth")}else{this.$filterLayer.removeClass("m-activity-tips-autowidth")}if(u[this.option.type]){this.$filterLayer.addClass(u[this.option.type])}if(!this.data||!this.data[e]){return}var n=this.tipHtmlTpl&&this.tipHtmlTpl.render&&this.tipHtmlTpl.render(this.data[e])||this.tipHtmlTpl;this.$filterLayer.find(".filter-content").html(n);this.$filterLayer.show()},positonActivityTips:function(e){var t=$(window).width(),n=this.$filterLayer.width(),r=20,s=15,o=e.pageY+r,u=e.pageX+s;if(i){var a=GetZoomFactor()||.1;o=o/a;u=u/a}if(n+u>t){u=e.pageX-n}this.$filterLayer.css({top:o+"px",left:u+"px"})},hideTip:function(){this.$filterLayer.hide();if(u[this.option.type]){this.$filterLayer.removeClass(u[this.option.type])}},_bindEvent:function(){var e=this,t=null;$(e.container).delegate(this.targetElement,"mouseenter.preSelected",function(n){e.positonActivityTips(n);var r=$(this).data("hot");e.showTip(r);if(typeof t!==null){clearTimeout(t);t=null}if(i){var s=e.$filterLayer.find(".filter-content");setTimeout(function(){s.html(s.html())},300)}}).delegate(this.targetElement,"mouseleave",function(){if(typeof t!==null){clearTimeout(t);t=null}e.hideTip()}).delegate(this.targetElement,"mousemove",function(t){if(!i){e.positonActivityTips(t)}})}};e.exports=a},964:function(e,t){function E(){var e=null;try{for(var t=0,n=u.queries.length;t<n;t++){if(u.queries[t].qp.tradingArea&&u.queries[t].qp.tradingArea.length>0){e=u.queries[t].qp.tradingArea[0];break}}}catch(r){}var i=-1;if(a&&e!=null){for(var s=0,o=a.length;s<o;s++){if(a[s].name==e){i=s;break}}}f=i>-1?e:null}function S(e,t){var n=e.value,r=t.value,i=n.length,s=r.length,o,u,a,f;if(i>s){o=n;u=r;a=i;f=s}else{o=r;u=n;a=s;f=i}var l={};for(var c=0;c<f;c++){l[u[c].value]=true}for(var c=0;c<a;c++){if(!l[o[c].value]){return o[c]}}}var n=typeof n==="function"&&!n.amd?n:false;var r=typeof query!=="undefined"?query:"";var i;var s;var o;var u;var a;var f;var l=false;var c=false;var h=false;var p="您选择的位置";var d=false;var v={};var m=[["免费宽带","HGYGeXFY"],["商务中心","ownT_WG6"],["游泳池","0Ie44fNU"],["健身房","yYdMIL83"],["餐厅","MMObDrW4"],["新开业/装修","dDjWmcqr"],["会议室","Y0LTFGFh"],["早餐","6X7_yoo3"],["接待外宾","8F2RFLSO","0"],["地图默认缩放等级","U3rHP23d"],["接机服务","cGlja1Vw"],["接站服务","7b4bfd15"],["24小时热水","yamiYIN","有"],["可携带宠物","6bf51de0","Y"]];var g={"短地址":"0FA456A3","酒店名":"L0F4L3C1","星级":"ZO1FcGJH","一句话":"J6TkcChI","评论个数":"HCEm2cI6","评论评分":"08F7hM4i","主题":"8dksuR_","酒店档次":"YRHLp-jc","是否是cwt成员":"pl6clDL0","是否是LP推荐酒店":"HFn32cI6","是否是500强公司签约酒店":"vf_x4Gjt","地址":"2XkzJryU","静态酒店":"vNfnYBK6","google地标信息":"TDoolO-H","baidu地标信息":"pk4QaDyF","商圈":"x0oSHP6u","无烟房":"z4VVfNJo","品牌":"5_VrVbqO","图片ID":"VAuXapLv","图片个数":"U1ur4rJN","评论排名":"px3FxFdF","酒店区域":"xaSZV4wU","同级排名":"ZZY89LZZ","头图baseurl":"ZYCXZYHIRU","提供Wifi":"sYWEvpo","提供停车场":"er8Eevr","热门住宿地":"ha6ozyf","全部区域":"d90e9bb"};var y,b=null;var w={setContext:function(e){y=e;b=e.MixKey},isFiltered:function(){if(r){return true}var e=i.isFiltered();return e},isPositionFiltered:function(){var e=i.getValue("position").value;return e.length>0},isTradingAreaFiltered:function(){var e=i.getValue("position").value;if(e.length>0){return e[0].tagName==="商圈"||e[0].tagName==="区域"}else{return false}},isHotPlaceFiltered:function(){var e=i.getValue("position").value;if(e.length>0){return e[0].tagName==="热门住宿地"}else{return false}},isOpenDragPOI:function(){return c},isPreOpenDragPOI:function(){return h},setIsPreOpenDragPOI:function(e){h=e},getDragPOIText:function(){return p},setIsUsingMapTool:function(e){l=e},getIsUsingMapTool:function(){return l},getTradingAreaName:function(){var e=i.getValue("position").value;if(e.length>0){return e[0].value==="全部区域"?e[0].routeType:e[0].value}else{return""}},getPosInfos:function(){return s||[]},getDistance:function(){var e=i.getValue("distance").value;if(e.length>0){return e[0].value}else{return""}},setBounds:function(e,t){if(e==null){v.bounds=null}else if(e&&t){v.bounds={sw:e,ne:t}}},exactlyMatch:function(){var e=u.queries&&u.queries.length||0;if(e>0){return!!u.queries[0].fullMatch}return true},isMapFilteredEnabled:function(){return!!v.CoordInfo||!!v.bounds},isFilteredByCheckBox:function(){return i.isFiltered()},getFirstNonEmptyType:function(){var e=u.queries&&u.queries.length||0;for(var t=0;t<e;t++){if(u.queries[t].query!=o){return u.queries[t].query}}return""},getUrl:function(e){e=e||{};var t=function(){var e=[];for(var t in g){if(g.hasOwnProperty(t)){e.push(g[t])}}for(var n=0,r=m.length;n<r;n++){e.push(m[n][1])}return"attrs="+e.join(",")}();var n=function(n){var r=[t];r.push("showAllCondition=1");r.push("showBrandInfo=1");r.push("showNonPrice=1");r.push("showFullRoom=1");r.push("showPromotion=1");r.push("showTopHotel=1");r.push("useCommend=1");r.push("output=json1.1");r.push("v="+Math.random());r.push("requestTime="+(new Date).getTime());r.push("mixKey="+b.getMixKey());r.push("requestor=RT_HSLIST");for(var i in n){if(n.hasOwnProperty(i)){var s=n[i];if(s){r.push(i+"="+encodeURIComponent(s))}}}if(typeof newfilterid!="undefined"&&newfilterid!=""){filterid=newfilterid;r.push("filterid="+newfilterid)}else if(typeof filterid!="undefined"&&filterid!=""){r.push("filterid="+filterid)}if(window.filter_dh){r.push("dh=1")}var o="/render/renderAPIList.jsp?"+r.join("&");if(e.isFirstPage){o=o+"&isFirstPage="+e.isFirstPage}return o};var r=function(e,t){var n=[];for(var r=0,i=(e||[]).length;r<i;r++){n.push(e[r].value)}return n.join(t||",")};var s={cityurl:cityurl,q:$("#jxQ").val(),fromDate:fromDate,toDate:toDate};var o=$.extend(i.getValues(),v);var u=o.position;if(u&&u.length>0){var a=u[0];if(a.tagName!="商圈"&&a.tagName!="热门住宿地"){s.q=s.q?s.q+" "+a.value:a.value;s.lq=a.value}else if(a.tagName=="商圈"){s["PF_x0oSHP6u"]=a.value}else{if(a.value==="全部区域"){s["PF_d90e9bb"]=a.routeType}else{s["PF_ha6ozyf"]=a.value}}}var f=o.bigSorter;var l={desc:"1",asc:"0","DC-default":"1","PRICE-default":"0"};if(f&&f.length>0){var h=f[0].value;if(h!=="default"){var p=h.split("-");s.sort=p[0];s.desc=l[p[1]]||l[h];if(p[0]==="DISTANCE"&&w.isOpenDragPOI()){s.sort="COORDDIST"}}}var d=o.distance;if(d&&d.length>0){s.distance=parseInt(o.distance[0].value)*1e3}var y=o.status;var E=[];if(y&&y.length>0){for(var S=0,x=y.length;S<x;S++){switch(y[S].value){case"starVoucher":E.push("STAR_VOUCHER");continue;case"halfGroupby":E.push("HALFOFF_GROUPBUY");continue;case"pickFlight":E.push("FREE_JIEJI");continue;case"redEnvelope":E.push("GLOBAL_RED_ENVELOPE");continue;case"kdh":s.kdh=1;break;case"tuan":s.tuan=fromDate+","+toDate;break;case"dh":s.dh=1;break;case"lianzhu":s.lianzhu=1;break;case"bestbnb":s.bestbnb=1;case"gr":s.logicBit="4611686020574871552";break}}}if(E.length){s.activity=E.join(",")}var T=o.equip;if(T&&T.length>0){for(var S=0,x=T.length;S<x;S++){var N=m[T[S].value];if(N&&N[1]){s["PF_"+N[1]]=N[2]?N[2]:"Y"}}}if(o.CoordInfo){var C=o.CoordInfo.coord;s.coord=C.lat()+","+C.lng();s.coordDist=o.CoordInfo.coordDist;if(c){delete s.q;delete s.distance}}if(o.bounds){var k=o.bounds;s.bounds=[k.ne.lat(),k.ne.lng(),k.sw.lat(),k.sw.lng()].join(",")}if(o.pagerInfo){s.limit=o.pagerInfo.startIdx+","+o.pagerInfo.numPerPage}s.jnh=r(o.bnbJNH);s.levels=r(o.grade);s["PF_5_VrVbqO"]=r(o.brand);s.prs=r(o.price,";");s.hotelType=r(o.hotelType);return n(s)},getTips:function(){var e=function(e,t){if(t){e.push(t)}};var t=function(e){if(!e||!e.length)return"";var t=[];for(var n=0,r=e.length;n<r;n++){if(e[n]&&e[n].title)t.push(e[n].title)}return t.join("、")};var n=[],r=$.extend(i.getValues(),v);e(n,query);e(n,t(r.position));e(n,t(r.distance));e(n,t(r.price));e(n,t(r.grade));e(n,t(r.brand));e(n,t(r.hotelType));e(n,t(r.equip));e(n,t(r.status));e(n,t(r.sort));e(n,t(r.bnbJNH));return n.join(" | ")},getbrand:function(){var e=i.getValue("brand").value;return e},getgrade:function(){var e=i.getValue("grade").value;return e},getLastClickBeaconInfo:function(e){var t=i.lastClick,n,r;if(!t||!t.key)return;switch(t.key){case"bigSorter":n="排序";break;case"smallSorter":n="排序";break;case"position":if(t.value&&t.value.length>0){if(t.value[0].tagName=="商圈"){n="商圈"}else{n="地标"}}else{n="地标"}break;case"price":n="价格";break;case"status":n="其他";break;case"grade":n="星级";break;case"brand":n="品牌";break;case"hotelType":n="类型";break;case"equip":n="设施";break;case"bnbJNH":n="酒店list";break;case"distance":n="距离";break}try{if(e=="clear"){r="不限"}else{var s=S(i.getControl(t.key).getLastValue(),t);if(t.key=="position"&&s.tagName!="商圈"){r=[s.tagName||"",window.cityName,s.routeType||"",s.title||s.value||""].join("|")}else{r=s.title}}}catch(o){return""}return n+"|"+r},setPagerInfo:function(e){v.pagerInfo=e},setCoordInfo:function(e,t){if(e==null){v.CoordInfo=null}else if(e&&typeof t!=="undefined"){v.CoordInfo={coord:e,coordDist:t}}},getCoordInfo:function(){return v.CoordInfo},setIsOpenDragPOI:function(e){c=e},setFilterForm:function(e){i=e;d=true},setPolygonsInfo:function(e){a=e},setResult:function(e){o=e.key;s=e.poiInfo||[];u=e.queryInfo||{};E()},getQueryIsPoi:function(){return u.queries&&u.queries.length>0&&u.queries[0].qp&&u.queries[0].qp.poi&&u.queries[0].qp.poi.length>0},getTradingAreaFilter:function(){return f},isFormSeted:function(){return d}};e.exports=w},965:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;var i=n(288).Affix;var s=$("#hotel_sort"),o=s.find("p.num"),u=s.parent(),a=$("#jxContentPanel"),f=$("#focusPanel");var l={interSmallMap:688,interBigMap:864,mainlandWider:864,mainlandNarro:688};var c=l["mainlandWider"];var h=new i({el:s,heightHack:true,heightHackFix:s.outerHeight(true),range:[function(){return u.offset().top+o.outerHeight()},null,function(){return a.offset().top+a.outerHeight(true)-85+$(window).height()},null,function(){return f.offset().top+f.outerHeight(true)+$(window).height()},$(".js_hotelnum")],top:0,everyTime:true,left:function(){return u.offset().left-$(document).scrollLeft()},additionStyle:{width:function(){return c},backgroundColor:"#fff",zIndex:98},recoveryStyle:{width:function(){return c},position:"static"}});$(h).bind("mapResize",function(e,t){if(!t){c=l["interSmallMap"]}else{c=l["interBigMap"]}s.css("width",c)});$(h).bind("adjustWidth",function(e,t){if(t){c=l["mainlandWider"]}else{c=l["mainlandNarro"]}s.css("width",c)});$(h).bind("changePosition",function(){o.hide()});$(h).bind("showSorter",function(){s.show()});$(h).bind("hideSorter",function(){s.hide()});$(h).bind("resetPosition",function(){o.show()});t.hotel_sort=h},966:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;var i=n(967);var s=n(980);var o=n(981);var u=n(983);var a=n(985);var f=n(986);e.exports={ListPanel:hotel.list.ListPanel,InfoLoader:o,hotelAffixControl:u,ListPanelUpdate:a,Active:f,LazyLoad:hotel.list.LazyLoad}},967:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;var i=n(968);var s=n(978);var o=n(964);n(979);n(78);n(67);var u=isYizhanshi?"//hotel.qunar.com":"";(function(){QClass.define("hotel.list.ListPanel",{hotelTmpInfos:[],hotelInfosMapCache:{},hotelInfosCache:[],resultInfoFormat:{},decorators:[],isMainlandIncludeHM:false,initialize:function(e,t){this.context=t||{};this.isList=true;this.isMainlandIncludeHM=this.context.isMainlandIncludeHM;this.default_config={listContainer:null,pagerContainer:null,loadingContainer:null,noResultContainer:null,numPerPage:15,oneRequestPageNum:15,LINES_ASCII_LENGTH:160,fromDate:window.fromDate||null,toDate:window.toDate||null};this.GARuner=this.context.GARuner;this.MobileLowPriceCount={};this.needLazyLoad=true;this.config=$.extend({},this.default_config,e);this.isShowInterHotelPic=true;this._initPager();this.bindEvent();this._bindEvent();s.setContext(this.context);this.titleImage=new hotel.list.TitleImage(this.config.wrapContainer)},_initPager:function(){function t(){if(e.config.wrapContainer&&e.config.wrapContainer.length)window.scrollTo(0,Math.max(e.config.wrapContainer.parent().offset().top,0))}var e=this;if(e.config.pagerContainer&&e.config.pagerContainer.length){e.pager=new Pager(e.config.pagerContainer[0],1,1,function(n,r){(new jQuery.Event(r)).preventDefault();e.pagerStartIdx=(n-1)*e.config.numPerPage;e.page=n;$(e).trigger("pagerClick",n-1);t()},function(){return"#"});e.pager.render=function(e){var t=this.total,n=e,r=this.event;this.currentPage=e;if(n>0&&n<=t){var i=[],s=['<div class="ui-page',this.opts["cls"]?" "+this.opts["cls"]:"",'"><ul class="items">'];s.push('<li class="pager_count">'+e+"/"+this.total+"</li>");s.push('<li class="item prev ',n===1?"non_disable":'"><a',this._get_page_href(n-1),' hidefocus="on" class="num  icon-tag','" data-page="',n===1?-1:n-1,'"><span class="icon icon-btn-prev-2"></span><span>上一页</span></a></li>');if(!this.opts["noPageNumber"]){var o=true;for(var u=n<6?(o=false)||1:n+1<t?n-2:t-4;u<n;u++)i.push('<li class="item"><a class="num"',this._get_page_href(u),' hidefocus="on" data-page="',u,'">',u,"</a></li>");if(o)i.unshift('<li class="item"><a class="num"'+this._get_page_href(1)+' hidefocus="on" data-page="1">1</a></li><li class="item dot">...</li>');i.push('<li class="item active"> <span class="num">',n,"</span> </li>");o=true;for(var u=n+1;u<(t-n<5?(o=false)||t+1:n+(n<3?6-n:3));u++)i.push('<li class="item"><a class="num"',this._get_page_href(u),' hidefocus="on" data-page="',u,'">',u,"</a></li>");if(o){if(t-u>1){i.push('<li class="item dot">...</li>')}i.push('<li class="item"><a class="num"',this._get_page_href(t),' hidefocus="on" data-page="',t,'">',t,"</a></li>")}s.push(i.join(""))}s.push('<li class="item next ',n===t?" non_disable":"",'"><a',this._get_page_href(n+1),' hidefocus="on" class="num icon-tag" data-page="',n===t?-1:n+1,'"><span>下一页</span><span class="icon icon-btn-next-2"></span></a></li>');s.push("</ul></div>");this.el.innerHTML=s.join("")}else{this.el.innerHTML=""}if(this.first){if(this.event)this.bindEvent();this.first=false}}}if(e.config.easyPagerContainer&&e.config.easyPagerContainer.length){e.config.easyPagerContainer.hide();e.easypager=new Pager(e.config.easyPagerContainer[0],1,1,function(n,r){(new jQuery.Event(r)).preventDefault();e.pagerStartIdx=(n-1)*e.config.numPerPage;e.page=n;$(e).trigger("pagerClick",n-1);t()},function(){return"#"});e.easypager.render=function(e){var t=this.total,n=e,r=this.event;this.currentPage=e;if(n>0&&n<=t){var i=['<ul class="clr_after">'];i.push('<li class="prev ',n===1?"prev-disabled":"",'"><a href="#"',this._get_page_href(n-1),' hidefocus="on" onclick="return false;"','" data-page="',n===1?-1:n-1,'"><span class="icon"></span></a></li>');i.push('<li class="item">'+n+"/"+t+"</li>");i.push('<li class="next ',n===t?"next-disabled":"",'"><a href="#"',this._get_page_href(n+1),'hidefocus="on" onclick="return false;" ','data-page="',n===t?-1:n+1,'"><span class="icon"></span></a></li></ul>');this.el.innerHTML=i.join("")}else{this.el.innerHTML=""}if(this.first){if(this.event)this.bindEvent();this.first=false}};e.easypager.render(-1)}},renderNoResultHTML:function(e,t){var n=this;n.config.noResultContainer.html(i.renderNoResult({renderType:e,renderData:t}))},render:function(e,t,n,r){var i=this;this.hideLoading();window.Logger.time("listpanel render");$(this).trigger("beforeRender");if(t){if(!this.isMainlandIncludeHM){this.requestInterNoResultPage(window.query);this.renderNoResultHTML(t,n)}else{this.renderNoResultHTML(t,n);this.config.noResultContainer.show()}}this.resultInfoFormat=this.forMatHotels(e,r,t);if(this.hotelInfosCache.length){this.config.listContainer.append(this._renderHotels(this.resultInfoFormat));if(!this.resultInfoFormat||!this.resultInfoFormat.hotelTmpInfos||!this.resultInfoFormat.hotelTmpInfos.length){this.needLazyLoad=false}}else{this.config.listContainer.empty().html(this._renderHotels(this.resultInfoFormat));this.needLazyLoad=true}$("#js_block_sell").html(this._renderSellHotels(this.resultInfoFormat.info,e.queryInfo));i._renderPager(i.resultInfoFormat);this.hotelInfosCache=this.hotelInfosCache.concat(this.resultInfoFormat.hotelInfos);$(i).trigger("afterRender",i.resultInfoFormat);window.Logger.monitorTimeEnd("listpanel render",{code:"hotel_list_listpanel_render",logbrowser:1},function(e){if(e.time>400){e.url=location.href}})},getListPanelFomatter:function(){return $.extend(true,{},s.fomatter,s.hotelFomatter)},forMatHotels:function(e,t,n){var r=this;var i=r.context.utils.getQPTypes(e),a,f=t;r.hotelTmpInfos=[];if(e.flagship){a=$.extend(true,{},e.flagship);if(a.desc){a.desc=escapeHtml(a.desc)}e.flagship=a}var l={};var c=e.hotelInfos;$(c).each(function(t,a){var c=$.extend(true,{},a.groupShop);if(a.groupShop){if(c.stitle){c.stitle=escapeHtml(c.stitle)}else{c.href=escapeHtml(c.href)}}var h=a.tradingArea||"";h=h.split("|");if(h.length>1){$(r).trigger("tradingAreaRepeat",[a.id,h])}if(a.isHasHotelPic&&a.imageUri){l[a.id]=a.imageUri}if(r.hotelInfosCache.length){t=t+r.hotelInfosCache.length}else{r.isShowInterHotelPic=true}var p=function(){var e=o.getTradingAreaName();if(e===""){return a.hotArea&&a.hotArea[0]}else{var t=a.hotArea||[];if(o.isHotPlaceFiltered()){return e}else{return t[0]}return}};r.sendMobileLowPriceGA(a);var d=$.extend({id:a.id,isStatic:a.isStatic,specialCommend:a.specialCommend||"",index:t+1,name:a.hotelName,nameEscaped:escapeHtml(a.hotelName),cityname:a.cityName||"",isBNB:a.isBNB,showareamap:a.tradingArea||a.hotelAddress||a.HotelArea||a.short_addr||a.gpoint&&window.mapEnabled&&r.context.utils.getMapType()!=="none",area:o.isTradingAreaFiltered()?a.tradingArea||a.HotelArea||"":p()||a.tradingArea||a.HotelArea||"",shortAddr:a.short_addr||"",tradingArea:a.tradingArea,os:escapeHtml(a.os),hotelStars:a.hotelStars,stars:a.stars,dangci:a.dangci,groupShop:c,distinctlistData:a.distinctlist||"",isSelectedBNB:a.isSelectedBNB||0,qptype:i.join("|"),price:a.price,miniRetailPrice:a.MiniRetailPrice,priceStatus:a.priceStatus,isLowPrice:a.isLowPrice,selected:a.selected,bpoint:a.bpoint,gpoint:a.gpoint,scale:a.scale,mapEnabled:a.gpoint&&window.mapEnabled&&r.context.utils.getMapType()!=="none",bigMapEnable:a.gpoint&&window.mapEnabled&&r.context.utils.getMapType()!=="none"&&r.context.utils.getMapType()==="baidu",commentCount:a.CommentCount,commentScore:a.CommentScore&&a.CommentScore.toFixed&&a.CommentScore.toFixed(1),commentRank:a.CommentIndex,commentSameDangciRank:!a.dangciIndex||a.dangciIndex==="0"?0:a.dangciIndex,dangciHotelCount:a.dangciHotelCount||0,oneSentence:escapeHtml(a.oneSentence),hotelAddress:escapeHtml(a.hotelAddress),LINES_ASCII_LENGTH:r.config.LINES_ASCII_LENGTH,fromDate:window.fromDate,toDate:window.toDate,fromParam:a.specialCommend?"&from=specialrecommend":window.fromParam,qParam:window.qParam,filterid:window.filterid,queryInfo:e.queryInfo,info:e.info||{},walk:a.walk,drive:a.drive,filters:f,distance:a.distance,host:u,corrDist:a.corrDist,baseImageUrl:a.imageUri||"",templatetype:a.displayMobilePriceType,fromFocusList:"&fromFocusList="+(n===6?1:0),needHeadPic:r.isShowInterHotelPic},s.fomatter,s.hotelFomatter,{_basicHotel:a});d.areas=d.getAreaNames(r.isList);r.hotelTmpInfos.push(d);a.index=t;r.hotelInfosMapCache[a.id]=a});r.titleImage.fresh(l);e["hotelTmpInfos"]=r.hotelTmpInfos||[];return e},getHotelDoms:function(e,t,n,r){r=r||0;var s=$("<div></div>");var o;if(this.isMainlandIncludeHM){o=i.renderMainlandHotel}else{o=i.renderInterHotelTop100}var u=this;if($.isArray(e)){$.each(e,function(e,i){var a=$.extend({},t,i);var f=$($.trim(o.call(u,a)));$.each(u.decorators,function(t,i){i.call(u,f,a,e+r,n)});s.append(f)})}return s.children()},_renderHotels:function(e){var t=this;var n=e.hotelTmpInfos,r=t.getHotelNameFullMatch(e),s=e.hotelTmpInfos,o={isSingleHotel:false},u={},a="";var f=$("<div></div>");if(r.isFullMatch){var l={};if(n.length){u=n.slice(0,r.singleHotelNum)||[];l=$.extend(l,o,{isSingleHotel:!!n.length});s=n.slice(r.singleHotelNum)||[]}a=t.getHotelDoms(u,l,e)}if(e.flagship&&!this.hotelInfosCache.length){f.append(i.renderFlagship(e.flagship))}if(!this.hotelInfosCache.length&&a){$(t).trigger("fullMatchHotelName",[a,r.hitHotelName])}f.append(t.getHotelDoms(s,o,e,r.isFullMatch&&r.singleHotelNum));return f.children()},_renderSellHotels:function(e,t){var n={};e.physicalRoomBookableProportion=e.physicalRoomBookableProportion>0?1-e.physicalRoomBookableProportion:0;if(e.physicalRoomBookableProportion>.25){n.defaultTips=true;var r=t.queries[0]||{};var s=r.qp||{};var u=s.brand&&s.brand.length>0;var a=s.poi&&s.poi.length>0;var f=s.dangci&&s.dangci.length>0;var l=s.tradingArea&&s.tradingArea.length>0;var c=s.subway&&s.subway.length>0;if(a||f||u||l||c||r.query){if(s.poi&&s.poi.length==1){n.poiName=s.poi[0]}else if(s.poi&&s.poi.length>1){n.poiName="此区域"}else if(l){n.poiName=s.tradingArea[0]}else if(c){n.poiName=s.subway[0]}else if(!s.dangci&&!s.brand&&r.query){n.poiName=r.query}n.queryBrand=s.brand?s.brand[0]:"";n.queryStars=s.dangci?s.dangci[0]:""}else{n.poiName=o.getTradingAreaName()}n.poiName=n.poiName&&n.poiName.length>10?"此区域":n.poiName;n.queryBrand=n.queryBrand&&n.queryBrand.length>8?"此类酒店":n.queryBrand;n.queryStars=n.queryStars&&n.queryStars.length>8?"此类酒店":n.queryStars;var h=o.getbrand();if(h.length==1){n.brandTitle=h[0].title;n.brandTitle=n.brandTitle.length>8?"此类酒店":n.brandTitle}else{n.brandTitle=""}var p=o.getgrade();if(p.length==1){n.gradeTitle=p[0].title+"酒店"}else{n.gradeTitle=""}n.isDouhao=n.queryBrand&&n.queryStars||n.gradeTitle&&n.brandTitle?true:false;if(e.physicalRoomBookableProportion>=1){n.sellfinish=true}n.physicalRoomBookableProportion=parseInt(e.physicalRoomBookableProportion*100)+"%"}var d=$("<div></div>");d.append(i.renderSellTips(n));return d.children()},getHotelNameFullMatch:function(e){var t=false,n=0,r;if(e){var i=e.info&&e.info.limit,s=i?i.split(",")[0]-0:-1,o=s/this.config.numPerPage,u=e.queryInfo&&e.queryInfo.ranges,a;if(o==0&&u&&u[0]){if(u[0][1]!==undefined){if(u[0][1]>=0){n=u[0][1]+1}}a=e.queryInfo.queries&&e.queryInfo.queries[1];if(a&&a.qp&&a.qp.poi&&a.qp.hotelName){t=true;r=a.query}}}return{isFullMatch:t&&n,singleHotelNum:n,hitHotelName:r}},_renderPager:function(e){var t=e.info.count,n=e.info.limit;if(t&&n){var r=parseInt(n.split(",")[0],10),i=Math.floor(r/this.config.numPerPage)}var s=Math.ceil(t/this.config.numPerPage);if(this.pager){this.pager.total=s;this.pager.render(i+1);if(s===0){this.pager.hide()}else{this.pager.show()}}if(this.easypager){this.easypager.total=s;this.easypager.render(i+1);if(s===0){this.easypager.hide()}else{this.easypager.show()}}this.pagerStartIdx=r},show:function(){this.config.wrapContainer.show()},hide:function(){this.config.wrapContainer.hide()},requestInterNoResultPage:function(e){var t=this;$.ajax({url:"//hotel.qunar.com/global/sexist?q="+encodeURIComponent(e),cache:false,type:"GET",success:function(n){if(n=="true"||n==true){t.config.noResultContainer.hide();var r="//hotel.qunar.com/global/list?fromDate="+fromDate+"&toDate="+toDate+"&cityName="+encodeURIComponent(cityName)+"&cityUrl="+cityurl+"&q="+encodeURIComponent(e);if(window.QHTrace&&window.QHTrace.instance){r=r+window.QHTrace.instance.generate()}window.location.href=r}else{t.config.noResultContainer.show()}}})},bindEvent:function(){var e=this;var t;e.config.wrapContainer.delegate(".js_list_block","mouseenter",function(){var t=$(this);if(e.isMainlandIncludeHM){if(!t.find(".hotel-focused").length){t.addClass("b_result_box_focus_hv")}}t.addClass("b_result_box_hv");var n=t.attr("data-id");if(t.attr("data-hasmoreimg")=="true"){if(e.titleImage.showPager(n)){t.find(".js_photo_prev").show();t.find(".js_photo_next").show()}t.attr("data-show","true")}$(e).triggerHandler("hotelMouseenter",n)}).delegate(".js_list_block","mouseleave",function(){var t=$(this);if(e.isMainlandIncludeHM){if(!t.find(".hotel-focused").length){t.removeClass("b_result_box_focus_hv")}}t.removeClass("b_result_box_hv");t.find(".js_photo_prev").hide();t.find(".js_photo_next").hide();t.attr("data-show","false");$(e).triggerHandler("hotelMouseleave",t.attr("data-id"))}).delegate(".js_showMap","click",function(t){$(e).trigger("mapShow",this);return false}).delegate(".js_list_comment","click",function(){e.GARuner("listComment")}).delegate(".js_list_hotelpic","click",function(){e.context.GARuner("listPic")}).delegate(".js_list_name","click",function(){e.context.GARuner("listName")}).delegate(".js_list_price a","click",function(){e.context.GARuner("listPrice")}).delegate(".js_list_score","click",function(){e.context.GARuner("listScore")}).delegate(".js_list_usercomcount","click",function(){e.context.GARuner("listComments")}).delegate(".js_sleeper","click",function(){e.context.GARuner("trySleeper","click")}).delegate(".js_listRank","mouseenter",function(){t=setTimeout(function(){window.GARuner("listRankMouseEnter")},200)}).delegate(".js_listRank","mouseleave",function(){clearTimeout(t)}).delegate(".js_listRank","click",function(){window.GARuner("listRankClick")})},_bindEvent:function(){var e=this;e.config.wrapContainer.delegate(".js_listfocus","click",function(t){var n=$(this),r=n.attr("data-id"),i=false;if(n.hasClass("hotel-focused")){window.GARuner("cancelcare1");i=false;n.removeClass("hotel-focused")}else{window.GARuner("carehotel");i=true;n.addClass("hotel-focused");e.addFocusAnimate(n,r)}$(e).trigger("focusClick",[n,r,i])}).delegate(".js_listfocus","mouseenter",function(t){var n=$(this);$(e).trigger("mouseEnterFocusIcon",[n])}).delegate(".js_listfocus","mouseleave",function(e){var t=$(this);t.siblings(".js_tipover").hide()})},getResultInfo:function(){return this.resultInfoFormat},getHotelInfosCache:function(){return this.hotelInfosCache||[]},clearCache:function(){this.hotelInfosMapCache={};this.hotelInfosCache=[];this.titleImage.clearCache()},getHotelsBySeqs:function(e){if(!e||e.length===0){return[]}else{var t=[];for(var n=0,r=e.length;n<r;n++){var i=this.hotelInfosMapCache[e[n]];if(i){t.push(i)}}return t}},getPagerInfo:function(){return{startIdx:this.pagerStartIdx+(this.hotelInfosCache.length?this.hotelInfosCache.length:0),numPerPage:this.config.oneRequestPageNum}},getDefaultPagerInfo:function(){return{startIdx:0,numPerPage:this.config.oneRequestPageNum}},showLoading:function(){if(!this.hotelInfosCache.length){this.config.listContainer.hide()}this.config.pagerContainer.hide();this.config.noResultContainer.hide();this.config.loadingContainer.show();window.globalEvent.trigger("setPosition.Affix")},hideLoading:function(){var e=this;if(e.config.loadingContainer&&e.config.loadingContainer.length){e.config.loadingContainer.hide()}if(e.config.listContainer&&e.config.listContainer.length){e.config.listContainer.show()}},addDecorator:function(e){if(typeof e==="function"){this.decorators.push(e)}},sendMobileLowPriceGA:function(e){var t=parseFloat(e.mobileSave,10)||-1,n=e.displayMobilePriceType;if(t>0){if(n==1){if(this.MobileLowPriceCount&&!this.MobileLowPriceCount["A"]){this.MobileLowPriceCount["A"]=true;GARunerById(window._ba_utm_s,"A类酒店列表页浏览量|A")}}else if(n==2){if(this.MobileLowPriceCount&&!this.MobileLowPriceCount["BC"]){this.MobileLowPriceCount["BC"]=true;GARunerById(window._ba_utm_s,"BC类酒店列表页浏览量|BC")}}else if(n==3){if(this.MobileLowPriceCount&&!this.MobileLowPriceCount["discount"]){this.MobileLowPriceCount["discount"]=true;GARunerById(window._ba_utm_s,"A类酒店列表页浏览量|A")}}}},addFocusState:function(e){var t=this.config.wrapContainer.find("#js_block_"+e),n=t.find("#js_listfocus_"+e);n.addClass("hotel-focused");t.addClass("b_result_box_focus_hv")},removeFocusState:function(e,t){var n=this.config.wrapContainer.find("#js_block_"+e),r=n.find("#js_listfocus_"+e);r.removeClass("hotel-focused");if(!t){n.removeClass("b_result_box_focus_hv")}},addFocusAnimate:function(e,t){var n=this;var r=$(".js_hotelfocus");var i=$("body");var s=e.offset(),o=r.offset();if(!this.$flyelem){this.$flyelem=$('<span class="careicon js_careicon"></span>');i.append(this.$flyelem)}this.$flyelem.css("left",s.left+10);this.$flyelem.css("top",s.top-10);this.$flyelem.show();this.$flyelem.animate({left:o.left+20,top:o.top+20},500,function(){n.$flyelem.hide();$(n).trigger("addFocusAnimateFinished",t)})}})})()},968:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;var i,s;var o=n(969);var u=n(970);var a=n(971);var f=n(972);var l=n(973);var c=n(974);var h=n(975);var p=n(976);var d=n(977);var v=[null,window.QTMPL.Type1,window.QTMPL.Type2,window.QTMPL.Type3,window.QTMPL.Type4,window.QTMPL.Type5];window.ListTemplate={STARS_INFO:["",'<em title="国家旅游局评定为一星级" class="star star10"></em>','<em title="国家旅游局评定为二星级" class="star star20"></em>','<em title="国家旅游局评定为三星级" class="star star30"></em>','<em title="国家旅游局评定为四星级" class="star star40"></em>','<em title="国家旅游局评定为五星级" class="star star50"></em>'],GRADES_INFO:["",'<em class="sort dangci" title="去哪儿网用户评定为经济型酒店">经济型</em>','<em class="sort dangci" title="去哪儿网用户评定为舒适型酒店">舒适型</em>','<em class="sort dangci" title="去哪儿网用户评定为高档型酒店">高档型</em>','<em class="sort dangci" title="去哪儿网用户评定为豪华型酒店">豪华型</em>',""],DangciInfo:{1:"经济型",2:"三星级/舒适",3:"四星级/高档",4:"五星级/豪华",5:"二星级/其他"},RECOMMANDS_INFO:[["isCwt","商旅推荐","“商旅推荐”是指国内外知名差旅管理公司和世界500强企业在进行商务活动时选用的酒店，适合商务旅行。"],["isLp","LP推荐","来自全球知名旅游指南Lonely Planet的酒店推荐。Lonely Planet“孤独行星”是全世界自助旅行者在路上的忠实旅伴，被称为“自助旅行圣经”，30多年以来一直为旅行者提供经过仔细调查、实用并可以信赖，最公平的推荐与最权威的旅行资讯。"],["isTop500","500强签约","来自2009年全球500强企业在中国所签约的酒店推荐。"]],tips:{staticHotelTip:"需电话咨询",loadingPriceTip:"需电话咨询",noAvailableTip:"已经订完",availableTip:"<em>&yen;</em><strong>$price</strong>起",availableFpTip:"<strong>&yen;$price</strong><em>起</em>"},FEATURES:{hasBreakfast:"早餐",HasBusinessCenter:"商务中心",HasFitnessRoom:"健身房",HasIndoorPool:"游泳池",HasMeetingORBanquetSpace:"会议室",hasRestaurant:"餐厅",isWebFree:"免费宽带"}};i={renderInterHotel:function(e){return window.QTMPL.InterListPanelWithPic.render(e)},renderInterHotelTop100:function(e){return window.QTMPL.InterListPanelWithPic.render(e)},renderMainlandHotel:function(e){return window.QTMPL.MainlandListPanel.render(e)},renderSellTips:function(e){return window.QTMPL.sellOutTip.render(e)},renderNoResult:function(e){var t=v[e.renderType];if(t){return t.render(e.renderData)}else{return""}},renderFlagship:function(e){return window.QTMPL.Flagship.render(e)},FEATURES:ListTemplate.FEATURES};e.exports=i},969:function(e,t,n){if(typeof window.QTMPL==="undefined")window.QTMPL={};window.QTMPL["InterListPanelWithPic"]=new window.Hogan.Template(function(e,t,n){var r=this;r.b(n=n||"");r.b('<div class="b_result_box b_result_commentbox js_list_block ');if(r.s(r.f("isSingleHotel",e,t,1),e,t,0,77,96,"{{ }}")){r.rs(e,t,function(e,t,n){n.b("b_result_box_active")});e.pop()}r.b(' " id="js_block_');r.b(r.v(r.f("id",e,t,0)));r.b('" data-id="');r.b(r.v(r.f("id",e,t,0)));r.b('" ');if(r.s(r.f("isPicBtn",e,t,1),e,t,0,168,190,"{{ }}")){r.rs(e,t,function(e,t,n){n.b('data-hasmoreimg="true"')});e.pop()}r.b(' data-tradingarea="');r.b(r.v(r.f("tradingArea",e,t,0)));r.b('" data-link="');r.b(r.v(r.f("getDetailLink",e,t,0)));r.b('">');r.b("\n"+n);r.b('    <div class="b_result_bord ">');r.b("\n"+n);r.b('        <div class="b_result_bd ');if(!r.s(r.f("isHeadPic",e,t,1),e,t,1,0,0,"")){r.b(" b_result_bd_inter_nopic")}r.b('">');r.b("\n"+n);r.b('            <p id="js_part_tip_');r.b(r.v(r.f("id",e,t,0)));r.b('" class="partdate" ');if(!r.s(r.f("isPartAvailable",e,t,1),e,t,1,0,0,"")){r.b('style="display:none;"')}r.b(">部分日期可订</p>");r.b("\n"+n);r.b('            <div class="clrfix">');r.b("\n"+n);if(r.s(r.f("isHeadPic",e,t,1),e,t,0,582,1732,"{{ }}")){r.rs(e,t,function(e,t,r){r.b('                    <div class="item_hotel_photo js-photo" id="js_photo_plugin_append_');r.b(r.v(r.f("id",e,t,0)));r.b('">');r.b("\n"+n);r.b('                        <a href="');r.b(r.v(r.f("getDetailLink",e,t,0)));r.b('" title="" target="_blank"><img src="');r.b(r.t(r.f("getSmallPicUrl",e,t,0)));r.b('" class="js_list_hotelpic" data-idx="0" /></a>');r.b("\n"+n);if(r.s(r.f("isPicBtn",e,t,1),e,t,0,869,1109,"{{ }}")){r.rs(e,t,function(e,t,r){r.b('                            <i class="item_photo_arrow item_photo_prev js_photo_prev" data-id="');r.b(r.v(r.f("id",e,t,0)));r.b('"></i>');r.b("\n"+n);r.b('                            <i class="item_photo_arrow item_photo_nex js_photo_next" data-id="');r.b(r.v(r.f("id",e,t,0)));r.b('"></i>');r.b("\n")});e.pop()}if(r.s(r.f("isSelectedBNB",e,t,1),e,t,0,1165,1670,"{{ }}")){r.rs(e,t,function(e,t,n){n.b('                            <a href="');n.b(n.v(n.f("getDetailLink",e,t,0)));n.b('" target="_blank" class="js-activity-type bestbnb_icon ');if(n.s(n.f("isSelectedBNBSilver",e,t,1),e,t,0,1299,1313,"{{ }}")){n.rs(e,t,function(e,t,n){n.b("bestbnb_silver")});e.pop()}n.b(" ");if(n.s(n.f("isSelectedBNBCopper",e,t,1),e,t,0,1362,1376,"{{ }}")){n.rs(e,t,function(e,t,n){n.b("bestbnb_copper")});e.pop()}n.b('" ');if(n.s(n.f("isSelectedBNBGloden",e,t,1),e,t,0,1426,1457,"{{ }}")){n.rs(e,t,function(e,t,n){n.b('data-activetype="BESTBNBGLODEN"')});e.pop()}if(n.s(n.f("isSelectedBNBSilver",e,t,1),e,t,0,1505,1536,"{{ }}")){n.rs(e,t,function(e,t,n){n.b('data-activetype="BESTBNBSILVER"')});e.pop()}n.b(" ");if(n.s(n.f("isSelectedBNBCopper",e,t,1),e,t,0,1585,1616,"{{ }}")){n.rs(e,t,function(e,t,n){n.b('data-activetype="BESTBNBCOPPER"')});e.pop()}n.b("></a>");n.b("\n")});e.pop()}r.b("                    </div>");r.b("\n")});e.pop()}r.b('                <div class="item_hotel_info ');if(!r.s(r.f("isHeadPic",e,t,1),e,t,1,0,0,"")){r.b(" item_hotel_info_inter_nopic")}r.b('">');r.b("\n"+n);r.b('                    <div class="item_hotel_bsinfo ');if(!r.s(r.f("isHeadPic",e,t,1),e,t,1,0,0,"")){r.b(" item_hotel_bsinfo_inter_nopic")}r.b('">');r.b("\n"+n);r.b('                        <table border="0" cellspacing="0" cellpadding="0" class="tbl_hotelinfo ');if(!r.s(r.f("isHeadPic",e,t,1),e,t,1,0,0,"")){r.b(" tbl_hotelinfo_inter_nopic")}r.b('">');r.b("\n"+n);r.b("                            <tr>");r.b("\n"+n);r.b('                                <td class="item_hotel_name ');if(!r.s(r.f("isHeadPic",e,t,1),e,t,1,0,0,"")){r.b(" item_hotel_name_inter_nopic")}r.b('">');r.b("\n"+n);r.b('                                    <div class="hotel_baseinfo">');r.b("\n"+n);r.b('                                        <div class="title_name clrfix">');r.b("\n"+n);r.b('                                            <span class="hotel_num js_hotel_num">');r.b(r.v(r.f("index",e,t,0)));r.b('</span><span class="');if(r.s(r.f("isHeadPic",e,t,1),e,t,0,2525,2535,"{{ }}")){r.rs(e,t,function(e,t,n){n.b("hotel_item")});e.pop()}r.b(" hotel_item_inter_break");if(!r.s(r.f("isHeadPic",e,t,1),e,t,1,0,0,"")){r.b(" hotel_item_inter_nopic")}r.b('" id="js_plugin_tag_');r.b(r.v(r.f("id",e,t,0)));r.b('"><a href="');r.b(r.v(r.f("getDetailLink",e,t,0)));r.b('" title="');r.b(r.v(r.f("name",e,t,0)));r.b('" target="_blank" class="e_title js_list_name">');r.b(r.t(r.f("getHotelName",e,t,0)));r.b("</a>");r.b(r.t(r.f("getStarInfo",e,t,0)));if(r.s(r.f("isBNB",e,t,1),e,t,0,2790,2884,"{{ }}")){r.rs(e,t,function(e,t,n){n.b('<a class="ht_type" target="_blank" href="');n.b(n.v(n.f("getDetailLink",e,t,0)));n.b('" title="点击进入全新客栈频道，挖掘客栈特色">客栈民宿</a>')});e.pop()}r.b(r.t(r.f("getGroupShopInfo",e,t,0)));r.b("</span>");r.b("\n"+n);r.b("                                        </div>");r.b("\n"+n);r.b('                                        <p class="adress" ');if(!r.s(r.f("showareamap",e,t,1),e,t,1,0,0,"")){r.b('style="display:none;"')}r.b(">");r.b("\n"+n);r.b('                                                    <span class="area_contair">');r.b("\n"+n);r.b("                                                    ");if(r.s(r.f("areas",e,t,1),e,t,0,3226,3337,"{{ }}")){r.rs(e,t,function(e,t,n){n.b('位于<a href="');n.b(n.v(n.f("link",e,t,0)));n.b('" title="点击此处查看位于');n.b(n.v(n.f("title",e,t,0)));n.b('的所有酒店" class="area_txt js_list_area" target="_blank">');n.b(n.t(n.f("name",e,t,0)));n.b("</a>")});e.pop()}if(r.s(r.f("shortAddr",e,t,1),e,t,0,3361,3399,"{{ }}")){r.rs(e,t,function(e,t,n){n.b("<em>");n.b(n.t(n.f("getShortDetailAddrInter",e,t,0)));n.b("</em>")});e.pop()}r.b("</span>");if(r.s(r.f("mapEnabled",e,t,1),e,t,0,3435,3668,"{{ }}")){r.rs(e,t,function(e,t,n){n.b('<a href="#" title="地图" onclick="return false" class="js_showMap view_map" data-id="');n.b(n.v(n.f("id",e,t,0)));n.b('" data-hotelname="');n.b(n.v(n.f("name",e,t,0)));n.b('" data-bpoint="');n.b(n.v(n.f("bpoint",e,t,0)));n.b('" data-gpoint="');n.b(n.v(n.f("gpoint",e,t,0)));n.b('" data-scale="');n.b(n.v(n.f("scale",e,t,0)));n.b('"><i class="bomb map_bomb">&#xe636;</i>地图</a>')});e.pop()}r.b("\n"+n);r.b("                                        </p>");r.b("\n"+n);if(r.s(r.f("hightLightDescription",e,t,1),e,t,0,3795,4024,"{{ }}")){r.rs(e,t,function(e,t,r){r.b('                                            <p class="adress">');r.b("\n"+n);r.b("                                                ");r.b(r.t(r.f("hightLightDescription",e,t,0)));r.b("\n"+n);r.b("                                            </p>");r.b("\n")});e.pop()}if(r.s(r.f("isShowCommentNum",e,t,1),e,t,0,4112,6862,"{{ }}")){r.rs(e,t,function(e,t,r){if(r.s(r.f("isShowCommentScrore",e,t,1),e,t,0,4181,5561,"{{ }}")){r.rs(e,t,function(e,t,r){r.b('                                                <div class="level js_list_comnumwrap">');r.b("\n"+n);r.b('                                                    <a target="_blank" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" class="m_star_tiny js_list_score"><span class="in" style=\'width:');r.b(r.v(r.f("getCommentScorePercent",e,t,0)));r.b("'></span></a>");r.b("\n"+n);r.b('                                                    <a target="_blank" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" class="level_score js_list_score"><strong>');r.b(r.v(r.f("commentScore",e,t,0)));r.b("</strong>分</a>");r.b("\n"+n);r.b('                                                    <a target="_blank" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" class="level_comment js_list_usercomcount"><span class="js_list_comnum">');r.b(r.v(r.f("commentCount",e,t,0)));r.b("</span>条点评</a>");r.b("\n"+n);r.b("                                                </div>");r.b("\n"+n);r.b('                                                <p class="sleeper"><a class="js_sleeper" target="_blank" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" title="试睡员是去哪儿网数千万用户中产生的酒店体验专家"></a></p>');r.b("\n"+n);r.b('                                                <p class="review first_review"><a class="js_list_comment_content_');r.b(r.v(r.f("id",e,t,0)));r.b(' comcon comcon_ml js_list_comment" target="_blank" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('"></a></p>');r.b("\n"+n);r.b('                                                <p class="review first_review"><a class="js_list_comment_content_add_');r.b(r.v(r.f("id",e,t,0)));r.b(' comcon comcon_ml js_list_comment" target="_blank" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('"></a></p>');r.b("\n")});e.pop()}if(!r.s(r.f("isShowCommentScrore",e,t,1),e,t,1,0,0,"")){r.b('                                                <div class="level js_list_comnumwrap">');r.b("\n"+n);r.b('                                                    <a target="_blank" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" class="level_score js_list_score">暂无评分</a>');r.b("\n"+n);r.b('                                                    <a target="_blank" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" class="level_comment js_list_usercomcount"><span class="js_list_comnum">');r.b(r.v(r.f("commentCount",e,t,0)));r.b("</span>条点评</a>");r.b("\n"+n);r.b("                                                </div>");r.b("\n"+n);r.b('                                                <p class="sleeper"><a class="js_sleeper" target="_blank" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" title="试睡员是去哪儿网数千万用户中产生的酒店体验专家"></a></p>');r.b("\n"+n);r.b('                                                <p class="review first_review"><a class="js_list_comment_content_');r.b(r.v(r.f("id",e,t,0)));r.b(' comcon comcon_ml js_list_comment" target="_blank" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('"></a></p>');r.b("\n"+n);r.b('                                                <p class="review first_review"><a class="js_list_comment_content_add_');r.b(r.v(r.f("id",e,t,0)));r.b(' comcon comcon_ml js_list_comment" target="_blank" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('"></a></p>');r.b("\n")}});e.pop()}if(!r.s(r.f("isShowCommentNum",e,t,1),e,t,1,0,0,"")){if(r.s(r.f("isShowCommentScrore",e,t,1),e,t,0,7014,8561,"{{ }}")){r.rs(e,t,function(e,t,r){r.b('                                                <div class="level js_list_comnumwrap">');r.b("\n"+n);r.b('                                                    <a target="_blank" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" class="m_star_tiny js_list_score" title="酒店评分基于多家供应商评分综合计算得出"><span class="in" style=\'width:');r.b(r.v(r.f("getCommentScorePercent",e,t,0)));r.b("'></span></a>");r.b("\n"+n);r.b('                                                    <a target="_blank" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" class="level_score js_list_score"><strong>');r.b(r.v(r.f("commentScore",e,t,0)));r.b("</strong>分</a>");r.b("\n"+n);r.b('                                                    <a target="_blank" class="comment-none" href="');r.b(r.v(r.f("getDetailCommentEditLink",e,t,0)));r.b('">成为首位点评者</a>');r.b("\n"+n);r.b('                                                    <a target="_blank" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" class="level_comment comment-brief js_list_usercomcount"><span class="js_list_comnum"></span>条点评</a>');r.b("\n"+n);r.b("                                                </div>");r.b("\n"+n);r.b('                                                 <p class="sleeper"><a class="js_sleeper" target="_blank" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" title="试睡员是去哪儿网数千万用户中产生的酒店体验专家"></a></p>');r.b("\n"+n);r.b('                                                <p class="review first_review"><a class="js_list_comment_content_');r.b(r.v(r.f("id",e,t,0)));r.b(' comcon comcon_ml js_list_comment" target="_blank" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('"></a></p>');r.b("\n"+n);r.b('                                                <p class="review first_review"><a class="js_list_comment_content_add_');r.b(r.v(r.f("id",e,t,0)));r.b(' comcon comcon_ml js_list_comment" target="_blank" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('"></a></p>');r.b("\n")});e.pop()}if(!r.s(r.f("isShowCommentScrore",e,t,1),e,t,1,0,0,"")){r.b('                                                <div class="level review no_review js_list_comnumwrap">');r.b("\n"+n);r.b('                                                    <span class="no_comment">暂无评分</span>');r.b("\n"+n);r.b('                                                    <a target="_blank" class="comment-none" href="');r.b(r.v(r.f("getDetailCommentEditLink",e,t,0)));r.b('">成为首位点评者</a>');r.b("\n"+n);r.b('                                                    <a target="_blank" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" class="level_comment comment-brief js_list_usercomcount"><span class="js_list_comnum"></span>条点评</a>');r.b("\n"+n);r.b("                                                </div>");r.b("\n"+n);r.b('                                                 <p class="sleeper"><a class="js_sleeper" target="_blank" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" title="试睡员是去哪儿网数千万用户中产生的酒店体验专家"></a></p>');r.b("\n"+n);r.b('                                                <p class="review first_review"><a class="js_list_comment_content_');r.b(r.v(r.f("id",e,t,0)));r.b(' comcon comcon_ml js_list_comment" target="_blank" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('"></a></p>');r.b("\n"+n);r.b('                                                <p class="review first_review"><a class="js_list_comment_content_add_');r.b(r.v(r.f("id",e,t,0)));r.b(' comcon comcon_ml js_list_comment" target="_blank" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('"></a></p>');r.b("\n")}r.b("\n")}r.b("\n"+n);if(r.s(r.f("hasFacility",e,t,1),e,t,0,10041,10280,"{{ }}")){r.rs(e,t,function(e,t,r){r.b('                                            <p class="facily_cont" id="js_facily">');r.b("\n"+n);r.b("                                                ");r.b(r.t(r.f("getFacility",e,t,0)));r.b("\n"+n);r.b("                                            </p>");r.b("\n")});e.pop()}r.b('                                        <ul class="active_tab guojilong_activetab clrfix" id="js_plugin_activity_append_');r.b(r.v(r.f("id",e,t,0)));r.b('"></ul>');r.b("\n"+n);r.b("                                    </div>");r.b("\n"+n);r.b("                                </td>");r.b("\n"+n);r.b('                                <td class="hotel_facilities ');if(!r.s(r.f("isHeadPic",e,t,1),e,t,1,0,0,"")){r.b(" hotel_facilities_inter_nopic")}r.b('">');r.b("\n"+n);if(r.s(r.f("isShowCommentNum",e,t,1),e,t,0,10685,12599,"{{ }}")){r.rs(e,t,function(e,t,r){if(r.s(r.f("isShowCommentScrore",e,t,1),e,t,0,10746,11889,"{{ }}")){r.rs(e,t,function(e,t,r){r.b('                                        <div class="level">');r.b("\n"+n);r.b('                                            <a target="_blank" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" class="m_star_tiny js_list_score"><span class="in" style=\'width:');r.b(r.v(r.f("getCommentScorePercent",e,t,0)));r.b("'></span></a>");r.b("\n"+n);r.b('                                            <p class="score">');r.b("\n"+n);r.b('                                            <a target="_blank" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" class="sort sort_ml sort_normal js_list_score"><b>');r.b(r.v(r.f("commentScore",e,t,0)));r.b("</b><cite>/</cite>5分</a>");r.b("\n"+n);r.b("                                            </p>");r.b("\n"+n);r.b('                                            <p class="user_comment js_list_comnumwrap">');r.b("\n"+n);r.b('                                            <a target="_blank" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" class="comment js_list_usercomcount">来自<span class="js_list_comnum">');r.b(r.v(r.f("commentCount",e,t,0)));r.b("</span>条用户点评</a>");r.b("\n"+n);r.b("                                            </p>");r.b("\n"+n);r.b("                                        </div>");r.b("\n"+n);r.b('                                        <p class="sleeper"><a class="js_sleeper" target="_blank" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" title="试睡员是去哪儿网数千万用户中产生的酒店体验专家"></a></p>');r.b("\n")});e.pop()}if(!r.s(r.f("isShowCommentScrore",e,t,1),e,t,1,0,0,"")){r.b('                                        <p class="noscore"><span class="no_comment">暂无评分</span></p>');r.b("\n"+n);r.b('                                        <p class="user_comment js_list_comnumwrap"><a target="_blank" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" class="comment js_list_usercomcount">来自<span class="js_list_comnum">');r.b(r.v(r.f("commentCount",e,t,0)));r.b("</span>条用户点评</a></p>");r.b("\n"+n);r.b('                                        <p class="sleeper"><a class="js_sleeper" target="_blank" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" title="试睡员是去哪儿网数千万用户中产生的酒店体验专家" nonecommentscore=true></a></p>');r.b("\n")}});e.pop()}if(!r.s(r.f("isShowCommentNum",e,t,1),e,t,1,0,0,"")){if(r.s(r.f("isShowCommentScrore",e,t,1),e,t,0,12735,14057,"{{ }}")){r.rs(e,t,function(e,t,r){r.b('                                        <div class="level">');r.b("\n"+n);r.b('                                            <a target="_blank" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" class="m_star_tiny js_list_score" title="酒店评分基于多家供应商评分综合计算得出"><span class="in" style=\'width:');r.b(r.v(r.f("getCommentScorePercent",e,t,0)));r.b("'></span></a>");r.b("\n"+n);r.b('                                        <p class="score">');r.b("\n"+n);r.b('                                            <a target="_blank" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" class="sort sort_ml sort_normal js_list_score" title="酒店评分基于多家供应商评分综合计算得出"><b>');r.b(r.v(r.f("commentScore",e,t,0)));r.b("</b><cite>/</cite>5分</a>");r.b("\n"+n);r.b("                                        </p>");r.b("\n"+n);r.b('                                        <p class="user_comment js_list_comnumwrap">');r.b("\n"+n);r.b('                                            <a target="_blank" href="');r.b(r.v(r.f("getDetailCommentEditLink",e,t,0)));r.b('" class="comment comment-none">成为首位点评者</a>');r.b("\n"+n);r.b('                                            <a target="_blank" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" class="comment  comment-brief js_list_usercomcount">来自<span class="js_list_comnum"></span>条用户点评</a>');r.b("\n"+n);r.b("                                        </p>");r.b("\n"+n);r.b("                                        </div>");r.b("\n"+n);r.b('                                        <p class="sleeper"><a class="js_sleeper" target="_blank" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" title="试睡员是去哪儿网数千万用户中产生的酒店体验专家"></a></p>');r.b("\n")});e.pop()}if(!r.s(r.f("isShowCommentScrore",e,t,1),e,t,1,0,0,"")){r.b('                                        <p class="noscore"><span class="no_comment">暂无评分</span><a target="_blank" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" class="comment "></a></p>');r.b("\n"+n);r.b('                                        <p class="fist_comment js_list_comnumwrap">');r.b("\n"+n);r.b('                                            <a target="_blank" href="');r.b(r.v(r.f("getDetailCommentEditLink",e,t,0)));r.b('" class="comment  comment-none">成为首位点评者</a>');r.b("\n"+n);r.b('                                             <a target="_blank" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" class="comment comment-brief js_list_usercomcount">来自<span class="js_list_comnum"></span>条用户点评</a>');r.b("\n"+n);r.b("                                        </p>");r.b("\n"+n);r.b('                                        <p class="sleeper"><a class="js_sleeper" target="_blank" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" title="试睡员是去哪儿网数千万用户中产生的酒店体验专家" nonecommentscore=true></a></p>');r.b("\n")}r.b("\n")}if(r.s(r.f("hasFacility",e,t,1),e,t,0,15140,15348,"{{ }}")){r.rs(e,t,function(e,t,r){r.b('                                        <p class="facily_cont">');r.b("\n"+n);r.b("                                            ");r.b(r.t(r.f("getFacility",e,t,0)));r.b("\n"+n);r.b("                                        </p>");r.b("\n")});e.pop()}r.b("                                </td>");r.b("\n"+n);r.b("                            </tr>");r.b("\n"+n);r.b("                        </table>");r.b("\n"+n);r.b("                    </div>");r.b("\n"+n);r.b('                    <div class="hotel_price ');if(!r.s(r.f("isHeadPic",e,t,1),e,t,1,0,0,"")){r.b(" hotel_price_inter_nopic")}r.b('">');r.b("\n"+n);r.b('                        <div id="js_plugin_append_');r.b(r.v(r.f("id",e,t,0)));r.b('" class="hotel_price_item">');r.b("\n"+n);r.b('                            <div id="js_price_plugin_append_');r.b(r.v(r.f("id",e,t,0)));r.b('" class="price_wrap">');r.b("\n"+n);r.b('                                <div id="js_price_');r.b(r.v(r.f("id",e,t,0)));r.b('" class="js_list_price">');r.b(r.t(r.f("getPriceTip",e,t,0)));r.b("</div>");r.b("\n"+n);r.b("                            </div>");r.b("\n"+n);r.b("                        </div>");r.b("\n"+n);r.b("                    </div>");r.b("\n"+n);r.b("                </div>");r.b("\n"+n);r.b("            </div>");r.b("\n"+n);r.b("        </div>");r.b("\n"+n);r.b("    </div>");r.b("\n"+n);r.b("</div>");return r.fl();});if(true)e.exports=window.QTMPL["InterListPanelWithPic"]},970:function(e,t,n){if(typeof window.QTMPL==="undefined")window.QTMPL={};window.QTMPL["MainlandListPanel"]=new window.Hogan.Template(function(e,t,n){var r=this;r.b(n=n||"");r.b('<div class="b_result_box js_list_block ');if(r.s(r.f("isSpecialRecommend",e,t,1),e,t,0,62,82,"{{ }}")){r.rs(e,t,function(e,t,n){n.b("specialrecommend_box")});e.pop()}r.b("\n"+n);if(!r.s(r.f("isSpecialRecommend",e,t,1),e,t,1,0,0,"")){r.b("b_result_commentbox")}r.b(" ");if(r.s(r.f("isSingleHotel",e,t,1),e,t,0,190,209,"{{ }}")){r.rs(e,t,function(e,t,n){n.b("b_result_box_active")});e.pop()}r.b(' " id="js_block_');r.b(r.v(r.f("id",e,t,0)));r.b('" data-id="');r.b(r.v(r.f("id",e,t,0)));r.b('" ');if(r.s(r.f("isPicBtn",e,t,1),e,t,0,281,303,"{{ }}")){r.rs(e,t,function(e,t,n){n.b('data-hasmoreimg="true"')});e.pop()}r.b(' data-tradingarea="');r.b(r.v(r.f("tradingArea",e,t,0)));r.b('" data-link="');r.b(r.v(r.f("getDetailLink",e,t,0)));r.b('">');r.b("\n"+n);r.b('    <div class="b_result_bord b_result_special ');if(r.s(r.f("getFinishSell",e,t,1),e,t,0,448,467,"{{ }}")){r.rs(e,t,function(e,t,n){n.b("b_result_box_finish")});e.pop()}r.b('">');r.b("\n"+n);r.b('        <div class="b_result_bd">');r.b("\n"+n);r.b('            <p id="js_part_tip_');r.b(r.v(r.f("id",e,t,0)));r.b('" class="partdate" ');if(!r.s(r.f("isPartAvailable",e,t,1),e,t,1,0,0,"")){r.b('style="display:none;"')}r.b(">部分日期可订</p>");r.b("\n"+n);r.b('            <div class="clrfix">');r.b("\n"+n);r.b('                <div class="item_hotel_photo js-photo" id="js_photo_plugin_append_');r.b(r.v(r.f("id",e,t,0)));r.b('">');r.b("\n"+n);r.b('                    <a href="');r.b(r.v(r.f("getDetailLink",e,t,0)));r.b('" title="" target="_blank"><img src="');r.b(r.t(r.f("getSmallPicUrl",e,t,0)));r.b('" class="js_list_hotelpic" data-idx="0" /></a>');r.b("\n"+n);if(r.s(r.f("isPicBtn",e,t,1),e,t,0,958,1186,"{{ }}")){r.rs(e,t,function(e,t,r){r.b('                        <i class="item_photo_arrow item_photo_prev js_photo_prev" data-id="');r.b(r.v(r.f("id",e,t,0)));r.b('"></i>');r.b("\n"+n);r.b('                        <i class="item_photo_arrow item_photo_nex js_photo_next" data-id="');r.b(r.v(r.f("id",e,t,0)));r.b('"></i>');r.b("\n")});e.pop()}r.b("                </div>");r.b("\n"+n);r.b('                <div class="item_hotel_info">');r.b("\n"+n);r.b('                    <div class="item_hotel_bsinfo">');r.b("\n"+n);r.b('                        <table border="0" cellspacing="0" cellpadding="0" class="tbl_hotelinfo">');r.b("\n"+n);r.b("                            <tr>");r.b("\n"+n);r.b('                                <td class="item_hotel_name">');r.b("\n"+n);r.b('                                    <div class="hotel_baseinfo">');r.b("\n"+n);r.b('                                        <div class="title_name clrfix">');r.b("\n"+n);r.b('                                            <span class="hotel_num js_hotel_num">');r.b(r.v(r.f("index",e,t,0)));r.b('</span><span class="hotel_item" id="js_plugin_tag_');r.b(r.v(r.f("id",e,t,0)));r.b('"><a href="');r.b(r.v(r.f("getDetailLink",e,t,0)));r.b('" title="');r.b(r.v(r.f("name",e,t,0)));r.b('" target="_blank" class="e_title js_list_name">');r.b(r.t(r.f("getHotelName",e,t,0)));r.b("</a>");r.b(r.t(r.f("getStarInfo",e,t,0)));if(r.s(r.f("isBNB",e,t,1),e,t,0,1936,2030,"{{ }}")){r.rs(e,t,function(e,t,n){n.b('<a class="ht_type" target="_blank" href="');n.b(n.v(n.f("getDetailLink",e,t,0)));n.b('" title="点击进入全新客栈频道，挖掘客栈特色">客栈民宿</a>')});e.pop()}r.b(r.t(r.f("getGroupShopInfo",e,t,0)));r.b("</span>");r.b("\n"+n);r.b("                                        </div>");r.b("\n"+n);r.b('                                        <p class="adress" ');if(!r.s(r.f("showareamap",e,t,1),e,t,1,0,0,"")){r.b('style="display:none;"')}r.b(">");r.b("\n"+n);r.b('                                            <span class="area_contair">');r.b("\n"+n);r.b("                                            ");if(r.s(r.f("areas",e,t,1),e,t,0,2356,2467,"{{ }}")){r.rs(e,t,function(e,t,n){n.b('位于<a href="');n.b(n.v(n.f("link",e,t,0)));n.b('" title="点击此处查看位于');n.b(n.v(n.f("title",e,t,0)));n.b('的所有酒店" class="area_txt js_list_area" target="_blank">');n.b(n.t(n.f("name",e,t,0)));n.b("</a>")});e.pop()}if(r.s(r.f("hotelAddress",e,t,1),e,t,0,2494,2524,"{{ }}")){r.rs(e,t,function(e,t,n){n.b("<em>");n.b(n.t(n.f("getHotelAddress",e,t,0)));n.b("</em>")});e.pop()}if(r.s(r.f("shortAddr",e,t,1),e,t,0,2555,2588,"{{ }}")){r.rs(e,t,function(e,t,n){n.b("<em>");n.b(n.t(n.f("getShortDetailAddr",e,t,0)));n.b("</em>")});e.pop()}r.b("</span>");if(r.s(r.f("hightLightDescription",e,t,1),e,t,0,2635,2752,"{{ }}")){r.rs(e,t,function(e,t,r){r.b("\n"+n);r.b("                                                ");r.b(r.t(r.f("hightLightDescription",e,t,0)));r.b("\n"+n);r.b("                                        ")});e.pop()}if(r.s(r.f("bigMapEnable",e,t,1),e,t,0,2795,3053,"{{ }}")){r.rs(e,t,function(e,t,n){n.b('<a href="#" title="查看地图" onclick="return false" class="js_showMap view_map" data-index=');n.b(n.v(n.f("index",e,t,0)));n.b(' data-id="');n.b(n.v(n.f("id",e,t,0)));n.b('" data-hotelname="');n.b(n.v(n.f("name",e,t,0)));n.b('" data-bpoint="');n.b(n.v(n.f("bpoint",e,t,0)));n.b('" data-gpoint="');n.b(n.v(n.f("gpoint",e,t,0)));n.b('" data-scale="');n.b(n.v(n.f("scale",e,t,0)));n.b('"><i class="bomb map_bomb">&#xe636;</i>查看地图</a>')});e.pop()}r.b("\n"+n);r.b("                                        </p>");r.b("\n"+n);if(r.s(r.f("isShowCommentNum",e,t,1),e,t,0,3177,5191,"{{ }}")){r.rs(e,t,function(e,t,r){if(r.s(r.f("isShowCommentScrore",e,t,1),e,t,0,3246,4310,"{{ }}")){r.rs(e,t,function(e,t,r){r.b('                                                <div class="level levelmargin">');r.b("\n"+n);r.b('                                                    <a class="level_score js_list_score" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" target="_blank"><strong>');r.b(r.v(r.f("commentScore",e,t,0)));r.b('</strong><cite>/</cite>5分</a><a class="level_comment level_commentbd js_list_usercomcount" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" target="_blank">');r.b(r.v(r.f("commentCount",e,t,0)));r.b('条点评</a><a class="level_sleeper js_sleeper_count" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" target="_blank" title="试睡员是去哪儿网数千万用户中产生的酒店体验专家"></a>');r.b("\n"+n);r.b("                                                </div>");r.b("\n"+n);r.b('                                                <p class="review first_review"><a href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('"  class="js_list_comment_content_');r.b(r.v(r.f("id",e,t,0)));r.b(' js_list_comment" target="_blank"></a></p>');r.b("\n"+n);r.b('                                                <p class="review hide"><a href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" class="js_list_comment_content_add_');r.b(r.v(r.f("id",e,t,0)));r.b(' js_list_comment" target="_blank"></a>');r.b("\n"+n);r.b("                                                </p>");r.b("\n")});e.pop()}if(!r.s(r.f("isShowCommentScrore",e,t,1),e,t,1,0,0,"")){r.b('                                                <div class="level levelmargin review no_review no_commentscore"><span class="no_comment">暂无评分</span><a target="_blank" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" class="level_comment level_commentbd js_list_usercomcount">');r.b(r.v(r.f("commentCount",e,t,0)));r.b('条点评</a><a class="level_sleeper js_sleeper_count"  href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" target="_blank" title="试睡员是去哪儿网数千万用户中产生的酒店体验专家" nonecommentscore="true"></a>');r.b("\n"+n);r.b("                                                </div>");r.b("\n"+n);r.b('                                                <p class="review hide"><a href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" class="js_list_comment_content_add_');r.b(r.v(r.f("id",e,t,0)));r.b(' js_list_comment" target="_blank"></a></p>');r.b("\n")}});e.pop()}if(!r.s(r.f("isShowCommentNum",e,t,1),e,t,1,0,0,"")){r.b('                                            <div class="level levelmargin review no_review"><span class="no_comment">暂无点评</span><a href="');r.b(r.v(r.f("getDetailCommentEditLink",e,t,0)));r.b('" title="成为首位点评者">成为首位点评者</a>');r.b("\n"+n);r.b("                                            </div>");r.b("\n")}r.b('                                        <div class="facily_contain clr_after">');r.b("\n"+n);if(r.s(r.f("hasFacility",e,t,1),e,t,0,5722,5990,"{{ }}")){r.rs(e,t,function(e,t,r){r.b('                                                <p class="facily_cont facily_conta" id="js_facily">');r.b("\n"+n);r.b("                                                    ");r.b(r.t(r.f("getFacility",e,t,0)));r.b("\n"+n);r.b("                                                </p>");r.b("\n")});e.pop()}r.b("                                            ");r.b(r.t(r.f("getRankList",e,t,0)));r.b("\n"+n);r.b('                                            <ul class="active_tab short_activetab clrfix" id="js_plugin_activity_short_append_');r.b(r.v(r.f("id",e,t,0)));r.b('"></ul>');r.b("\n"+n);r.b("                                        </div>");r.b("\n"+n);r.b('                                        <ul class="active_tab long_activetab clrfix" id="js_plugin_activity_append_');r.b(r.v(r.f("id",e,t,0)));r.b('"></ul>');r.b("\n"+n);r.b("                                    </div>");r.b("\n"+n);r.b("                                </td>");r.b("\n"+n);r.b('                                <td class="hotel_facilities">');r.b("\n"+n);if(r.s(r.f("isShowCommentNum",e,t,1),e,t,0,6585,8049,"{{ }}")){r.rs(e,t,function(e,t,r){if(r.s(r.f("isShowCommentScrore",e,t,1),e,t,0,6650,7324,"{{ }}")){r.rs(e,t,function(e,t,r){r.b("                                            ");r.b(r.t(r.f("getRankList",e,t,0)));r.b("\n"+n);r.b('                                            <p class="score"><a href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" class="js_list_score" target="_blank"><b>');r.b(r.v(r.f("commentScore",e,t,0)));r.b("</b><cite>/</cite>5分</a></p>");r.b("\n"+n);r.b('                                            <p class="user_comment"><a href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" class="js_list_usercomcount" target="_blank"><cite>');r.b(r.v(r.f("commentCount",e,t,0)));r.b("</cite>条用户点评</a></p>");r.b("\n"+n);r.b('                                            <p class="sleeper"><a href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" class="js_sleeper" title="试睡员是去哪儿网数千万用户中产生的酒店体验专家" nonecommentscore="true" target="_blank"></a></p>');r.b("\n")});e.pop()}if(!r.s(r.f("isShowCommentScrore",e,t,1),e,t,1,0,0,"")){r.b("                                            ");r.b(r.t(r.f("getRankList",e,t,0)));r.b("\n"+n);r.b('                                            <p class="no_score">暂无评分</p>');r.b("\n"+n);r.b('                                            <p class="comment_acount"><a target="_blank" href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" class="comment js_list_usercomcount"><cite>');r.b(r.v(r.f("commentCount",e,t,0)));r.b("</cite>条用户点评</a></p>");r.b("\n"+n);r.b('                                            <p class="sleeper"><a href="');r.b(r.v(r.f("getDetailCommentLink",e,t,0)));r.b('" class="js_sleeper" target="_blank" title="试睡员是去哪儿网数千万用户中产生的酒店体验专家" nonecommentscore="true"></a></p>');r.b("\n")}});e.pop()}if(!r.s(r.f("isShowCommentNum",e,t,1),e,t,1,0,0,"")){r.b("                                        ");r.b(r.t(r.f("getRankList",e,t,0)));r.b("\n"+n);r.b('                                        <p class=""user_comment no_comment">暂无点评</p>');r.b("\n"+n);r.b('                                        <p class="fist_comment"><a href="');r.b(r.v(r.f("getDetailCommentEditLink",e,t,0)));r.b('" title="成为首位点评者" target="_blank">成为首位点评者</a></p>');r.b("\n")}if(r.s(r.f("hasFacility",e,t,1),e,t,0,8533,8741,"{{ }}")){r.rs(e,t,function(e,t,r){r.b('                                        <p class="facily_cont">');r.b("\n"+n);r.b("                                            ");r.b(r.t(r.f("getFacility",e,t,0)));r.b("\n"+n);r.b("                                        </p>");r.b("\n")});e.pop()}r.b("                                </td>");r.b("\n"+n);r.b("                            </tr>");r.b("\n"+n);r.b("                        </table>");r.b("\n"+n);r.b("                    </div>");r.b("\n"+n);r.b('                    <div class="hotel_price">');r.b("\n"+n);r.b('                        <div id="js_plugin_append_');r.b(r.v(r.f("id",e,t,0)));r.b('" class="hotel_price_item">');r.b("\n"+n);r.b('                            <div id="js_price_plugin_append_');r.b(r.v(r.f("id",e,t,0)));r.b('" class="price_wrap">');r.b("\n"+n);r.b('                                <div id="js_price_');r.b(r.v(r.f("id",e,t,0)));r.b('" class="js_list_price">');r.b(r.t(r.f("getPriceTip",e,t,0)));r.b("</div>");r.b("\n"+n);r.b("                            </div>");r.b("\n"+n);r.b("                        </div>");r.b("\n"+n);r.b("                       ");r.b("\n"+n);r.b("                    </div>");r.b("\n"+n);r.b("                </div>");r.b("\n"+n);r.b("            </div>");r.b("\n"+n);r.b('            <div class="listfocus-wrap"><div class="listfocus js_listfocus" id="js_listfocus_');r.b(r.v(r.f("id",e,t,0)));r.b('" data-id="');r.b(r.v(r.f("id",e,t,0)));r.b('"><a href="#" onclick="return false;"><span class="icon js_icon" title="点击关注酒店"></span><span class="icon-focused" title="点击取消关注酒店"></span><span class="txt" title="点击关注酒店">关注这家酒店</span><span class="focused-txt" title="点击取消关注酒店">已关注</span></a></div>');r.b("\n"+n);r.b('            <div class="tipover js_tipover">');r.b("\n"+n);r.b('                <div class="overthirteen"><div class="title">已经达到上限</div><div class="content"><span>每个城市每次</span><span class="carecontent">最多只能关注30家酒店</span><span>，如继续关注，我们会替换掉您最早关注的一家酒店，以此类推</span></div></div><span class="upgreyicon"></span>');r.b("\n"+n);r.b("            </div></div>");r.b("\n"+n);r.b("        </div>");r.b("\n"+n);if(r.s(r.f("isSpecialRecommend",e,t,1),e,t,0,10094,10267,"{{ }}")){r.rs(e,t,function(e,t,n){n.b('        <div class="specialrec"><div class="recocontent"><span class="specialicon specialimg"></span><span class="specialtxt">');n.b(n.v(n.f("specialCommend",e,t,0)));n.b("</span></div></div>");n.b("\n")});e.pop()}r.b("    </div>");r.b("\n"+n);r.b("</div>");return r.fl();});if(true)e.exports=window.QTMPL["MainlandListPanel"]},971:function(e,t,n){if(typeof window.QTMPL==="undefined")window.QTMPL={};window.QTMPL["sellOutTip"]=new window.Hogan.Template(function(e,t,n){var r=this;r.b(n=n||"");if(r.s(r.f("defaultTips",e,t,1),e,t,0,16,558,"{{ }}")){r.rs(e,t,function(e,t,r){r.b('<div class="sell_out_tips clr_after">');r.b("\n"+n);r.b('	<div class="sell_tips_bd">');r.b("\n"+n);r.b("  ");r.b("\n"+n);r.b('   <span class="close" id="js-close-sell"></span><img src="//simg4.qunarzz.com/hotel/listnew/icon_fire.png" class="fire" />房量紧张，');r.b("\n"+n);r.b("\n"+n);r.b(" ");r.b("\n"+n);if(!r.s(r.f("sellfinish",e,t,1),e,t,1,0,0,"")){r.b(" <b>");r.b(r.v(r.f("poiName",e,t,0)));r.b("</b>有<em>");r.b(r.v(r.f("physicalRoomBookableProportion",e,t,0)));r.b('</em><span id="js-stars"><b>');r.b(r.v(r.f("gradeTitle",e,t,0)));r.b(r.v(r.f("queryStars",e,t,0)));r.b("</b><b>");if(r.s(r.f("isDouhao",e,t,1),e,t,0,372,373,"{{ }}")){r.rs(e,t,function(e,t,n){n.b("、")});e.pop()}r.b(r.v(r.f("brandTitle",e,t,0)));r.b(r.v(r.f("queryBrand",e,t,0)));r.b("</b></span><em>房间已售完</em>，请您抓紧预订~");r.b("\n")}r.b("	");if(r.s(r.f("sellfinish",e,t,1),e,t,0,480,516,"{{ }}")){r.rs(e,t,function(e,t,n){n.b("好可惜啊，你搜索的酒店<em>已全部售完</em>，换个关键词试一试吧~")});e.pop()}r.b("\n"+n);r.b("   	");r.b("\n"+n);r.b("   ");r.b("\n"+n);r.b("   </div>");r.b("\n"+n);r.b("</div>");r.b("\n")});e.pop()}return r.fl();});if(true)e.exports=window.QTMPL["sellOutTip"]},972:function(e,t,n){if(typeof window.QTMPL==="undefined")window.QTMPL={};window.QTMPL["Flagship"]=new window.Hogan.Template(function(e,t,n){var r=this;r.b(n=n||"");r.b('<div class="flagship_store clr_after" id="js_block_flagship">');r.b("\n"+n);r.b("    <dl>");r.b("\n"+n);r.b("        <dt>");r.b("\n"+n);r.b('            <a href="');r.b(r.v(r.f("url",e,t,0)));r.b('" title="');r.b(r.v(r.f("title",e,t,0)));r.b('官方旗舰店" target="_blank">');r.b("\n"+n);r.b('                <img alt="');r.b(r.v(r.f("title",e,t,0)));r.b('官方旗舰店" src="');r.b(r.v(r.f("logo",e,t,0)));r.b('">');r.b("\n"+n);r.b("            </a>");r.b("\n"+n);r.b("        </dt>");r.b("\n"+n);r.b('        <dd class="title"><a href="');r.b(r.v(r.f("url",e,t,0)));r.b('" title="');r.b(r.v(r.f("title",e,t,0)));r.b('官方旗舰店" target="_blank">');r.b(r.v(r.f("title",e,t,0)));r.b("官方旗舰店</a></dd>");r.b("\n"+n);r.b('        <dd class="info">');r.b(r.t(r.f("desc",e,t,0)));r.b("</dd>");r.b("\n"+n);r.b("    </dl>");r.b("\n"+n);r.b("</div>");return r.fl();});if(true)e.exports=window.QTMPL["Flagship"]},973:function(e,t,n){if(typeof window.QTMPL==="undefined")window.QTMPL={};window.QTMPL["Type1"]=new window.Hogan.Template(function(e,t,n){var r=this;r.b(n=n||"");r.b('<p class="e_noResultImg"><img alt="404" src="//source.qunarzz.com/hotel/listnew/noResultImgs.png"></p>');r.b("\n"+n);r.b('<div class="e_noResultContent">');r.b("\n"+n);r.b("    <h4>抱歉，“<em>");r.b(r.v(r.f("text",e,t,0)));r.b("</em>”还没有收录任何酒店</h4>");r.b("\n"+n);r.b("</div>");return r.fl();});if(true)e.exports=window.QTMPL["Type1"]},974:function(e,t,n){if(typeof window.QTMPL==="undefined")window.QTMPL={};window.QTMPL["Type2"]=new window.Hogan.Template(function(e,t,n){var r=this;r.b(n=n||"");r.b('<p class="e_noResultImg"><img alt="404" src="//source.qunarzz.com/hotel/listnew/noResultImgs.png"></p>');r.b("\n"+n);r.b('<div class="e_noResultContent">');r.b("\n"+n);r.b("    <h4>很抱歉，在您所选择的区域内没有符合条件的酒店</h4>");r.b("\n"+n);r.b("    <h5>建议您：</h5>");r.b("\n"+n);r.b('    <ul class="e_noResultContent_list">');r.b("\n"+n);r.b("        <li>减少条件或变更区域</li>");r.b("\n"+n);r.b("    </ul>");r.b("\n"+n);r.b("</div>");return r.fl();});if(true)e.exports=window.QTMPL["Type2"]},975:function(e,t,n){if(typeof window.QTMPL==="undefined")window.QTMPL={};window.QTMPL["Type3"]=new window.Hogan.Template(function(e,t,n){var r=this;r.b(n=n||"");r.b('<p class="e_noResultImg"><img alt="404" src="//source.qunarzz.com/hotel/listnew/noResultImgs.png"></p>');r.b("\n"+n);r.b('<div class="e_noResultContent">');r.b("\n"+n);r.b("    <h4>抱歉，没有找到全部满足条件的酒店。<br/>以下是“<em>");r.b(r.t(r.f("text",e,t,0)));r.b("</em>”相关的酒店</h4>");r.b("\n"+n);r.b("</div>");return r.fl();});if(true)e.exports=window.QTMPL["Type3"]},976:function(e,t,n){if(typeof window.QTMPL==="undefined")window.QTMPL={};window.QTMPL["Type4"]=new window.Hogan.Template(function(e,t,n){var r=this;r.b(n=n||"");r.b('<p class="e_noResultImg"><img alt="404" src="//source.qunarzz.com/hotel/listnew/noResultImgs.png"></p>');r.b("\n"+n);r.b('<div class="e_noResultContent">');r.b("\n"+n);r.b("    <h4>很抱歉，没有找到与“<em>");r.b(r.t(r.f("text",e,t,0)));r.b("</em>”相关的酒店</h4>");r.b("\n"+n);r.b('    <ul class="e_noResultContent_list">');r.b("\n"+n);r.b("        <li>看看输入的文字是否有误</li>");r.b("\n"+n);r.b('        <li>去掉可能不需要的字词，如"的"、"什么"等</li>');r.b("\n"+n);r.b('        <li>调整关键字，如"北京去哪儿大酒店"改成"去哪儿"</li>');r.b("\n"+n);r.b("    </ul>");r.b("\n"+n);r.b("</div>");return r.fl();});if(true)e.exports=window.QTMPL["Type4"]},977:function(e,t,n){if(typeof window.QTMPL==="undefined")window.QTMPL={};window.QTMPL["Type5"]=new window.Hogan.Template(function(e,t,n){var r=this;r.b(n=n||"");r.b('<p class="e_noResultImg"><img alt="404" src="//source.qunarzz.com/hotel/listnew/noResultImgs.png"></p>');r.b("\n"+n);r.b('<div class="e_noResultContent">');r.b("\n"+n);r.b("    <h4>很抱歉，没有找到与“<em>");r.b(r.t(r.f("text",e,t,0)));r.b("</em>”相关的酒店</h4>");r.b("\n"+n);r.b('    <ul class="e_noResultContent_list">');r.b("\n"+n);r.b("        <li>适当减少已选择的条件</li>");r.b("\n"+n);r.b("    </ul>");r.b("\n"+n);r.b("</div>");return r.fl();});if(true)e.exports=window.QTMPL["Type5"]},978:function(e,t,n){function a(e){return"<cite>"+escapeHtml(e)+"</cite>"}function f(e){var t=0;for(var n in e){t++}return t}function l(e){return f(e)==0}function c(e){var t=[];for(var n in e){t.push(n)}return t}function p(e){var t={};for(var n in e){t={key:n,value:e[n]};return t}return t}function d(e,t){return typeof e[t]!="undefined"}function v(e,t){if(e&&e.length>t){var n=e.substring(0,t-1)+"…";return n}else{return e}}function m(){var e=["brand","group","hotelarea","theme"];var t=["HotelName","PartHotelName","poi"];var n=["hotelName"];var r=this.info.pois,i=this.info.key;var s=[];for(var o=0,u=n.length;o<u;o++){if(this.selected[n[o]]){if(this.selected["PartHotelName"]&&this.selected["PartHotelName"].match_name){continue}s.push(this.name)}}r=r||[];for(var o=0,u=r.length;o<u;o++){if(this.name!=r[o].name)s.push(r[o].name)}if(this.selected["group"]){h(e,"brand")}for(var o=0,u=e.length;o<u;o++){var a=this.selected[e[o]];if(a){s.push(a)}}for(var o=0,u=t.length;o<u;o++){var f=this.selected[t[o]];if(f){s=s.concat(c(f))}}var l=[i];var p={};for(var o=0,u=s.length;o<u;o++){var d=s[o];if(d!="seq"&&!p[s[o]]){l.push(s[o])}}return l}var r=typeof r==="function"&&!r.amd?r:false;var i=n(968);var s=n(964);var o=i.FEATURES;var u={1:"经济型",2:"舒适型",3:"高档型",4:"豪华型",5:"同档次"};var h=function(e,t,n){var r=0,i,s;for(i=0,s=e.length;i<s;i++){if(e[i]===t||n&&e[i]==t){e.splice(i--,1);r++}}return r};var g;var y={hotelFomatter:{isShowRecommendTitle:function(){var e=this.queryInfo.ranges,t=this.queryInfo.queries;var n=this.info.limit,r=n.split(",")[0]-0;if(e){for(var i=1,s=e.length;i<s;i++){var o=r+this.index-1;if(e[i][0]==o){var u=t[i];var a="";if(u.qp.poi){if(u.qp.hotelName){a=u.query;this.recommendHTML='<p>以下为"<span>'+a+'</span>"<em>周边酒店信息</em></p>'}else if(u.qp.poi&&u.qp.poi.length===1){a=u.qp.poi[0];if(!this.filters.distance){this.recommendHTML="<p>以下为“"+a+"”周边<cite>直线距离5公里内</cite>的其他酒店</p>"}else{var f=this.filters.distance;if(e[0][0]===-1&&e[0][1]===-1&&o===0){this.recommendHTML="<p>没有找到距"+a+"实际距离"+f+"公里内的酒店，以下为距该地<cite>直线距离"+f+"公里</cite>内的酒店</p>"}else{this.recommendHTML="<p>以下为“"+a+"”周边<cite>直线距离"+f+"公里内</cite>的其他酒店</p>"}}}}else{this.recommendHTML='<p>以下为"<span>'+a+'</span>"<em>相关酒店信息</em></p>'}return true}}}return false},getRankList:function(){var e=this.distinctlistData;var t;if(e&&e.url&&e.tips&&e.name){t='<a class="rank-hotel-bg js_listRank" target="_blank" href="'+e.url+'" title="'+e.tips+'"><span class="rank-hotel-logo"></span>'+e.name+"</a>";return t}},isSpecialRecommend:function(){var e;if(this.specialCommend){e=this.specialCommend.replace(/([^\x00-\xff])/g,"$1 ");if(e&&e.length<=76){return true}}return false},isPreSelectedBNB:function(){var e=parseInt(this.isSelectedBNB,10);var t;if(e){t='<a href="'+this.getDetailLink()+'" target="_blank" class="pre_selected"></a>'}else{return}return t},isPart:function(){return"undefined"!=typeof this.priceStatus&&this.priceStatus===-2&&this.price>0?true:false},getHotelName:function(){var e=m.call(this);return g.utils.doLight(this.name,e,"<cite>{1}</cite>",true)},getAreaNames:function(e){var t=this;var n=this.selected;var r=this.area&&this.area.split("|")||[];var i=20;var o=null;var u=null;if(n.tradingArea){u=n.tradingArea}else if(n.hotStayPlace){u=n.hotStayPlace}else{u=s.isFormSeted()&&s.isTradingAreaFiltered()?s.getTradingAreaName():""}if(!r.length)return o;if(u&&e){o={title:u,name:a(window.subByte(u,i,"...")),link:t.getAreaLink(u)}}else{o={title:r[0],name:"<span>"+window.subByte(r[0],i,"...")+"</span>",link:t.getAreaLink(r[0])}}return o},getShortDetailAddr:function(){if(this.shortAddr){var e=v(this.shortAddr,13);return(this.area||this.hotelAddress?"<b>，</b>":"")+e}},getShortDetailAddrInter:function(){if(this.shortAddr){var e=v(this.shortAddr,13);return(this.area?"<b>，</b>":"")+e}},getHotelAddress:function(){if(this.hotelAddress){var e=new RegExp("^.{0,8}?"+window.cityName+"市");var t=this.hotelAddress.replace(e,"");return(this.area?"<b>，</b>":"")+t}},getPriceTip:function(){var e=this.getDetailLink();if(this.os&&this.os!=="营业中")return'<p class="no_price">'+this.os+"</p>";if(this.isLowPrice===1){if(this.price>0){return'<p class="ref_price"><a target="_blank" hidefocus="on" href="'+e+this.fromParam+'" title="参考价：'+this.price+'元">参考价：'+this.price+'元</a><i class="icon_jt"></i></p>'}else{return'<p class="ref_price"><a target="_blank" hidefocus="on" href="'+e+this.fromParam+'" title="参考价：'+this.miniRetailPrice+'元">参考价：'+this.miniRetailPrice+'元</a><i class="icon_jt"></i></p>'}}var t="";if(this.isStatic){if(this.miniRetailPrice!=-1){t='<p class="ref_price "><a target="_blank" hidefocus="on" href="'+e+this.fromParam+'" title="参考价：'+this.miniRetailPrice+'元">参考价：'+this.miniRetailPrice+'元</a><i class="icon_jt"></i></p>'}else{t='<p class="no_price">需电话咨询</p>'}}else{if(this.price>0){t='<p class="item_price js_hasprice"><a hidefocus="on" target="_blank" href="'+e+this.fromParam+'"><cite>&yen;</cite><b>'+this.price+'</b>起</a><i class="icon_jt"></i></p>'}else if(this.price==-1){t='<div class="icon-sell"></div>'}else if(this.price==0){if(this.miniRetailPrice!=-1){t='<p class="ref_price"><a hidefocus="on" href="'+e+this.fromParam+'" target="_blank" title="参考价：'+this.miniRetailPrice+'元">参考价：'+this.miniRetailPrice+'元</a><i class="icon_jt"></i></p>'}else{t='<p class="no_price">需电话咨询</p>'}}}return t},getFinishSell:function(){if(!this.isStatic&&this.price==-1){return true}},isPartAvailable:function(){if(this.os&&this.os!=="营业中")return false;if(!this.isStatic&&this.price>0&&this.isPart())return true;return false},isAvailable:function(){if(this.os&&this.os!=="营业中")return false;if(!this.isStatic&&this.price>0&&this.priceStatus==1)return true;return false},getAreaLink:function(e){if(e){var t=["/city/",window.cityurl,"/q-",encodeURIComponent(e),"#from=listarea","&fromDate=",fromDate,"&toDate=",toDate];if(window.QHTrace&&window.QHTrace.instance){t.push(window.QHTrace.instance.generate())}return t.join("")}return""},getDetailLink:function(){if(this.detailLink)return this.detailLink;var e=this.qptype,t=this.info.pois;var n=getDetaiContextPath(this.id),r=[];r.push(n);r.push("/?tag=",typeof cityurl==="undefined"?"":cityurl);r.push("#fromDate=",this.fromDate,"&toDate=",this.toDate);r.push(this.qParam);r.push(this.fromParam);r.push(this.fromFocusList);if(this.fromSpecialRecommend){r.push(this.fromSpecialRecommend)}r.push("&filterid=",encodeURIComponent(this.filterid||""));r.push("&showMap=0");if(typeof e!=="undefined"){r.push("&qptype=",e)}if(t&&t.length>0){r.push("&haspoi=1")}if(window.QHTrace&&window.QHTrace.instance){r.push(window.QHTrace.instance.generate())}if(this.isBNB){this.detailLink="//bnb.qunar.com"+r.join("")}else if(isYizhanshi){this.detailLink="//hotel.qunar.com"+r.join("")}else{this.detailLink=this.host+r.join("")}return this.detailLink},getDetailCommentLink:function(){var e=this.getDetailLink();return this.isBNB?e+"&scroll=comment":e.replace(/\/(?:\?[^#]+)?#/,"/comments.html#")},getDetailImageLink:function(){var e=this.getDetailLink();return e.replace(/\/(?:\?[^#]+)?#/,"/image.html#")},getDetailCommentEditLink:function(){var e=this.getDetailLink();return e.replace(/\/(?:\?[^#]+)?#/,"/comment_edit.html?list=1#")},hightLightDescription:function(){var e={1:"经济型",2:"三星级/舒适",3:"四星级/高档",4:"五星级/豪华",5:"二星级/其他"};var t=this.info.pois,n=m.call(this);var r=[];var i=this.selected;var s=false;if(i.PartHotelName&&i.PartHotelName.match_name){s=true;r.push("曾用名/别名为“"+g.utils.doLight(i.PartHotelName.match_name,n,"<cite>{1}</cite>",true)+"”")}else if(i.HotelName&&i.HotelName.match_name){s=true;r.push("曾用名/别名为“"+g.utils.doLight(i.HotelName.match_name,n,"<cite>{1}</cite>",true)+"”")}if(i.hotelarea){s=true;r.push("位于"+a(i.hotelarea))}if(i.tradingArea&&!g.isMainlandIncludeHM){s=true;r.push("坐落于"+a(i.tradingArea)+"内")}var u=false;if(i.subway){s=true;var f=null;if(i.subway_info){f=i.subway_info[i.subway]}if(f){var l=p(f);r.push("距离"+a(i.subway)+l.key+l.value+"公里");u=true}else{r.push("靠近"+a(i.subway))}}if(i.subway_info&&!u){var l=p(i.subway_info);if(l){var v=p(l.value);if(v){s=true;r.push("距离"+a(l.key)+v.key+v.value+"公里")}}}var y=c(i.poi);if(i.poi&&y.length>0){s=true;var w=y.length>1;for(var E=0,S=t.length;E<S;E++){if(d(i.poi,t[E].name)){var x=t[E];var T;var N="直线距离";if(S===1&&(this.walk||this.drive)){if(this.walk&&this.walk[0]){N="步行距离";T=this.walk[0]}else if(this.drive&&this.drive[0]){N="驾车距离";T=this.drive[0]}}var C=T?N+"约"+b(T/1e3):N+"约"+b(this.selected.poi[x.name]);r.push("距"+(w?String.fromCharCode(65+E)+"点":"")+a(x.name)+C+"公里")}}}if(this.filters&&this.filters.isOpenDragPOI&&this.filters.openDragPOIText){s=true;r.push("距离"+a(this.filters.openDragPOIText)+"直线距离约"+b(this.corrDist/1e3)+"公里")}var k=false;if(i.alliance){s=true;k=true;var L=i.alliance.split("||");var A=[];for(var E=0,O=L.length;E<O;E++){var M="酒店";if(i.group||i.brand){M=""}A.push(a(L[E])+"联盟"+M)}r.push("是"+A.join("、"))}if(i.group){s=true;r.push((!k?"是":"")+a(i.group));k=true}if(i.brand){s=true;r.push((!k?"是":"")+a(i.brand)+"品牌酒店")}if(i.fangxing){s=true;r.push("有"+a(i.fangxing))}if(i.sheshi){if(i.sheshi["newBuildOrFitment"]){s=true;r.push("为"+a("新开业/新装修"))}var _=[];for(var D in o){if(i.sheshi[D]&&D!="newBuildOrFitment"){_.push(a(o[D]))}}if(_.length>0){s=true;r.push("提供"+_.join("、")+"服务")}}if(i.theme&&i.theme!="酒店直通车"){s=true;var P=i.theme;if(P=="连锁"||P=="品牌")i.theme="连锁品牌";r.push("类型为"+a(i.theme))}else if(i.theme&&i.theme=="酒店直通车"){s=true;r.push("由"+a("酒店直通车")+"提供酒店直销报价")}if(i.dangci&&e[i.dangci]){s=true;r.push("属于"+a(e[i.dangci])+"酒店")}if(i.HotelName&&i.HotelName.match_tag){s=true;var H=c(i.HotelName);h(H,"seq");H.unshift("开元");r.push("符合"+"“"+g.utils.doLight(i.HotelName.match_tag,H,"<cite>{1}</cite>",true)+"”"+"的搜索结果")}var B=r.join("，");this.showareamap=this.showareamap||s;if(s){return window.isMainlandIncludeHM?(this.area||this.hotelAddress||this.shortAddr?"<b>。</b>":"")+"该酒店"+B:"该酒店"+B+"<b>。</b>"}return""},getStringLengthLessThan:function(){return'<span class="onesentence">'+getStringLengthLessThan([this.oneSentence,this.hotelAddress+"。"],this.LINES_ASCII_LENGTH,"")+"</span>"},getGroupShopInfo:function(){var e="";var t=QunarDate.parse(window.fromDate).getTime();var n=QunarDate.parse(window.toDate).getTime();if(this.groupShop&&this.groupShop.stitle&&this.groupShop.href){if(this.groupShop.startTime<=t&&this.groupShop.endTime>=n){e='<a class="act_tag tuan"  target="_blank" title="'+this.groupShop.stitle+'" href="'+this.groupShop.href+'&ex_track=auto_4d58d449">团购</a>'}}return e},isShowCommentNum:function(){return this.commentCount-0>0?true:false},isShowCommentScrore:function(){return this.commentScore-0>0?true:false},getCommentScorePercent:function(){return this.commentScore/5*100+"%"},getSmallPicUrl:function(){if(this.baseImageUrl)return"//userimg.qunarzz.com/imgs/"+this.baseImageUrl+"180.jpg";else return"//simg1.qunarzz.com/hotel/listnew/htlist_pic_default.jpg"},getFixOneSentence:function(){var e=this.oneSentence||this.hotelAddress||"";if(e&&e.length>69){e=e.substring(0,68)+"..."}return'<span class="onesentence">'+e+"</span>"},bigMapAreaDescription:function(){var e=this.selected;if(e.tradingArea&&g.isMainlandIncludeHM){return'<span class="bMAreaDes">该酒店坐落于'+a(e.tradingArea)+"内。"}return""},hasFacility:function(){var e=this._basicHotel;if(window.isWhiteCityUrl){return e.HasAirportPickUp=="Y"||e.HasStationPickUp=="Y"||e.hasHeatWaterName=="Y"||e.WifiAccess=="Y"?true:false}else{return e.WifiAccess=="Y"||e.hasParkingArea2=="Y"||e.isWebFree=="Y"||e.HasIndoorPool=="Y"?true:false}},getFacility:function(){var e=this._basicHotel;var t=this.detailLink;var n=[];if(e.WifiAccess=="Y"&&e.networkFacility){n.push('<a href="',t,'" class="icon_wireless icon_device" target="_blank" title="'+e.networkFacility+'"><b>wifi</b></a>')}if(window.isWhiteCityUrl){if(e.hasHeatWaterName=="Y"){n.push('<a href="',t,'" class="icon_heatwater icon_device" target="_blank" title="24小时提供热水"><b>24小时提供热水</b></a>')}if(e.HasAirportPickUp=="Y"){n.push('<a href="',t,'" class="icon_airport icon_device" target="_blank" title="提供接机服务"><b>接机服务</b></a>')}if(e.HasStationPickUp=="Y"){n.push('<a href="',t,'" class="icon_station icon_device" target="_blank" title="提供接站服务"><b>接站服务</b></a>')}}else{if(e.isWebFree=="Y"){n.push('<a href="',t,'" class="icon_tv icon_device" target="_blank" title="提供免费宽带"><b>宽带</b></a>')}if(e.hasParkingArea2=="Y"&&e.parkInfo){n.push('<a href="',t,'" class="icon_p icon_device" target="_blank" title="'+e.parkInfo+'"><b>停车场</b></a>')}if(e.HasIndoorPool=="Y"){n.push('<a href="',t,'" class="icon_swim icon_device" target="_blank" title="提供室内游泳池"><b>游泳池</b></a>')}}return n.join("")},isPicBtn:function(){var e=this._basicHotel;return e.isHasHotelPic&&e.imageUri?true:false},isMainlandIncludeHM:function(){return isMainlandIncludeHM},isHeadPic:function(){return this.needHeadPic||""}},fomatter:{getStarInfo:function(){var e="";if(this.hotelStars){e=ListTemplate.STARS_INFO[this.hotelStars]}else if(this.stars){e=ListTemplate.STARS_INFO[this.stars]}if(e==""){if(this.dangci){e=ListTemplate.GRADES_INFO[this.dangci]}}return e||'<em class="sort dangci_no"></em>'},getLevelName:function(){if(this.dangci)return u[this.dangci];else return"同档次"}},setContext:function(e){g=e||{}}};var b=function(e){return Math.round(e*1e3/100)/10||.1};e.exports=y},979:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;var r=".js_list_block";var i=".js-photo";var s=".js_photo_prev";var o=".js_photo_next";var u={LOAD:"LOAD",CACHEIMG:"CACHE_IMG",GOLEFT:"GOLEFT",GORIGHT:"GORIGHT"};var a=Hogan.compile('<img style="display: none;" src="//userimg.qunarzz.com/imgs/{{imgid}}180.jpg" class="js_list_hotelpic" data-idx="{{idx}}" />');var f=function(e,t){if(!e){return-1}if(e.indexOf){return e.indexOf(t)}else{var n=-1;$.each(e,function(e,r){if(t==r){n=e;return false}});return n}};QClass.define("hotel.list.TitleImage",{cache:{},domRoot:[],initialize:function(e){this.domRoot=$(e);this.bindEvents();this.cache={}},clearCache:function(){this.cache={}},fresh:function(e){var t=this;$.each(e,function(e,n){t.cache[e]={busy:false,loaded:false,cached:false,all:[n],opqueue:[]}})},bindEvents:function(){var e=this;this.domRoot.on("mouseenter",i,function(){var t=$(this);var n=t.closest(r);var i=n.attr("data-id");var s=e.cache[i];if(n.attr("data-hasmoreimg")=="true"){if(s&&!s.loaded){s.opqueue.push(u.LOAD);s.opqueue.push(u.CACHEIMG);e.execNextCommand(i,n)}else if(s&&!s.cached){s.opqueue.push(u.CACHEIMG);e.execNextCommand(i,n)}}});this.domRoot.on("click",s,function(t){t.preventDefault();var n=$(this);var i=n.closest(r);var s=i.find(".js_list_hotelpic:animated");if(s.length>0){return}var o=i.attr("data-id");var a=e.cache[o];if(f(a.opqueue,u.GOLEFT)<0){a.opqueue.push(u.GOLEFT)}if(f(a.opqueue,u.CACHEIMG)<0){e.execNextCommand(o,i)}});this.domRoot.on("click",o,function(t){t.preventDefault();var n=$(this);var i=n.closest(r);var s=i.find(".js_list_hotelpic:animated");if(s.length>0){return}var o=i.attr("data-id");var a=e.cache[o];if(f(a.opqueue,u.GORIGHT)<0){a.opqueue.push(u.GORIGHT)}if(f(a.opqueue,u.CACHEIMG)<0){e.execNextCommand(o,i)}})},execNextCommand:function(e,t){var n=this;var r=this.cache[e];if(r.opqueue.length==0||r.busy){return}r.busy=true;var i=r.opqueue.shift();var s;switch(i){case u.LOAD:r.loaded=true;$.ajax({url:"//hotel.qunar.com/render/listOtherSixHeadImage.jsp",data:{hotelSeq:e},cache:false,dataType:"json",success:function(i){if(i&&i.data&&i.data.headImageInfos){$.each(i.data.headImageInfos,function(e,t){r.all.push(t.imageId)})}if(r.all.length>1&&t.attr("data-show")==="true"){t.find(".js_photo_prev").show();t.find(".js_photo_next").show()}r.busy=false;n.execNextCommand(e,t)},error:function(){r.loaded=false}});break;case u.CACHEIMG:var o=t.find(".js_list_hotelpic:first");if(r.all.length<2){break}o.siblings().remove();var f=o.attr("data-idx")*1;var l=f+1,c=f-1;if(l>=r.all.length){l=l-r.all.length}if(c<0){c=c+r.all.length}o.after(a.render({idx:c,imgid:r.all[c]}));o.after(a.render({idx:l,imgid:r.all[l]}));r.cached=true;r.busy=false;n.execNextCommand(e,t);break;case u.GOLEFT:s=t.find(".js_list_hotelpic");if(s.length<3){break}s.eq(0).fadeOut(100,function(){s.eq(0).hide()});s.get(2).styleText="";s.eq(2).fadeIn(100,function(){r.opqueue.push(u.CACHEIMG);s.eq(2).siblings().remove();r.busy=false;n.execNextCommand(e,t)});GARuner("picBtnPrev");break;case u.GORIGHT:s=t.find(".js_list_hotelpic");if(s.length<3){break}s.eq(0).fadeOut(100,function(){s.eq(0).hide()});s.get(1).styleText="";s.eq(1).fadeIn(100,function(){r.opqueue.push(u.CACHEIMG);s.eq(1).siblings().remove();r.busy=false;n.execNextCommand(e,t)});GARuner("picBtnNex");break}},showPager:function(e){var t=this.cache[e];return t&&t.all&&t.all.length>1},triggerLoad:function(e,t){}})},980:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;var r=$("#hotel_sort").offset().top,i=35,s={};var o=QClass.define("hotel.list.LazyLoad",{statics:{$win:$(window),timeout:500,url:"//hotel.qunar.com/render/listPageSnapshot.jsp",limitCount:10,pageNum:15},initialize:function(e){this.options=e||{};this.$container=e.container;this.ns=e.ns;this.isBindEvent=false;this.bindEvent()},bindEvent:function(){var e=this;if(!this.isBindEvent){this.isBindEvent=true;var t=-1,n=-1;var r="resize.LazyLoadUpdate."+e.ns+" scroll.LazyLoadUpdate."+e.ns;var i="scroll.LazyLoadList."+e.ns+" resize.LazyLoadList."+e.ns;o.$win.unbind(r).unbind(i);o.$win.bind(r,function(){if(t>=0){clearTimeout(t)}t=setTimeout(function(){$(e).trigger("onRenderMarker",{seqs:e.getVisibleHotelSeqs()})},o.timeout)}).bind(i,function(){if(n>=0){clearTimeout(n)}n=setTimeout(function(){var t=o.$win.height();var n=o.$win.scrollTop();var r=e.$container.find(".js_list_block");var i;var s=r.length;if(s>o.limitCount){i=$(r[10]).offset().top}else{i=Number.MAX_VALUE}if(n+t>i&&s===o.pageNum){$(e).trigger("onLazyLoad")}},o.timeout)})}},getVisibleHotelSeqs:function(){var e=o.$win.height(),t=o.$win.scrollTop();var n=this.$container.find(".js_list_block"),u,a=[],f=0,l=0,c=[],h=null;for(var p=0,d=n.length;p<d;p++){u=$(n[p]);h=u.data("id");f=u.outerHeight();l=u.offset().top;if(t>=r){if(l>t+i&&l<t+e||l+f<t+e&&l+f>t+i){c.push(h)}}else{if(l>t&&l<t+e||l+f<t+e&&l+f>t){c.push(h)}}if(!s[h]){var v={Impression_Id:(new Date).getTime().toString()+Math.ceil(Math.random()*1e4).toString(),Impression_Date:QunarDate.format(new Date),hotelSEQ:h,cookie_ID:window.Cookie.values["QunarGlobal"],city_tag:window.cityurl,checkin_Date:window.fromDate,checkout_Date:window.toDate,query:window.query};a.push(v);s[h]=true}}if(a.length){a=JSON.stringify(a);$.ajax({url:o.url,type:"post",data:{data:a}})}return c}})},981:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;var i=n(982);var s=10,o=500,u="hotel";var a=function(e,t){var n;return isNaN(n=parseInt(e))?t:n};var f=function(e,t){var n;return isNaN(n=parseFloat(e))?t:n};var l=function(e,t){var n=this,r={},l={},c={},h={},p={};n.firstTime=true;n.MAX_REQUEST=10;n.activity="";var d=t||{};var v=this;var m=function(e,t){if(typeof e.filterid!="undefined"){window.newfilterid=e.filterid}if(d.utils.contentEquals(e,r[t]))return;else{r[t]=e;e=e||{};h[t]=e["hashcode"]||h[t];if(t==u){g(e);$(v).trigger("priceUpdate",e)}else{$(v).trigger("fbPriceUpdate",e)}}};var g=this.formatResult=function(e){var t=[];e.hotels&&$.each(e.hotels,function(n,r){var s=new i(r.id,d);for(var o in r){if(o!="attrs"){s[o]=r[o]}else{for(var u in r.attrs){s[u]=r.attrs[u]}}}var l=s.hotelBrand;if(l){s.brand=e.info.brands&&e.info.brands[l]||{};s.bid=l}s.imageCount=a(s.imageCount,0);s.CommentCount=a(s.CommentCount,0);s.CommentScore=Math.floor(f(s.CommentScore,0)*10)/10;t.push(s)});e.hotelInfos=t;delete e.hotels;d&&d.MixKey&&d.MixKey.format(e)};var y=function(e){if(typeof e.filterid!="undefined"){window.newfilterid=e.filterid}g(e);if(n.firstTime){$(v).trigger("firstInfoReady",e)}$(v).trigger("infoReady",e);n.firstTime=false};var b=new ScriptRequest({oncomplete:y});this.load=function(e){b.cancel();this.lastUrl=e;if(window.Qant){e=Qant.beforeRequest(e)}b.send(e)};this.getLastUrl=function(){return this.lastUrl};var w=function(e){var t=u;c[t]++;if(c[t]>s){$(v).trigger("afterPriceUpdate");E(t);return}var n=c[t]*o;p[t]=setTimeout(e,n)};this.loadPrice=function(e){var t=u;if(l&&l[t]===e)return;this.stop(t);l[t]=e;c[t]=0;var n=function(){var r=h[t]||"-1";var i=e;if(window.Qant){i=window.Qant.beforeRequest(e)}(new ScriptRequest({oncomplete:function(e){m.call(window,e,t)}})).send(i+"&last="+r);w(n)};w(n)};this.loadPriceNew=function(e){var t=u;if(l&&l[t]===e)return;this.stop(t);l[t]=e;c[t]=0;var n=function(){var n=h[t]||"-1";if(window.Qant){e=window.Qant.beforeRequest(e)}(new ScriptRequest({oncomplete:function(e){m.call(window,e,t)}})).send(e+"&last="+n)};setTimeout(function(){n()},0)};this.loadComment=function(e,t){var n=this;(new ScriptRequest({oncomplete:function(e){$(n).trigger("commentUpdate",e)},ontimeout:function(){var e=n.makeDefaultResult(t);$(n).trigger("commentUpdate",e)}})).send(e,1e4)};this.ajaxGet=function(e,t){t=t||function(){};if(e){$.ajax({url:e,jsonp:"__jscallback",type:"GET",dataType:"jsonp",success:function(r){if(n.firstTime){$(n).trigger("firstInfoReady",r)}n.firstTime=false;if(!n.MAX_REQUEST){$(n).trigger("infoReady",null)}else{if(t.call(n,r)){n.MAX_REQUEST--;n.ajaxGet(e,t)}else{$(n).trigger("infoReady",r)}}},error:function(){$(n).trigger("infoError")}})}else{$(n).trigger("infoError")}};this.makeDefaultResult=function(e){var t={},n={},r=[];for(var i=0;i<e.length;i++){n={};n.seq=e[i];n.titles=[];n.recommenderCount=0;r.push(n)}t.data=r;t.ret=true;t.errcode=0;return t};var E=this.stop=function(e){if(typeof e!=="undefined"&&p[e]!=null){clearTimeout(p[e]);p[e]=null}};var S;this.loadSinglePrice=function(e){if(t){t.cancel()}else{var t=new ScriptRequest({oncomplete:function(e){g(e);$(v).trigger("singlePriceReady",e)}});t.send(e)}};var x;this.loadAll=function(e){if(x){x.cancel()}else{x=new ScriptRequest({oncomplete:function(e){g(e);$(v).trigger("allInfoReady",e)}})}x.send(e)}};e.exports=l},982:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;var r=function(e,t){var n=t||{};this.id=e;this.getProperty=function(e){if(typeof this[e]=="undefined"){this[e]=r[e].call(this)}return this[e]};var r={href:function(){var e=getDetaiContextPath(this.id);var t=this.isBNB?"//bnb.qunar.com":"";return t+e+"/?tag="+cityurl+"#fromDate="+fromDate+"&toDate="+toDate+"&requestID="+requestID+System.tracking.TrackingCode("&")+fromParam+qParam},photo_href:function(){var e=getDetaiContextPath(this.id);return e+"/image.html"},comment_href:function(){var e=getDetaiContextPath(this.id);if(this.isBNB){return"//bnb.qunar.com"+e+"/?tag="+cityurl+"#fromDate="+fromDate+"&toDate="+toDate+"&qptype="+System.tracking.TrackingCode("&")+fromParam+qParam+"&filterid="+encodeURIComponent(filterid||"")+"&scroll=comment"}else{return e+"/comments.html"+"#fromDate="+fromDate+"&toDate="+toDate+"&qptype="+System.tracking.TrackingCode("&")+fromParam+qParam+"&filterid="+encodeURIComponent(filterid||"")}},images_href:function(){var e=getDetaiContextPath(this.id);return e+"/image.html"},fea:function(){var e=[];for(var t=0,n=i.length;t<n;t++){if(this[i[t]]=="Y"){e.push(s[t])}}return e.join("、")},offc:function(){if(this.brand&&this.brand.wrapper&&this.promotion&&this.promotion.length>0){var e=this.brand.wrapper;var t=this.promotion;for(var n=0;n<t.length;n++){var r=t[n];if(r.wi==e){return{name:this.brand.name,url:System.booking.statManager({ip:window.qunar_hotel_sp,bookinglocation:"5",map:1},"//hotel.qunar.com/booksystem/booking.jsp?appendword1=official&full=false&stat=1"+fromParam+r.bu)+"&retailPrice="+r.pr,pr:r.pr,title:this.brand.adTitle,brand:this.hotelBrand}}}}return null},pad:function(){var e=[],t=[];if(this.promotion&&this.promotion.length>0){var n=false;var r=this.promotion;var i=[],s=[],o=[];for(var u=0;u<r.length;u++){var a=r[u];if((a.fm&4)===4)i.push(a);else if((a.fm&2)===2)s.push(a);else o.push(o.push(a))}var f=i.length&&i||s.length&&s||[];f.sort(function(e,t){return e.wi>t.wi});var l=null;var c=0;for(var u=0;u<f.length;u++){var a=f[u];if(a.wi=="109b86258c5"&&a.pr/item.price>1.12)continue;if(a.pd&&a.wiN){if(l!==null&&l!=a.wi||++c>3)break;var h=System.booking.statManager({ip:window.qunar_hotel_sp,bookinglocation:"1",map:1},"//hotel.qunar.com/booksystem/booking.jsp?full=false&stat=1"+fromParam+a.bu);h+="&retailPrice="+a.pr;var p=a.pt.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");var d=a.pd.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");if(!e.length)e.push('<p class="yh_info"><a href="',h,'" target="blank" onmousemove="qShowTip(event);" onmouseover="qShowTip(event);" onmouseout="qHideTip(event);" data-tip="','">',a.wiN+"优惠：");e.push(" ",p,"");t.push('<p><span class="hl_orange">'+p+"</span><br/>"+d+"</p>");l=a.wi}}if(e.length){e.splice(3,0,escape(t.join("")));e.push("</a></p>")}}if(e.length>0)return e.join("");else return null},point:function(){if(!this.gpoint)return null;var e=this.gpoint.split(","),t;t=this.bpoint?this.bpoint.split(","):[];if(!isMainlandIncludeHM){t=e}var n=GLatLng.fromMap({baidu:t,google:e});if(!n)n=new GLatLng(e[0],e[1]);return n},latlng:function(){return this.getProperty("point")}};var i=["isWebFree","HasRestaurant","hasBreakfast","HasBusinessCenter","HasIndoorPool","HasFitnessRoom","HasNonSmokingAvailable","HasMeetingORBanquetSpace"];var s=["免费宽带","餐厅","早餐","商务中心","游泳池","健身房","无烟房","会议室"]};e.exports=r},983:function(e,t,n){function u(){i.renderAffix()}function a(){i.pauseAffix()}function f(){i.startAffix()}function l(){i.setPosition()}function c(){p("");$("#js-singleHotelCover").hide();$("#js-distance-title").show()}function h(e){var t='以下为"'+(e||"")+'"<em>周边酒店：</em>';$("#js-singleHotelCover").html(t).show();$("#js-distance-title").hide()}function p(e){e=(typeof e=="string"?$.trim(e):e)||"";s.length?s.empty().append(e):""}function d(){return!!s.length}function v(){s.size()&&s.show()}function m(){s.size()&&s.hide()}var r=typeof r==="function"&&!r.amd?r:false;var i=n(984),s=$("#js-singleHotel"),o=$("#distanceFilter");m();var g={renderAffix:u,pauseAffix:a,startAffix:f,setSingleHotelHtml:p,hasSingleHotelDom:d,resetDefault:c,setSingleHotelTypeStyle:h,setPosition:l,showSingleHotelDom:v,hideSingleHotelDom:m};$(g).on("mapResize",function(e,t){i.mapResizeControl(t)});$(g).on("adjustWidth",function(e,t){i.resizeWidth(t)});e.exports=g},984:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;var i=n(288).affix_hBox;var s={interSmallMap:688,interBigMap:320,mainlandWider:864,mainlandNarro:688};var o=$("#js-singleHotel"),u=o.parent(),a=$("#jxContentPanel"),f,l=false,c=false,h=s["mainlandWider"];var p=function(){if(f){return}f=i({floatArea:o,top:0,left:u,rangeTop:u,rangeBottom:a,additionStyle:{width:function(){return h},backgroundColor:"#fff",zIndex:11},recoveryStyle:{width:function(){return h},position:"static"},isHasRelative:true});l=true};var d=function(){f&&l?f.pause():"";l=false};var v=function(){f&&!l?f.start():"";l=true};var m=function(){f&&f.setPosition()};var g=function(e){c=e;if(f){if(!e){h=s["interSmallMap"]}else{h=s["interBigMap"]}o.css("width",h)}};var y=function(e){if(e){h=s["mainlandWider"]}else{h=s["mainlandNarro"]}o.css("width",h)};var b={renderAffix:p,pauseAffix:d,startAffix:v,mapResizeControl:g,resizeWidth:y,setPosition:m};e.exports=b},985:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;var r=function(e,t){function o(e,t,n,r){var i=r.find(".js_list_comment_content_add_"+t),s="";if(i.size()&&e&&e.length>1){s=e[1].title?e[1].title:e[1];var o=i.attr("href")+"&cfg=1";i.attr("href",n||o);i.attr("title",s);var u=s.length>18?s.substring(0,18)+"...":s;i.html("<i class='icon_ql'></i>"+u+"<i class='icon_qr'></i>")}else{i.parent().hide()}}var n=e||{};var r=t||{};var i={};var s=r.container&&r.container.length?r.container:[];this.updateCount=0;this.noPriceSeqs=[];this.getComments=function(){return i};this.setComments=function(e){i=e};this.getNoPriceSeqs=function(){return this.noPriceSeqs||[]};var u=function(e){var t=e.hotelTmpInfos||[],n={},r=$.map(t,function(e){n[e.id]=e;return e.id});return n};this.updateInterTop40Comments=function(e,t){if(!s.length)return;var n=e.data||{},r=u(t),i=this;$.each(r,function(e,t){var r=n[e]||{},i=s.find("#js_block_"+e),u=i.find(".js_list_comnumwrap"),a=i.find(".js_list_comnum"),f=i.find(".js_list_comment_content_"+e),l=i.find(".js_sleeper"),c=0,h,p=r["brief"]||{},d="",v=false;c=t.commentCount+(p.count||0);if(t.commentCount>0){if(r["comments"]&&r["comments"].length>0){h=r["comments"]}}else if(p.count>0){v=true;if(p.data&&p.data.length>0){h=p.data}}if(c<=0){u.addClass("nocom-show")}else{u.addClass("nocom-hide");a.html(c);if(f.size()>0&&h&&h.length>0){var m;if(v){m=t.getDetailCommentLink()}else{m=f.attr("href")+"&cfg=1"}d=m;var g=h[0].title.length>18?h[0].title.substring(0,18)+"...":h[0].title;f.attr("href",m);f.attr("title",h[0].title);f.html("<span class='icon_ql'></span>"+g+"<span class='icon_qr'></span>")}if(l.size()>0&&r.recommenderCount){var y='<span class="tser_ct"><span class="icon_cursor"><i class="quto_finger"></i><span class="num">'+r.recommenderCount+'</span><span class="sleep_txt"></span></span></span>';var m=l.attr("href");if(m.indexOf("#")===-1)l.attr("href",m+"#trysleeper=1");else l.attr("href",m+"&trysleeper=1");l.html(y);if(l.attr("nonecommentscore")){o(h,e,d,i)}}o(h,e,d,i)}})};this.updateMainlandComment=function(e,t){if(!s.length)return;var n=e.data||[],r=null,i=null,u=null;if(!e.ret){return}$.each(n,function(e,t){if(t.seq){var n=s.find("#js_block_"+t.seq);r=n.find(".js_list_comment_content_"+t.seq);i=n.find(".js_sleeper"),u=n.find(".js_sleeper_count");if(r.size()>0&&t.titles.length>0){var a=r.attr("href")+"&cfg=1";r.attr("href",a);r.attr("title",t.titles[0]);var f=t.titles[0].length>18?t.titles[0].substring(0,18)+"...":t.titles[0];r.html("<span class='icon_ql'></span>"+f+"<span class='icon_qr'></span>")}else{r.size()&&r.parent().hide()}o(t.titles,t.seq,"",n);if(i.size()>0&&t.recommenderCount){var l='<span class="icon_cursor"><i class="quto_finger"></i><span class="num">'+t.recommenderCount+'</span><span class="sleep_txt"></span></span>';var a=i.attr("href");if(a.indexOf("#")===-1)i.attr("href",a+"#trysleeper=1");else i.attr("href",a+"&trysleeper=1");i.html(l);if(i.attr("nonecommentscore")){o(t.titles,t.seq,"",n)}}else{i.size()&&i.parent(".sleeper").hide()}if(u.size()>0&&t.recommenderCount){var l="<span>"+t.recommenderCount+"位试睡员推荐</span>";var a=i.attr("href");if(a.indexOf("#")===-1)u.attr("href",a+"#trysleeper=1");else u.attr("href",a+"&trysleeper=1");u.html(l);u.addClass("sleeperbd");if(u.attr("nonecommentscore")){o(t.titles,t.seq,"",n)}}else{u.size()&&u.hide()}}})};this.setUpdateCount=function(e){this.updateCount=e};this.getUpdateCount=function(){return this.updateCount};this.updateHotelInfo=function(e,t){$.each(t,function(t,n){$.each(e,function(e,t){if(t.id==n.id){t.promotion=n.promotion;t.price=n.price}})});return e};this.updatePrice=function(e,t){if(!s.length)return;var n=e.hotelInfos,r=this;this.updateCount++;$.each(n,function(e,n){var i=s.find("#js_block_"+n.id);var o=i.find("#js_price_"+n.id);if(o.size()){if(n.price>0){var u=i.attr("data-link"),a="undefined"!=typeof n.priceStatus&&n.priceStatus===-2&&n.price>0?true:false;var f=t&&t.getPriceTip.call({isStatic:n.isStatic,price:n.price,miniRetailPrice:n.MiniRetailPrice,os:n.os,id:n.id,isLowPrice:n.isLowPrice,fromParam:window.fromParam,getDetailLink:function(){return u},isPart:function(){return a}});o.html(f)}if(!o.find(".js_hasprice").length&&r.updateCount===1&&n.price<=0){r.noPriceSeqs.push(n.id)}if(a){i.find("#js_part_tip_"+n.id).show()}else{i.find("#js_part_tip_"+n.id).hide()}}});if(r.updateCount===1&&r.noPriceSeqs.length){$(r).trigger("firstUpdateNoPrice",[r.noPriceSeqs])}$(r).trigger("afterRenderPrice",e)}};e.exports=r},986:function(e,t,n){function p(e,t){this.$wrapContainer=e.wrapContainer||[];this.$container=e.container||[];this.activityInfo={};this.setActivityInfo=function(e){this.activityInfo=e||{}},this.update=function(e){var t=e.hotelInfos||[],n=this;a=$("#js_screen").width()>0?true:false;$(t).each(function(e,t){var r=n.$container.find("#js_block_"+t.id);if(!r.length){return}n.decorator(r,t,e)})};this.decorator=function(e,t,n){var r=this,i={};if(!e.length||$.isEmptyObject(t)){return}i={url:e.data("link"),hotelid:t.id};if(window.showActive){t.activity="CAMEL_CARD|SNAP_UP|FREE_JIEJI|STAR_VOUCHER|BOTAO_SALE|DRIVE_VOUCHER|HALFOFF_GROUPBUY|QINGSONGTUI|YINLIANLIJIAN|ZHUYISONGYI|PICK_UP_SERVICE|NEWYEAR_SALE|BMW_DRIVE|AIR_PICK_UP_TICKET|GLOBAL_RED_ENVELOPE"}if(window.showActive){t.starCouponType="STAR_COUPON_PAYBACK";t.bnbCashback=true;t.camelCoinOfGroupBuy=10;t.valentinesDay=true;t.isSelectedBNB=3;t.hasLianzhu=true;t.lianzhu=[{fromDate:"2015-02-03",toDate:"2015-03-25",list:[{duration:5,discount:6},{duration:3,discount:8}]},{fromDate:"2015-03-03",toDate:"2015-04-25",list:[{duration:4,discount:7}]}]}var o=t.activity?t.activity.split("|"):[];$(o).each(function(e,t){if(t=="CAMEL_CARD"){$(o).each(function(e,t){if(t=="PAY_IN_ADVANCE_CARD"){o.splice(e,1)}})}});var u=o?o.length:0;$(f).each(function(e,t){if(t&&r._hasActive(o||[],t)>-1){u--}});if(t.camelCoinOfGroupBuy&&t.camelCoinOfGroupBuy>0){u++}if(t.starCouponType&&t.starCouponType=="STAR_COUPON_PAYBACK"){u++}if(h){if(u==0){$(".js_list_comment_content_add_"+t.id).parent().removeClass("hide");$("#js_plugin_activity_append_"+t.id).hide();$("#js_plugin_activity_short_append_"+t.id).hide()}else if(u<4){$(l).each(function(e,t){s[t]="#js_plugin_activity_short_append_"});var a=e.find(".js_listRank")&&e.find(".js_listRank").length?true:false;if(a){$("#js_plugin_activity_short_append_"+t.id).addClass("short_margin")}$("#js_plugin_activity_short_append_"+t.id).show();$("#js_plugin_activity_append_"+t.id).hide()}else{$(l).each(function(e,t){s[t]="#js_plugin_activity_append_"});$("#js_plugin_activity_append_"+t.id).show();$("#js_plugin_activity_short_append_"+t.id).hide()}}else{$(".js_list_comment_content_add_"+t.id).parent().removeClass("hide")}if(t.isSelectedBNB==1){o.push("BNBGLODEN")}else if(t.isSelectedBNB==2){o.push("BNBSILVER")}else if(t.isSelectedBNB==3){o.push("BNBCOPPER")}if(r._hasActive(o,"YINLIANLIJIAN")>-1){o.push("YINLIANLIJIAN_MSG")}var c=t.starCouponType;o.push(c);if(window.isSpecialStay&&window.isSpecialCity&&t.hasLianzhu&&t.lianzhu&&t.lianzhu.length){o.push("LIANZHU");i["LIANZHU"]={lianzhu:t.lianzhu,title:"连住特惠说明"}}o.push(t.bnbCashback?"BNBCASHBACK":"");var p=t.camelCoinOfGroupBuy;o.camelCoinOfGroupBuy=p;o.push(p>0?"camelCoinOfGroupBuy":"");o.unshift(t.valentinesDay?"VALENTINE":"");var d=parseFloat(t.mobileSave,10)||0,v="";if(d>0){if(t.displayMobilePriceType===1){o.push("MOBILE_NEWUSER");v="MOBILE_NEWUSER"}else if(t.displayMobilePriceType===2){o.push("MOBILE_ORDER");v="MOBILE_ORDER"}else if(t.displayMobilePriceType===3){o.push("MOBILE_DISCOUNT");v="MOBILE_DISCOUNT"}else if(t.displayMobilePriceType===4){o.push("DUANWU_DISCOUNT");v="DUANWU_DISCOUNT"}if(v){i[v]={diffPrice:d};o=r._removeActiveData(o,"SNAP_UP")}}if(t.teamRoom){o.push("GROUPROOM")}o=r.formatActivityArr(o,"QINGSONGTUI");r._addActive(o,i,e)};this._addActive=function(e,t,n){var r=this;$.each(e,function(e,i){if(!i){return}r.renderListActivityTips(i,t,n)})};this.renderListActivityTips=function(e,t,n){var r=this;var f=s[e]?s[e]:s["DEFALTACTI"];var l=f+t.hotelid;var h=n.size()&&n.find(l);var p=$.isEmptyObject(this.activityInfo);if(!h.size()||h.data(e)){return}if(!p&&this.activityInfo[e]&&this.activityInfo[e].imgUrl){t[e]=this.activityInfo[e];t[e].width=this.activityInfo[e]&&this.activityInfo[e].desc?c[this.activityInfo[e].desc.length]+"px":"58px";if(a&&t[e]&&t[e].retinaImgUrl){t[e].imgUrl=t[e].retinaImgUrl}}if(o[e]){if(!t[e]){t[e]={}}if(a){t[e].imgUrl=o[e]+"1"}else{t[e].imgUrl=o[e]+"2"}}if(!p&&this.activityInfo[e]&&this.activityInfo[e].listExplanation){var d=this.activityInfo[e].listExplanation.replace(/([^\x00-\xff])/g,"$1 ");if(d.length<51){u[e]=true}}if(!p&&s[e]||t[e]){r._addActiveDecorator({control:i,controlOption:{type:e,autoWidth:u&&u[e],container:h,afterRender:r._addMark(h,e),renderData:t}})}};this.formatActivityArr=function(e,t){e=e||[];var n=this._hasActive(e,t);if(n>-1){e.splice(n,1);e.push(t)}return e};this._addMark=function(e,t){e.data(t,true)};this._addActiveDecorator=function(e){if(!e.controlOption.container){return}if(e.control){var t=new e.control(e.controlOption)}};this._removeActiveDecorator=function(e){};this._removeActiveData=function(e,t){e=e||[];var n=[];$.each(e,function(e,r){if(r!==t){n.push(r)}});return n};this._hasActive=function(e,t){e=e||[];var n=-1;$.each(e,function(e,r){if(r===t){n=e;return}});return n};this._bindEvent=function(){this.$container.delegate(".js_active_tag","click",function(){var e=$(this).data("activetype");if(e){window.GARunerRich({a:"搜索结果|活动点击|"+e})}}).delegate(".js_active_tag","mouseenter.beacon",function(){var e=$(this).attr("data-hoverId");e&&window.GARunerRich({a:"搜索结果|"+e})})};this._bindEvent()}var r=typeof r==="function"&&!r.amd?r:false;var i=n(987);var s={DEFALTACTI:"#js_plugin_activity_append_",YINLIANLIJIAN_MSG:"#js_plugin_append_",AIR_PICK_UP_TICKET:"#js_plugin_activity_append_",STAR_COUPON_PAYBACK:"#js_plugin_activity_append_",camelCoinOfGroupBuy:"#js_plugin_activity_append_",VALENTINE:"#js_plugin_append_",BNBCASHBACK:"#js_plugin_append_",FREE_JIEJI:"#js_plugin_activity_append_",MOBILE_NEWUSER:"#js_price_plugin_append_",MOBILE_ORDER:"#js_price_plugin_append_",MOBILE_DISCOUNT:"#js_price_plugin_append_",DUANWU_DISCOUNT:"#js_price_plugin_append_",SNAP_UP:"#js_price_plugin_append_",LIANZHU:"#js_plugin_append_",BNBGLODEN:"#js_photo_plugin_append_",BNBSILVER:"#js_photo_plugin_append_",BNBCOPPER:"#js_photo_plugin_append_",CAMEL_CARD:"#js_plugin_tag_",PAY_IN_ADVANCE_CARD:"#js_plugin_tag_",GROUPROOM:"#js_plugin_tag_"};var o={FREE_JIEJI:"free_jieji",STAR_COUPON_PAYBACK:"starcoupon_payback",camelCoinOfGroupBuy:"camelcoin"};var u={VALENTINE:true,LIANZHU:true};var a=$("#js_screen").width()>0?true:false;var f=["CAMEL_CARD","SNAP_UP","PAY_IN_ADVANCE_CARD"],l=["DEFALTACTI","STAR_COUPON_PAYBACK","camelCoinOfGroupBuy","FREE_JIEJI","AIR_PICK_UP_TICKET"];var c={3:52,4:58,5:77};var h=window.isMainlandIncludeHM||window.isMainland||window.cityurl=="macao_city"||window.cityurl=="hongkong_city";e.exports=p},987:function(e,t){function a(e){this.option=e;this.container=e.container;this.$activityLayer=[];this.relateHtmlTpl=s[this.option.type]?s[this.option.type]:s["DEFALTACTIVITY"];this.tipHtmlTpl=i[this.option.type]?i[this.option.type]:i["DEFALTACTIVITY"];this.renderData=$.extend({},this.option.renderData,this.option.renderData[this.option.type]);if(!i[this.option.type]&&!this.renderData.listExplanation){this.tipHtmlTpl=""}this.html=this.relateHtmlTpl&&this.relateHtmlTpl.render&&$(this.relateHtmlTpl.render(this.renderData))||this.relateHtmlTpl;this.tipHtml=this.tipHtmlTpl&&this.tipHtmlTpl.render&&$(this.tipHtmlTpl.render(this.renderData))||this.tipHtmlTpl;this.tipWrapTemplate=r;this.renderTip();this.renderItem();this.tipHtmlTpl&&this._bindEvent()}var n=typeof n==="function"&&!n.amd?n:false;var r=null,i=null,s=null;var o=/MSIE 7\.0/.test(navigator.userAgent);s={DEFALTACTIVITY:Hogan.compile('<li id="{{name}}_{{hotelid}}" class="js_active_tag" data-activetype="{{desc}}"><a href="{{url}}" target="_blank"><img src="//simg1.qunarzz.com/hotel/list/activity/{{imgUrl}}.png" width="{{width}}" height="15px"></img></a></li>'),AIR_PICK_UP_TICKET:Hogan.compile('<li id="AIR_PICK_UP_TICKET_{{hotelid}}" class="js_active_tag" data-activetype="高星酒店-深圳接送机40元劵"><a href="{{url}}" target="_blank"><img src="//simg1.qunarzz.com/hotel/list/activity/{{imgUrl}}.png" width="75px" height="15px"></img></a></li>'),STAR_COUPON_PAYBACK:Hogan.compile('<li id="starVoucher_{{hotelid}}" class="js_active_tag" data-activetype="可返星券"><a href="{{url}}" target="_blank"><img src="//simg1.qunarzz.com/hotel/list/activity/{{imgUrl}}.png" width="58px" height="15px"></img></a></li>'),YINLIANLIJIAN_MSG:Hogan.compile('<p id="YINLIANLIJIAN_MSG_{{hotelid}}" class="promotion_info js_active_tag" data-activetype="银联立减"><i class="gree_promotion"></i><cite><a href="{{url}}" target="_blank">用银联满<b>300</b>减<b>30</b></a></cite></p>'),camelCoinOfGroupBuy:Hogan.compile('<li id="camelCoinOfGroupBuy_{{hotelid}}" class="js_active_tag" data-activetype="返骆驼币"><a href="{{url}}" target="_blank"><img src="//simg1.qunarzz.com/hotel/list/activity/{{imgUrl}}.png" width="58px" height="15px"></a></li>'),VALENTINE:Hogan.compile('<p id="valentine_{{hotelid}}" class="promotion_info js_active_tag" data-activetype="情人节大促"><a href="{{url}}" target="_blank"><img src="//simg3.qunarzz.com/hotel/common/valentine_v2.png"></a></p>'),BNBCASHBACK:Hogan.compile('<p id="cashBack_{{hotelid}}" class="promotion_info js_active_tag" data-activetype="返30"><cite><a href="{{url}}" target="_blank">订客栈，送30元现金</a></cite></p>'),MOBILE_NEWUSER:Hogan.compile('<p id="MOBILE_NEWUSER_{{hotelid}}" class="save_money js_active_tag" data-activetype="首单返"><a href="{{url}}" target="_blank"><span class="icon_mobile blue_mobile"></span><b class="blue_cite">手机新用户省<cite class="farial">&yen;{{diffPrice}}</cite></b></a></p>'),MOBILE_ORDER:Hogan.compile('<p id="MOBILE_ORDER{{hotelid}}" class="save_money js_active_tag" data-activetype="更低价"><a href="{{url}}" target="_blank"><span class="icon_mobile blue_mobile"></span><b class="blue_cite">手机下单省<cite class="farial">&yen;{{diffPrice}}</cite></b></a></p>'),MOBILE_DISCOUNT:Hogan.compile('<p id="MOBILE_DISCOUNT{{hotelid}}" class="save_money js_active_tag" data-activetype="五折促"><a href="{{url}}" target="_blank"><span class="icon_mobile red_mobile"></span><b class="red_cite">手机下单省<cite class="farial">&yen;{{diffPrice}}</cite></b></a></p>'),DUANWU_DISCOUNT:Hogan.compile('<p id="DUANWU_DISCOUNT{{hotelid}}" class="save_money js_active_tag" data-activetype="端午五折"><a href="{{url}}" target="_blank"><span class="icon_mobile red_mobile"></span><b class="red_cite">端午五折省<cite class="farial">&yen;{{diffPrice}}</cite></b></a></p>'),LIANZHU:Hogan.compile('<p id="list_lz_icon_{{hotelid}}" class="promotion_info js_active_tag" data-activetype="连住多日有优惠"><a href="{{url}}" target="_blank"><cite>连住多日有优惠</cite><i class="icon_gjt"></i></a></p>'),SNAP_UP:Hogan.compile('<p id="SNAP_UP_{{hotelid}}" class="save_money js_active_tag" data-activetype="限时抢购"><a href="{{url}}" target="_blank" title="查看参加限时抢购特价酒店信息!享限时大促!">限时抢购</a></p>'),FREE_JIEJI:Hogan.compile('<li id="jieji_{{hotelid}}" class="js_active_tag" data-activetype="免费接机"><a href="{{url}}" target="_blank"><img src="//simg1.qunarzz.com/hotel/list/activity/{{imgUrl}}.png" width="58px" height="15px"></img></a></li>'),BNBGLODEN:Hogan.compile('<a id="BNBGLODEN_{{hotelid}}" href="{{url}}" target="_blank" class="js_active_tag bestbnb_icon"></a>'),BNBSILVER:Hogan.compile('<a id="BNBSILVER_{{hotelid}}" href="{{url}}" target="_blank" class="js_active_tag bestbnb_icon bestbnb_silver"></a>'),BNBCOPPER:Hogan.compile('<a id="BNBCOPPER_{{hotelid}}" href="{{url}}" target="_blank" class="js_active_tag bestbnb_icon bestbnb_copper"></a>'),CAMEL_CARD:Hogan.compile('<a href="{{url}}" class="act_tag camel_card js-activity" target="_blank">礼品卡</a>'),PAY_IN_ADVANCE_CARD:Hogan.compile('<a href="{{url}}" class="act_tag camel_card js-activity" target="_blank">礼品卡</a>'),GROUPROOM:Hogan.compile('<a href="{{url}}" class="act_tag act_grouproom" target="_blank">团队房</a>')};r=['<div class="m-activity-tips" id="js-activity-layer" style="z-index: 9502;display:none">','<div class="activity-tips-box clrfix">','<div class="activity-content">','<ol class="activity-info js-activity-content"></ol>',"</div>","</div>","</div>"].join("");i={DEFALTACTIVITY:Hogan.compile("<li>{{&listExplanation}}</li>"),camelCoinOfGroupBuy:'选择带有<span class="red">返骆驼币</span>的报价，无线客户端下单，待成功入住并离店后，可获得一定数值的骆驼币，得到的骆驼币可在去哪儿网手机客户端兑换相应价值的商品，商品包括手机充值卡等。',AIR_PICK_UP_TICKET:"赠40元去哪儿专车优选车型接送机券。深圳接送机有机会升级车型为宝马X1豪华车。",STAR_COUPON_PAYBACK:'选择带有<span class="red">可返星券</span>标签的报价，待成功入住并离店后，返还指定金额的星券。星券限在去哪儿旅行客户端带有可用星券标识的酒店报价中使用，使用时每1星券可抵1元钱，立享全网超低价！',YINLIANLIJIAN_MSG:'<li>选择带有<span class="red">用银联满300立减30</span>的报价，并通过指定方式支付，可享受满300元立减30元。每日活动从中午12点开始，每日立减名额有限，每张银联卡每个活动日限享受1单优惠，抢完即止。</li>',VALENTINE:'<li>预订带有“<span class="red">情人节大促再优惠<cite>¥</cite>50</span>”字样的报价，下单时领券、使用可享50元优惠。</li>',BNBCASHBACK:'<li>选择带有<span class="red">订客栈，送30元现金</span>的报价，在登录状态下支付超过100元，我们将在10月8日返还30元到您的余额账户，送完即止。</li>',MOBILE_NEWUSER:Hogan.compile("<li><span>手机新用户可通过去哪儿旅行App预订本酒店的指定房型再省{{diffPrice}}元，你还在等什么！点击进入查看</span></li>"),MOBILE_ORDER:Hogan.compile("<li><span>通过去哪儿旅行客户端预订本酒店的指定房型立省{{diffPrice}}元，你还在等什么！点击进入查看</span></li>"),MOBILE_DISCOUNT:Hogan.compile("<li><span>通过去哪儿旅行App预订本酒店的指定房型下新客专享报价再省{{diffPrice}}元，你还在等什么！</span></li>"),DUANWU_DISCOUNT:Hogan.compile("<li><span>通过去哪儿旅行App预定该酒店指定房型端午期间“端午五折”报价，一单最低享受五折优惠！</span></li>"),LIANZHU:Hogan.compile('{{#title}}<h4 class="lz_title">{{title}}</h4>{{/title}}{{#lianzhu}}<li>{{fromDate}}至{{toDate}}，{{#list}}连住{{duration}}天{{discount}}折&nbsp{{/list}}</li>{{/lianzhu}}'),FREE_JIEJI:'<li>3月15日－3月31日期间预订带有<span class="red">免费接机</span>标识的酒店房型，由去哪儿提供免费接机服务。</li>',BNBGLODEN:'<div class="what_pre_bnb"><i class="preferred_gloden"></i><span class="preferred_text"><h4>金冠优选</h4><p>最畅销客栈，提供最低价格，超赞服务，高品质首选住宿</p></span></div>',BNBSILVER:'<div class="what_pre_bnb"><i class="preferred_silver"></i><span class="preferred_text"><h4>银冠优选</h4><p>最好口碑客栈，提供最优惠的价格，最赞的服务</p></span></div>',BNBCOPPER:'<div class="what_pre_bnb"><i class="preferred_copper"></i><span class="preferred_text"><h4>铜冠优选</h4><p>高性价比客栈，提供优惠价格，贴心服务</p></span></div>'};var u={BNBGLODEN:"bestbnb_tipsgloden bestbnb_tips",BNBSILVER:"bestbnb_tipssilver bestbnb_tips",BNBCOPPER:"bestbnb_tipscopper bestbnb_tips"};a.prototype={renderItem:function(){if(this.option.position==="prepend"){this.container.prepend(this.html)}else{this.container.append(this.html)}typeof this.option.afterRender!=="undefined"&&this.option.afterRender()},renderTip:function(e){var t=$("#js-activity-layer"),n=t.length;this.$activityLayer=t;if(!n){$("body").append(this.tipWrapTemplate)}},showTip:function(e){var t=this.$activityLayer.length;if(!t){this.renderTip(e)}if(this.option.autoWidth){this.$activityLayer.addClass("m-activity-tips-autowidth")}else{this.$activityLayer.removeClass("m-activity-tips-autowidth")}if(u[this.option.type]){this.$activityLayer.addClass(u[this.option.type])}this.tipHtml=this.tipHtmlTpl&&this.tipHtmlTpl.render&&$(this.tipHtmlTpl.render(this.renderData))||this.tipHtmlTpl;if(this.tipHtml){this.$activityLayer.find(".js-activity-content").html(this.tipHtml);this.$activityLayer.show()}},positonActivityTips:function(e){var t=20,n=15,r=e.pageY+t,i=e.pageX+n;if(o){var s=GetZoomFactor()||.1;r=r/s;i=i/s}this.$activityLayer.css({top:r+"px",left:i+"px"})},hideTip:function(){this.$activityLayer.hide();if(u[this.option.type]){this.$activityLayer.removeClass(u[this.option.type])}},_bindEvent:function(){var e=this,t=null;e.html.bind("mouseenter.showpop",function(n){e.positonActivityTips(n);e.showTip();if(typeof t!==null){clearTimeout(t);t=null}if(o){var r=e.$activityLayer.find(".js-activity-content");setTimeout(function(){r.html(r.html())},300)}}).bind("mouseleave",function(){if(typeof t!==null){clearTimeout(t);t=null}e.hideTip()}).bind("mousemove",function(t){if(!o){e.positonActivityTips(t)}})}};e.exports=a},988:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;var i=n(989);var s=n(1e3);var o=n(1001);var u={};u.setMapScale=function(e){var t=e.nowScale,n=e.isMapLoad,r=e.isSelectPoi,i=e.isOpenDragPOI,s=e.isPreOpenDragPOI,o=e.map;var u={},a=10;var f;if(!n||t<14){return}if(r!==true&&!i&&!s){if(o){f=a;o.setZoom(parseInt(f,14))}}};e.exports={MapManager:i,MapPanel:s,mapEnter:o,funcs:u}},989:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;var i=n(990);var s=n(995);var o=n(996);var u=n(997);var a=n(288).affix_hBox;var f=n(7);var l=n(122);var c=n(226);var h=n(998);var p=1;var d=900;var v=800;var m=899;var g=navigator.userAgent;var y=/MSIE 6/.test(g)||/MSIE 7/.test(g);var b=function(e,t){if(!e)return;if(!t)t=document;var n=t.createElement("style");n.setAttribute("type","text/css");var r=t.getElementsByTagName("head")[0];if(!r)return;else r.appendChild(n);if(n.styleSheet)n.styleSheet.cssText=e;else{var i=t.createTextNode(e);n.appendChild(i)}return n};var w=function(e,t,n,r,h,m,g){function z(e,t){var n=new GLatLngBounds;var r=false;for(var i=0;i<e.length;i++){var s=e[i].point||e[i].getProperty("latlng");if(s){r=true;n.extend(s)}}if(t){for(var i=0;i<t.length;i++){var o=t[i].point||t[i];if(o instanceof GLatLng)n.extend(o)}}return r?l.extendBound(n,15):null}function J(){var e=100,t,n;f(S).bind("mapModeChanged",function(){if(n){n.unhighlight();n.hideAllTips();n=null}V()});f(O).bind({tipmouseenter:function(e,n){clearTimeout(t)},tipmouseleave:function(n,r){clearTimeout(t);t=setTimeout(V,e)},markermouseover:function(e,r){if(n&&r===n)return;clearTimeout(t);V();X(r,true)},markermouseout:function(n,r){clearTimeout(t);t=setTimeout(V,e)},markerclick:function(e,t){if(t&&t.hotelInfo&&t.hotelInfo.getProperty("href")){var n=t.pois,r=t.hotelInfo.getProperty("href_param")||t.hotelInfo.getProperty("href");if(n&&n.length>0){r+="&haspoi=1"}window.open((t.hotelInfo.isBNB?"":"//hotel.qunar.com")+r,"_blank")}},hotelMarkersInited:function(e,t){f(S).triggerHandler("hotelMarkersInited",[t])},hotelMarkerUpdate:function(e,t){f(S).triggerHandler("hotelMarkerUpdate",t)}});GEvent.addListener(w,"bounds_changed",function(){var e=w.getBounds();f(S).triggerHandler("mapboundschange",[e.getSouthWest(),e.getNorthEast()])})}function K(){window.Logger&&window.Logger.time("Map Loaded");if(!E){f(S).triggerHandler("mapLoaded");E=true}f(n).empty();D=f('<div class="map_tips"/>').appendTo(n)[0];_=f('<div class="map_panel"/>').appendTo(n)[0];if(C==null&&k.length==0){if(x){if(T.length==0){if(N.length==0){f(n).hide();return}else{f(n).hide()}}else{A=z(T)}}else{setTimeout(arguments.callee,100);return}if(!A){var e=[];N&&f.each(N,function(t,n){e.push({point:new GLatLng(n.lat,n.lng)})});A=z(e)}}else if(C!=null){A=new GLatLngBounds(new GLatLng(C.sw[0],C.sw[1]),new GLatLng(C.ne[0],C.ne[1]))}w=new GMap2(_,{minZoom:8});w.enableContinuousZoom();P=new GSmallMapControl;H=new GLargeMapControl;w.addControl(P,new GControlPosition(G_ANCHOR_TOP_LEFT));f(n).click(function(){if(!j){j=true;w.enableScrollWheelZoom()}}).mouseleave(function(){j=false;w.disableScrollWheelZoom()});S.goToCenter(true);Q();O=new i(w,D);q=new u(w);q.setZIndex(v);J();Z();!F&&S.initDragPOIMarker();F.hide();c(w.getContainer());f(S).triggerHandler("init");window.Logger&&window.Logger.timeEnd("Map Loaded")}if(y){b("*html{background-image:url(about:blank);background-attachment:fixed;}")}if(e){f(n).show()}else{f(n).hide()}var w=null;var E=false;var S=this;var x=false;var T=[];var N=m||[];var C=r&&r.sw&&r.ne?r:null;var k=h||[];var L=[];var A=null;var O=null;var M=null;var _,D;var P,H;var B;var j=false;var F=null;var I;var q;var R=g;var U=function(e){for(var t=0,n=L.length;t<n;t++){if(L[t].name===e)return L[t]}};this.hidePosition=true;this.affix=function(e,t,n){var r=f(e),i=r.parent(),s=f(t);S._affix=a({heightHack:false,floatArea:r,top:0,left:i,rangeTop:s,rangeBottom:s,check:function(){return n.outerHeight()>r.outerHeight()}}).render();f(S).bind("resetMapPosition",function(){S._affix.resetFloatPosition();r.show();S._affix.setPosition()})};this.highlightTradingAreaIns=[];this.highlightTradingAreaByName=function(e){if(M){return}var t=e.split("|");L&&f.each(L,function(e,n){if(f.inArray(n.name,t)>-1){S.highlightTradingAreaIns.push(n);n.highlight("1")}else{n.unhighlight("2")}})};this.unHighlightTradingAreaByName=function(){if(M){return}if(S.highlightTradingAreaIns.length>0){f.each(S.highlightTradingAreaIns,function(e,t){t.unhighlight("2")});S.highlightTradingAreaIns.length=0}};this.updatePrice=function(e){if(!this.isLoaded())return;O.updatePrice(e)};this.goToTradingAreaCenter=function(e){if(!this.isLoaded())return;var t=U(e);if(t){var n=t.polygon.getBounds();w.fitBounds(n)}};this.isLoaded=function(){return w!=null&&O!=null};this.updateMapComment=function(e){e=e||{};var t=e.data||{},r,i=0,s=0;if(!this.isLoaded()||f.isEmptyObject(t)){return}f.each(t,function(e,t){if(t){s=t["brief"]&&t["brief"]["count"]||0;r=f(n).find(".js_map_comments_"+e);i=parseInt(r.attr("data-count"),10);O.updateCommentCount(e,s+i)}})};this.setHotels=function(e){T=e;x=true};var W;var X=function(e,t,n){W=e;W.setZIndex(d);W.hideTip();if(t){W.showTip&&W.showTip()}if(n=="click"){W.highlight("3")}else{W.highlight("1")}};var V=function(){if(W){var e=W.hotelInfo.id;var t=f("#js_listfocus_"+e).hasClass("hotel-focused")||f(".js_hotelfocus").hasClass("active");if(t){W.unhighlight("3")}else{W.unhighlight("2")}W.hideTip();W.setZIndex(p)}W=null};var Q=function(){if(S.hasTradingAreas()){var e=[];var t=function(e){if(e){e.hideTip();if(!M||e.name!==M)e.unhighlight("2")}};var r=function(n){n&&f.each(n,function(e,n){t(n)});var r=f.inArray(n,e);if(r>0)e.splice(r,1)};var i=function(t){if(M)return;t.showTip();t.highlight("1");e.push(t)};L&&f.each(L,function(t,n){w.addOverlay(n);var s=f(n);s.bind({polygonclick:function(e,t){r([t]);f(S).triggerHandler("tradingAreaFiltered",t.name)},polygonmouseover:function(t,n){r(e);i(n)},polygonmouseout:function(e,t){r([t])}})});f(n).mouseleave(function(){r(e.slice(0))});S.hideAllTradingAreas()}};this.loadMap=function(){if(!e||t){l.hahaNoMap(n,window.isMapDown);return}MapFactory.initMap({callback:K,version:{baidu:"2.0"}})};window.getPOIInfos=function(){return I||[]};this.showHotels=function(e,t,n){var r=this;B&&B.updatePOIPoints({hotel:e||[],poi:n||[]});this.setHotels(e);if(!this.isLoaded())return;n=n||[];var i=[];f.each(n,function(e,t){i.push({baidu:t["blatlng"],google:t["latlng"]})});var s=l.toExactPoint({items:i,isGCJ02:typeof isMainland!=="undefined"?isMainland:true,callback:function(e){e&&f.each(e,function(e,t){n[e].point=t});I=n;q.resetMarkers(n)},useGoogle:isMainlandIncludeHM?false:true});O.setPois(n||[]);O.removeMarkers();O.resetMarkers(e);if(t){var o=z(e,s);var u=e.length;if(o){setTimeout(function(){w.fitBounds(o);if(u==1){var e=w.getZoom();f(r).trigger("onSetMapScale",e)}})}}};this.showHotelsAfterDragPOI=function(e){O.removeMarkers();O.resetMarkers(e);var t=[];if(F&&F.getPOIMarker&&F.getPOIMarker()){t=[F.getPOIMarker().latLng]}var n=z(e,t);if(n){w.fitBounds(n)}};this.highlightTradingArea=function(e){var t=this.hidePosition;L&&f.each(L,function(n,r){r.unhighlight("2");r.polygon.hide();if(r.name===e){M=e;B.setTrade(true,t)}})};this.highlightHotel=function(e,t,n){if(!this.isLoaded())return;V();var r=O.getMarker(e);if(r&&w&&w._impl&&w._impl.getBounds&&w._impl.getBounds()){var i=r.hotelInfo.getProperty("point");if(i&&w.getBounds().containsLatLng(i)){X(r,t,n)}}};this.getMarker=function(e){return O.getMarker(e)};this.unhighlightHotel=function(){if(!this.isLoaded())return;V()};this.hidePOIMarker=function(){if(!this.isLoaded())return;q.removeMarkers();B.updatePOIPoints({})};this.showHotspots=function(e){if(!this.isLoaded())return;O.resetHotspots(e)};this.removeHotspots=function(){O.removeHotspots()};this.showAllTradingAreas=function(){if(!this.isLoaded())return;L&&f.each(L,function(e,t){t.show()})};this.unhighlightAllTradingAreas=function(){if(!this.isLoaded())return;L&&f.each(L,function(e,t){t.unhighlight("2")});M=null;B.setTrade(false,this.hidePosition)};this.hideAllHotels=function(){if(!this.isLoaded())return;O.removeMarkers()};this.hideAllTradingAreas=function(){if(!this.isLoaded())return;L&&f.each(L,function(e,t){t.hide()});B.setTrade(false,this.hidePosition)};this.goToCenter=function(e){if(A&&(e||this.isLoaded())){w.fitBounds(A)}};this.hasTradingAreas=function(){return L.length!=0};this.distanceChange=function(e,t){B&&B.setDistanceValue(e,t)};this.getMap=function(){return w};this.dragPOIShow=function(){F&&F.show()};this.dragPOIHide=function(){F&&F.hide()};this.removeDragPOIMarker=function(){F&&F.remove();F=null};this.initDragPOIMarker=function(){if(F){return}F=new o(n.parentNode,w,B);if(R.isMainlandIncludeHM){F.hide()}else{F.show()}f(F).bind("start",function(){if(q&&q.getMarkers()&&q.getMarkers()[0]){var e=q.getMarkers()[0];F.open(e);f(S).trigger("dragPOIMarkerOpen")}});f(F).bind("dragend",function(e,t,n){f(S).trigger("poiDragEnd",[t,n])});f(F).bind("firstDragEnd",function(){f(S).trigger("firstDragPOIEnd")})};var G=function(){this.isBigMap=true;f(this).triggerHandler("mapModeChanged",[true]);f(this).trigger("resetMapPosition");w.removeControl(P);w.addControl(H,new GControlPosition(G_ANCHOR_TOP_LEFT))};var Y=function(){this.isBigMap=false;f(this).triggerHandler("mapModeChanged",[false]);f(this).trigger("resetMapPosition");w.removeControl(H);w.addControl(P,new GControlPosition(G_ANCHOR_TOP_LEFT));O.removeHotspots()};var Z=function(){B=new s(w,S);if(R.isMainlandIncludeHM){B.hide()}else{}f(B).bind("toBigMapMode",f.proxy(G,S));f(B).bind("toSmallMapMode",f.proxy(Y,S));f(B).bind("mapToolRectEnd mapToolMarkerPositon scopeChange openTool closeTool",function(e){f(S).triggerHandler(e.type,Array.prototype.slice.call(arguments,1))});f(B).bind("tradeCancel",function(){f(S).trigger("tradeCancel")});S.switchToBigMap=f.proxy(B.toBigMap,B);S.switchToSmallMap=f.proxy(B.toSmallMap,B);f(S).bind("filterFormChange",function(e,t){if(!B){return}if(t==="clearAll"){B.setHasPositionFilter(false)}else if(t==="isQ"){B.setHasPositionFilter(true)}else if(t&&t.key==="position"){if(t.value&&t.value.length>0){B.setHasPositionFilter(true)}else{B.setHasPositionFilter(false)}}});f(O).bind("markermouseover markermouseout",function(e,t){if(!S.isBigMap){return}if(e.type==="markermouseover"){try{if(F.getIsOpen()){B.poiDistance("show",[t.getDistanceToDragPOI()])}else{B.poiDistance("show",t.getDistanceToPOI())}}catch(n){}}else if(e.type==="markermouseout"){B.poiDistance("hide")}})}};e.exports=w},990:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;var i=n(991);var s=n(7);e.exports=new QClass({initialize:function(e,t){this.map=e;this.tipContainer=t;this.markers={};this.spots={}},updatePrice:function(e){var t=this;s.each(e,function(e,n){if(t.markers[n.id])var r=t.markers[n.id].update(n);if(r){s(t).trigger("hotelMarkerUpdate",t.markers[n.id])}})},updateCommentCount:function(e,t){var n=this["markers"][e];if(n){n.updateCommentCount(t)}},getMarker:function(e){return this.markers[e]},resetMarkers:function(e,t,n){var r=this,t=t||"markers",o=r.pois;for(var u=0,a=e.length;u<a;u++){var f=e[u];var l=f.getProperty("point");if(l){var c;if(!(c=this[t][e[u].id])){c=this[t][e[u].id]=new i({index:f.index||u,tipContainer:this.tipContainer,hotelInfo:f,type:n,pois:o});this.map.addOverlay(c);s(c).bind("markermouseover markermouseout markerclick tipmouseenter tipmouseleave",function(e){s(r).trigger(e,Array.prototype.slice.call(arguments,1))})}}}s(this).trigger("hotelMarkersInited",[this[t]])},resetHotspots:function(e){var t=[],n=[],r=this.markers,i=this.spots,o={};s(e).each(function(e,n){if(!i[n.id]&&!r[n.id]){t.push(n)}o[n.id]=1});s.each(this.spots,function(e,t){if(!o[e]||r[e])n.push(e)});this.removeMarkers(n,"spots");this.resetMarkers(t,"spots","dot")},removeHotspots:function(){this.removeMarkers(null,"spots")},removeMarkers:function(e,t){var n=this,t=t||"markers";if(!e){var r=[];s.each(this[t],function(e,t){r.push(e)});this.removeMarkers(r,t)}else{s.each(e,function(e,r){if(n[t][r]){n.getMap().removeOverlay(n[t][r]);delete n[t][r]}})}},setPois:function(e){this.pois=e},getMap:function(){return this.map}})},991:function(e,t,n){function h(e){CustomMarker.apply(this,arguments);var t,n=this.pois;if(!e.type||!(t=a[e.type+"Marker"])){t=a["marker"]}o.extend(this,t);this.hotelInfo=o.extend({},this.hotelInfo);if(o.browser.msie&&o.browser.version<7){this.url1=this.url1.replace("sicon","licon");this.url2=this.url2.replace("sicon","licon");this.url3=this.url3.replace("sicon","licon")}this.haspoi=n&&n.length>0;this.latLng=this.hotelInfo.getProperty("point");this.template=f;if(o("js_listfocus_"+this.hotelInfo.id).hasClass("hotel-focused")||o(".js_hotelfocus").hasClass("active")){this.unhighlight("3")}else{this.unhighlight("2")}}function p(e){var t=[];for(var n in e){t.push(n)}return t}function d(e){return Math.round(e*1e3/100)/10||.1}var r=typeof r==="function"&&!r.amd?r:false;var i=n(992);var s=n(993);var o=n(7);var u=n(994);if(window.MapType=="amap"){window.CustomMarker=u}var a={tip:{x:-28,y:-80},bigTip:{x:-39,y:-10},marker:{url2:"//source.qunarzz.com/hotel/map/sicon/blue_{{index}}.png",url1:"//source.qunarzz.com/hotel/map/sicon/orange_{{index}}.png",url3:"//source.qunarzz.com/hotel/map/sicon/red_v2_{{index}}.png",sizeW:18,sizeH:25,anchorX:9,anchorY:25},dotMarker:{url:"//source.qunarzz.com/hotel/map/traffic/com_dot2.png",url2:"//source.qunarzz.com/hotel/map/traffic/cur_dot2.png",sizeW:10,sizeH:10,anchorX:5,anchorY:5}};var f='<img style="cursor:pointer" src="//source.qunarzz.com/hotel/map/sicon/blue_1.png" style="width:{{sizeW}}px,height:{{sizeH}}px">';var l={top:30,left:50,bottom:0,right:10};var c=isYizhanshi?"//hotel.qunar.com":"";o.extend(h.prototype,CustomMarker.prototype);h.prototype.initialize=function(e){CustomMarker.prototype.initialize.call(this,e);this.refresh();this.hotelTipVisible=false;if(o("#js_listfocus_"+this.hotelInfo.id).hasClass("hotel-focused")||o(".js_hotelfocus").hasClass("active")){this.unhighlight("3")}else{this.unhighlight("2")}this._initEvent()};h.prototype.refresh=function(){this._initRenderInfo();this._initHotelTip()};h.prototype._initEvent=function(){var e=this,t=this.getDiv(),n={mouseenter:"markermouseover",mouseleave:"markermouseout"};o(t).bind("mouseenter mouseleave click",function(t){o(e).triggerHandler(n[t.type]||"marker"+t.type,[e])})};h.prototype._initRenderInfo=function(){var e=160;var t=this.hotelInfo;var n=getEquipInfos({isWebFree:t.isWebFree,HasIndoorPool:t.HasIndoorPool,isNewHotel:t.isNewHotel,HasRestaurant:t.HasRestaurant,HasBusinessCenter:t.HasBusinessCenter,HasFitnessRoom:t.HasFitnessRoom,HasMeetingORBanquetSpace:t.HasMeetingORBanquetSpace,hasReceiveVisitor:t.hasReceiveVisitor});var r=t.isBNB?"":c;var i=r+t.getProperty("href"),u=r+t.getProperty("comment_href");if(this.haspoi){i+="&haspoi=1";u+="&haspoi=1"}var a=o.extend({hotelID:t.id,name:t.hotelName,href:i,photo_href:t.getProperty("photo_href"),comment_href:u,images_href:t.getProperty("images_href"),dangci:t.dangci,hotelStars:t.hotelStars,stars:t.stars,imageID:t.imageID,price:t.price,os:t.os,isStatic:t.isStatic,miniRetailPrice:t.MiniRetailPrice,commentCount:t.CommentCount||0,commentScore:t.CommentScore&&t.CommentScore.toFixed&&t.CommentScore.toFixed(1),commentRank:t.CommentIndex,commentSameDangciRank:!t.dangciIndex||t.dangciIndex==="0"?0:t.dangciIndex,dangciHotelCount:t.dangciHotelCount||0,cityName:t.cityName||"",equip:n,selected:t.selected,pois:this.pois,walk:t.walk,drive:t.drive,corrDist:t.corrDist,simple:this.type==="dot",desc:getStringLengthLessThan([t.oneSentence,t.hotelAddress],e,"")},s.fomatter,s.mapFomatter);this.hotelRenderInfo=a};h.prototype._initHotelTip=function(){var e=o('<div class="map_tip"/>').html(i.renderTip(this.hotelRenderInfo)),t=e[0],n=this;if(this.hotelTip){o(this.hotelTip).replaceWith(t)}else{o(this.tipContainer).append(t)}this.hotelTip=t;e.bind("mouseenter mouseleave",function(e){e.type="tip"+e.type;o(n).trigger(e,[n])})};h.prototype.hideAllTips=function(){this.hideTip()};h.prototype.showTip=function(){this.hotelTipVisible=true;o(this.hotelTip).show();this.onViewportChange()};h.prototype.hideTip=function(){this.hotelTipVisible=false;o(this.hotelTip).hide()};h.prototype.update=function(e){if(typeof e.price!=="undefined"&&e.price!==this.hotelInfo.price){Logger.info("refresh marker : "+e.id);this.hotelInfo.price=e.price;this.refresh();return true}return false};h.prototype.updateCommentCount=function(e){Logger.info("refresh marker comment : "+this.hotelInfo.id);this.hotelInfo.CommentCount=e;this.refresh()};h.prototype.getDistanceToPOI=function(){var e=this.hotelInfo.selected;var t=p(e.poi);var n=this.pois;var r=[];var i=this.hotelInfo.walk;var s=this.hotelInfo.drive;if(e.poi&&t.length>0){var o=t.length>1;for(var u=0,a=n.length;u<a;u++){if(typeof e.poi[n[u].name]!="undefined"){var f=n[u];var l;var c="直线距离";if(a===1&&(i||s)){if(i&&i[0]){c="步行距离";l=i[0]}else if(s&&s[0]){c="驾车距离";l=s[0]}}var h=l?c+"约"+d(l/1e3):c+"约"+d(e.poi[f.name]);r.push(h+"公里")}}}return r};h.prototype.getDistanceToDragPOI=function(){return"直线距离约"+d(this.hotelInfo.corrDist/1e3)+"公里"};h.prototype.highlight=function(e){o(this.getDiv()).find("img").attr("src",Hogan.compile(this["url"+e]).render({index:this.index+1}))};h.prototype.unhighlight=function(e){o(this.getDiv()).find("img").attr("src",Hogan.compile(this["url"+e]).render({index:this.index+1}))};h.prototype.onRemove=function(){CustomMarker.prototype.onRemove.call(this);o(this.hotelTip).remove()};h.prototype.onViewportChange=function(){var e=this._map.fromLatLngToContainerPixel(this.latLng);if(this.hotelTip&&this.hotelTipVisible){var t=o(this.hotelTip);var n=t.width();t.css({left:e.x-n,top:e.y})}};e.exports=h},992:function(e,t){var n,r;n='<div class="filter_layer_bg">\n <div class="filter_layer clr_after">\n   <div class="map_info">\n     <h3><a href="{{href}}" target="_blank" class="nameHt">{{name}}</a> {{{getStarInfo}}}</h3>\n     {{$info}}\n     <div class="map_info_c {{^imageID}}map_nopic{{/imageID}} clr_after">\n         <dl>\n           {{#imageID}}<dt><a href="{{href}}" target="_blank"><img width="62" height="62" alt="{{name}}" src="{{imageID}}"></a></dt>{{/imageID}}\n           {{#isShowCommentNum}}\n              {{#isShowCommentScrore}}\n               <dd class="comment-wrap">\n                  <a class="sort" href="{{comment_href}}" target="_blank"><strong>{{commentScore}}</strong>/<em>5</em>分</a>\n                  <a target="_blank" href="{{comment_href}}" class="js_map_comments_{{hotelID}} comment" data-count="{{commentCount}}">{{commentCount}}条点评</a>\n               </dd>\n              {{/isShowCommentScrore}}\n              {{^isShowCommentScrore}}\n              <dd class="comment-wrap">\n                  <span class="no_comment">暂无评分</span>\n                  <a target="_blank"  href="{{comment_href}}" class="js_map_comments_{{hotelID}} comment" data-count="{{commentCount}}">{{commentCount}}条点评</a>\n              </dd>\n              <dd class="no-rank">\n              </dd>\n              {{/isShowCommentScrore}}\n          {{/isShowCommentNum}}\n          {{^isShowCommentNum}}\n              <dd class="comment-wrap">\n                  <span class="no_comment">暂无评分</span>\n                  <span class="first_com"><a target="_blank" href="{{getFirstCommentHref}}" class="js_map_comments_{{hotelID}}" title="成为首位点评者" data-count="0">成为首位点评者</a></span>\n              </dd>\n          {{/isShowCommentNum}}\n           <dd><a href="{{href}}" target="_blank">{{{getPriceTip}}}</a></dd>\n         </dl>\n        <a class="more_btn" target="_blank" title="查看详情" href="{{href}}">查看详情</a>\n     </div>\n     {{/info}}\n   </div>\n </div>\n</div>';r=null;t.renderTip=function(e){if(r==null){r=Hogan.compile(n)}return r.render(e)}},993:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;var r=["",'<em title="国家旅游局评定为一星级" class="star star10"></em>','<em title="国家旅游局评定为二星级" class="star star20"></em>','<em title="国家旅游局评定为三星级" class="star star30"></em>','<em title="国家旅游局评定为四星级" class="star star40"></em>','<em title="国家旅游局评定为五星级" class="star star50"></em>'];var i=["",'<em class="sort dangci" title="去哪儿网用户评定为经济型酒店">经济型</em>','<em class="sort dangci" title="去哪儿网用户评定为舒适型酒店">舒适型</em>','<em class="sort dangci" title="去哪儿网用户评定为高档型酒店">高档型</em>','<em class="sort dangci" title="去哪儿网用户评定为豪华型酒店">豪华型</em>',""];var s={1:"经济型",2:"舒适型",3:"高档型",4:"豪华型",5:"同档次"};e.exports={mapFomatter:{getSmallPriceTip:function(){var e="需电话咨询";var t="需电话咨询";var n="已经订完";var r=this.os,i=this.isStatic,s=this.price,o=this.miniRetailPrice;if(r&&r!=="营业中")return r;var u="";if(i){if(o!=-1){u="参考价:"+o+"元"}else{u=e}}else{if(s>0){u="&yen;"+s}else if(s==-1){u=n}else if(s==0){if(o!=-1){u="参考价:"+o+"元"}else{u=t}}}return u},getPriceTip:function(){var e="需电话咨询";var t="需电话咨询";var n="已经订完";var r=this.os,i=this.isStatic,s=this.price,o=this.miniRetailPrice;if(r&&r!=="营业中")return'<p class="tel_info">'+r+"</p>";var u="";if(i){if(o!=-1){u='<p class="tel_info">参考价:'+o+"元</p>"}else{u='<p class="tel_info">'+e+"</p>"}}else{if(s>0){u='<span class="price">&yen;<strong>'+s+"</strong><em>起</em></span>"}else if(s==-1){u='<p class="tel_info">'+n+"</p>"}else if(s==0){if(o!=-1){u='<p class="tel_info">参考价:'+o+"元</p>"}else{u='<p class="tel_info">'+t+"</p>"}}}return u},isShowCommentNum:function(){return this.commentCount-0>0?true:false},isShowCommentScrore:function(){return this.commentScore-0>0?true:false},getFirstCommentHref:function(){var e="";if(this.comment_href&&this.comment_href.indexOf("#")!=-1){e=this.comment_href.slice(this.comment_href.indexOf("#"))}return"//review.qunar.com/h/"+this.hotelID+"/step1"+e}},fomatter:{getStarInfo:function(){var e="";if(this.hotelStars){e=r[this.hotelStars]}else if(this.stars){e=r[this.stars]}if(e==""){if(this.dangci){e=i[this.dangci]}}return e||'<em class="sort dangci_no"></em>'},getLevelName:function(){if(this.dangci)return s[this.dangci];else return"同档次"}}}},994:function(e,t,n){function o(e){i.extend(this,s);i.extend(this,e||{})}var r=typeof r==="function"&&!r.amd?r:false;var i=n(7);var s={sizeW:10,sizeH:10,anchorX:5,anchorY:5,draggable:false,template:'<img src="//source.qunarzz.com/hotel/map/traffic/cur_dot2.png" style="width:{{sizeW}}px,height:{{sizeH}}px">'};o.prototype.initialize=function(e){var t=this.zIndex;var n=document.createElement("div");this.div=i(n);this.div.addClass("js-cm").css("position","absolute").append(Hogan.compile(this.template).render(this))[0];this.marker=new GMarker(this.latLng,{zIndex:t,clickable:false,content:n});this._map=e;e.addOverlay(this.marker)};o.prototype.setZIndex=function(e){this.marker.setZIndex(e)};o.prototype.getDiv=function(){return this.div};o.prototype.onRemove=function(){this.marker.remove()};o.prototype.draw=function(){};o.prototype.enableDrag=function(){var e=this,t=i(this.div);if(!this.dragMarker){this._buildFakeMarker()}t.bind("mouseover",function(){i(e).trigger("mouseover");t.hide();e.dragMarker.show()})};o.prototype.disableDrag=function(){i(this.div).unbind("mouseover").show();this.dragMarker.hide()};o.prototype._buildFakeMarker=function(){var e=this,t=i(this.div),n=this.imageUrl||t.find("img")[0]&&t.find("img")[0].src,r,s;r=new GIcon;r.setImageUrl(n);r.setSize(new GSize(this.sizeW,this.sizeH));r.setAnchor(new GPoint(this.anchorX,this.anchorY));s=new GMarker(this.latLng,{icon:r});s.setDragEnable(true);this.zIndex&&s.setZIndex(this.zIndex+1);s.hide();this._map.addOverlay(s);this.dragMarker=s;GEvent.addListener(s,"dragstart",function(n){e.isDragging=true;t.hide();i(e).trigger("dragstart",[n])});GEvent.addListener(s,"dragend",function(t){e.isDragging=false;e.latLng=t;e.draw();i(e).trigger("dragend",[t])});GEvent.addListener(s,"drag",function(t){i(e).trigger("drag",[t])});GEvent.addListener(s,"mouseout",function(){if(!e.isDragging){e.draw();t.show()}})};e.exports=o},995:function(e,t,n){function q(e,t){for(var n in t){var r=new RegExp("{{"+n+"}}","g");e=e.replace(r,t[n])}return e}var r=typeof r==="function"&&!r.amd?r:false;n(52);n(57);var i=n(7);var s=n(818);var o=n(820);var u=n(824);var a="0",f="1";var l,c,h,p,d,v,m,g={},y,b,w,E,S,x,T,N,C,k,L,A,O,M;var _=new Date((new Date).getTime()+30*24*60*60*1e3);var D=[{title:"1公里",value:1},{title:"3公里",value:3},{title:"5公里",value:5}];var P={rect:{start:"退出选择区域",end:"清除选区"},marker:{start:"退出选择地标",end:"清除地标"}};var H=function(e,t){var n=this;c=e;h=t;l=c.getContainer();this.points={};mapToolMask=i('<div class="map_tool_mask" onselectstart="return false;"/>').appendTo(l);B(n);p=i("<div/>").appendTo(l).html('<ul node-type="smallContainer" class="map_tool">'+'<li><a href="javascript:;" title="地图找酒店" class="map_btn" mapMode="big">地图找酒店</a></li>'+"</ul>"+'<ul node-type="bigContainer" class="map_tool" style="display:none;">'+'<li><a href="javascript:;" title="拖动定位" class="map_correction" data-tool="marker"><span class="hide">拖动定位</span></a></li>'+'<li><a href="javascript:;" title="框选搜索" class="map_printscreen" data-tool="rect"><span class="hide">框选搜索</span></a></li>'+'<li><a href="javascript:;" title="测距" class="map_measure" data-tool="ruler"><span class="hide">测距</span></a></li>'+'<li><a href="javascript:;" title="打印" class="map_print" data-tool="print"><span class="hide">打印</span></a></li>'+'<li><a href="javascript:;" title="收起地图" class="zomm_map" mapMode="small"><span class="zommmap_icon"></span>收起地图</a></li>'+"</ul>"+'<ul class="map_tool_close">'+'<li><a href="javascript:;" title="清除商圈" class="js_tradeCancel">清除商圈</a></li>'+'<li><a href="javascript:;" title="清除地标点" class="close_marker" node-type="close" close-type="marker"></a></li>'+'<li><a href="javascript:;" title="清除选区" class="close_rect" node-type="close" close-type="rect"></a></li>'+"</ul>");p.hide();g.marker=new s(c,{radius:A});g.ruler=new u(c);g.rect=new o(c,mapToolMask);I(n);x=p.find('[data-tool="ruler"]');C=p.find('[data-tool="marker"]');k=p.find('[data-tool="rect"]');S=p.find('[node-type="close"]').click(F);T=S.eq(0);N=S.eq(1);b=p.find('[node-type="smallContainer"]').click(i.proxy(n.toBigMap,n));w=p.find('[node-type="bigContainer"]');w.find('[mapMode="small"]').click(i.proxy(n.toSmallMap,n));p.find("a[data-tool]").click(function(e){var t=i(e.target).data("tool");if(t==="print"){var r=[],s=c.getCenter();n.points&&n.points.hotel&&i(n.points.hotel).each(function(){r.push(i(this)[0].id)});window.open("/render/print.jsp?lat="+s.lat()+"&lng="+s.lng()+"&zoom="+c.getZoom()+"&cityurl="+cityurl+"&ids="+r.join(","),"_blank");return}F();y=g[t];y.open();if(t==="marker"){if(m.find(".js_clearEl").hasClass("selected")){g.marker.radiusChange(5)}n.hideNoLimitRadio();O.show()}return false});this.initCancelTrade()};H.prototype.initCancelTrade=function(){var e=this;L=p.find(".js_tradeCancel").hide().click(function(t){t.preventDefault();i(this).hide();e.onTrade=false;i(e).trigger("tradeCancel")})};H.prototype.showCancelTrade=function(){if(this.onTrade&&!this.hidePosition&&this.mode===f){L.show()}else{L.hide()}};H.prototype.setTrade=function(e,t){this.onTrade=!!e;this.hidePosition=!!t;this.showCancelTrade()};H.prototype.toBigMap=function(){if(this.mode===f){return}i(this).triggerHandler("toBigMapMode");this.mode=f;this.showCancelTrade();w.show();b.hide();d.show();j();Cookie.setCookie("bm",1,_,null,"/");return false};H.prototype.toSmallMap=function(){if(this.mode===a){return}i(this).triggerHandler("toSmallMapMode");this.mode=a;this.showCancelTrade();F();w.hide();b.show();d.hide();j();Cookie.setCookie("bm",0,_,null,"/");return false};H.prototype.hide=function(){p.hide()};H.prototype.show=function(){p.show()};H.prototype.updatePOIPoints=function(e){var t=""+'<dl poiname="{{name}}" latlng="{{latlng}}" class="clr_after" style="cursor: pointer;">'+"<dt>{{index}} {{name}}</dt>"+'<dd node-type="poiDistace" style="display:none;"><span class="jt"></span><span node-type="distaceTxt" class="text"></span></dd>'+"</dl>";this.points=e||{};var n=e.poi||[];if(n.length>0||this.hasPositionFilter){C.hide();k.hide();this.resetNoLimitRadio()}else{C.show();k.show()}if(n.length==1||y===g.marker){O.show()}else{O.hide()}var r="";i(n).each(function(e){if(e>4){return false}r+=q(t,{index:String.fromCharCode(e+65),name:n[e].name,latlng:n[e].latlng})});v.html(r);v.undelegate("click");v.delegate("dl[latlng]","click",function(){var e=i(this).attr("latlng")&&i(this).attr("latlng").split(",");c.panTo(new GLatLng(e[0],e[1]))})};H.prototype.poiDistance=function(e,t){if(e==="show"&&t){v.find("dl[poiname]").each(function(e){if(t[e]){i(this).find('[node-type="poiDistace"]').show();i(this).find('[node-type="distaceTxt"]').html(t[e])}})}else if(e==="hide"){v.find('dd[node-type="poiDistace"]').hide()}};var B=function(e){d=i('<div class="map_range"><div node-type="rangeSelection" class="range_selection"></div></div>').appendTo(l);m=d.find('[node-type="rangeSelection"]');var t={container:m,type:"radio",title:"距离",name:"distance",visible:false,constructor:common.filter.UniqueFilter,itemTpl:['<input id="{{id}}" {{&fieldsHTML}} data-key="{{key}}" title="{{title}}" {{#disabled}}disabled="disabled"{{/disabled}} {{#checked}}checked = "checked"{{/checked}}',' class="js_item" type="{{type}}" name="{{name}}" value="{{value}}" />','<label class="js_item" for="{{id}}">{{label}}</label>'].join(""),containerTpl:["<div><h3>范围选择</h3><ul>{{&clearHTML}}</ul>{{&contentHTML}}</div>"].join(""),clearTpl:['<li class="js_clearEl distance_clear selected"><span title="不限">不限</span></li>'],contentTpl:['<ul class="js_contentEl"></ul>']};O=new common.filter.UniqueFilter(t);var n=[];i.extend(true,n,D);O.render(n);i(O).bind("change",function(){var t=O.getValue().value.length>0?O.getValue().value[0].value:0;if(O.getValue().value.length>0){g.marker.radiusChange(t)}i(e).triggerHandler("scopeChange",t);return false}).bind("render",function(){O._refresh()});O._refresh=function(){i.CustomFilterBox.refresh({container:m,radioTemplate:'<li class="{{#checked}}selected{{/checked}}"><span title="{{title}}">{{&labelHTML}}</span>{{&inputHTML}}</li>'})};O._refresh();v=i('<div node-type="poiContainer" class="land_marks"></div>');v.appendTo(d);M=m.find("li.js_clearEl");A=O.getValue().value.length>0?O.getValue().value[0].value:0};H.prototype.setDistanceValue=function(e,t){if(!t){O.hide();return}if(e===0){O.clearStatus();O.render(O.data,true)}else{O.setSelected(e);O._refresh()}O.updateNoLimitState()};H.prototype.setHasPositionFilter=function(e){this.hasPositionFilter=e;if(e||this.points&&this.points.poi&&this.points.poi.length>0){C.hide();k.hide();if(y===g.marker||y===g.rect){F()}}else{C.show();k.show()}};H.prototype.hideNoLimitRadio=function(){if(m.find(".js_clearEl").hasClass("selected")){O.setSelected(5);O._refresh()}M.hide()};H.prototype.resetNoLimitRadio=function(){M.show();if(O.getValue().value.length===0){M.addClass("selected")}};H.prototype.getDistance=function(){var e=0;if(O.getValue().value.length>0){e=O.getValue().value[0].value}return e*1e3};var j=function(){var e=c.getCenter();c.checkResize();c.setCenter(e)};var F=function(){y&&y.close();y=null;S.hide();return false};var I=function(e){i(g.rect).bind("end",function(t,n,r){var s=P["rect"]["end"];N.html(s).attr("title",s);i(e).trigger("mapToolRectEnd",[n,r])});i(g.marker).bind("marker",function(t,n,r){var s=P["marker"]["end"];T.html(s).attr("title",s);i(e).trigger("mapToolMarkerPositon",[n,r])});i(g.marker).bind("closeTool",function(){if(e.points&&e.points.poi&&e.points.poi.length===1){O.show()}else{O.hide()}M.removeClass("selected").show()});i([g.marker,g.rect]).bind("openTool closeTool",function(t){t.preventDefault();var n=t.target===g.marker?"marker":"rect";if(t.type==="closeTool"){F()}else if(t.type==="openTool"){S.hide();if(n==="marker"){var r=P["marker"]["start"];T.html(r).attr("title",r);T.show()}else if(n==="rect"){var r=P["rect"]["start"];N.html(r).attr("title",r);N.show()}}i(e).trigger(t.type,[n])});i(g.ruler).bind("openTool closeTool",function(t){i(e).trigger(t.type,["ruler"])})};e.exports=H},996:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;var r='<span class="txt">不是您要找的地方？点击<a class="dragpoi-open" href="javascript:void(0);">这里</a>进行修改。'+'<a class="dragpoi-close" href="javascript:void(0);" title="关闭"><b>关闭</b></a>'+"</span>";var i={name:"您选择的位置",tipBeforeDrag:"拖动A点到您满意的位置",tipDragging:"在您满意的位置放开鼠标查找酒店"};var s=function(e,t,n){var i=this;this.map=t;this.bigMap=n;this.poiMarker=null;this.container=$('<div class="dragpoi" style="display:none;"/>').prependTo(e).html(r);this.isOpen=false;this.tip=null;this.isFirstDragEnd=false;this.openBtn=this.container.find(".dragpoi-open").click(function(){$(i).trigger("start");GARuner("dragpoi","start")});this.closeBtn=this.container.find(".dragpoi-close").click(function(){i.container.hide();GARuner("dragpoi","close")})};s.prototype.open=function(e){var t=this;if(!e||this.isOpen){return}this.poiMarker=e;e.enableDrag();this.bigMap.toBigMap();t.container.hide();if(!this.tip){this.tip=new o(e.latLng,i["tipBeforeDrag"]);this.map.addOverlay(this.tip)}else{this.tip._center=e.latLng;this.tip.draw()}$(this.tip._div).show();$(e).bind("dragstart",function(e,n){var r=t.tip,s=$(r._div);r.textCt.html(i["tipDragging"]);s.css("width",$("<span/>").html(i["tipDragging"]).hide().appendTo(document.body).width()+20)});$(e).bind("dragend",function(n,r){if(!t.isFirstDragEnd){t.bigMap.updatePOIPoints({poi:[{name:i["name"],latlng:e.latLng.lat()+","+e.latLng.lng()}]});t.bigMap.hideNoLimitRadio();t.isFirstDragEnd=true;t.isOpen=true;$(t).trigger("firstDragEnd")}$(t.tip._div).hide();$(t).trigger("dragend",[r,t.bigMap.getDistance()])});$(e).bind("drag",function(e,n){t.tip._center=n;t.tip.draw()})};s.prototype.show=function(){if(window.GBrowserIsCompatible&&window.GBrowserIsCompatible.isMapSupport){this.container.show()}};s.prototype.hide=function(){this.container.hide();if(this.tip){this.tip._div&&$(this.tip._div).hide();this.tip.updateText(i["tipBeforeDrag"])}};s.prototype.remove=function(){this.container.remove();this.tip&&this.tip.remove();this.poiMarker.disableDrag();this.isOpen=false};s.prototype.getIsOpen=function(){return this.isOpen};s.prototype.getDragPOIText=function(){return i["name"]};s.prototype.getPOIMarker=function(){return this.poiMarker};var o=function(e,t){this._center=e;this._text=t};o.prototype.TIP_HTML=""+'<div class="dragpoi-tip">'+'<span class="text-ct"></span>'+'<span class="arrow"></span>'+"</div>";o.prototype.initialize=function(e){this._map=e;var t=$(this.TIP_HTML),n=t.get(0);this.textCt=t.find(".text-ct").html(this._text);t.css("width",$("<span/>").html(i["tipBeforeDrag"]).hide().appendTo(document.body).width()+30);this._div=n;e.getPane(G_MAP_MARKER_PANE).appendChild(n);return n};o.prototype.draw=function(){var e=40,t=35,n=35,r=$(this._div);var i=this._map.fromLatLngToContainerPixel(this._center),s=this._map.fromLatLngToDivPixel(this._center),o=this._map.getSize(),u=i.x+$(this._div).outerWidth()-e-o.width+20,a=$(this._div).find(".arrow");this._div.style.left=s.x-e+"px";a.css("margin-left",t);this._div.style.top=s.y-63+"px"};o.prototype.updateText=function(e){if(this.textCt&&e){this.textCt.html(e);$(this._div).css("width",$("<span/>").html(e).hide().appendTo(document.body).width()+30)}};o.prototype.remove=function(){$(this._div).remove()};e.exports=s},997:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;var r='<img src="//source.qunarzz.com/hotel/map/{{folder}}/black_{{letter}}.png" title="{{title}}" style="width:{{sizeW}}px,height:{{sizeH}}px">';window.POIMarker=function(e){var t=[],n=1;this.setZIndex=function(e){n=e};this.resetMarkers=function(i){this.removeMarkers();for(var s=0,o=i.length;s<o;s++){var u=i[s]["name"];var a=new CustomMarker({folder:$.browser.msie&&$.browser.version<7?"licon":"sicon",letter:String.fromCharCode(97+s),sizeW:25,sizeH:35,anchorX:13,anchorY:35,title:u,template:r,latLng:i[s].point,zIndex:n});t.push(a);e.addOverlay(a)}};this.removeMarkers=function(){for(var n=0,r;r=t[n];n++)e.removeOverlay(r);t.length=0};this.getMarkers=function(){return t}};e.exports=POIMarker},998:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;var i=n(999);var s="#8fc31f";var o=.4;var u="#5d8900";var a=1;var f=1;var l="#13b5b1";var c=.4;var h=1;var p=1;var d="#00787f";var v=function(e,t){this.tipContainer=t;this.info=e;var n=$.extend({},e.gpoly);n["points"]=n["bpoints"];var r={baidu:{fill:true,color:s,opacity:o,outline:true,polylines:[n]},google:{fill:true,color:s,opacity:o,outline:true,polylines:[e.gpoly]},amap:{fill:true,color:s,opacity:o,outline:true,polylines:[e.gpoly]}};var i=this.polygon=GPolygon.fromEncodedMap(r);this.name=e.name||"";this.formatted_name=this.name.indexOf("商圈")===-1?this.name+"商圈":this.name;this.latlng=i.getBounds().getCenter();this.isHilight=false;this.tipVisible=false;i.setFillStyle({color:s,opacity:o});i.setStrokeStyle({color:u,opacity:a,weight:f})};v.prototype.initialize=function(e){var t=this;var n=this.polygon;this._map=e;e.addOverlay(n);var r=this.tipPanel=document.createElement("div");r.className="cbd_tip map_tip";$(this.tipContainer).append($(r).html(i.render(this)));jQuery.each(["click","mouseover","mouseout"],function(e,r){GEvent.addListener(n,r,function(){jQuery(t).triggerHandler("polygon"+r,[t])})});jQuery(e.getDiv()).bind({mousemove:function(e){t.onMouseMove(e.pageX,e.pageY)}});return null};v.prototype.onMouseMove=function(e,t){if(!this.tipVisible)return;var n=jQuery(this._map.getDiv()).offset();this.tipPanel.style.left=e-n.left-$(this.tipPanel).width()-10+"px";this.tipPanel.style.top=t-n.top+10+"px"};v.prototype.draw=function(e){};v.prototype.hidePolygon=function(){this.polygon.hide()};v.prototype.showPolygon=function(){this.polygon.show()};v.prototype.hide=function(){this.polygon.hide();this.hideTip()};v.prototype.show=function(){this.polygon.show()};v.prototype.highlight=function(){this.isHilight=true;this.polygon.setFillStyle({color:l,opacity:c});this.polygon.setStrokeStyle({color:d,opacity:h,weight:p})};v.prototype.unhighlight=function(){this.isHilight=false;this.polygon.setFillStyle({color:s,opacity:o});this.polygon.setStrokeStyle({color:u,opacity:a,weight:f})};v.prototype.showTip=function(){this.tipVisible=true;this.tipPanel.style.display="block"};v.prototype.hideTip=function(){this.tipVisible=false;this.tipPanel.style.display="none"};e.exports=v},999:function(e,t){var n,r;n='{{#info}}<div class="filter_layer_bg">\n  <div class="filter_layer clr_after">\n    <div class="map_x_info">\n      <h4>{{formatted_name}}共{{number}}家酒店</h4>\n      <p>{{desc}}</p>\n    </div>\n  </div>\n</div>{{/info}}';r=null;t.render=function(e){if(r==null){r=Hogan.compile(n)}return r.render(e)}},1e3:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;n(713);n(200);var i=n(122);(function(t,n,r){function s(e,n,r,i,s){var o=new GIcon;o.setSize(new GSize(n[0],n[1]));o.setAnchor(new GPoint(r[0],r[1]));o.setImageUrl(i);var u=new GMarker(s[0],t.extend({icon:o},s[1]));e.addOverlay(u)}function a(e,n){var r=this,i="rbox";n=n||{};e=typeof e==="undefined"?1:e;t.each(n,function(e,t){if(e in r){r[e]=t}});var s=["qbox","rbox"][e]||i;this.boxTool=t[s];this.contextSeq=null}var o;var u={MAX_DISTANSE:3e3,point:function(e){if(t.type(e)==="string"){e=e.split(",")}if(e&&e.length===2){return e}else{return null}},hotel:function(e){var t=this;return{name:e.hotelName,scale:parseInt(e.scale||"17",10)||17,title:e.hotelName.length>15?e.hotelName.substring(0,15)+"...":e.hotelName,bpoint:t.point(e.bpoint),gpoint:t.point(e.gpoint),unique:e.hotelName}},poi:function(e,n){var r=this,i=[];t.each(e,function(e,s){var o=s.latlng,u=s.blatlng;if(o&&t.inArray(s.name,n)===-1){i.push({name:s.name,title:s.name,bpoint:r.point(u),gpoint:r.point(o),unique:s.name})}});return i},landmark:function(e,n){var r=[],i=this;t.each(e,function(e,s){if(Number(s.distance)<=i.MAX_DISTANSE&&(s.bpoint||s.gpoint)&&t.inArray(s.name,n)===-1){r.push({name:s.name,title:s.name.length>10?s.name.substring(0,10)+"...":s.name,distance:i.distance(s.distance),bpoint:i.point(s.bpoint),gpoint:i.point(s.gpoint),unique:s.name})}});r.sort(function(e,t){return e.distance-t.distance});return r.slice(0,3)},traffic:function(e,n){var r=this,i=[],s=[],o=[],u=[];t.each(e,function(e,s){if((s.bpoint||s.gpoint)&&t.inArray(s.name,n)===-1){i.push({name:s.name,category:s.category,title:s.name.length>10?s.name.substring(0,10)+"...":s.name,bpoint:r.point(s.bpoint),gpoint:r.point(s.gpoint),distance:r.distance(s.distance),unique:s.name})}});i.sort(function(e,t){return e.distance-t.distance});t.each(i,function(e,t){if(t.category==0){s.push(t)}else if(t.category==1){o.push(t)}else if(t.category==2){u.push(t)}});i=s.concat(o).concat(u);return i.slice(0,3)},distance:function(e){return Math.round(e/100)/10||.1}};t.extend(a.prototype,{aroundParams:["traffic","jingdian","canguan","ent"],url_mapData:"//hotel.qunar.com/detail/detailMapData.jsp",loadingHTML:'<p class="m_loading"><img src="//source.qunarzz.com/site/images/new_main/m_loading.gif" alt="加载中"></p>',mapLoadingHTML:'<p class="m_loading"><img src="//source.qunarzz.com/site/images/new_main/m_loading.gif" alt="加载中"></p>',emptyHTML:'<p class="no_info">暂无周边地标信息</p>',panelHTML:'<div class="b_map_wrapper">'+'<h4 class="map_close_b"><a title="关闭" href="#" class="js_close"><span class="hide">关闭</span></a></h4>'+'<div class="filter_layer_bg">'+'<div class="filter_layer clr_after b_info_layer"><div class="e_info_layer"><div class="js-mapContainer e_map_con">'+'</div><div class="js-infoContainer e_info_text clr_after"></div></div></div></div>'+"</div>",iconCls:["icon_aircraft","icon_train","icon_auto"],trafficItemTemplate:Hogan.compile('<li><span class="km_ct">约{{distance}}公里</span><b title="{{name}}"><span class="{{iconCls}}"></span>{{title}}</b></li>'),landmarkItemTemplate:Hogan.compile('<li><span class="km_ct">约{{distance}}公里</span><b title="{{name}}">{{title}}</b></li>'),aroundHTML:['<div class="e_info_box">',"<h4><strong>机场与车站</strong>到酒店直线距离</h4>",'<ul class="js_trafficContainer"></ul>',"</div>",'<div class="e_info_box">',"<h4><strong>周边地标</strong>到酒店直线距离</h4>",'<ul class="js_landmarkContainer"></ul>',"</div>"].join(""),emptyTrafficHTML:'<li><span class="gray">暂无机场与车站地标信息</span></li>',emptyAroundHTML:'<li><span class="gray">暂无周边地标信息</span></li>',timeout_mapData:3e3,show:function(e,n,i){var s=this,o=s.panel;if(o===r){o=s.panel=t(s.panelHTML);s.mapPanel=o.find(".js-mapContainer");s.infoContainer=o.find(".js-infoContainer");s.box=s.boxTool(o.get(0),{hideOnClickOutside:true,vertical:"middle"});o.find(".js_close").on("click",function(e){e.preventDefault();s.hide()});s.escHandler=t.proxy(function(e){if(e.keyCode=="27"&&this.status==="show"){this.hide()}},s);s.bindEvent()}s.mapPanel.empty().html(this.mapLoadingHTML);s.infoContainer.empty().html(this.loadingHTML);s.contextSeq=e;s.currentHotel=n;s.currentPoi=i;s.status="show";s.box.show();s.paintAround();s.bindEscEvent(true)},hide:function(){var e=this;e.box.hide();e.status="hide";e.bindEscEvent(false)},paintMap:function(e,n){e=e||[];n=n||[];if(typeof o==="undefined"){o=function(e,t){this._center=e;this._hotelInfo=t};o.prototype.tipHTML=['<div class="hotel_tip">',"<h3></h3>",'<a class="close js_close" href="#"></a> <span class="jt js_arrow"></span>',"</div>"].join("");o.prototype.initialize=function(e){this._map=e;var n=t(this.tipHTML),r=n.get(0);var i=t("<a></a>");i.attr("title",this._hotelInfo.name);i.attr("link","#");i.text(this._hotelInfo.title);n.find("h3").append(i);n.find(".js_close").on("click",function(e){e.preventDefault();n.hide()});this._div=r;e.getPane(G_MAP_MARKER_PANE).appendChild(r);return r};o.prototype.draw=function(){var e=28,n=23,r=35,i=t(this._div);if(!this.currentWidth){this.currentWidth=i.find("h3 a").width()+50}i.css("width",this.currentWidth);var s=this._map.fromLatLngToContainerPixel(this._center),o=this._map.fromLatLngToDivPixel(this._center),u=this._map.getSize(),a=s.x+t(this._div).outerWidth()-e-u.width+20,f=t(this._div).find(".js_arrow");if(a>0&&s.x+r<u.width){this._div.style.left=o.x-e-a+"px";f.css("margin-left",n+a)}else{this._div.style.left=o.x-e+"px";f.css("margin-left",n)}this._div.style.top=o.y-65+"px"}}var r=this,u=r.currentHotel,a=r.currentPoi||[],f,l,c,h,p,d;c={baidu:u.bpoint,google:u.gpoint};h=t.map(a,function(e){return{baidu:e.bpoint,google:e.gpoint}});p=t.map(e,function(e){return{baidu:e.bpoint,google:e.gpoint}});d=t.map(n,function(e){return{baidu:e.bpoint,google:e.gpoint}});if(!u){setTimeout(function(){r.hide()},15);return}i.toExactPoint({isGCJ02:typeof isMainland!=="undefined"&&isMainland,callback:function(c){var h=a.length,p=e.length,d=n.length,v=["aircraft","train","auto"];if(!c||c.length===0){return}f=new GMap2(r.mapPanel.get(0),{minZoom:8});f.enableScrollWheelZoom();f.addControl(new GLargeMapControl,new GControlPosition(G_ANCHOR_TOP_LEFT));t.each(c,function(t,r){if(t===0){l=new GLatLngBounds(r,r);s(f,[24,37],[12,33],"//source.qunarzz.com/hotel/map/traffic/marker_nowlocal.png",[r,{title:u.name}]);var i=new o(r,u);f.addOverlay(i)}else if(t<=h){l.extend(r);s(f,[25,35],[13,32],"//source.qunarzz.com/hotel/map/sicon/black_"+String.fromCharCode(97+t-1)+".png",[r,{title:a[t-1].title}])}else if(t<=h+p){s(f,[24,37],[12,33],"//source.qunarzz.com/hotel/map/traffic/marker_"+v[e[t-h-1].category]+".png",[r,{title:e[t-h-1].title}])}else if(t<=h+p+d){s(f,[20,30],[10,26],"//source.qunarzz.com/hotel/map/green/marker_acount.png",[r,{title:n[t-h-p-1].title}])}});if(h>0){f.fitBounds(i.extendBound(l,5))}else{f.setCenter(c[0],u.scale)}},timeout:5e3,useGoogle:isMainlandIncludeHM?false:true,items:[].concat(c).concat(h).concat(p).concat(d)})},paintAround:function(){var e=this;e.getAround(function(n){var r=[],i=[],s=["jingdian","canguan","ent"],o,a,f=[];e.currentHotel=u.hotel(e.currentHotel);e.currentHotel&&f.push(e.currentHotel.unique);e.currentPoi=u.poi(e.currentPoi,f);t.each(e.currentPoi,function(e,t){f.push(t.unique)});if(!n){e.paintMap();return}if(n.data["traffic"]&&n.data["traffic"].length>0){r=u.traffic(n.data["traffic"],f)}t.each(r,function(e,t){f.push(t.unique)});while(s.length>0&&i.length<=3){o=s.shift();a=n.data[o];if(a&&a.length>0){i=i.concat(u.landmark(a,f));if(i.length>=3){break}}}i=i.slice(0,3);if(i.length===0&&r.length===0){e.paintMap();t(e).trigger("aroundEmpty")}else{e.paintMap(r,i);e.infoContainer.empty().html(e.aroundHTML);e.paintTraffic(r);e.paintLandmark(i);if(e.status==="show"){e.box.refresh()}}})},getAround:function(e){var n=this,r=this.aroundParams,i=this.contextSeq,s=this.url_mapData,o=s+"?seq="+encodeURIComponent(i)+"&type="+r.join(","),u=this.timeout_mapData;t.ajax({url:o,timeout:u,success:function(r){if(i!==n.contextSeq){return}if(!r||!r.ret){t(n).trigger("aroundError");return}e(r)},error:function(){if(i!==n.contextSeq){return}t(n).trigger("aroundError");e()}})},paintLandmark:function(e){var n=this,r=n.infoContainer,i=r.find(".js_landmarkContainer");if(e.length>0){t.each(e,function(e,t){i.append(n.landmarkItemTemplate.render(t))})}else{i.html(n.emptyAroundHTML)}},paintTraffic:function(e){var n=this,r=n.infoContainer,i=r.find(".js_trafficContainer");if(e.length>0){t.each(e,function(e,t){t.iconCls=n.iconCls[t.category];i.append(n.trafficItemTemplate.render(t))})}else{i.html(n.emptyTrafficHTML)}},bindEvent:function(){var e=this,n=t(e);n.bind("aroundError",function(){e.infoContainer.html(e.emptyHTML);e.box.refresh()});n.bind("aroundEmpty",function(){e.infoContainer.html(e.emptyHTML);e.box.refresh()});t(e.box.outerContent).bind("hide.rbox",function(){e.status="hide";e.bindEscEvent(false);t(e).trigger("listMapClose")})},bindEscEvent:function(e){var n=this;if(e){t(document).on("keyup",n.escHandler)}else{t(document).off("keyup",n.escHandler)}}});n.MapPanel=a;e.exports=a})(jQuery,window)},1001:function(e,t){function r(e,t){var n=[];for(var r=0,i=(e||[]).length;r<i;r++){n.push(e[r].value)}return n.join(t||",")}function i(e,t){var n=[];for(var r=0,i=(e||[]).length;r<i;r++){n.push(e[r].title+"|"+e[r].value)}return n.join(t||",")}function s(e,t,n){var s=$("#BigMapEnterBtn");if(window.MapType!=="amap"){$("#js-bigmap-enter").show()}s.bind("click",function(){var s=[],o="";var u=$("#MapFHotelCityurl");var a=e.getValues();a.grade.length>0&&s.push("grade="+r(a.grade,";"));a.brand.length>0&&s.push("brand="+i(a.brand,";"));a.price.length>0&&s.push("price="+r(a.price,";"));a.status.length>0&&s.push("other="+r(a.status));a.equip.length>0&&s.push("equip="+r(a.equip));s.push("cityurl="+u.val());s.push("query="+t.q.getValue());s.push("fromDate="+t.fromDate.getValue());s.push("toDate="+t.toDate.getValue());if("undefined"!==typeof n&&n.listtrace&&n.listtrace.getQHFP){s.push("QHFP="+n.listtrace.getQHFP())}o="/render/map?"+s.join("&");window.GARunerById&&window.GARunerById(window._ba_utm_s,"map_portal2");window.open(o,"大地图找酒店"+(new Date).valueOf(),"left=0,top=0,width="+(screen.availWidth-10)+",height="+(screen.availHeight-50)+",toolbar=yes,location=yes,directories=yes,menubar=yes,scrollbars=yes,resizable=yes,status=yes")})}var n=typeof n==="function"&&!n.amd?n:false;t.init=s},1002:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;n(53);n(1003);e.exports={FocusPanel:hotel.list.FocusPanel}},1003:function(e,t){var n=typeof n==="function"&&!n.amd?n:false;(function(){QClass.define("hotel.list.FocusPanel",{extend:hotel.list.ListPanel,initialize:function(e,t){var n=this;n.config=e||{};n.context=t||{};n.isList=false;n.isMainlandIncludeHM=t.isMainlandIncludeHM;n.$wrapContainer=n.config.wrapContainer;n.$container=n.config.listContainer;n.focusHotelSeqs=[];n.focusHotelSeqsMap={};n.focusHotelCount=0;n.maxcarenum=30;n.refresh=true;n.focusCityArray=[];n.focusCityMap={};n.maxcitys=15;n.AllSeqCount=0;n.AllSeqMap={};n.maxRequest=10;n.isIE67=t.isIE6||t.isIE7;this.$reloadBtn=[];this.$noresult=[];this.titleImage=new hotel.list.TitleImage(this.config.wrapContainer);n.hide();n.getSeqs();n.renderNoResult();n.bindEvent();n._bind()},getSeqs:function(){var e=this;QunarStorage.ready(function(t){if(t){try{var n,r;n=t.getItem("focusHotelSeqs"+cityurl);if(n){e.focusHotelSeqs=n.split(",")}else{e.focusHotelSeqs=[]}$.each(e.focusHotelSeqs,function(t,n){e.focusHotelSeqsMap[n]=1});if(e.isIE67){r=t.getItem("focusCity");if(r){e.focusCityArray=r.split(",")}else{e.focusCityArray=[]}$.each(e.focusCityArray,function(r,i){e.focusCityMap[i]=1;n=t.getItem("focusHotelSeqs"+i);if(n){e.AllSeqMap[i]=n.split(",");e.AllSeqCount+=e.AllSeqMap[i].length}else{e.AllSeqMap[i]=[]}})}}catch(i){e.focusHotelSeqs=[];e.focusHotelSeqsMap={}}e.focusHotelCount=e.focusHotelSeqs.length;$(e).trigger("updateTabStatus",e.focusHotelCount)}})},setSeqs:function(){var e=this;QunarStorage.ready(function(t){if(t){try{var n=[];t.setItem("focusHotelSeqs"+cityurl,e.focusHotelSeqs.join(","));if(e.isIE67){if(e.focusHotelCount>0){if(!e.focusCityMap[window.cityurl]){e.focusCityArray.push(window.cityurl);e.focusCityMap[window.cityurl]=1}else if(e.focusCityArray[e.focusCityArray.length-1]!==window.cityurl){$.each(e.focusCityArray,function(e,t){if(t!==window.cityurl){n.push(t)}});e.focusCityArray=n;e.focusCityArray.push(window.cityurl)}}else{delete e.focusCityMap[window.cityurl];$.each(e.focusCityArray,function(e,t){if(t!==window.cityurl){n.push(t)}});e.focusCityArray=n}t.setItem("focusCity",e.focusCityArray.join(","))}}catch(r){}}})},getRequestUrl:function(){var e="attrs=0FA456A3,L0F4L3C1,ZO1FcGJH,J6TkcChI,HCEm2cI6,08F7hM4i,8dksuR_,YRHLp-jc,pl6clDL0,HFn32cI6,vf_x4Gjt,2XkzJryU,vNfnYBK6,TDoolO-H,pk4QaDyF,x0oSHP6u,z4VVfNJo,5_VrVbqO,VAuXapLv,U1ur4rJN,px3FxFdF,xaSZV4wU,ZZY89LZZ,ZYCXZYHIRU,sYWEvpo,er8Eevr,HGYGeXFY,ownT_WG6,0Ie44fNU,yYdMIL83,MMObDrW4,dDjWmcqr,Y0LTFGFh,6X7_yoo3,8F2RFLSO,U3rHP23d,cGlja1Vw,7b4bfd15,yamiYIN";return this.context.utils.getPriceURL(this.focusHotelSeqs,e)},sortHotel:function(e){var t=[];var n,r;for(n=0;n<this.focusHotelSeqs.length;n++){for(r=0;r<e.length;r++){if(e[r].id&&this.focusHotelSeqs[n]==e[r].id){t.push(e[r]);break}}}return t},success:function(e){var t=this;t.refresh=false;$(t).trigger("focusInfoReady",[e,t.$wrapContainer])},error:function(){$(this).trigger("updateTabStatus",0);this.$wrapContainer.hide()},_bind:function(){var e=this;e.$container.delegate(".js_listfocus","click",function(t){var n=$(this),r=n.attr("data-id");window.GARuner("cancelcare2");e.removeHotelSeq(r);$(e).trigger("reload");$(e).trigger("removeFocusState",r);if(e.focusHotelCount==0){$(e).trigger("changeTab")}});this.$reloadBtn.bind("click",function(){e.hideNoResult();$(e).trigger("reload")})},show:function(){this.$wrapContainer.show()},hide:function(){this.$wrapContainer.hide()},addHotelSeq:function(e){var t=this;var n;if(this.focusHotelCount<this.maxcarenum){t.AllSeqCount++}if(t.isIE67&&t.AllSeqCount>t.maxcitys*t.maxcarenum){if(t.focusCityArray.length>1&&window.cityurl===t.focusCityArray[0]){t.focusCityArray.shift();t.focusCityArray.push(window.cityurl)}n=t.focusCityArray.shift();t.AllSeqCount=t.AllSeqCount-t.AllSeqMap[n].length;delete t.focusCityMap[n];t.AllSeqMap[n]=[];QunarStorage.ready(function(e){if(e){try{$.each(t.AllSeqMap,function(t,n){e.setItem("focusHotelSeqs"+t,n.join(","))});e.setItem("focusCity",t.focusCityArray.join(","))}catch(n){}}});delete t.AllSeqMap[n]}t.focusHotelCount++;t.focusHotelSeqs.unshift(e);t.focusHotelSeqsMap[e]=1;if(t.focusHotelSeqs.length>t.maxcarenum){t.focusHotelCount--;$(t).trigger("removeFocusState",t.focusHotelSeqs[t.focusHotelSeqs.length-1]);delete t.focusHotelSeqsMap[t.focusHotelSeqs[t.focusHotelSeqs.length-1]];delete t.focusHotelSeqs[t.focusHotelSeqs.length-1];t.focusHotelSeqs.length--}$(t).trigger("updateTabStatus",t.focusHotelCount);t.setSeqs()},removeHotelSeq:function(e){var t=this;var n=[];t.AllSeqCount--;$.each(t.focusHotelSeqs,function(t,r){if(e!==r){n.push(r)}});t.focusHotelSeqs=n;t.focusHotelCount=t.focusHotelSeqs.length;delete t.focusHotelSeqsMap[e];$(t).trigger("updateTabStatus",t.focusHotelCount);t.setSeqs()},renderNoResult:function(){var e='<div class="b_noResult404" id="noresultFocus" style="display: none;"><p class="e_noResultImg"><img alt="404" src="//source.qunarzz.com/hotel/listnew/noResultImgs.png"></p><div class="e_noResultContent"><h4>很抱歉，关注酒店列表加载错误</h4><p class="noresult_focus"><em class="noresult_reload js_reloadfocus">点击这里</em>重新加载</div></div>';this.$container.append(e);this.$reloadBtn=this.$container.find(".js_reloadfocus");this.$noresult=this.$container.find("#noresultFocus")},showNoResult:function(){this.$noresult.show()},hideNoResult:function(){this.$noresult.hide()},setRrefresh:function(e){this.refresh=e},render:function(e){var t=this;this.resultInfoFormat=this.forMatHotels(e,null,6);this.config.listContainer.html(this._renderHotels(this.resultInfoFormat));this.hotelInfosCache=this.hotelInfosCache.concat(this.resultInfoFormat.hotelInfos);$(t).trigger("afterRender",t.resultInfoFormat)}})})()},1004:function(e,t,n){var r=typeof r==="function"&&!r.amd?r:false;var i=n(1005);e.exports={tab:i}},1005:function(e,t){function r(){var e=$(".js_hotelnum"),t=$(".js_hotelfocus"),n=$(".js_easypager_search");var r={},i=0,s=0;t.bind("click",function(){var t=$(this).hasClass("active");if(t)return;if(!$(this).hasClass("no-focus-hotel")){$(this).addClass("active");e.removeClass("active");n.hide();$(r).trigger("tabClick",[$(this),true]);window.GARuner("carehoteltab")}});e.bind("click.hotelnum",function(){var e=$(this).hasClass("active");if(e)return;$(this).addClass("active");t.removeClass("active");$(r).trigger("tabClick",[$(this),false]);window.GARuner("searchtab")});return r={isFocusPanel:false,setHotelFocusNum:function(e){if(e>=0){i=e}},setHotelNum:function(e){if(e>0){s=e}},updateHotelFocus:function(){if(i>0){t.html('<div class="focus-hotel-paddinggap"><span class="num">'+i+'</span><span class="txt">家我关注的酒店</span></div>');t.removeClass("no-focus-hotel")}else{t.html('<div class="focus-hotel-paddinggap"><span class="txt">暂无我关注的酒店</span></div>');t.addClass("no-focus-hotel")}},changeToHotel:function(){e.trigger("click.hotelnum")}}}var n=typeof n==="function"&&!n.amd?n:false;e.exports=r()}})